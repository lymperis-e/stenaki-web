function RC(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const u in s)if(u!=="default"&&!(u in e)){const p=Object.getOwnPropertyDescriptor(s,u);p&&Object.defineProperty(e,u,p.get?p:{enumerable:!0,get:()=>s[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function e2(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function s(){if(this instanceof s){var u=[null];u.push.apply(u,arguments);var p=Function.bind.apply(t,u);return new p}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var u=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(i,s,u.get?u:{enumerable:!0,get:function(){return e[s]}})}),i}var xh={},OC={get exports(){return xh},set exports(e){xh=e}},um={},Ie={},BC={get exports(){return Ie},set exports(e){Ie=e}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=Symbol.for("react.element"),NC=Symbol.for("react.portal"),FC=Symbol.for("react.fragment"),$C=Symbol.for("react.strict_mode"),UC=Symbol.for("react.profiler"),jC=Symbol.for("react.provider"),VC=Symbol.for("react.context"),GC=Symbol.for("react.forward_ref"),qC=Symbol.for("react.suspense"),WC=Symbol.for("react.memo"),ZC=Symbol.for("react.lazy"),o1=Symbol.iterator;function HC(e){return e===null||typeof e!="object"?null:(e=o1&&e[o1]||e["@@iterator"],typeof e=="function"?e:null)}var t2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n2=Object.assign,r2={};function Nc(e,t,i){this.props=e,this.context=t,this.refs=r2,this.updater=i||t2}Nc.prototype.isReactComponent={};Nc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i2(){}i2.prototype=Nc.prototype;function g_(e,t,i){this.props=e,this.context=t,this.refs=r2,this.updater=i||t2}var y_=g_.prototype=new i2;y_.constructor=g_;n2(y_,Nc.prototype);y_.isPureReactComponent=!0;var s1=Array.isArray,a2=Object.prototype.hasOwnProperty,v_={current:null},o2={key:!0,ref:!0,__self:!0,__source:!0};function s2(e,t,i){var s,u={},p=null,x=null;if(t!=null)for(s in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(p=""+t.key),t)a2.call(t,s)&&!o2.hasOwnProperty(s)&&(u[s]=t[s]);var c=arguments.length-2;if(c===1)u.children=i;else if(1<c){for(var E=Array(c),C=0;C<c;C++)E[C]=arguments[C+2];u.children=E}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)u[s]===void 0&&(u[s]=c[s]);return{$$typeof:Yh,type:e,key:p,ref:x,props:u,_owner:v_.current}}function XC(e,t){return{$$typeof:Yh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function __(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yh}function YC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var l1=/\/+/g;function Kg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?YC(""+e.key):t.toString(36)}function op(e,t,i,s,u){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(p){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case Yh:case NC:x=!0}}if(x)return x=e,u=u(x),e=s===""?"."+Kg(x,0):s,s1(u)?(i="",e!=null&&(i=e.replace(l1,"$&/")+"/"),op(u,t,i,"",function(C){return C})):u!=null&&(__(u)&&(u=XC(u,i+(!u.key||x&&x.key===u.key?"":(""+u.key).replace(l1,"$&/")+"/")+e)),t.push(u)),1;if(x=0,s=s===""?".":s+":",s1(e))for(var c=0;c<e.length;c++){p=e[c];var E=s+Kg(p,c);x+=op(p,t,i,E,u)}else if(E=HC(e),typeof E=="function")for(e=E.call(e),c=0;!(p=e.next()).done;)p=p.value,E=s+Kg(p,c++),x+=op(p,t,i,E,u);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return x}function Ef(e,t,i){if(e==null)return e;var s=[],u=0;return op(e,s,"","",function(p){return t.call(i,p,u++)}),s}function KC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ni={current:null},sp={transition:null},JC={ReactCurrentDispatcher:ni,ReactCurrentBatchConfig:sp,ReactCurrentOwner:v_};Zt.Children={map:Ef,forEach:function(e,t,i){Ef(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Ef(e,function(){t++}),t},toArray:function(e){return Ef(e,function(t){return t})||[]},only:function(e){if(!__(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Zt.Component=Nc;Zt.Fragment=FC;Zt.Profiler=UC;Zt.PureComponent=g_;Zt.StrictMode=$C;Zt.Suspense=qC;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JC;Zt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=n2({},e.props),u=e.key,p=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,x=v_.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(E in t)a2.call(t,E)&&!o2.hasOwnProperty(E)&&(s[E]=t[E]===void 0&&c!==void 0?c[E]:t[E])}var E=arguments.length-2;if(E===1)s.children=i;else if(1<E){c=Array(E);for(var C=0;C<E;C++)c[C]=arguments[C+2];s.children=c}return{$$typeof:Yh,type:e.type,key:u,ref:p,props:s,_owner:x}};Zt.createContext=function(e){return e={$$typeof:VC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jC,_context:e},e.Consumer=e};Zt.createElement=s2;Zt.createFactory=function(e){var t=s2.bind(null,e);return t.type=e,t};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(e){return{$$typeof:GC,render:e}};Zt.isValidElement=__;Zt.lazy=function(e){return{$$typeof:ZC,_payload:{_status:-1,_result:e},_init:KC}};Zt.memo=function(e,t){return{$$typeof:WC,type:e,compare:t===void 0?null:t}};Zt.startTransition=function(e){var t=sp.transition;sp.transition={};try{e()}finally{sp.transition=t}};Zt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Zt.useCallback=function(e,t){return ni.current.useCallback(e,t)};Zt.useContext=function(e){return ni.current.useContext(e)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(e){return ni.current.useDeferredValue(e)};Zt.useEffect=function(e,t){return ni.current.useEffect(e,t)};Zt.useId=function(){return ni.current.useId()};Zt.useImperativeHandle=function(e,t,i){return ni.current.useImperativeHandle(e,t,i)};Zt.useInsertionEffect=function(e,t){return ni.current.useInsertionEffect(e,t)};Zt.useLayoutEffect=function(e,t){return ni.current.useLayoutEffect(e,t)};Zt.useMemo=function(e,t){return ni.current.useMemo(e,t)};Zt.useReducer=function(e,t,i){return ni.current.useReducer(e,t,i)};Zt.useRef=function(e){return ni.current.useRef(e)};Zt.useState=function(e){return ni.current.useState(e)};Zt.useSyncExternalStore=function(e,t,i){return ni.current.useSyncExternalStore(e,t,i)};Zt.useTransition=function(){return ni.current.useTransition()};Zt.version="18.2.0";(function(e){e.exports=Zt})(BC);const we=Qw(Ie),Xy=RC({__proto__:null,default:we},[Ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC=Ie,eP=Symbol.for("react.element"),tP=Symbol.for("react.fragment"),nP=Object.prototype.hasOwnProperty,rP=QC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iP={key:!0,ref:!0,__self:!0,__source:!0};function l2(e,t,i){var s,u={},p=null,x=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(x=t.ref);for(s in t)nP.call(t,s)&&!iP.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:eP,type:e,key:p,ref:x,props:u,_owner:rP.current}}um.Fragment=tP;um.jsx=l2;um.jsxs=l2;(function(e){e.exports=um})(OC);const bh=xh.Fragment,Oe=xh.jsx,Ci=xh.jsxs;var c1={},bp={},aP={get exports(){return bp},set exports(e){bp=e}},Ai={},Yy={},oP={get exports(){return Yy},set exports(e){Yy=e}},c2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Re,at){var ut=Re.length;Re.push(at);e:for(;0<ut;){var Yt=ut-1>>>1,Jt=Re[Yt];if(0<u(Jt,at))Re[Yt]=at,Re[ut]=Jt,ut=Yt;else break e}}function i(Re){return Re.length===0?null:Re[0]}function s(Re){if(Re.length===0)return null;var at=Re[0],ut=Re.pop();if(ut!==at){Re[0]=ut;e:for(var Yt=0,Jt=Re.length,_r=Jt>>>1;Yt<_r;){var Hn=2*(Yt+1)-1,rr=Re[Hn],Vn=Hn+1,hr=Re[Vn];if(0>u(rr,ut))Vn<Jt&&0>u(hr,rr)?(Re[Yt]=hr,Re[Vn]=ut,Yt=Vn):(Re[Yt]=rr,Re[Hn]=ut,Yt=Hn);else if(Vn<Jt&&0>u(hr,ut))Re[Yt]=hr,Re[Vn]=ut,Yt=Vn;else break e}}return at}function u(Re,at){var ut=Re.sortIndex-at.sortIndex;return ut!==0?ut:Re.id-at.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var x=Date,c=x.now();e.unstable_now=function(){return x.now()-c}}var E=[],C=[],L=1,O=null,R=3,Q=!1,ie=!1,ae=!1,ye=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(Re){for(var at=i(C);at!==null;){if(at.callback===null)s(C);else if(at.startTime<=Re)s(C),at.sortIndex=at.expirationTime,t(E,at);else break;at=i(C)}}function ce(Re){if(ae=!1,H(Re),!ie)if(i(E)!==null)ie=!0,$e(xe);else{var at=i(C);at!==null&&vt(ce,at.startTime-Re)}}function xe(Re,at){ie=!1,ae&&(ae=!1,Y(De),De=-1),Q=!0;var ut=R;try{for(H(at),O=i(E);O!==null&&(!(O.expirationTime>at)||Re&&!St());){var Yt=O.callback;if(typeof Yt=="function"){O.callback=null,R=O.priorityLevel;var Jt=Yt(O.expirationTime<=at);at=e.unstable_now(),typeof Jt=="function"?O.callback=Jt:O===i(E)&&s(E),H(at)}else s(E);O=i(E)}if(O!==null)var _r=!0;else{var Hn=i(C);Hn!==null&&vt(ce,Hn.startTime-at),_r=!1}return _r}finally{O=null,R=ut,Q=!1}}var Ee=!1,ze=null,De=-1,ot=5,Fe=-1;function St(){return!(e.unstable_now()-Fe<ot)}function Mt(){if(ze!==null){var Re=e.unstable_now();Fe=Re;var at=!0;try{at=ze(!0,Re)}finally{at?Ct():(Ee=!1,ze=null)}}else Ee=!1}var Ct;if(typeof V=="function")Ct=function(){V(Mt)};else if(typeof MessageChannel<"u"){var Wt=new MessageChannel,Tt=Wt.port2;Wt.port1.onmessage=Mt,Ct=function(){Tt.postMessage(null)}}else Ct=function(){ye(Mt,0)};function $e(Re){ze=Re,Ee||(Ee=!0,Ct())}function vt(Re,at){De=ye(function(){Re(e.unstable_now())},at)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Re){Re.callback=null},e.unstable_continueExecution=function(){ie||Q||(ie=!0,$e(xe))},e.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<Re?Math.floor(1e3/Re):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return i(E)},e.unstable_next=function(Re){switch(R){case 1:case 2:case 3:var at=3;break;default:at=R}var ut=R;R=at;try{return Re()}finally{R=ut}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Re,at){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var ut=R;R=Re;try{return at()}finally{R=ut}},e.unstable_scheduleCallback=function(Re,at,ut){var Yt=e.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Yt+ut:Yt):ut=Yt,Re){case 1:var Jt=-1;break;case 2:Jt=250;break;case 5:Jt=1073741823;break;case 4:Jt=1e4;break;default:Jt=5e3}return Jt=ut+Jt,Re={id:L++,callback:at,priorityLevel:Re,startTime:ut,expirationTime:Jt,sortIndex:-1},ut>Yt?(Re.sortIndex=ut,t(C,Re),i(E)===null&&Re===i(C)&&(ae?(Y(De),De=-1):ae=!0,vt(ce,ut-Yt))):(Re.sortIndex=Jt,t(E,Re),ie||Q||(ie=!0,$e(xe))),Re},e.unstable_shouldYield=St,e.unstable_wrapCallback=function(Re){var at=R;return function(){var ut=R;R=at;try{return Re.apply(this,arguments)}finally{R=ut}}}})(c2);(function(e){e.exports=c2})(oP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2=Ie,Ii=Yy;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h2=new Set,wh={};function Sl(e,t){Ac(e,t),Ac(e+"Capture",t)}function Ac(e,t){for(wh[e]=t,e=0;e<t.length;e++)h2.add(t[e])}var fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ky=Object.prototype.hasOwnProperty,sP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u1={},h1={};function lP(e){return Ky.call(h1,e)?!0:Ky.call(u1,e)?!1:sP.test(e)?h1[e]=!0:(u1[e]=!0,!1)}function cP(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uP(e,t,i,s){if(t===null||typeof t>"u"||cP(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ri(e,t,i,s,u,p,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=x}var Ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ir[e]=new ri(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ir[t]=new ri(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ir[e]=new ri(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ir[e]=new ri(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ir[e]=new ri(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ir[e]=new ri(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ir[e]=new ri(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ir[e]=new ri(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ir[e]=new ri(e,5,!1,e.toLowerCase(),null,!1,!1)});var x_=/[\-:]([a-z])/g;function b_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x_,b_);Ir[t]=new ri(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x_,b_);Ir[t]=new ri(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x_,b_);Ir[t]=new ri(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ir[e]=new ri(e,1,!1,e.toLowerCase(),null,!1,!1)});Ir.xlinkHref=new ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ir[e]=new ri(e,1,!1,e.toLowerCase(),null,!0,!0)});function w_(e,t,i,s){var u=Ir.hasOwnProperty(t)?Ir[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uP(t,i,u,s)&&(i=null),s||u===null?lP(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,s=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var xo=u2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sf=Symbol.for("react.element"),sc=Symbol.for("react.portal"),lc=Symbol.for("react.fragment"),E_=Symbol.for("react.strict_mode"),Jy=Symbol.for("react.profiler"),d2=Symbol.for("react.provider"),f2=Symbol.for("react.context"),S_=Symbol.for("react.forward_ref"),Qy=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),T_=Symbol.for("react.memo"),Jo=Symbol.for("react.lazy"),p2=Symbol.for("react.offscreen"),d1=Symbol.iterator;function Gu(e){return e===null||typeof e!="object"?null:(e=d1&&e[d1]||e["@@iterator"],typeof e=="function"?e:null)}var Rn=Object.assign,Jg;function rh(e){if(Jg===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Jg=t&&t[1]||""}return`
`+Jg+e}var Qg=!1;function ey(e,t){if(!e||Qg)return"";Qg=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var s=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){s=C}e.call(t.prototype)}else{try{throw Error()}catch(C){s=C}e()}}catch(C){if(C&&s&&typeof C.stack=="string"){for(var u=C.stack.split(`
`),p=s.stack.split(`
`),x=u.length-1,c=p.length-1;1<=x&&0<=c&&u[x]!==p[c];)c--;for(;1<=x&&0<=c;x--,c--)if(u[x]!==p[c]){if(x!==1||c!==1)do if(x--,c--,0>c||u[x]!==p[c]){var E=`
`+u[x].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=x&&0<=c);break}}}finally{Qg=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?rh(e):""}function hP(e){switch(e.tag){case 5:return rh(e.type);case 16:return rh("Lazy");case 13:return rh("Suspense");case 19:return rh("SuspenseList");case 0:case 2:case 15:return e=ey(e.type,!1),e;case 11:return e=ey(e.type.render,!1),e;case 1:return e=ey(e.type,!0),e;default:return""}}function tv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lc:return"Fragment";case sc:return"Portal";case Jy:return"Profiler";case E_:return"StrictMode";case Qy:return"Suspense";case ev:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case f2:return(e.displayName||"Context")+".Consumer";case d2:return(e._context.displayName||"Context")+".Provider";case S_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T_:return t=e.displayName||null,t!==null?t:tv(e.type)||"Memo";case Jo:t=e._payload,e=e._init;try{return tv(e(t))}catch{}}return null}function dP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tv(t);case 8:return t===E_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ms(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function m2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fP(e){var t=m2(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(x){s=""+x,p.call(this,x)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(x){s=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tf(e){e._valueTracker||(e._valueTracker=fP(e))}function g2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=m2(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function wp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nv(e,t){var i=t.checked;return Rn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function f1(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=ms(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function y2(e,t){t=t.checked,t!=null&&w_(e,"checked",t,!1)}function rv(e,t){y2(e,t);var i=ms(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?iv(e,t.type,i):t.hasOwnProperty("defaultValue")&&iv(e,t.type,ms(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function p1(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function iv(e,t,i){(t!=="number"||wp(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var ih=Array.isArray;function Ec(e,t,i,s){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&s&&(e[i].defaultSelected=!0)}else{for(i=""+ms(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function av(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Rn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function m1(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Ue(92));if(ih(i)){if(1<i.length)throw Error(Ue(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:ms(i)}}function v2(e,t){var i=ms(t.value),s=ms(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function g1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ov(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kf,x2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kf=kf||document.createElement("div"),kf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Eh(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var lh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pP=["Webkit","ms","Moz","O"];Object.keys(lh).forEach(function(e){pP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),lh[t]=lh[e]})});function b2(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||lh.hasOwnProperty(e)&&lh[e]?(""+t).trim():t+"px"}function w2(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,u=b2(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,u):e[i]=u}}var mP=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sv(e,t){if(t){if(mP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function lv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cv=null;function k_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uv=null,Sc=null,Tc=null;function y1(e){if(e=Qh(e)){if(typeof uv!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=mm(t),uv(e.stateNode,e.type,t))}}function E2(e){Sc?Tc?Tc.push(e):Tc=[e]:Sc=e}function S2(){if(Sc){var e=Sc,t=Tc;if(Tc=Sc=null,y1(e),t)for(e=0;e<t.length;e++)y1(t[e])}}function T2(e,t){return e(t)}function k2(){}var ty=!1;function C2(e,t,i){if(ty)return e(t,i);ty=!0;try{return T2(e,t,i)}finally{ty=!1,(Sc!==null||Tc!==null)&&(k2(),S2())}}function Sh(e,t){var i=e.stateNode;if(i===null)return null;var s=mm(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Ue(231,t,typeof i));return i}var hv=!1;if(fo)try{var qu={};Object.defineProperty(qu,"passive",{get:function(){hv=!0}}),window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{hv=!1}function gP(e,t,i,s,u,p,x,c,E){var C=Array.prototype.slice.call(arguments,3);try{t.apply(i,C)}catch(L){this.onError(L)}}var ch=!1,Ep=null,Sp=!1,dv=null,yP={onError:function(e){ch=!0,Ep=e}};function vP(e,t,i,s,u,p,x,c,E){ch=!1,Ep=null,gP.apply(yP,arguments)}function _P(e,t,i,s,u,p,x,c,E){if(vP.apply(this,arguments),ch){if(ch){var C=Ep;ch=!1,Ep=null}else throw Error(Ue(198));Sp||(Sp=!0,dv=C)}}function Tl(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function P2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v1(e){if(Tl(e)!==e)throw Error(Ue(188))}function xP(e){var t=e.alternate;if(!t){if(t=Tl(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var i=e,s=t;;){var u=i.return;if(u===null)break;var p=u.alternate;if(p===null){if(s=u.return,s!==null){i=s;continue}break}if(u.child===p.child){for(p=u.child;p;){if(p===i)return v1(u),e;if(p===s)return v1(u),t;p=p.sibling}throw Error(Ue(188))}if(i.return!==s.return)i=u,s=p;else{for(var x=!1,c=u.child;c;){if(c===i){x=!0,i=u,s=p;break}if(c===s){x=!0,s=u,i=p;break}c=c.sibling}if(!x){for(c=p.child;c;){if(c===i){x=!0,i=p,s=u;break}if(c===s){x=!0,s=p,i=u;break}c=c.sibling}if(!x)throw Error(Ue(189))}}if(i.alternate!==s)throw Error(Ue(190))}if(i.tag!==3)throw Error(Ue(188));return i.stateNode.current===i?e:t}function I2(e){return e=xP(e),e!==null?A2(e):null}function A2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=A2(e);if(t!==null)return t;e=e.sibling}return null}var M2=Ii.unstable_scheduleCallback,_1=Ii.unstable_cancelCallback,bP=Ii.unstable_shouldYield,wP=Ii.unstable_requestPaint,Zn=Ii.unstable_now,EP=Ii.unstable_getCurrentPriorityLevel,C_=Ii.unstable_ImmediatePriority,z2=Ii.unstable_UserBlockingPriority,Tp=Ii.unstable_NormalPriority,SP=Ii.unstable_LowPriority,D2=Ii.unstable_IdlePriority,hm=null,Na=null;function TP(e){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(hm,e,void 0,(e.current.flags&128)===128)}catch{}}var pa=Math.clz32?Math.clz32:PP,kP=Math.log,CP=Math.LN2;function PP(e){return e>>>=0,e===0?32:31-(kP(e)/CP|0)|0}var Cf=64,Pf=4194304;function ah(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function kp(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,u=e.suspendedLanes,p=e.pingedLanes,x=i&268435455;if(x!==0){var c=x&~u;c!==0?s=ah(c):(p&=x,p!==0&&(s=ah(p)))}else x=i&~u,x!==0?s=ah(x):p!==0&&(s=ah(p));if(s===0)return 0;if(t!==0&&t!==s&&!(t&u)&&(u=s&-s,p=t&-t,u>=p||u===16&&(p&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-pa(t),u=1<<i,s|=e[i],t&=~u;return s}function IP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AP(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,p=e.pendingLanes;0<p;){var x=31-pa(p),c=1<<x,E=u[x];E===-1?(!(c&i)||c&s)&&(u[x]=IP(c,t)):E<=t&&(e.expiredLanes|=c),p&=~c}}function fv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L2(){var e=Cf;return Cf<<=1,!(Cf&4194240)&&(Cf=64),e}function ny(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Kh(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pa(t),e[t]=i}function MP(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-pa(i),p=1<<u;t[u]=0,s[u]=-1,e[u]=-1,i&=~p}}function P_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-pa(i),u=1<<s;u&t|e[s]&t&&(e[s]|=t),i&=~u}}var un=0;function R2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var O2,I_,B2,N2,F2,pv=!1,If=[],os=null,ss=null,ls=null,Th=new Map,kh=new Map,es=[],zP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x1(e,t){switch(e){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Th.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kh.delete(t.pointerId)}}function Wu(e,t,i,s,u,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:p,targetContainers:[u]},t!==null&&(t=Qh(t),t!==null&&I_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function DP(e,t,i,s,u){switch(t){case"focusin":return os=Wu(os,e,t,i,s,u),!0;case"dragenter":return ss=Wu(ss,e,t,i,s,u),!0;case"mouseover":return ls=Wu(ls,e,t,i,s,u),!0;case"pointerover":var p=u.pointerId;return Th.set(p,Wu(Th.get(p)||null,e,t,i,s,u)),!0;case"gotpointercapture":return p=u.pointerId,kh.set(p,Wu(kh.get(p)||null,e,t,i,s,u)),!0}return!1}function $2(e){var t=ll(e.target);if(t!==null){var i=Tl(t);if(i!==null){if(t=i.tag,t===13){if(t=P2(i),t!==null){e.blockedOn=t,F2(e.priority,function(){B2(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=mv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);cv=s,i.target.dispatchEvent(s),cv=null}else return t=Qh(i),t!==null&&I_(t),e.blockedOn=i,!1;t.shift()}return!0}function b1(e,t,i){lp(e)&&i.delete(t)}function LP(){pv=!1,os!==null&&lp(os)&&(os=null),ss!==null&&lp(ss)&&(ss=null),ls!==null&&lp(ls)&&(ls=null),Th.forEach(b1),kh.forEach(b1)}function Zu(e,t){e.blockedOn===t&&(e.blockedOn=null,pv||(pv=!0,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,LP)))}function Ch(e){function t(u){return Zu(u,e)}if(0<If.length){Zu(If[0],e);for(var i=1;i<If.length;i++){var s=If[i];s.blockedOn===e&&(s.blockedOn=null)}}for(os!==null&&Zu(os,e),ss!==null&&Zu(ss,e),ls!==null&&Zu(ls,e),Th.forEach(t),kh.forEach(t),i=0;i<es.length;i++)s=es[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<es.length&&(i=es[0],i.blockedOn===null);)$2(i),i.blockedOn===null&&es.shift()}var kc=xo.ReactCurrentBatchConfig,Cp=!0;function RP(e,t,i,s){var u=un,p=kc.transition;kc.transition=null;try{un=1,A_(e,t,i,s)}finally{un=u,kc.transition=p}}function OP(e,t,i,s){var u=un,p=kc.transition;kc.transition=null;try{un=4,A_(e,t,i,s)}finally{un=u,kc.transition=p}}function A_(e,t,i,s){if(Cp){var u=mv(e,t,i,s);if(u===null)dy(e,t,s,Pp,i),x1(e,s);else if(DP(u,e,t,i,s))s.stopPropagation();else if(x1(e,s),t&4&&-1<zP.indexOf(e)){for(;u!==null;){var p=Qh(u);if(p!==null&&O2(p),p=mv(e,t,i,s),p===null&&dy(e,t,s,Pp,i),p===u)break;u=p}u!==null&&s.stopPropagation()}else dy(e,t,s,null,i)}}var Pp=null;function mv(e,t,i,s){if(Pp=null,e=k_(s),e=ll(e),e!==null)if(t=Tl(e),t===null)e=null;else if(i=t.tag,i===13){if(e=P2(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pp=e,null}function U2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EP()){case C_:return 1;case z2:return 4;case Tp:case SP:return 16;case D2:return 536870912;default:return 16}default:return 16}}var ns=null,M_=null,cp=null;function j2(){if(cp)return cp;var e,t=M_,i=t.length,s,u="value"in ns?ns.value:ns.textContent,p=u.length;for(e=0;e<i&&t[e]===u[e];e++);var x=i-e;for(s=1;s<=x&&t[i-s]===u[p-s];s++);return cp=u.slice(e,1<s?1-s:void 0)}function up(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Af(){return!0}function w1(){return!1}function Mi(e){function t(i,s,u,p,x){this._reactName=i,this._targetInst=u,this.type=s,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(i=e[c],this[c]=i?i(p):p[c]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Af:w1,this.isPropagationStopped=w1,this}return Rn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Af)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Af)},persist:function(){},isPersistent:Af}),t}var Fc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z_=Mi(Fc),Jh=Rn({},Fc,{view:0,detail:0}),BP=Mi(Jh),ry,iy,Hu,dm=Rn({},Jh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hu&&(Hu&&e.type==="mousemove"?(ry=e.screenX-Hu.screenX,iy=e.screenY-Hu.screenY):iy=ry=0,Hu=e),ry)},movementY:function(e){return"movementY"in e?e.movementY:iy}}),E1=Mi(dm),NP=Rn({},dm,{dataTransfer:0}),FP=Mi(NP),$P=Rn({},Jh,{relatedTarget:0}),ay=Mi($P),UP=Rn({},Fc,{animationName:0,elapsedTime:0,pseudoElement:0}),jP=Mi(UP),VP=Rn({},Fc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),GP=Mi(VP),qP=Rn({},Fc,{data:0}),S1=Mi(qP),WP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HP[e])?!!t[e]:!1}function D_(){return XP}var YP=Rn({},Jh,{key:function(e){if(e.key){var t=WP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=up(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ZP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D_,charCode:function(e){return e.type==="keypress"?up(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?up(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),KP=Mi(YP),JP=Rn({},dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T1=Mi(JP),QP=Rn({},Jh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D_}),eI=Mi(QP),tI=Rn({},Fc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nI=Mi(tI),rI=Rn({},dm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iI=Mi(rI),aI=[9,13,27,32],L_=fo&&"CompositionEvent"in window,uh=null;fo&&"documentMode"in document&&(uh=document.documentMode);var oI=fo&&"TextEvent"in window&&!uh,V2=fo&&(!L_||uh&&8<uh&&11>=uh),k1=String.fromCharCode(32),C1=!1;function G2(e,t){switch(e){case"keyup":return aI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cc=!1;function sI(e,t){switch(e){case"compositionend":return q2(t);case"keypress":return t.which!==32?null:(C1=!0,k1);case"textInput":return e=t.data,e===k1&&C1?null:e;default:return null}}function lI(e,t){if(cc)return e==="compositionend"||!L_&&G2(e,t)?(e=j2(),cp=M_=ns=null,cc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V2&&t.locale!=="ko"?null:t.data;default:return null}}var cI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cI[e.type]:t==="textarea"}function W2(e,t,i,s){E2(s),t=Ip(t,"onChange"),0<t.length&&(i=new z_("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var hh=null,Ph=null;function uI(e){rE(e,0)}function fm(e){var t=dc(e);if(g2(t))return e}function hI(e,t){if(e==="change")return t}var Z2=!1;if(fo){var oy;if(fo){var sy="oninput"in document;if(!sy){var I1=document.createElement("div");I1.setAttribute("oninput","return;"),sy=typeof I1.oninput=="function"}oy=sy}else oy=!1;Z2=oy&&(!document.documentMode||9<document.documentMode)}function A1(){hh&&(hh.detachEvent("onpropertychange",H2),Ph=hh=null)}function H2(e){if(e.propertyName==="value"&&fm(Ph)){var t=[];W2(t,Ph,e,k_(e)),C2(uI,t)}}function dI(e,t,i){e==="focusin"?(A1(),hh=t,Ph=i,hh.attachEvent("onpropertychange",H2)):e==="focusout"&&A1()}function fI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fm(Ph)}function pI(e,t){if(e==="click")return fm(t)}function mI(e,t){if(e==="input"||e==="change")return fm(t)}function gI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ga=typeof Object.is=="function"?Object.is:gI;function Ih(e,t){if(ga(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var u=i[s];if(!Ky.call(t,u)||!ga(e[u],t[u]))return!1}return!0}function M1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function z1(e,t){var i=M1(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=M1(i)}}function X2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?X2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Y2(){for(var e=window,t=wp();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=wp(e.document)}return t}function R_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yI(e){var t=Y2(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&X2(i.ownerDocument.documentElement,i)){if(s!==null&&R_(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,p=Math.min(s.start,u);s=s.end===void 0?p:Math.min(s.end,u),!e.extend&&p>s&&(u=s,s=p,p=u),u=z1(i,p);var x=z1(i,s);u&&x&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),p>s?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vI=fo&&"documentMode"in document&&11>=document.documentMode,uc=null,gv=null,dh=null,yv=!1;function D1(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;yv||uc==null||uc!==wp(s)||(s=uc,"selectionStart"in s&&R_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),dh&&Ih(dh,s)||(dh=s,s=Ip(gv,"onSelect"),0<s.length&&(t=new z_("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=uc)))}function Mf(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var hc={animationend:Mf("Animation","AnimationEnd"),animationiteration:Mf("Animation","AnimationIteration"),animationstart:Mf("Animation","AnimationStart"),transitionend:Mf("Transition","TransitionEnd")},ly={},K2={};fo&&(K2=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function pm(e){if(ly[e])return ly[e];if(!hc[e])return e;var t=hc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in K2)return ly[e]=t[i];return e}var J2=pm("animationend"),Q2=pm("animationiteration"),eE=pm("animationstart"),tE=pm("transitionend"),nE=new Map,L1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(e,t){nE.set(e,t),Sl(t,[e])}for(var cy=0;cy<L1.length;cy++){var uy=L1[cy],_I=uy.toLowerCase(),xI=uy[0].toUpperCase()+uy.slice(1);bs(_I,"on"+xI)}bs(J2,"onAnimationEnd");bs(Q2,"onAnimationIteration");bs(eE,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(tE,"onTransitionEnd");Ac("onMouseEnter",["mouseout","mouseover"]);Ac("onMouseLeave",["mouseout","mouseover"]);Ac("onPointerEnter",["pointerout","pointerover"]);Ac("onPointerLeave",["pointerout","pointerover"]);Sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bI=new Set("cancel close invalid load scroll toggle".split(" ").concat(oh));function R1(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,_P(s,t,void 0,e),e.currentTarget=null}function rE(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],u=s.event;s=s.listeners;e:{var p=void 0;if(t)for(var x=s.length-1;0<=x;x--){var c=s[x],E=c.instance,C=c.currentTarget;if(c=c.listener,E!==p&&u.isPropagationStopped())break e;R1(u,c,C),p=E}else for(x=0;x<s.length;x++){if(c=s[x],E=c.instance,C=c.currentTarget,c=c.listener,E!==p&&u.isPropagationStopped())break e;R1(u,c,C),p=E}}}if(Sp)throw e=dv,Sp=!1,dv=null,e}function bn(e,t){var i=t[wv];i===void 0&&(i=t[wv]=new Set);var s=e+"__bubble";i.has(s)||(iE(t,e,2,!1),i.add(s))}function hy(e,t,i){var s=0;t&&(s|=4),iE(i,e,s,t)}var zf="_reactListening"+Math.random().toString(36).slice(2);function Ah(e){if(!e[zf]){e[zf]=!0,h2.forEach(function(i){i!=="selectionchange"&&(bI.has(i)||hy(i,!1,e),hy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zf]||(t[zf]=!0,hy("selectionchange",!1,t))}}function iE(e,t,i,s){switch(U2(t)){case 1:var u=RP;break;case 4:u=OP;break;default:u=A_}i=u.bind(null,t,i,e),u=void 0,!hv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function dy(e,t,i,s,u){var p=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var x=s.tag;if(x===3||x===4){var c=s.stateNode.containerInfo;if(c===u||c.nodeType===8&&c.parentNode===u)break;if(x===4)for(x=s.return;x!==null;){var E=x.tag;if((E===3||E===4)&&(E=x.stateNode.containerInfo,E===u||E.nodeType===8&&E.parentNode===u))return;x=x.return}for(;c!==null;){if(x=ll(c),x===null)return;if(E=x.tag,E===5||E===6){s=p=x;continue e}c=c.parentNode}}s=s.return}C2(function(){var C=p,L=k_(i),O=[];e:{var R=nE.get(e);if(R!==void 0){var Q=z_,ie=e;switch(e){case"keypress":if(up(i)===0)break e;case"keydown":case"keyup":Q=KP;break;case"focusin":ie="focus",Q=ay;break;case"focusout":ie="blur",Q=ay;break;case"beforeblur":case"afterblur":Q=ay;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=FP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=eI;break;case J2:case Q2:case eE:Q=jP;break;case tE:Q=nI;break;case"scroll":Q=BP;break;case"wheel":Q=iI;break;case"copy":case"cut":case"paste":Q=GP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=T1}var ae=(t&4)!==0,ye=!ae&&e==="scroll",Y=ae?R!==null?R+"Capture":null:R;ae=[];for(var V=C,H;V!==null;){H=V;var ce=H.stateNode;if(H.tag===5&&ce!==null&&(H=ce,Y!==null&&(ce=Sh(V,Y),ce!=null&&ae.push(Mh(V,ce,H)))),ye)break;V=V.return}0<ae.length&&(R=new Q(R,ie,null,i,L),O.push({event:R,listeners:ae}))}}if(!(t&7)){e:{if(R=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",R&&i!==cv&&(ie=i.relatedTarget||i.fromElement)&&(ll(ie)||ie[po]))break e;if((Q||R)&&(R=L.window===L?L:(R=L.ownerDocument)?R.defaultView||R.parentWindow:window,Q?(ie=i.relatedTarget||i.toElement,Q=C,ie=ie?ll(ie):null,ie!==null&&(ye=Tl(ie),ie!==ye||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(Q=null,ie=C),Q!==ie)){if(ae=E1,ce="onMouseLeave",Y="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(ae=T1,ce="onPointerLeave",Y="onPointerEnter",V="pointer"),ye=Q==null?R:dc(Q),H=ie==null?R:dc(ie),R=new ae(ce,V+"leave",Q,i,L),R.target=ye,R.relatedTarget=H,ce=null,ll(L)===C&&(ae=new ae(Y,V+"enter",ie,i,L),ae.target=H,ae.relatedTarget=ye,ce=ae),ye=ce,Q&&ie)t:{for(ae=Q,Y=ie,V=0,H=ae;H;H=rc(H))V++;for(H=0,ce=Y;ce;ce=rc(ce))H++;for(;0<V-H;)ae=rc(ae),V--;for(;0<H-V;)Y=rc(Y),H--;for(;V--;){if(ae===Y||Y!==null&&ae===Y.alternate)break t;ae=rc(ae),Y=rc(Y)}ae=null}else ae=null;Q!==null&&O1(O,R,Q,ae,!1),ie!==null&&ye!==null&&O1(O,ye,ie,ae,!0)}}e:{if(R=C?dc(C):window,Q=R.nodeName&&R.nodeName.toLowerCase(),Q==="select"||Q==="input"&&R.type==="file")var xe=hI;else if(P1(R))if(Z2)xe=mI;else{xe=fI;var Ee=dI}else(Q=R.nodeName)&&Q.toLowerCase()==="input"&&(R.type==="checkbox"||R.type==="radio")&&(xe=pI);if(xe&&(xe=xe(e,C))){W2(O,xe,i,L);break e}Ee&&Ee(e,R,C),e==="focusout"&&(Ee=R._wrapperState)&&Ee.controlled&&R.type==="number"&&iv(R,"number",R.value)}switch(Ee=C?dc(C):window,e){case"focusin":(P1(Ee)||Ee.contentEditable==="true")&&(uc=Ee,gv=C,dh=null);break;case"focusout":dh=gv=uc=null;break;case"mousedown":yv=!0;break;case"contextmenu":case"mouseup":case"dragend":yv=!1,D1(O,i,L);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":D1(O,i,L)}var ze;if(L_)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else cc?G2(e,i)&&(De="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(De="onCompositionStart");De&&(V2&&i.locale!=="ko"&&(cc||De!=="onCompositionStart"?De==="onCompositionEnd"&&cc&&(ze=j2()):(ns=L,M_="value"in ns?ns.value:ns.textContent,cc=!0)),Ee=Ip(C,De),0<Ee.length&&(De=new S1(De,e,null,i,L),O.push({event:De,listeners:Ee}),ze?De.data=ze:(ze=q2(i),ze!==null&&(De.data=ze)))),(ze=oI?sI(e,i):lI(e,i))&&(C=Ip(C,"onBeforeInput"),0<C.length&&(L=new S1("onBeforeInput","beforeinput",null,i,L),O.push({event:L,listeners:C}),L.data=ze))}rE(O,t)})}function Mh(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ip(e,t){for(var i=t+"Capture",s=[];e!==null;){var u=e,p=u.stateNode;u.tag===5&&p!==null&&(u=p,p=Sh(e,i),p!=null&&s.unshift(Mh(e,p,u)),p=Sh(e,t),p!=null&&s.push(Mh(e,p,u))),e=e.return}return s}function rc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function O1(e,t,i,s,u){for(var p=t._reactName,x=[];i!==null&&i!==s;){var c=i,E=c.alternate,C=c.stateNode;if(E!==null&&E===s)break;c.tag===5&&C!==null&&(c=C,u?(E=Sh(i,p),E!=null&&x.unshift(Mh(i,E,c))):u||(E=Sh(i,p),E!=null&&x.push(Mh(i,E,c)))),i=i.return}x.length!==0&&e.push({event:t,listeners:x})}var wI=/\r\n?/g,EI=/\u0000|\uFFFD/g;function B1(e){return(typeof e=="string"?e:""+e).replace(wI,`
`).replace(EI,"")}function Df(e,t,i){if(t=B1(t),B1(e)!==t&&i)throw Error(Ue(425))}function Ap(){}var vv=null,_v=null;function xv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bv=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,N1=typeof Promise=="function"?Promise:void 0,TI=typeof queueMicrotask=="function"?queueMicrotask:typeof N1<"u"?function(e){return N1.resolve(null).then(e).catch(kI)}:bv;function kI(e){setTimeout(function(){throw e})}function fy(e,t){var i=t,s=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(s===0){e.removeChild(u),Ch(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=u}while(i);Ch(t)}function cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function F1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var $c=Math.random().toString(36).slice(2),Oa="__reactFiber$"+$c,zh="__reactProps$"+$c,po="__reactContainer$"+$c,wv="__reactEvents$"+$c,CI="__reactListeners$"+$c,PI="__reactHandles$"+$c;function ll(e){var t=e[Oa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[po]||i[Oa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=F1(e);e!==null;){if(i=e[Oa])return i;e=F1(e)}return t}e=i,i=e.parentNode}return null}function Qh(e){return e=e[Oa]||e[po],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function mm(e){return e[zh]||null}var Ev=[],fc=-1;function ws(e){return{current:e}}function En(e){0>fc||(e.current=Ev[fc],Ev[fc]=null,fc--)}function xn(e,t){fc++,Ev[fc]=e.current,e.current=t}var gs={},$r=ws(gs),di=ws(!1),yl=gs;function Mc(e,t){var i=e.type.contextTypes;if(!i)return gs;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},p;for(p in i)u[p]=t[p];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function fi(e){return e=e.childContextTypes,e!=null}function Mp(){En(di),En($r)}function $1(e,t,i){if($r.current!==gs)throw Error(Ue(168));xn($r,t),xn(di,i)}function aE(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(Ue(108,dP(e)||"Unknown",u));return Rn({},i,s)}function zp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gs,yl=$r.current,xn($r,e),xn(di,di.current),!0}function U1(e,t,i){var s=e.stateNode;if(!s)throw Error(Ue(169));i?(e=aE(e,t,yl),s.__reactInternalMemoizedMergedChildContext=e,En(di),En($r),xn($r,e)):En(di),xn(di,i)}var lo=null,gm=!1,py=!1;function oE(e){lo===null?lo=[e]:lo.push(e)}function II(e){gm=!0,oE(e)}function Es(){if(!py&&lo!==null){py=!0;var e=0,t=un;try{var i=lo;for(un=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}lo=null,gm=!1}catch(u){throw lo!==null&&(lo=lo.slice(e+1)),M2(C_,Es),u}finally{un=t,py=!1}}return null}var pc=[],mc=0,Dp=null,Lp=0,ji=[],Vi=0,vl=null,co=1,uo="";function al(e,t){pc[mc++]=Lp,pc[mc++]=Dp,Dp=e,Lp=t}function sE(e,t,i){ji[Vi++]=co,ji[Vi++]=uo,ji[Vi++]=vl,vl=e;var s=co;e=uo;var u=32-pa(s)-1;s&=~(1<<u),i+=1;var p=32-pa(t)+u;if(30<p){var x=u-u%5;p=(s&(1<<x)-1).toString(32),s>>=x,u-=x,co=1<<32-pa(t)+u|i<<u|s,uo=p+e}else co=1<<p|i<<u|s,uo=e}function O_(e){e.return!==null&&(al(e,1),sE(e,1,0))}function B_(e){for(;e===Dp;)Dp=pc[--mc],pc[mc]=null,Lp=pc[--mc],pc[mc]=null;for(;e===vl;)vl=ji[--Vi],ji[Vi]=null,uo=ji[--Vi],ji[Vi]=null,co=ji[--Vi],ji[Vi]=null}var Pi=null,ki=null,Pn=!1,da=null;function lE(e,t){var i=Gi(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function j1(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pi=e,ki=cs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pi=e,ki=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=vl!==null?{id:co,overflow:uo}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Gi(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Pi=e,ki=null,!0):!1;default:return!1}}function Sv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tv(e){if(Pn){var t=ki;if(t){var i=t;if(!j1(e,t)){if(Sv(e))throw Error(Ue(418));t=cs(i.nextSibling);var s=Pi;t&&j1(e,t)?lE(s,i):(e.flags=e.flags&-4097|2,Pn=!1,Pi=e)}}else{if(Sv(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,Pn=!1,Pi=e}}}function V1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pi=e}function Lf(e){if(e!==Pi)return!1;if(!Pn)return V1(e),Pn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xv(e.type,e.memoizedProps)),t&&(t=ki)){if(Sv(e))throw cE(),Error(Ue(418));for(;t;)lE(e,t),t=cs(t.nextSibling)}if(V1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ki=cs(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ki=null}}else ki=Pi?cs(e.stateNode.nextSibling):null;return!0}function cE(){for(var e=ki;e;)e=cs(e.nextSibling)}function zc(){ki=Pi=null,Pn=!1}function N_(e){da===null?da=[e]:da.push(e)}var AI=xo.ReactCurrentBatchConfig;function ca(e,t){if(e&&e.defaultProps){t=Rn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Rp=ws(null),Op=null,gc=null,F_=null;function $_(){F_=gc=Op=null}function U_(e){var t=Rp.current;En(Rp),e._currentValue=t}function kv(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Cc(e,t){Op=e,F_=gc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hi=!0),e.firstContext=null)}function Wi(e){var t=e._currentValue;if(F_!==e)if(e={context:e,memoizedValue:t,next:null},gc===null){if(Op===null)throw Error(Ue(308));gc=e,Op.dependencies={lanes:0,firstContext:e}}else gc=gc.next=e;return t}var cl=null;function j_(e){cl===null?cl=[e]:cl.push(e)}function uE(e,t,i,s){var u=t.interleaved;return u===null?(i.next=i,j_(t)):(i.next=u.next,u.next=i),t.interleaved=i,mo(e,s)}function mo(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Qo=!1;function V_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ho(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,tn&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,mo(e,i)}return u=s.interleaved,u===null?(t.next=t,j_(s)):(t.next=u.next,u.next=t),s.interleaved=t,mo(e,i)}function hp(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,P_(e,i)}}function G1(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var u=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var x={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?u=p=x:p=p.next=x,i=i.next}while(i!==null);p===null?u=p=t:p=p.next=t}else u=p=t;i={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:p,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Bp(e,t,i,s){var u=e.updateQueue;Qo=!1;var p=u.firstBaseUpdate,x=u.lastBaseUpdate,c=u.shared.pending;if(c!==null){u.shared.pending=null;var E=c,C=E.next;E.next=null,x===null?p=C:x.next=C,x=E;var L=e.alternate;L!==null&&(L=L.updateQueue,c=L.lastBaseUpdate,c!==x&&(c===null?L.firstBaseUpdate=C:c.next=C,L.lastBaseUpdate=E))}if(p!==null){var O=u.baseState;x=0,L=C=E=null,c=p;do{var R=c.lane,Q=c.eventTime;if((s&R)===R){L!==null&&(L=L.next={eventTime:Q,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var ie=e,ae=c;switch(R=t,Q=i,ae.tag){case 1:if(ie=ae.payload,typeof ie=="function"){O=ie.call(Q,O,R);break e}O=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ae.payload,R=typeof ie=="function"?ie.call(Q,O,R):ie,R==null)break e;O=Rn({},O,R);break e;case 2:Qo=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,R=u.effects,R===null?u.effects=[c]:R.push(c))}else Q={eventTime:Q,lane:R,tag:c.tag,payload:c.payload,callback:c.callback,next:null},L===null?(C=L=Q,E=O):L=L.next=Q,x|=R;if(c=c.next,c===null){if(c=u.shared.pending,c===null)break;R=c,c=R.next,R.next=null,u.lastBaseUpdate=R,u.shared.pending=null}}while(1);if(L===null&&(E=O),u.baseState=E,u.firstBaseUpdate=C,u.lastBaseUpdate=L,t=u.shared.interleaved,t!==null){u=t;do x|=u.lane,u=u.next;while(u!==t)}else p===null&&(u.shared.lanes=0);xl|=x,e.lanes=x,e.memoizedState=O}}function q1(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=i,typeof u!="function")throw Error(Ue(191,u));u.call(s)}}}var dE=new u2.Component().refs;function Cv(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Rn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ym={isMounted:function(e){return(e=e._reactInternals)?Tl(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=ti(),u=ds(e),p=ho(s,u);p.payload=t,i!=null&&(p.callback=i),t=us(e,p,u),t!==null&&(ma(t,e,u,s),hp(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=ti(),u=ds(e),p=ho(s,u);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=us(e,p,u),t!==null&&(ma(t,e,u,s),hp(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ti(),s=ds(e),u=ho(i,s);u.tag=2,t!=null&&(u.callback=t),t=us(e,u,s),t!==null&&(ma(t,e,s,i),hp(t,e,s))}};function W1(e,t,i,s,u,p,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,p,x):t.prototype&&t.prototype.isPureReactComponent?!Ih(i,s)||!Ih(u,p):!0}function fE(e,t,i){var s=!1,u=gs,p=t.contextType;return typeof p=="object"&&p!==null?p=Wi(p):(u=fi(t)?yl:$r.current,s=t.contextTypes,p=(s=s!=null)?Mc(e,u):gs),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ym,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=p),t}function Z1(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&ym.enqueueReplaceState(t,t.state,null)}function Pv(e,t,i,s){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs=dE,V_(e);var p=t.contextType;typeof p=="object"&&p!==null?u.context=Wi(p):(p=fi(t)?yl:$r.current,u.context=Mc(e,p)),u.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(Cv(e,t,p,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&ym.enqueueReplaceState(u,u.state,null),Bp(e,i,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Xu(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Ue(309));var s=i.stateNode}if(!s)throw Error(Ue(147,e));var u=s,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(x){var c=u.refs;c===dE&&(c=u.refs={}),x===null?delete c[p]:c[p]=x},t._stringRef=p,t)}if(typeof e!="string")throw Error(Ue(284));if(!i._owner)throw Error(Ue(290,e))}return e}function Rf(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function H1(e){var t=e._init;return t(e._payload)}function pE(e){function t(Y,V){if(e){var H=Y.deletions;H===null?(Y.deletions=[V],Y.flags|=16):H.push(V)}}function i(Y,V){if(!e)return null;for(;V!==null;)t(Y,V),V=V.sibling;return null}function s(Y,V){for(Y=new Map;V!==null;)V.key!==null?Y.set(V.key,V):Y.set(V.index,V),V=V.sibling;return Y}function u(Y,V){return Y=fs(Y,V),Y.index=0,Y.sibling=null,Y}function p(Y,V,H){return Y.index=H,e?(H=Y.alternate,H!==null?(H=H.index,H<V?(Y.flags|=2,V):H):(Y.flags|=2,V)):(Y.flags|=1048576,V)}function x(Y){return e&&Y.alternate===null&&(Y.flags|=2),Y}function c(Y,V,H,ce){return V===null||V.tag!==6?(V=by(H,Y.mode,ce),V.return=Y,V):(V=u(V,H),V.return=Y,V)}function E(Y,V,H,ce){var xe=H.type;return xe===lc?L(Y,V,H.props.children,ce,H.key):V!==null&&(V.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Jo&&H1(xe)===V.type)?(ce=u(V,H.props),ce.ref=Xu(Y,V,H),ce.return=Y,ce):(ce=yp(H.type,H.key,H.props,null,Y.mode,ce),ce.ref=Xu(Y,V,H),ce.return=Y,ce)}function C(Y,V,H,ce){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=wy(H,Y.mode,ce),V.return=Y,V):(V=u(V,H.children||[]),V.return=Y,V)}function L(Y,V,H,ce,xe){return V===null||V.tag!==7?(V=gl(H,Y.mode,ce,xe),V.return=Y,V):(V=u(V,H),V.return=Y,V)}function O(Y,V,H){if(typeof V=="string"&&V!==""||typeof V=="number")return V=by(""+V,Y.mode,H),V.return=Y,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Sf:return H=yp(V.type,V.key,V.props,null,Y.mode,H),H.ref=Xu(Y,null,V),H.return=Y,H;case sc:return V=wy(V,Y.mode,H),V.return=Y,V;case Jo:var ce=V._init;return O(Y,ce(V._payload),H)}if(ih(V)||Gu(V))return V=gl(V,Y.mode,H,null),V.return=Y,V;Rf(Y,V)}return null}function R(Y,V,H,ce){var xe=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return xe!==null?null:c(Y,V,""+H,ce);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Sf:return H.key===xe?E(Y,V,H,ce):null;case sc:return H.key===xe?C(Y,V,H,ce):null;case Jo:return xe=H._init,R(Y,V,xe(H._payload),ce)}if(ih(H)||Gu(H))return xe!==null?null:L(Y,V,H,ce,null);Rf(Y,H)}return null}function Q(Y,V,H,ce,xe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Y=Y.get(H)||null,c(V,Y,""+ce,xe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Sf:return Y=Y.get(ce.key===null?H:ce.key)||null,E(V,Y,ce,xe);case sc:return Y=Y.get(ce.key===null?H:ce.key)||null,C(V,Y,ce,xe);case Jo:var Ee=ce._init;return Q(Y,V,H,Ee(ce._payload),xe)}if(ih(ce)||Gu(ce))return Y=Y.get(H)||null,L(V,Y,ce,xe,null);Rf(V,ce)}return null}function ie(Y,V,H,ce){for(var xe=null,Ee=null,ze=V,De=V=0,ot=null;ze!==null&&De<H.length;De++){ze.index>De?(ot=ze,ze=null):ot=ze.sibling;var Fe=R(Y,ze,H[De],ce);if(Fe===null){ze===null&&(ze=ot);break}e&&ze&&Fe.alternate===null&&t(Y,ze),V=p(Fe,V,De),Ee===null?xe=Fe:Ee.sibling=Fe,Ee=Fe,ze=ot}if(De===H.length)return i(Y,ze),Pn&&al(Y,De),xe;if(ze===null){for(;De<H.length;De++)ze=O(Y,H[De],ce),ze!==null&&(V=p(ze,V,De),Ee===null?xe=ze:Ee.sibling=ze,Ee=ze);return Pn&&al(Y,De),xe}for(ze=s(Y,ze);De<H.length;De++)ot=Q(ze,Y,De,H[De],ce),ot!==null&&(e&&ot.alternate!==null&&ze.delete(ot.key===null?De:ot.key),V=p(ot,V,De),Ee===null?xe=ot:Ee.sibling=ot,Ee=ot);return e&&ze.forEach(function(St){return t(Y,St)}),Pn&&al(Y,De),xe}function ae(Y,V,H,ce){var xe=Gu(H);if(typeof xe!="function")throw Error(Ue(150));if(H=xe.call(H),H==null)throw Error(Ue(151));for(var Ee=xe=null,ze=V,De=V=0,ot=null,Fe=H.next();ze!==null&&!Fe.done;De++,Fe=H.next()){ze.index>De?(ot=ze,ze=null):ot=ze.sibling;var St=R(Y,ze,Fe.value,ce);if(St===null){ze===null&&(ze=ot);break}e&&ze&&St.alternate===null&&t(Y,ze),V=p(St,V,De),Ee===null?xe=St:Ee.sibling=St,Ee=St,ze=ot}if(Fe.done)return i(Y,ze),Pn&&al(Y,De),xe;if(ze===null){for(;!Fe.done;De++,Fe=H.next())Fe=O(Y,Fe.value,ce),Fe!==null&&(V=p(Fe,V,De),Ee===null?xe=Fe:Ee.sibling=Fe,Ee=Fe);return Pn&&al(Y,De),xe}for(ze=s(Y,ze);!Fe.done;De++,Fe=H.next())Fe=Q(ze,Y,De,Fe.value,ce),Fe!==null&&(e&&Fe.alternate!==null&&ze.delete(Fe.key===null?De:Fe.key),V=p(Fe,V,De),Ee===null?xe=Fe:Ee.sibling=Fe,Ee=Fe);return e&&ze.forEach(function(Mt){return t(Y,Mt)}),Pn&&al(Y,De),xe}function ye(Y,V,H,ce){if(typeof H=="object"&&H!==null&&H.type===lc&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case Sf:e:{for(var xe=H.key,Ee=V;Ee!==null;){if(Ee.key===xe){if(xe=H.type,xe===lc){if(Ee.tag===7){i(Y,Ee.sibling),V=u(Ee,H.props.children),V.return=Y,Y=V;break e}}else if(Ee.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Jo&&H1(xe)===Ee.type){i(Y,Ee.sibling),V=u(Ee,H.props),V.ref=Xu(Y,Ee,H),V.return=Y,Y=V;break e}i(Y,Ee);break}else t(Y,Ee);Ee=Ee.sibling}H.type===lc?(V=gl(H.props.children,Y.mode,ce,H.key),V.return=Y,Y=V):(ce=yp(H.type,H.key,H.props,null,Y.mode,ce),ce.ref=Xu(Y,V,H),ce.return=Y,Y=ce)}return x(Y);case sc:e:{for(Ee=H.key;V!==null;){if(V.key===Ee)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){i(Y,V.sibling),V=u(V,H.children||[]),V.return=Y,Y=V;break e}else{i(Y,V);break}else t(Y,V);V=V.sibling}V=wy(H,Y.mode,ce),V.return=Y,Y=V}return x(Y);case Jo:return Ee=H._init,ye(Y,V,Ee(H._payload),ce)}if(ih(H))return ie(Y,V,H,ce);if(Gu(H))return ae(Y,V,H,ce);Rf(Y,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,V!==null&&V.tag===6?(i(Y,V.sibling),V=u(V,H),V.return=Y,Y=V):(i(Y,V),V=by(H,Y.mode,ce),V.return=Y,Y=V),x(Y)):i(Y,V)}return ye}var Dc=pE(!0),mE=pE(!1),ed={},Fa=ws(ed),Dh=ws(ed),Lh=ws(ed);function ul(e){if(e===ed)throw Error(Ue(174));return e}function G_(e,t){switch(xn(Lh,t),xn(Dh,e),xn(Fa,ed),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ov(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ov(t,e)}En(Fa),xn(Fa,t)}function Lc(){En(Fa),En(Dh),En(Lh)}function gE(e){ul(Lh.current);var t=ul(Fa.current),i=ov(t,e.type);t!==i&&(xn(Dh,e),xn(Fa,i))}function q_(e){Dh.current===e&&(En(Fa),En(Dh))}var Dn=ws(0);function Np(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var my=[];function W_(){for(var e=0;e<my.length;e++)my[e]._workInProgressVersionPrimary=null;my.length=0}var dp=xo.ReactCurrentDispatcher,gy=xo.ReactCurrentBatchConfig,_l=0,Ln=null,sr=null,yr=null,Fp=!1,fh=!1,Rh=0,MI=0;function Or(){throw Error(Ue(321))}function Z_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!ga(e[i],t[i]))return!1;return!0}function H_(e,t,i,s,u,p){if(_l=p,Ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dp.current=e===null||e.memoizedState===null?RI:OI,e=i(s,u),fh){p=0;do{if(fh=!1,Rh=0,25<=p)throw Error(Ue(301));p+=1,yr=sr=null,t.updateQueue=null,dp.current=BI,e=i(s,u)}while(fh)}if(dp.current=$p,t=sr!==null&&sr.next!==null,_l=0,yr=sr=Ln=null,Fp=!1,t)throw Error(Ue(300));return e}function X_(){var e=Rh!==0;return Rh=0,e}function La(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Ln.memoizedState=yr=e:yr=yr.next=e,yr}function Zi(){if(sr===null){var e=Ln.alternate;e=e!==null?e.memoizedState:null}else e=sr.next;var t=yr===null?Ln.memoizedState:yr.next;if(t!==null)yr=t,sr=e;else{if(e===null)throw Error(Ue(310));sr=e,e={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},yr===null?Ln.memoizedState=yr=e:yr=yr.next=e}return yr}function Oh(e,t){return typeof t=="function"?t(e):t}function yy(e){var t=Zi(),i=t.queue;if(i===null)throw Error(Ue(311));i.lastRenderedReducer=e;var s=sr,u=s.baseQueue,p=i.pending;if(p!==null){if(u!==null){var x=u.next;u.next=p.next,p.next=x}s.baseQueue=u=p,i.pending=null}if(u!==null){p=u.next,s=s.baseState;var c=x=null,E=null,C=p;do{var L=C.lane;if((_l&L)===L)E!==null&&(E=E.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),s=C.hasEagerState?C.eagerState:e(s,C.action);else{var O={lane:L,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};E===null?(c=E=O,x=s):E=E.next=O,Ln.lanes|=L,xl|=L}C=C.next}while(C!==null&&C!==p);E===null?x=s:E.next=c,ga(s,t.memoizedState)||(hi=!0),t.memoizedState=s,t.baseState=x,t.baseQueue=E,i.lastRenderedState=s}if(e=i.interleaved,e!==null){u=e;do p=u.lane,Ln.lanes|=p,xl|=p,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function vy(e){var t=Zi(),i=t.queue;if(i===null)throw Error(Ue(311));i.lastRenderedReducer=e;var s=i.dispatch,u=i.pending,p=t.memoizedState;if(u!==null){i.pending=null;var x=u=u.next;do p=e(p,x.action),x=x.next;while(x!==u);ga(p,t.memoizedState)||(hi=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,s]}function yE(){}function vE(e,t){var i=Ln,s=Zi(),u=t(),p=!ga(s.memoizedState,u);if(p&&(s.memoizedState=u,hi=!0),s=s.queue,Y_(bE.bind(null,i,s,e),[e]),s.getSnapshot!==t||p||yr!==null&&yr.memoizedState.tag&1){if(i.flags|=2048,Bh(9,xE.bind(null,i,s,u,t),void 0,null),vr===null)throw Error(Ue(349));_l&30||_E(i,t,u)}return u}function _E(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function xE(e,t,i,s){t.value=i,t.getSnapshot=s,wE(t)&&EE(e)}function bE(e,t,i){return i(function(){wE(t)&&EE(e)})}function wE(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!ga(e,i)}catch{return!0}}function EE(e){var t=mo(e,1);t!==null&&ma(t,e,1,-1)}function X1(e){var t=La();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oh,lastRenderedState:e},t.queue=e,e=e.dispatch=LI.bind(null,Ln,e),[t.memoizedState,e]}function Bh(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function SE(){return Zi().memoizedState}function fp(e,t,i,s){var u=La();Ln.flags|=e,u.memoizedState=Bh(1|t,i,void 0,s===void 0?null:s)}function vm(e,t,i,s){var u=Zi();s=s===void 0?null:s;var p=void 0;if(sr!==null){var x=sr.memoizedState;if(p=x.destroy,s!==null&&Z_(s,x.deps)){u.memoizedState=Bh(t,i,p,s);return}}Ln.flags|=e,u.memoizedState=Bh(1|t,i,p,s)}function Y1(e,t){return fp(8390656,8,e,t)}function Y_(e,t){return vm(2048,8,e,t)}function TE(e,t){return vm(4,2,e,t)}function kE(e,t){return vm(4,4,e,t)}function CE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function PE(e,t,i){return i=i!=null?i.concat([e]):null,vm(4,4,CE.bind(null,t,e),i)}function K_(){}function IE(e,t){var i=Zi();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&Z_(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function AE(e,t){var i=Zi();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&Z_(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function ME(e,t,i){return _l&21?(ga(i,t)||(i=L2(),Ln.lanes|=i,xl|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hi=!0),e.memoizedState=i)}function zI(e,t){var i=un;un=i!==0&&4>i?i:4,e(!0);var s=gy.transition;gy.transition={};try{e(!1),t()}finally{un=i,gy.transition=s}}function zE(){return Zi().memoizedState}function DI(e,t,i){var s=ds(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},DE(e))LE(t,i);else if(i=uE(e,t,i,s),i!==null){var u=ti();ma(i,e,s,u),RE(i,t,s)}}function LI(e,t,i){var s=ds(e),u={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(DE(e))LE(t,u);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var x=t.lastRenderedState,c=p(x,i);if(u.hasEagerState=!0,u.eagerState=c,ga(c,x)){var E=t.interleaved;E===null?(u.next=u,j_(t)):(u.next=E.next,E.next=u),t.interleaved=u;return}}catch{}finally{}i=uE(e,t,u,s),i!==null&&(u=ti(),ma(i,e,s,u),RE(i,t,s))}}function DE(e){var t=e.alternate;return e===Ln||t!==null&&t===Ln}function LE(e,t){fh=Fp=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function RE(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,P_(e,i)}}var $p={readContext:Wi,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},RI={readContext:Wi,useCallback:function(e,t){return La().memoizedState=[e,t===void 0?null:t],e},useContext:Wi,useEffect:Y1,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,fp(4194308,4,CE.bind(null,t,e),i)},useLayoutEffect:function(e,t){return fp(4194308,4,e,t)},useInsertionEffect:function(e,t){return fp(4,2,e,t)},useMemo:function(e,t){var i=La();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=La();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=DI.bind(null,Ln,e),[s.memoizedState,e]},useRef:function(e){var t=La();return e={current:e},t.memoizedState=e},useState:X1,useDebugValue:K_,useDeferredValue:function(e){return La().memoizedState=e},useTransition:function(){var e=X1(!1),t=e[0];return e=zI.bind(null,e[1]),La().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Ln,u=La();if(Pn){if(i===void 0)throw Error(Ue(407));i=i()}else{if(i=t(),vr===null)throw Error(Ue(349));_l&30||_E(s,t,i)}u.memoizedState=i;var p={value:i,getSnapshot:t};return u.queue=p,Y1(bE.bind(null,s,p,e),[e]),s.flags|=2048,Bh(9,xE.bind(null,s,p,i,t),void 0,null),i},useId:function(){var e=La(),t=vr.identifierPrefix;if(Pn){var i=uo,s=co;i=(s&~(1<<32-pa(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=Rh++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=MI++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OI={readContext:Wi,useCallback:IE,useContext:Wi,useEffect:Y_,useImperativeHandle:PE,useInsertionEffect:TE,useLayoutEffect:kE,useMemo:AE,useReducer:yy,useRef:SE,useState:function(){return yy(Oh)},useDebugValue:K_,useDeferredValue:function(e){var t=Zi();return ME(t,sr.memoizedState,e)},useTransition:function(){var e=yy(Oh)[0],t=Zi().memoizedState;return[e,t]},useMutableSource:yE,useSyncExternalStore:vE,useId:zE,unstable_isNewReconciler:!1},BI={readContext:Wi,useCallback:IE,useContext:Wi,useEffect:Y_,useImperativeHandle:PE,useInsertionEffect:TE,useLayoutEffect:kE,useMemo:AE,useReducer:vy,useRef:SE,useState:function(){return vy(Oh)},useDebugValue:K_,useDeferredValue:function(e){var t=Zi();return sr===null?t.memoizedState=e:ME(t,sr.memoizedState,e)},useTransition:function(){var e=vy(Oh)[0],t=Zi().memoizedState;return[e,t]},useMutableSource:yE,useSyncExternalStore:vE,useId:zE,unstable_isNewReconciler:!1};function Rc(e,t){try{var i="",s=t;do i+=hP(s),s=s.return;while(s);var u=i}catch(p){u=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:u,digest:null}}function _y(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Iv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var NI=typeof WeakMap=="function"?WeakMap:Map;function OE(e,t,i){i=ho(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){jp||(jp=!0,Fv=s),Iv(e,t)},i}function BE(e,t,i){i=ho(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;i.payload=function(){return s(u)},i.callback=function(){Iv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){Iv(e,t),typeof s!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),i}function K1(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new NI;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(i)||(u.add(i),e=JI.bind(null,e,t,i),t.then(e,e))}function J1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Q1(e,t,i,s,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=ho(-1,1),t.tag=2,us(i,t,1))),i.lanes|=1),e)}var FI=xo.ReactCurrentOwner,hi=!1;function Qr(e,t,i,s){t.child=e===null?mE(t,null,i,s):Dc(t,e.child,i,s)}function eb(e,t,i,s,u){i=i.render;var p=t.ref;return Cc(t,u),s=H_(e,t,i,s,p,u),i=X_(),e!==null&&!hi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,go(e,t,u)):(Pn&&i&&O_(t),t.flags|=1,Qr(e,t,s,u),t.child)}function tb(e,t,i,s,u){if(e===null){var p=i.type;return typeof p=="function"&&!a0(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,NE(e,t,p,s,u)):(e=yp(i.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&u)){var x=p.memoizedProps;if(i=i.compare,i=i!==null?i:Ih,i(x,s)&&e.ref===t.ref)return go(e,t,u)}return t.flags|=1,e=fs(p,s),e.ref=t.ref,e.return=t,t.child=e}function NE(e,t,i,s,u){if(e!==null){var p=e.memoizedProps;if(Ih(p,s)&&e.ref===t.ref)if(hi=!1,t.pendingProps=s=p,(e.lanes&u)!==0)e.flags&131072&&(hi=!0);else return t.lanes=e.lanes,go(e,t,u)}return Av(e,t,i,s,u)}function FE(e,t,i){var s=t.pendingProps,u=s.children,p=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(vc,Si),Si|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xn(vc,Si),Si|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=p!==null?p.baseLanes:i,xn(vc,Si),Si|=s}else p!==null?(s=p.baseLanes|i,t.memoizedState=null):s=i,xn(vc,Si),Si|=s;return Qr(e,t,u,i),t.child}function $E(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Av(e,t,i,s,u){var p=fi(i)?yl:$r.current;return p=Mc(t,p),Cc(t,u),i=H_(e,t,i,s,p,u),s=X_(),e!==null&&!hi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,go(e,t,u)):(Pn&&s&&O_(t),t.flags|=1,Qr(e,t,i,u),t.child)}function nb(e,t,i,s,u){if(fi(i)){var p=!0;zp(t)}else p=!1;if(Cc(t,u),t.stateNode===null)pp(e,t),fE(t,i,s),Pv(t,i,s,u),s=!0;else if(e===null){var x=t.stateNode,c=t.memoizedProps;x.props=c;var E=x.context,C=i.contextType;typeof C=="object"&&C!==null?C=Wi(C):(C=fi(i)?yl:$r.current,C=Mc(t,C));var L=i.getDerivedStateFromProps,O=typeof L=="function"||typeof x.getSnapshotBeforeUpdate=="function";O||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(c!==s||E!==C)&&Z1(t,x,s,C),Qo=!1;var R=t.memoizedState;x.state=R,Bp(t,s,x,u),E=t.memoizedState,c!==s||R!==E||di.current||Qo?(typeof L=="function"&&(Cv(t,i,L,s),E=t.memoizedState),(c=Qo||W1(t,i,c,s,R,E,C))?(O||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=E),x.props=s,x.state=E,x.context=C,s=c):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{x=t.stateNode,hE(e,t),c=t.memoizedProps,C=t.type===t.elementType?c:ca(t.type,c),x.props=C,O=t.pendingProps,R=x.context,E=i.contextType,typeof E=="object"&&E!==null?E=Wi(E):(E=fi(i)?yl:$r.current,E=Mc(t,E));var Q=i.getDerivedStateFromProps;(L=typeof Q=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(c!==O||R!==E)&&Z1(t,x,s,E),Qo=!1,R=t.memoizedState,x.state=R,Bp(t,s,x,u);var ie=t.memoizedState;c!==O||R!==ie||di.current||Qo?(typeof Q=="function"&&(Cv(t,i,Q,s),ie=t.memoizedState),(C=Qo||W1(t,i,C,s,R,ie,E)||!1)?(L||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(s,ie,E),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(s,ie,E)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ie),x.props=s,x.state=ie,x.context=E,s=C):(typeof x.componentDidUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),s=!1)}return Mv(e,t,i,s,p,u)}function Mv(e,t,i,s,u,p){$E(e,t);var x=(t.flags&128)!==0;if(!s&&!x)return u&&U1(t,i,!1),go(e,t,p);s=t.stateNode,FI.current=t;var c=x&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&x?(t.child=Dc(t,e.child,null,p),t.child=Dc(t,null,c,p)):Qr(e,t,c,p),t.memoizedState=s.state,u&&U1(t,i,!0),t.child}function UE(e){var t=e.stateNode;t.pendingContext?$1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$1(e,t.context,!1),G_(e,t.containerInfo)}function rb(e,t,i,s,u){return zc(),N_(u),t.flags|=256,Qr(e,t,i,s),t.child}var zv={dehydrated:null,treeContext:null,retryLane:0};function Dv(e){return{baseLanes:e,cachePool:null,transitions:null}}function jE(e,t,i){var s=t.pendingProps,u=Dn.current,p=!1,x=(t.flags&128)!==0,c;if((c=x)||(c=e!==null&&e.memoizedState===null?!1:(u&2)!==0),c?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),xn(Dn,u&1),e===null)return Tv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(x=s.children,e=s.fallback,p?(s=t.mode,p=t.child,x={mode:"hidden",children:x},!(s&1)&&p!==null?(p.childLanes=0,p.pendingProps=x):p=bm(x,s,0,null),e=gl(e,s,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Dv(i),t.memoizedState=zv,e):J_(t,x));if(u=e.memoizedState,u!==null&&(c=u.dehydrated,c!==null))return $I(e,t,x,s,c,u,i);if(p){p=s.fallback,x=t.mode,u=e.child,c=u.sibling;var E={mode:"hidden",children:s.children};return!(x&1)&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=E,t.deletions=null):(s=fs(u,E),s.subtreeFlags=u.subtreeFlags&14680064),c!==null?p=fs(c,p):(p=gl(p,x,i,null),p.flags|=2),p.return=t,s.return=t,s.sibling=p,t.child=s,s=p,p=t.child,x=e.child.memoizedState,x=x===null?Dv(i):{baseLanes:x.baseLanes|i,cachePool:null,transitions:x.transitions},p.memoizedState=x,p.childLanes=e.childLanes&~i,t.memoizedState=zv,s}return p=e.child,e=p.sibling,s=fs(p,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function J_(e,t){return t=bm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Of(e,t,i,s){return s!==null&&N_(s),Dc(t,e.child,null,i),e=J_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $I(e,t,i,s,u,p,x){if(i)return t.flags&256?(t.flags&=-257,s=_y(Error(Ue(422))),Of(e,t,x,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=s.fallback,u=t.mode,s=bm({mode:"visible",children:s.children},u,0,null),p=gl(p,u,x,null),p.flags|=2,s.return=t,p.return=t,s.sibling=p,t.child=s,t.mode&1&&Dc(t,e.child,null,x),t.child.memoizedState=Dv(x),t.memoizedState=zv,p);if(!(t.mode&1))return Of(e,t,x,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var c=s.dgst;return s=c,p=Error(Ue(419)),s=_y(p,s,void 0),Of(e,t,x,s)}if(c=(x&e.childLanes)!==0,hi||c){if(s=vr,s!==null){switch(x&-x){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(s.suspendedLanes|x)?0:u,u!==0&&u!==p.retryLane&&(p.retryLane=u,mo(e,u),ma(s,e,u,-1))}return i0(),s=_y(Error(Ue(421))),Of(e,t,x,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=QI.bind(null,e),u._reactRetry=t,null):(e=p.treeContext,ki=cs(u.nextSibling),Pi=t,Pn=!0,da=null,e!==null&&(ji[Vi++]=co,ji[Vi++]=uo,ji[Vi++]=vl,co=e.id,uo=e.overflow,vl=t),t=J_(t,s.children),t.flags|=4096,t)}function ib(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),kv(e.return,t,i)}function xy(e,t,i,s,u){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:u}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=s,p.tail=i,p.tailMode=u)}function VE(e,t,i){var s=t.pendingProps,u=s.revealOrder,p=s.tail;if(Qr(e,t,s.children,i),s=Dn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ib(e,i,t);else if(e.tag===19)ib(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(xn(Dn,s),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&Np(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),xy(t,!1,u,i,p);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Np(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}xy(t,!0,i,null,p);break;case"together":xy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function go(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),xl|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,i=fs(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=fs(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function UI(e,t,i){switch(t.tag){case 3:UE(t),zc();break;case 5:gE(t);break;case 1:fi(t.type)&&zp(t);break;case 4:G_(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;xn(Rp,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(xn(Dn,Dn.current&1),t.flags|=128,null):i&t.child.childLanes?jE(e,t,i):(xn(Dn,Dn.current&1),e=go(e,t,i),e!==null?e.sibling:null);xn(Dn,Dn.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return VE(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),xn(Dn,Dn.current),s)break;return null;case 22:case 23:return t.lanes=0,FE(e,t,i)}return go(e,t,i)}var GE,Lv,qE,WE;GE=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Lv=function(){};qE=function(e,t,i,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,ul(Fa.current);var p=null;switch(i){case"input":u=nv(e,u),s=nv(e,s),p=[];break;case"select":u=Rn({},u,{value:void 0}),s=Rn({},s,{value:void 0}),p=[];break;case"textarea":u=av(e,u),s=av(e,s),p=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ap)}sv(i,s);var x;i=null;for(C in u)if(!s.hasOwnProperty(C)&&u.hasOwnProperty(C)&&u[C]!=null)if(C==="style"){var c=u[C];for(x in c)c.hasOwnProperty(x)&&(i||(i={}),i[x]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(wh.hasOwnProperty(C)?p||(p=[]):(p=p||[]).push(C,null));for(C in s){var E=s[C];if(c=u!=null?u[C]:void 0,s.hasOwnProperty(C)&&E!==c&&(E!=null||c!=null))if(C==="style")if(c){for(x in c)!c.hasOwnProperty(x)||E&&E.hasOwnProperty(x)||(i||(i={}),i[x]="");for(x in E)E.hasOwnProperty(x)&&c[x]!==E[x]&&(i||(i={}),i[x]=E[x])}else i||(p||(p=[]),p.push(C,i)),i=E;else C==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,c=c?c.__html:void 0,E!=null&&c!==E&&(p=p||[]).push(C,E)):C==="children"?typeof E!="string"&&typeof E!="number"||(p=p||[]).push(C,""+E):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(wh.hasOwnProperty(C)?(E!=null&&C==="onScroll"&&bn("scroll",e),p||c===E||(p=[])):(p=p||[]).push(C,E))}i&&(p=p||[]).push("style",i);var C=p;(t.updateQueue=C)&&(t.flags|=4)}};WE=function(e,t,i,s){i!==s&&(t.flags|=4)};function Yu(e,t){if(!Pn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Br(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function jI(e,t,i){var s=t.pendingProps;switch(B_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(t),null;case 1:return fi(t.type)&&Mp(),Br(t),null;case 3:return s=t.stateNode,Lc(),En(di),En($r),W_(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Lf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,da!==null&&(jv(da),da=null))),Lv(e,t),Br(t),null;case 5:q_(t);var u=ul(Lh.current);if(i=t.type,e!==null&&t.stateNode!=null)qE(e,t,i,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Ue(166));return Br(t),null}if(e=ul(Fa.current),Lf(t)){s=t.stateNode,i=t.type;var p=t.memoizedProps;switch(s[Oa]=t,s[zh]=p,e=(t.mode&1)!==0,i){case"dialog":bn("cancel",s),bn("close",s);break;case"iframe":case"object":case"embed":bn("load",s);break;case"video":case"audio":for(u=0;u<oh.length;u++)bn(oh[u],s);break;case"source":bn("error",s);break;case"img":case"image":case"link":bn("error",s),bn("load",s);break;case"details":bn("toggle",s);break;case"input":f1(s,p),bn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!p.multiple},bn("invalid",s);break;case"textarea":m1(s,p),bn("invalid",s)}sv(i,p),u=null;for(var x in p)if(p.hasOwnProperty(x)){var c=p[x];x==="children"?typeof c=="string"?s.textContent!==c&&(p.suppressHydrationWarning!==!0&&Df(s.textContent,c,e),u=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(p.suppressHydrationWarning!==!0&&Df(s.textContent,c,e),u=["children",""+c]):wh.hasOwnProperty(x)&&c!=null&&x==="onScroll"&&bn("scroll",s)}switch(i){case"input":Tf(s),p1(s,p,!0);break;case"textarea":Tf(s),g1(s);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(s.onclick=Ap)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{x=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_2(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=x.createElement(i,{is:s.is}):(e=x.createElement(i),i==="select"&&(x=e,s.multiple?x.multiple=!0:s.size&&(x.size=s.size))):e=x.createElementNS(e,i),e[Oa]=t,e[zh]=s,GE(e,t,!1,!1),t.stateNode=e;e:{switch(x=lv(i,s),i){case"dialog":bn("cancel",e),bn("close",e),u=s;break;case"iframe":case"object":case"embed":bn("load",e),u=s;break;case"video":case"audio":for(u=0;u<oh.length;u++)bn(oh[u],e);u=s;break;case"source":bn("error",e),u=s;break;case"img":case"image":case"link":bn("error",e),bn("load",e),u=s;break;case"details":bn("toggle",e),u=s;break;case"input":f1(e,s),u=nv(e,s),bn("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Rn({},s,{value:void 0}),bn("invalid",e);break;case"textarea":m1(e,s),u=av(e,s),bn("invalid",e);break;default:u=s}sv(i,u),c=u;for(p in c)if(c.hasOwnProperty(p)){var E=c[p];p==="style"?w2(e,E):p==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&x2(e,E)):p==="children"?typeof E=="string"?(i!=="textarea"||E!=="")&&Eh(e,E):typeof E=="number"&&Eh(e,""+E):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(wh.hasOwnProperty(p)?E!=null&&p==="onScroll"&&bn("scroll",e):E!=null&&w_(e,p,E,x))}switch(i){case"input":Tf(e),p1(e,s,!1);break;case"textarea":Tf(e),g1(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ms(s.value));break;case"select":e.multiple=!!s.multiple,p=s.value,p!=null?Ec(e,!!s.multiple,p,!1):s.defaultValue!=null&&Ec(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Ap)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Br(t),null;case 6:if(e&&t.stateNode!=null)WE(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Ue(166));if(i=ul(Lh.current),ul(Fa.current),Lf(t)){if(s=t.stateNode,i=t.memoizedProps,s[Oa]=t,(p=s.nodeValue!==i)&&(e=Pi,e!==null))switch(e.tag){case 3:Df(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Df(s.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[Oa]=t,t.stateNode=s}return Br(t),null;case 13:if(En(Dn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pn&&ki!==null&&t.mode&1&&!(t.flags&128))cE(),zc(),t.flags|=98560,p=!1;else if(p=Lf(t),s!==null&&s.dehydrated!==null){if(e===null){if(!p)throw Error(Ue(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Ue(317));p[Oa]=t}else zc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Br(t),p=!1}else da!==null&&(jv(da),da=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Dn.current&1?lr===0&&(lr=3):i0())),t.updateQueue!==null&&(t.flags|=4),Br(t),null);case 4:return Lc(),Lv(e,t),e===null&&Ah(t.stateNode.containerInfo),Br(t),null;case 10:return U_(t.type._context),Br(t),null;case 17:return fi(t.type)&&Mp(),Br(t),null;case 19:if(En(Dn),p=t.memoizedState,p===null)return Br(t),null;if(s=(t.flags&128)!==0,x=p.rendering,x===null)if(s)Yu(p,!1);else{if(lr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(x=Np(e),x!==null){for(t.flags|=128,Yu(p,!1),s=x.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)p=i,e=s,p.flags&=14680066,x=p.alternate,x===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,e=x.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return xn(Dn,Dn.current&1|2),t.child}e=e.sibling}p.tail!==null&&Zn()>Oc&&(t.flags|=128,s=!0,Yu(p,!1),t.lanes=4194304)}else{if(!s)if(e=Np(x),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Yu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!x.alternate&&!Pn)return Br(t),null}else 2*Zn()-p.renderingStartTime>Oc&&i!==1073741824&&(t.flags|=128,s=!0,Yu(p,!1),t.lanes=4194304);p.isBackwards?(x.sibling=t.child,t.child=x):(i=p.last,i!==null?i.sibling=x:t.child=x,p.last=x)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Zn(),t.sibling=null,i=Dn.current,xn(Dn,s?i&1|2:i&1),t):(Br(t),null);case 22:case 23:return r0(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Si&1073741824&&(Br(t),t.subtreeFlags&6&&(t.flags|=8192)):Br(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function VI(e,t){switch(B_(t),t.tag){case 1:return fi(t.type)&&Mp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lc(),En(di),En($r),W_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return q_(t),null;case 13:if(En(Dn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));zc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return En(Dn),null;case 4:return Lc(),null;case 10:return U_(t.type._context),null;case 22:case 23:return r0(),null;case 24:return null;default:return null}}var Bf=!1,Fr=!1,GI=typeof WeakSet=="function"?WeakSet:Set,mt=null;function yc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){Un(e,t,s)}else i.current=null}function Rv(e,t,i){try{i()}catch(s){Un(e,t,s)}}var ab=!1;function qI(e,t){if(vv=Cp,e=Y2(),R_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var u=s.anchorOffset,p=s.focusNode;s=s.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var x=0,c=-1,E=-1,C=0,L=0,O=e,R=null;t:for(;;){for(var Q;O!==i||u!==0&&O.nodeType!==3||(c=x+u),O!==p||s!==0&&O.nodeType!==3||(E=x+s),O.nodeType===3&&(x+=O.nodeValue.length),(Q=O.firstChild)!==null;)R=O,O=Q;for(;;){if(O===e)break t;if(R===i&&++C===u&&(c=x),R===p&&++L===s&&(E=x),(Q=O.nextSibling)!==null)break;O=R,R=O.parentNode}O=Q}i=c===-1||E===-1?null:{start:c,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for(_v={focusedElem:e,selectionRange:i},Cp=!1,mt=t;mt!==null;)if(t=mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mt=e;else for(;mt!==null;){t=mt;try{var ie=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var ae=ie.memoizedProps,ye=ie.memoizedState,Y=t.stateNode,V=Y.getSnapshotBeforeUpdate(t.elementType===t.type?ae:ca(t.type,ae),ye);Y.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(ce){Un(t,t.return,ce)}if(e=t.sibling,e!==null){e.return=t.return,mt=e;break}mt=t.return}return ie=ab,ab=!1,ie}function ph(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var p=u.destroy;u.destroy=void 0,p!==void 0&&Rv(t,i,p)}u=u.next}while(u!==s)}}function _m(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function Ov(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function ZE(e){var t=e.alternate;t!==null&&(e.alternate=null,ZE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Oa],delete t[zh],delete t[wv],delete t[CI],delete t[PI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function HE(e){return e.tag===5||e.tag===3||e.tag===4}function ob(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||HE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bv(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ap));else if(s!==4&&(e=e.child,e!==null))for(Bv(e,t,i),e=e.sibling;e!==null;)Bv(e,t,i),e=e.sibling}function Nv(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Nv(e,t,i),e=e.sibling;e!==null;)Nv(e,t,i),e=e.sibling}var Cr=null,ua=!1;function Zo(e,t,i){for(i=i.child;i!==null;)XE(e,t,i),i=i.sibling}function XE(e,t,i){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(hm,i)}catch{}switch(i.tag){case 5:Fr||yc(i,t);case 6:var s=Cr,u=ua;Cr=null,Zo(e,t,i),Cr=s,ua=u,Cr!==null&&(ua?(e=Cr,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Cr.removeChild(i.stateNode));break;case 18:Cr!==null&&(ua?(e=Cr,i=i.stateNode,e.nodeType===8?fy(e.parentNode,i):e.nodeType===1&&fy(e,i),Ch(e)):fy(Cr,i.stateNode));break;case 4:s=Cr,u=ua,Cr=i.stateNode.containerInfo,ua=!0,Zo(e,t,i),Cr=s,ua=u;break;case 0:case 11:case 14:case 15:if(!Fr&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var p=u,x=p.destroy;p=p.tag,x!==void 0&&(p&2||p&4)&&Rv(i,t,x),u=u.next}while(u!==s)}Zo(e,t,i);break;case 1:if(!Fr&&(yc(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(c){Un(i,t,c)}Zo(e,t,i);break;case 21:Zo(e,t,i);break;case 22:i.mode&1?(Fr=(s=Fr)||i.memoizedState!==null,Zo(e,t,i),Fr=s):Zo(e,t,i);break;default:Zo(e,t,i)}}function sb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new GI),t.forEach(function(s){var u=eA.bind(null,e,s);i.has(s)||(i.add(s),s.then(u,u))})}}function oa(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];try{var p=e,x=t,c=x;e:for(;c!==null;){switch(c.tag){case 5:Cr=c.stateNode,ua=!1;break e;case 3:Cr=c.stateNode.containerInfo,ua=!0;break e;case 4:Cr=c.stateNode.containerInfo,ua=!0;break e}c=c.return}if(Cr===null)throw Error(Ue(160));XE(p,x,u),Cr=null,ua=!1;var E=u.alternate;E!==null&&(E.return=null),u.return=null}catch(C){Un(u,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)YE(t,e),t=t.sibling}function YE(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(oa(t,e),Da(e),s&4){try{ph(3,e,e.return),_m(3,e)}catch(ae){Un(e,e.return,ae)}try{ph(5,e,e.return)}catch(ae){Un(e,e.return,ae)}}break;case 1:oa(t,e),Da(e),s&512&&i!==null&&yc(i,i.return);break;case 5:if(oa(t,e),Da(e),s&512&&i!==null&&yc(i,i.return),e.flags&32){var u=e.stateNode;try{Eh(u,"")}catch(ae){Un(e,e.return,ae)}}if(s&4&&(u=e.stateNode,u!=null)){var p=e.memoizedProps,x=i!==null?i.memoizedProps:p,c=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{c==="input"&&p.type==="radio"&&p.name!=null&&y2(u,p),lv(c,x);var C=lv(c,p);for(x=0;x<E.length;x+=2){var L=E[x],O=E[x+1];L==="style"?w2(u,O):L==="dangerouslySetInnerHTML"?x2(u,O):L==="children"?Eh(u,O):w_(u,L,O,C)}switch(c){case"input":rv(u,p);break;case"textarea":v2(u,p);break;case"select":var R=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!p.multiple;var Q=p.value;Q!=null?Ec(u,!!p.multiple,Q,!1):R!==!!p.multiple&&(p.defaultValue!=null?Ec(u,!!p.multiple,p.defaultValue,!0):Ec(u,!!p.multiple,p.multiple?[]:"",!1))}u[zh]=p}catch(ae){Un(e,e.return,ae)}}break;case 6:if(oa(t,e),Da(e),s&4){if(e.stateNode===null)throw Error(Ue(162));u=e.stateNode,p=e.memoizedProps;try{u.nodeValue=p}catch(ae){Un(e,e.return,ae)}}break;case 3:if(oa(t,e),Da(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(ae){Un(e,e.return,ae)}break;case 4:oa(t,e),Da(e);break;case 13:oa(t,e),Da(e),u=e.child,u.flags&8192&&(p=u.memoizedState!==null,u.stateNode.isHidden=p,!p||u.alternate!==null&&u.alternate.memoizedState!==null||(t0=Zn())),s&4&&sb(e);break;case 22:if(L=i!==null&&i.memoizedState!==null,e.mode&1?(Fr=(C=Fr)||L,oa(t,e),Fr=C):oa(t,e),Da(e),s&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!L&&e.mode&1)for(mt=e,L=e.child;L!==null;){for(O=mt=L;mt!==null;){switch(R=mt,Q=R.child,R.tag){case 0:case 11:case 14:case 15:ph(4,R,R.return);break;case 1:yc(R,R.return);var ie=R.stateNode;if(typeof ie.componentWillUnmount=="function"){s=R,i=R.return;try{t=s,ie.props=t.memoizedProps,ie.state=t.memoizedState,ie.componentWillUnmount()}catch(ae){Un(s,i,ae)}}break;case 5:yc(R,R.return);break;case 22:if(R.memoizedState!==null){cb(O);continue}}Q!==null?(Q.return=R,mt=Q):cb(O)}L=L.sibling}e:for(L=null,O=e;;){if(O.tag===5){if(L===null){L=O;try{u=O.stateNode,C?(p=u.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(c=O.stateNode,E=O.memoizedProps.style,x=E!=null&&E.hasOwnProperty("display")?E.display:null,c.style.display=b2("display",x))}catch(ae){Un(e,e.return,ae)}}}else if(O.tag===6){if(L===null)try{O.stateNode.nodeValue=C?"":O.memoizedProps}catch(ae){Un(e,e.return,ae)}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===e)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===e)break e;for(;O.sibling===null;){if(O.return===null||O.return===e)break e;L===O&&(L=null),O=O.return}L===O&&(L=null),O.sibling.return=O.return,O=O.sibling}}break;case 19:oa(t,e),Da(e),s&4&&sb(e);break;case 21:break;default:oa(t,e),Da(e)}}function Da(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(HE(i)){var s=i;break e}i=i.return}throw Error(Ue(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(Eh(u,""),s.flags&=-33);var p=ob(e);Nv(e,p,u);break;case 3:case 4:var x=s.stateNode.containerInfo,c=ob(e);Bv(e,c,x);break;default:throw Error(Ue(161))}}catch(E){Un(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function WI(e,t,i){mt=e,KE(e)}function KE(e,t,i){for(var s=(e.mode&1)!==0;mt!==null;){var u=mt,p=u.child;if(u.tag===22&&s){var x=u.memoizedState!==null||Bf;if(!x){var c=u.alternate,E=c!==null&&c.memoizedState!==null||Fr;c=Bf;var C=Fr;if(Bf=x,(Fr=E)&&!C)for(mt=u;mt!==null;)x=mt,E=x.child,x.tag===22&&x.memoizedState!==null?ub(u):E!==null?(E.return=x,mt=E):ub(u);for(;p!==null;)mt=p,KE(p),p=p.sibling;mt=u,Bf=c,Fr=C}lb(e)}else u.subtreeFlags&8772&&p!==null?(p.return=u,mt=p):lb(e)}}function lb(e){for(;mt!==null;){var t=mt;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fr||_m(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Fr)if(i===null)s.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:ca(t.type,i.memoizedProps);s.componentDidUpdate(u,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&q1(t,p,s);break;case 3:var x=t.updateQueue;if(x!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}q1(t,x,i)}break;case 5:var c=t.stateNode;if(i===null&&t.flags&4){i=c;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&i.focus();break;case"img":E.src&&(i.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var L=C.memoizedState;if(L!==null){var O=L.dehydrated;O!==null&&Ch(O)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}Fr||t.flags&512&&Ov(t)}catch(R){Un(t,t.return,R)}}if(t===e){mt=null;break}if(i=t.sibling,i!==null){i.return=t.return,mt=i;break}mt=t.return}}function cb(e){for(;mt!==null;){var t=mt;if(t===e){mt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,mt=i;break}mt=t.return}}function ub(e){for(;mt!==null;){var t=mt;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{_m(4,t)}catch(E){Un(t,i,E)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(E){Un(t,u,E)}}var p=t.return;try{Ov(t)}catch(E){Un(t,p,E)}break;case 5:var x=t.return;try{Ov(t)}catch(E){Un(t,x,E)}}}catch(E){Un(t,t.return,E)}if(t===e){mt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,mt=c;break}mt=t.return}}var ZI=Math.ceil,Up=xo.ReactCurrentDispatcher,Q_=xo.ReactCurrentOwner,qi=xo.ReactCurrentBatchConfig,tn=0,vr=null,nr=null,Pr=0,Si=0,vc=ws(0),lr=0,Nh=null,xl=0,xm=0,e0=0,mh=null,ui=null,t0=0,Oc=1/0,so=null,jp=!1,Fv=null,hs=null,Nf=!1,rs=null,Vp=0,gh=0,$v=null,mp=-1,gp=0;function ti(){return tn&6?Zn():mp!==-1?mp:mp=Zn()}function ds(e){return e.mode&1?tn&2&&Pr!==0?Pr&-Pr:AI.transition!==null?(gp===0&&(gp=L2()),gp):(e=un,e!==0||(e=window.event,e=e===void 0?16:U2(e.type)),e):1}function ma(e,t,i,s){if(50<gh)throw gh=0,$v=null,Error(Ue(185));Kh(e,i,s),(!(tn&2)||e!==vr)&&(e===vr&&(!(tn&2)&&(xm|=i),lr===4&&ts(e,Pr)),pi(e,s),i===1&&tn===0&&!(t.mode&1)&&(Oc=Zn()+500,gm&&Es()))}function pi(e,t){var i=e.callbackNode;AP(e,t);var s=kp(e,e===vr?Pr:0);if(s===0)i!==null&&_1(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&_1(i),t===1)e.tag===0?II(hb.bind(null,e)):oE(hb.bind(null,e)),TI(function(){!(tn&6)&&Es()}),i=null;else{switch(R2(s)){case 1:i=C_;break;case 4:i=z2;break;case 16:i=Tp;break;case 536870912:i=D2;break;default:i=Tp}i=aS(i,JE.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function JE(e,t){if(mp=-1,gp=0,tn&6)throw Error(Ue(327));var i=e.callbackNode;if(Pc()&&e.callbackNode!==i)return null;var s=kp(e,e===vr?Pr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Gp(e,s);else{t=s;var u=tn;tn|=2;var p=eS();(vr!==e||Pr!==t)&&(so=null,Oc=Zn()+500,ml(e,t));do try{YI();break}catch(c){QE(e,c)}while(1);$_(),Up.current=p,tn=u,nr!==null?t=0:(vr=null,Pr=0,t=lr)}if(t!==0){if(t===2&&(u=fv(e),u!==0&&(s=u,t=Uv(e,u))),t===1)throw i=Nh,ml(e,0),ts(e,s),pi(e,Zn()),i;if(t===6)ts(e,s);else{if(u=e.current.alternate,!(s&30)&&!HI(u)&&(t=Gp(e,s),t===2&&(p=fv(e),p!==0&&(s=p,t=Uv(e,p))),t===1))throw i=Nh,ml(e,0),ts(e,s),pi(e,Zn()),i;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(Ue(345));case 2:ol(e,ui,so);break;case 3:if(ts(e,s),(s&130023424)===s&&(t=t0+500-Zn(),10<t)){if(kp(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){ti(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=bv(ol.bind(null,e,ui,so),t);break}ol(e,ui,so);break;case 4:if(ts(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var x=31-pa(s);p=1<<x,x=t[x],x>u&&(u=x),s&=~p}if(s=u,s=Zn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ZI(s/1960))-s,10<s){e.timeoutHandle=bv(ol.bind(null,e,ui,so),s);break}ol(e,ui,so);break;case 5:ol(e,ui,so);break;default:throw Error(Ue(329))}}}return pi(e,Zn()),e.callbackNode===i?JE.bind(null,e):null}function Uv(e,t){var i=mh;return e.current.memoizedState.isDehydrated&&(ml(e,t).flags|=256),e=Gp(e,t),e!==2&&(t=ui,ui=i,t!==null&&jv(t)),e}function jv(e){ui===null?ui=e:ui.push.apply(ui,e)}function HI(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var u=i[s],p=u.getSnapshot;u=u.value;try{if(!ga(p(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ts(e,t){for(t&=~e0,t&=~xm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-pa(t),s=1<<i;e[i]=-1,t&=~s}}function hb(e){if(tn&6)throw Error(Ue(327));Pc();var t=kp(e,0);if(!(t&1))return pi(e,Zn()),null;var i=Gp(e,t);if(e.tag!==0&&i===2){var s=fv(e);s!==0&&(t=s,i=Uv(e,s))}if(i===1)throw i=Nh,ml(e,0),ts(e,t),pi(e,Zn()),i;if(i===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ol(e,ui,so),pi(e,Zn()),null}function n0(e,t){var i=tn;tn|=1;try{return e(t)}finally{tn=i,tn===0&&(Oc=Zn()+500,gm&&Es())}}function bl(e){rs!==null&&rs.tag===0&&!(tn&6)&&Pc();var t=tn;tn|=1;var i=qi.transition,s=un;try{if(qi.transition=null,un=1,e)return e()}finally{un=s,qi.transition=i,tn=t,!(tn&6)&&Es()}}function r0(){Si=vc.current,En(vc)}function ml(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,SI(i)),nr!==null)for(i=nr.return;i!==null;){var s=i;switch(B_(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Mp();break;case 3:Lc(),En(di),En($r),W_();break;case 5:q_(s);break;case 4:Lc();break;case 13:En(Dn);break;case 19:En(Dn);break;case 10:U_(s.type._context);break;case 22:case 23:r0()}i=i.return}if(vr=e,nr=e=fs(e.current,null),Pr=Si=t,lr=0,Nh=null,e0=xm=xl=0,ui=mh=null,cl!==null){for(t=0;t<cl.length;t++)if(i=cl[t],s=i.interleaved,s!==null){i.interleaved=null;var u=s.next,p=i.pending;if(p!==null){var x=p.next;p.next=u,s.next=x}i.pending=s}cl=null}return e}function QE(e,t){do{var i=nr;try{if($_(),dp.current=$p,Fp){for(var s=Ln.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Fp=!1}if(_l=0,yr=sr=Ln=null,fh=!1,Rh=0,Q_.current=null,i===null||i.return===null){lr=1,Nh=t,nr=null;break}e:{var p=e,x=i.return,c=i,E=t;if(t=Pr,c.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var C=E,L=c,O=L.tag;if(!(L.mode&1)&&(O===0||O===11||O===15)){var R=L.alternate;R?(L.updateQueue=R.updateQueue,L.memoizedState=R.memoizedState,L.lanes=R.lanes):(L.updateQueue=null,L.memoizedState=null)}var Q=J1(x);if(Q!==null){Q.flags&=-257,Q1(Q,x,c,p,t),Q.mode&1&&K1(p,C,t),t=Q,E=C;var ie=t.updateQueue;if(ie===null){var ae=new Set;ae.add(E),t.updateQueue=ae}else ie.add(E);break e}else{if(!(t&1)){K1(p,C,t),i0();break e}E=Error(Ue(426))}}else if(Pn&&c.mode&1){var ye=J1(x);if(ye!==null){!(ye.flags&65536)&&(ye.flags|=256),Q1(ye,x,c,p,t),N_(Rc(E,c));break e}}p=E=Rc(E,c),lr!==4&&(lr=2),mh===null?mh=[p]:mh.push(p),p=x;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var Y=OE(p,E,t);G1(p,Y);break e;case 1:c=E;var V=p.type,H=p.stateNode;if(!(p.flags&128)&&(typeof V.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(hs===null||!hs.has(H)))){p.flags|=65536,t&=-t,p.lanes|=t;var ce=BE(p,c,t);G1(p,ce);break e}}p=p.return}while(p!==null)}nS(i)}catch(xe){t=xe,nr===i&&i!==null&&(nr=i=i.return);continue}break}while(1)}function eS(){var e=Up.current;return Up.current=$p,e===null?$p:e}function i0(){(lr===0||lr===3||lr===2)&&(lr=4),vr===null||!(xl&268435455)&&!(xm&268435455)||ts(vr,Pr)}function Gp(e,t){var i=tn;tn|=2;var s=eS();(vr!==e||Pr!==t)&&(so=null,ml(e,t));do try{XI();break}catch(u){QE(e,u)}while(1);if($_(),tn=i,Up.current=s,nr!==null)throw Error(Ue(261));return vr=null,Pr=0,lr}function XI(){for(;nr!==null;)tS(nr)}function YI(){for(;nr!==null&&!bP();)tS(nr)}function tS(e){var t=iS(e.alternate,e,Si);e.memoizedProps=e.pendingProps,t===null?nS(e):nr=t,Q_.current=null}function nS(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=VI(i,t),i!==null){i.flags&=32767,nr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{lr=6,nr=null;return}}else if(i=jI(i,t,Si),i!==null){nr=i;return}if(t=t.sibling,t!==null){nr=t;return}nr=t=e}while(t!==null);lr===0&&(lr=5)}function ol(e,t,i){var s=un,u=qi.transition;try{qi.transition=null,un=1,KI(e,t,i,s)}finally{qi.transition=u,un=s}return null}function KI(e,t,i,s){do Pc();while(rs!==null);if(tn&6)throw Error(Ue(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(MP(e,p),e===vr&&(nr=vr=null,Pr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Nf||(Nf=!0,aS(Tp,function(){return Pc(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=qi.transition,qi.transition=null;var x=un;un=1;var c=tn;tn|=4,Q_.current=null,qI(e,i),YE(i,e),yI(_v),Cp=!!vv,_v=vv=null,e.current=i,WI(i),wP(),tn=c,un=x,qi.transition=p}else e.current=i;if(Nf&&(Nf=!1,rs=e,Vp=u),p=e.pendingLanes,p===0&&(hs=null),TP(i.stateNode),pi(e,Zn()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],s(u.value,{componentStack:u.stack,digest:u.digest});if(jp)throw jp=!1,e=Fv,Fv=null,e;return Vp&1&&e.tag!==0&&Pc(),p=e.pendingLanes,p&1?e===$v?gh++:(gh=0,$v=e):gh=0,Es(),null}function Pc(){if(rs!==null){var e=R2(Vp),t=qi.transition,i=un;try{if(qi.transition=null,un=16>e?16:e,rs===null)var s=!1;else{if(e=rs,rs=null,Vp=0,tn&6)throw Error(Ue(331));var u=tn;for(tn|=4,mt=e.current;mt!==null;){var p=mt,x=p.child;if(mt.flags&16){var c=p.deletions;if(c!==null){for(var E=0;E<c.length;E++){var C=c[E];for(mt=C;mt!==null;){var L=mt;switch(L.tag){case 0:case 11:case 15:ph(8,L,p)}var O=L.child;if(O!==null)O.return=L,mt=O;else for(;mt!==null;){L=mt;var R=L.sibling,Q=L.return;if(ZE(L),L===C){mt=null;break}if(R!==null){R.return=Q,mt=R;break}mt=Q}}}var ie=p.alternate;if(ie!==null){var ae=ie.child;if(ae!==null){ie.child=null;do{var ye=ae.sibling;ae.sibling=null,ae=ye}while(ae!==null)}}mt=p}}if(p.subtreeFlags&2064&&x!==null)x.return=p,mt=x;else e:for(;mt!==null;){if(p=mt,p.flags&2048)switch(p.tag){case 0:case 11:case 15:ph(9,p,p.return)}var Y=p.sibling;if(Y!==null){Y.return=p.return,mt=Y;break e}mt=p.return}}var V=e.current;for(mt=V;mt!==null;){x=mt;var H=x.child;if(x.subtreeFlags&2064&&H!==null)H.return=x,mt=H;else e:for(x=V;mt!==null;){if(c=mt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:_m(9,c)}}catch(xe){Un(c,c.return,xe)}if(c===x){mt=null;break e}var ce=c.sibling;if(ce!==null){ce.return=c.return,mt=ce;break e}mt=c.return}}if(tn=u,Es(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(hm,e)}catch{}s=!0}return s}finally{un=i,qi.transition=t}}return!1}function db(e,t,i){t=Rc(i,t),t=OE(e,t,1),e=us(e,t,1),t=ti(),e!==null&&(Kh(e,1,t),pi(e,t))}function Un(e,t,i){if(e.tag===3)db(e,e,i);else for(;t!==null;){if(t.tag===3){db(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(hs===null||!hs.has(s))){e=Rc(i,e),e=BE(t,e,1),t=us(t,e,1),e=ti(),t!==null&&(Kh(t,1,e),pi(t,e));break}}t=t.return}}function JI(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=ti(),e.pingedLanes|=e.suspendedLanes&i,vr===e&&(Pr&i)===i&&(lr===4||lr===3&&(Pr&130023424)===Pr&&500>Zn()-t0?ml(e,0):e0|=i),pi(e,t)}function rS(e,t){t===0&&(e.mode&1?(t=Pf,Pf<<=1,!(Pf&130023424)&&(Pf=4194304)):t=1);var i=ti();e=mo(e,t),e!==null&&(Kh(e,t,i),pi(e,i))}function QI(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),rS(e,i)}function eA(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Ue(314))}s!==null&&s.delete(t),rS(e,i)}var iS;iS=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||di.current)hi=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return hi=!1,UI(e,t,i);hi=!!(e.flags&131072)}else hi=!1,Pn&&t.flags&1048576&&sE(t,Lp,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;pp(e,t),e=t.pendingProps;var u=Mc(t,$r.current);Cc(t,i),u=H_(null,t,s,e,u,i);var p=X_();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fi(s)?(p=!0,zp(t)):p=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,V_(t),u.updater=ym,t.stateNode=u,u._reactInternals=t,Pv(t,s,e,i),t=Mv(null,t,s,!0,p,i)):(t.tag=0,Pn&&p&&O_(t),Qr(null,t,u,i),t=t.child),t;case 16:s=t.elementType;e:{switch(pp(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=nA(s),e=ca(s,e),u){case 0:t=Av(null,t,s,e,i);break e;case 1:t=nb(null,t,s,e,i);break e;case 11:t=eb(null,t,s,e,i);break e;case 14:t=tb(null,t,s,ca(s.type,e),i);break e}throw Error(Ue(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ca(s,u),Av(e,t,s,u,i);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ca(s,u),nb(e,t,s,u,i);case 3:e:{if(UE(t),e===null)throw Error(Ue(387));s=t.pendingProps,p=t.memoizedState,u=p.element,hE(e,t),Bp(t,s,null,i);var x=t.memoizedState;if(s=x.element,p.isDehydrated)if(p={element:s,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){u=Rc(Error(Ue(423)),t),t=rb(e,t,s,i,u);break e}else if(s!==u){u=Rc(Error(Ue(424)),t),t=rb(e,t,s,i,u);break e}else for(ki=cs(t.stateNode.containerInfo.firstChild),Pi=t,Pn=!0,da=null,i=mE(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(zc(),s===u){t=go(e,t,i);break e}Qr(e,t,s,i)}t=t.child}return t;case 5:return gE(t),e===null&&Tv(t),s=t.type,u=t.pendingProps,p=e!==null?e.memoizedProps:null,x=u.children,xv(s,u)?x=null:p!==null&&xv(s,p)&&(t.flags|=32),$E(e,t),Qr(e,t,x,i),t.child;case 6:return e===null&&Tv(t),null;case 13:return jE(e,t,i);case 4:return G_(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Dc(t,null,s,i):Qr(e,t,s,i),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ca(s,u),eb(e,t,s,u,i);case 7:return Qr(e,t,t.pendingProps,i),t.child;case 8:return Qr(e,t,t.pendingProps.children,i),t.child;case 12:return Qr(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,p=t.memoizedProps,x=u.value,xn(Rp,s._currentValue),s._currentValue=x,p!==null)if(ga(p.value,x)){if(p.children===u.children&&!di.current){t=go(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var c=p.dependencies;if(c!==null){x=p.child;for(var E=c.firstContext;E!==null;){if(E.context===s){if(p.tag===1){E=ho(-1,i&-i),E.tag=2;var C=p.updateQueue;if(C!==null){C=C.shared;var L=C.pending;L===null?E.next=E:(E.next=L.next,L.next=E),C.pending=E}}p.lanes|=i,E=p.alternate,E!==null&&(E.lanes|=i),kv(p.return,i,t),c.lanes|=i;break}E=E.next}}else if(p.tag===10)x=p.type===t.type?null:p.child;else if(p.tag===18){if(x=p.return,x===null)throw Error(Ue(341));x.lanes|=i,c=x.alternate,c!==null&&(c.lanes|=i),kv(x,i,t),x=p.sibling}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===t){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}Qr(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,Cc(t,i),u=Wi(u),s=s(u),t.flags|=1,Qr(e,t,s,i),t.child;case 14:return s=t.type,u=ca(s,t.pendingProps),u=ca(s.type,u),tb(e,t,s,u,i);case 15:return NE(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:ca(s,u),pp(e,t),t.tag=1,fi(s)?(e=!0,zp(t)):e=!1,Cc(t,i),fE(t,s,u),Pv(t,s,u,i),Mv(null,t,s,!0,e,i);case 19:return VE(e,t,i);case 22:return FE(e,t,i)}throw Error(Ue(156,t.tag))};function aS(e,t){return M2(e,t)}function tA(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(e,t,i,s){return new tA(e,t,i,s)}function a0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nA(e){if(typeof e=="function")return a0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===S_)return 11;if(e===T_)return 14}return 2}function fs(e,t){var i=e.alternate;return i===null?(i=Gi(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function yp(e,t,i,s,u,p){var x=2;if(s=e,typeof e=="function")a0(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case lc:return gl(i.children,u,p,t);case E_:x=8,u|=8;break;case Jy:return e=Gi(12,i,t,u|2),e.elementType=Jy,e.lanes=p,e;case Qy:return e=Gi(13,i,t,u),e.elementType=Qy,e.lanes=p,e;case ev:return e=Gi(19,i,t,u),e.elementType=ev,e.lanes=p,e;case p2:return bm(i,u,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case d2:x=10;break e;case f2:x=9;break e;case S_:x=11;break e;case T_:x=14;break e;case Jo:x=16,s=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=Gi(x,i,t,u),t.elementType=e,t.type=s,t.lanes=p,t}function gl(e,t,i,s){return e=Gi(7,e,s,t),e.lanes=i,e}function bm(e,t,i,s){return e=Gi(22,e,s,t),e.elementType=p2,e.lanes=i,e.stateNode={isHidden:!1},e}function by(e,t,i){return e=Gi(6,e,null,t),e.lanes=i,e}function wy(e,t,i){return t=Gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rA(e,t,i,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ny(0),this.expirationTimes=ny(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ny(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function o0(e,t,i,s,u,p,x,c,E){return e=new rA(e,t,i,c,E),t===1?(t=1,p===!0&&(t|=8)):t=0,p=Gi(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},V_(p),e}function iA(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function oS(e){if(!e)return gs;e=e._reactInternals;e:{if(Tl(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var i=e.type;if(fi(i))return aE(e,i,t)}return t}function sS(e,t,i,s,u,p,x,c,E){return e=o0(i,s,!0,e,u,p,x,c,E),e.context=oS(null),i=e.current,s=ti(),u=ds(i),p=ho(s,u),p.callback=t??null,us(i,p,u),e.current.lanes=u,Kh(e,u,s),pi(e,s),e}function wm(e,t,i,s){var u=t.current,p=ti(),x=ds(u);return i=oS(i),t.context===null?t.context=i:t.pendingContext=i,t=ho(p,x),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=us(u,t,x),e!==null&&(ma(e,u,x,p),hp(e,u,x)),x}function qp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function s0(e,t){fb(e,t),(e=e.alternate)&&fb(e,t)}function aA(){return null}var lS=typeof reportError=="function"?reportError:function(e){console.error(e)};function l0(e){this._internalRoot=e}Em.prototype.render=l0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));wm(e,t,null,null)};Em.prototype.unmount=l0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bl(function(){wm(null,e,null,null)}),t[po]=null}};function Em(e){this._internalRoot=e}Em.prototype.unstable_scheduleHydration=function(e){if(e){var t=N2();e={blockedOn:null,target:e,priority:t};for(var i=0;i<es.length&&t!==0&&t<es[i].priority;i++);es.splice(i,0,e),i===0&&$2(e)}};function c0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pb(){}function oA(e,t,i,s,u){if(u){if(typeof s=="function"){var p=s;s=function(){var C=qp(x);p.call(C)}}var x=sS(t,s,e,0,null,!1,!1,"",pb);return e._reactRootContainer=x,e[po]=x.current,Ah(e.nodeType===8?e.parentNode:e),bl(),x}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var c=s;s=function(){var C=qp(E);c.call(C)}}var E=o0(e,0,!1,null,null,!1,!1,"",pb);return e._reactRootContainer=E,e[po]=E.current,Ah(e.nodeType===8?e.parentNode:e),bl(function(){wm(t,E,i,s)}),E}function Tm(e,t,i,s,u){var p=i._reactRootContainer;if(p){var x=p;if(typeof u=="function"){var c=u;u=function(){var E=qp(x);c.call(E)}}wm(t,x,e,u)}else x=oA(i,t,e,u,s);return qp(x)}O2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ah(t.pendingLanes);i!==0&&(P_(t,i|1),pi(t,Zn()),!(tn&6)&&(Oc=Zn()+500,Es()))}break;case 13:bl(function(){var s=mo(e,1);if(s!==null){var u=ti();ma(s,e,1,u)}}),s0(e,1)}};I_=function(e){if(e.tag===13){var t=mo(e,134217728);if(t!==null){var i=ti();ma(t,e,134217728,i)}s0(e,134217728)}};B2=function(e){if(e.tag===13){var t=ds(e),i=mo(e,t);if(i!==null){var s=ti();ma(i,e,t,s)}s0(e,t)}};N2=function(){return un};F2=function(e,t){var i=un;try{return un=e,t()}finally{un=i}};uv=function(e,t,i){switch(t){case"input":if(rv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var u=mm(s);if(!u)throw Error(Ue(90));g2(s),rv(s,u)}}}break;case"textarea":v2(e,i);break;case"select":t=i.value,t!=null&&Ec(e,!!i.multiple,t,!1)}};T2=n0;k2=bl;var sA={usingClientEntryPoint:!1,Events:[Qh,dc,mm,E2,S2,n0]},Ku={findFiberByHostInstance:ll,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lA={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=I2(e),e===null?null:e.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||aA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ff.isDisabled&&Ff.supportsFiber)try{hm=Ff.inject(lA),Na=Ff}catch{}}Ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sA;Ai.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c0(t))throw Error(Ue(200));return iA(e,t,null,i)};Ai.createRoot=function(e,t){if(!c0(e))throw Error(Ue(299));var i=!1,s="",u=lS;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=o0(e,1,!1,null,null,i,!1,s,u),e[po]=t.current,Ah(e.nodeType===8?e.parentNode:e),new l0(t)};Ai.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=I2(t),e=e===null?null:e.stateNode,e};Ai.flushSync=function(e){return bl(e)};Ai.hydrate=function(e,t,i){if(!Sm(t))throw Error(Ue(200));return Tm(null,e,t,!0,i)};Ai.hydrateRoot=function(e,t,i){if(!c0(e))throw Error(Ue(405));var s=i!=null&&i.hydratedSources||null,u=!1,p="",x=lS;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),t=sS(t,null,e,1,i??null,u,!1,p,x),e[po]=t.current,Ah(e),s)for(e=0;e<s.length;e++)i=s[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new Em(t)};Ai.render=function(e,t,i){if(!Sm(t))throw Error(Ue(200));return Tm(null,e,t,!1,i)};Ai.unmountComponentAtNode=function(e){if(!Sm(e))throw Error(Ue(40));return e._reactRootContainer?(bl(function(){Tm(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0):!1};Ai.unstable_batchedUpdates=n0;Ai.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!Sm(i))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return Tm(e,t,i,!1,s)};Ai.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=Ai})(aP);var mb=bp;c1.createRoot=mb.createRoot,c1.hydrateRoot=mb.hydrateRoot;/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Fh.apply(this,arguments)}var is;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(is||(is={}));const gb="popstate";function cA(e){e===void 0&&(e={});function t(s,u){let{pathname:p,search:x,hash:c}=s.location;return Vv("",{pathname:p,search:x,hash:c},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(s,u){return typeof u=="string"?u:Wp(u)}return hA(t,i,null,e)}function cr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function u0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uA(){return Math.random().toString(36).substr(2,8)}function yb(e,t){return{usr:e.state,key:e.key,idx:t}}function Vv(e,t,i,s){return i===void 0&&(i=null),Fh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Uc(t):t,{state:i,key:t&&t.key||s||uA()})}function Wp(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Uc(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function hA(e,t,i,s){s===void 0&&(s={});let{window:u=document.defaultView,v5Compat:p=!1}=s,x=u.history,c=is.Pop,E=null,C=L();C==null&&(C=0,x.replaceState(Fh({},x.state,{idx:C}),""));function L(){return(x.state||{idx:null}).idx}function O(){c=is.Pop;let ye=L(),Y=ye==null?null:ye-C;C=ye,E&&E({action:c,location:ae.location,delta:Y})}function R(ye,Y){c=is.Push;let V=Vv(ae.location,ye,Y);i&&i(V,ye),C=L()+1;let H=yb(V,C),ce=ae.createHref(V);try{x.pushState(H,"",ce)}catch{u.location.assign(ce)}p&&E&&E({action:c,location:ae.location,delta:1})}function Q(ye,Y){c=is.Replace;let V=Vv(ae.location,ye,Y);i&&i(V,ye),C=L();let H=yb(V,C),ce=ae.createHref(V);x.replaceState(H,"",ce),p&&E&&E({action:c,location:ae.location,delta:0})}function ie(ye){let Y=u.location.origin!=="null"?u.location.origin:u.location.href,V=typeof ye=="string"?ye:Wp(ye);return cr(Y,"No window.location.(origin|href) available to create URL for href: "+V),new URL(V,Y)}let ae={get action(){return c},get location(){return e(u,x)},listen(ye){if(E)throw new Error("A history only accepts one active listener");return u.addEventListener(gb,O),E=ye,()=>{u.removeEventListener(gb,O),E=null}},createHref(ye){return t(u,ye)},createURL:ie,encodeLocation(ye){let Y=ie(ye);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:R,replace:Q,go(ye){return x.go(ye)}};return ae}var vb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vb||(vb={}));function dA(e,t,i){i===void 0&&(i="/");let s=typeof t=="string"?Uc(t):t,u=h0(s.pathname||"/",i);if(u==null)return null;let p=cS(e);fA(p);let x=null;for(let c=0;x==null&&c<p.length;++c)x=wA(p[c],TA(u));return x}function cS(e,t,i,s){t===void 0&&(t=[]),i===void 0&&(i=[]),s===void 0&&(s="");let u=(p,x,c)=>{let E={relativePath:c===void 0?p.path||"":c,caseSensitive:p.caseSensitive===!0,childrenIndex:x,route:p};E.relativePath.startsWith("/")&&(cr(E.relativePath.startsWith(s),'Absolute route path "'+E.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),E.relativePath=E.relativePath.slice(s.length));let C=ps([s,E.relativePath]),L=i.concat(E);p.children&&p.children.length>0&&(cr(p.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+C+'".')),cS(p.children,t,L,C)),!(p.path==null&&!p.index)&&t.push({path:C,score:xA(C,p.index),routesMeta:L})};return e.forEach((p,x)=>{var c;if(p.path===""||!((c=p.path)!=null&&c.includes("?")))u(p,x);else for(let E of uS(p.path))u(p,x,E)}),t}function uS(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,u=i.endsWith("?"),p=i.replace(/\?$/,"");if(s.length===0)return u?[p,""]:[p];let x=uS(s.join("/")),c=[];return c.push(...x.map(E=>E===""?p:[p,E].join("/"))),u&&c.push(...x),c.map(E=>e.startsWith("/")&&E===""?"/":E)}function fA(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:bA(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}const pA=/^:\w+$/,mA=3,gA=2,yA=1,vA=10,_A=-2,_b=e=>e==="*";function xA(e,t){let i=e.split("/"),s=i.length;return i.some(_b)&&(s+=_A),t&&(s+=gA),i.filter(u=>!_b(u)).reduce((u,p)=>u+(pA.test(p)?mA:p===""?yA:vA),s)}function bA(e,t){return e.length===t.length&&e.slice(0,-1).every((s,u)=>s===t[u])?e[e.length-1]-t[t.length-1]:0}function wA(e,t){let{routesMeta:i}=e,s={},u="/",p=[];for(let x=0;x<i.length;++x){let c=i[x],E=x===i.length-1,C=u==="/"?t:t.slice(u.length)||"/",L=EA({path:c.relativePath,caseSensitive:c.caseSensitive,end:E},C);if(!L)return null;Object.assign(s,L.params);let O=c.route;p.push({params:s,pathname:ps([u,L.pathname]),pathnameBase:IA(ps([u,L.pathnameBase])),route:O}),L.pathnameBase!=="/"&&(u=ps([u,L.pathnameBase]))}return p}function EA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=SA(e.path,e.caseSensitive,e.end),u=t.match(i);if(!u)return null;let p=u[0],x=p.replace(/(.)\/+$/,"$1"),c=u.slice(1);return{params:s.reduce((C,L,O)=>{if(L==="*"){let R=c[O]||"";x=p.slice(0,p.length-R.length).replace(/(.)\/+$/,"$1")}return C[L]=kA(c[O]||"",L),C},{}),pathname:p,pathnameBase:x,pattern:e}}function SA(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),u0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(x,c)=>(s.push(c),"/([^\\/]+)"));return e.endsWith("*")?(s.push("*"),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),s]}function TA(e){try{return decodeURI(e)}catch(t){return u0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kA(e,t){try{return decodeURIComponent(e)}catch(i){return u0(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function h0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function CA(e,t){t===void 0&&(t="/");let{pathname:i,search:s="",hash:u=""}=typeof e=="string"?Uc(e):e;return{pathname:i?i.startsWith("/")?i:PA(i,t):t,search:AA(s),hash:MA(u)}}function PA(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function Ey(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hS(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function dS(e,t,i,s){s===void 0&&(s=!1);let u;typeof e=="string"?u=Uc(e):(u=Fh({},e),cr(!u.pathname||!u.pathname.includes("?"),Ey("?","pathname","search",u)),cr(!u.pathname||!u.pathname.includes("#"),Ey("#","pathname","hash",u)),cr(!u.search||!u.search.includes("#"),Ey("#","search","hash",u)));let p=e===""||u.pathname==="",x=p?"/":u.pathname,c;if(s||x==null)c=i;else{let O=t.length-1;if(x.startsWith("..")){let R=x.split("/");for(;R[0]==="..";)R.shift(),O-=1;u.pathname=R.join("/")}c=O>=0?t[O]:"/"}let E=CA(u,c),C=x&&x!=="/"&&x.endsWith("/"),L=(p||x===".")&&i.endsWith("/");return!E.pathname.endsWith("/")&&(C||L)&&(E.pathname+="/"),E}const ps=e=>e.join("/").replace(/\/\/+/g,"/"),IA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const LA=typeof Object.is=="function"?Object.is:DA,{useState:RA,useEffect:OA,useLayoutEffect:BA,useDebugValue:NA}=Xy;function FA(e,t,i){const s=t(),[{inst:u},p]=RA({inst:{value:s,getSnapshot:t}});return BA(()=>{u.value=s,u.getSnapshot=t,Sy(u)&&p({inst:u})},[e,s,t]),OA(()=>(Sy(u)&&p({inst:u}),e(()=>{Sy(u)&&p({inst:u})})),[e]),NA(s),s}function Sy(e){const t=e.getSnapshot,i=e.value;try{const s=t();return!LA(i,s)}catch{return!0}}function $A(e,t,i){return t()}const UA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jA=!UA,VA=jA?$A:FA;"useSyncExternalStore"in Xy&&(e=>e.useSyncExternalStore)(Xy);const fS=Ie.createContext(null),d0=Ie.createContext(null),jc=Ie.createContext(null),km=Ie.createContext(null),kl=Ie.createContext({outlet:null,matches:[]}),pS=Ie.createContext(null);function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Gv.apply(this,arguments)}function GA(e,t){let{relative:i}=t===void 0?{}:t;td()||cr(!1);let{basename:s,navigator:u}=Ie.useContext(jc),{hash:p,pathname:x,search:c}=f0(e,{relative:i}),E=x;return s!=="/"&&(E=x==="/"?s:ps([s,x])),u.createHref({pathname:E,search:c,hash:p})}function td(){return Ie.useContext(km)!=null}function nd(){return td()||cr(!1),Ie.useContext(km).location}function qA(){td()||cr(!1);let{basename:e,navigator:t}=Ie.useContext(jc),{matches:i}=Ie.useContext(kl),{pathname:s}=nd(),u=JSON.stringify(hS(i).map(c=>c.pathnameBase)),p=Ie.useRef(!1);return Ie.useEffect(()=>{p.current=!0}),Ie.useCallback(function(c,E){if(E===void 0&&(E={}),!p.current)return;if(typeof c=="number"){t.go(c);return}let C=dS(c,JSON.parse(u),s,E.relative==="path");e!=="/"&&(C.pathname=C.pathname==="/"?e:ps([e,C.pathname])),(E.replace?t.replace:t.push)(C,E.state,E)},[e,t,u,s])}const WA=Ie.createContext(null);function ZA(e){let t=Ie.useContext(kl).outlet;return t&&Ie.createElement(WA.Provider,{value:e},t)}function f0(e,t){let{relative:i}=t===void 0?{}:t,{matches:s}=Ie.useContext(kl),{pathname:u}=nd(),p=JSON.stringify(hS(s).map(x=>x.pathnameBase));return Ie.useMemo(()=>dS(e,JSON.parse(p),u,i==="path"),[e,p,u,i])}function HA(e,t){td()||cr(!1);let{navigator:i}=Ie.useContext(jc),s=Ie.useContext(d0),{matches:u}=Ie.useContext(kl),p=u[u.length-1],x=p?p.params:{};p&&p.pathname;let c=p?p.pathnameBase:"/";p&&p.route;let E=nd(),C;if(t){var L;let ae=typeof t=="string"?Uc(t):t;c==="/"||(L=ae.pathname)!=null&&L.startsWith(c)||cr(!1),C=ae}else C=E;let O=C.pathname||"/",R=c==="/"?O:O.slice(c.length)||"/",Q=dA(e,{pathname:R}),ie=JA(Q&&Q.map(ae=>Object.assign({},ae,{params:Object.assign({},x,ae.params),pathname:ps([c,i.encodeLocation?i.encodeLocation(ae.pathname).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?c:ps([c,i.encodeLocation?i.encodeLocation(ae.pathnameBase).pathname:ae.pathnameBase])})),u,s||void 0);return t&&ie?Ie.createElement(km.Provider,{value:{location:Gv({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:is.Pop}},ie):ie}function XA(){let e=nM(),t=zA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},p=null;return Ie.createElement(Ie.Fragment,null,Ie.createElement("h2",null,"Unexpected Application Error!"),Ie.createElement("h3",{style:{fontStyle:"italic"}},t),i?Ie.createElement("pre",{style:u},i):null,p)}class YA extends Ie.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location?{error:t.error,location:t.location}:{error:t.error||i.error,location:i.location}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error?Ie.createElement(kl.Provider,{value:this.props.routeContext},Ie.createElement(pS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KA(e){let{routeContext:t,match:i,children:s}=e,u=Ie.useContext(fS);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),Ie.createElement(kl.Provider,{value:t},s)}function JA(e,t,i){if(t===void 0&&(t=[]),e==null)if(i!=null&&i.errors)e=i.matches;else return null;let s=e,u=i==null?void 0:i.errors;if(u!=null){let p=s.findIndex(x=>x.route.id&&(u==null?void 0:u[x.route.id]));p>=0||cr(!1),s=s.slice(0,Math.min(s.length,p+1))}return s.reduceRight((p,x,c)=>{let E=x.route.id?u==null?void 0:u[x.route.id]:null,C=null;i&&(x.route.ErrorBoundary?C=Ie.createElement(x.route.ErrorBoundary,null):x.route.errorElement?C=x.route.errorElement:C=Ie.createElement(XA,null));let L=t.concat(s.slice(0,c+1)),O=()=>{let R=p;return E?R=C:x.route.Component?R=Ie.createElement(x.route.Component,null):x.route.element&&(R=x.route.element),Ie.createElement(KA,{match:x,routeContext:{outlet:p,matches:L},children:R})};return i&&(x.route.ErrorBoundary||x.route.errorElement||c===0)?Ie.createElement(YA,{location:i.location,component:C,error:E,children:O(),routeContext:{outlet:null,matches:L}}):O()},null)}var xb;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(xb||(xb={}));var Zp;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Zp||(Zp={}));function QA(e){let t=Ie.useContext(d0);return t||cr(!1),t}function eM(e){let t=Ie.useContext(kl);return t||cr(!1),t}function tM(e){let t=eM(),i=t.matches[t.matches.length-1];return i.route.id||cr(!1),i.route.id}function nM(){var e;let t=Ie.useContext(pS),i=QA(Zp.UseRouteError),s=tM(Zp.UseRouteError);return t||((e=i.errors)==null?void 0:e[s])}function rN(e){return ZA(e.context)}function rM(e){cr(!1)}function iM(e){let{basename:t="/",children:i=null,location:s,navigationType:u=is.Pop,navigator:p,static:x=!1}=e;td()&&cr(!1);let c=t.replace(/^\/*/,"/"),E=Ie.useMemo(()=>({basename:c,navigator:p,static:x}),[c,p,x]);typeof s=="string"&&(s=Uc(s));let{pathname:C="/",search:L="",hash:O="",state:R=null,key:Q="default"}=s,ie=Ie.useMemo(()=>{let ae=h0(C,c);return ae==null?null:{location:{pathname:ae,search:L,hash:O,state:R,key:Q},navigationType:u}},[c,C,L,O,R,Q,u]);return ie==null?null:Ie.createElement(jc.Provider,{value:E},Ie.createElement(km.Provider,{children:i,value:ie}))}function iN(e){let{children:t,location:i}=e,s=Ie.useContext(fS),u=s&&!t?s.router.routes:qv(t);return HA(u,i)}var bb;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(bb||(bb={}));new Promise(()=>{});function qv(e,t){t===void 0&&(t=[]);let i=[];return Ie.Children.forEach(e,(s,u)=>{if(!Ie.isValidElement(s))return;if(s.type===Ie.Fragment){i.push.apply(i,qv(s.props.children,t));return}s.type!==rM&&cr(!1),!s.props.index||!s.props.children||cr(!1);let p=[...t,u],x={id:s.props.id||p.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(x.children=qv(s.props.children,p)),i.push(x)}),i}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Hp.apply(this,arguments)}function mS(e,t){if(e==null)return{};var i={},s=Object.keys(e),u,p;for(p=0;p<s.length;p++)u=s[p],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function aM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oM(e,t){return e.button===0&&(!t||t==="_self")&&!aM(e)}const sM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],lM=["aria-current","caseSensitive","className","end","style","to","children"];function aN(e){let{basename:t,children:i,window:s}=e,u=Ie.useRef();u.current==null&&(u.current=cA({window:s,v5Compat:!0}));let p=u.current,[x,c]=Ie.useState({action:p.action,location:p.location});return Ie.useLayoutEffect(()=>p.listen(c),[p]),Ie.createElement(iM,{basename:t,children:i,location:x.location,navigationType:x.action,navigator:p})}const cM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hM=Ie.forwardRef(function(t,i){let{onClick:s,relative:u,reloadDocument:p,replace:x,state:c,target:E,to:C,preventScrollReset:L}=t,O=mS(t,sM),{basename:R}=Ie.useContext(jc),Q,ie=!1;if(typeof C=="string"&&uM.test(C)&&(Q=C,cM)){let V=new URL(window.location.href),H=C.startsWith("//")?new URL(V.protocol+C):new URL(C),ce=h0(H.pathname,R);H.origin===V.origin&&ce!=null?C=ce+H.search+H.hash:ie=!0}let ae=GA(C,{relative:u}),ye=dM(C,{replace:x,state:c,target:E,preventScrollReset:L,relative:u});function Y(V){s&&s(V),V.defaultPrevented||ye(V)}return Ie.createElement("a",Hp({},O,{href:Q||ae,onClick:ie||p?s:Y,ref:i,target:E}))}),oN=Ie.forwardRef(function(t,i){let{"aria-current":s="page",caseSensitive:u=!1,className:p="",end:x=!1,style:c,to:E,children:C}=t,L=mS(t,lM),O=f0(E,{relative:L.relative}),R=nd(),Q=Ie.useContext(d0),{navigator:ie}=Ie.useContext(jc),ae=ie.encodeLocation?ie.encodeLocation(O).pathname:O.pathname,ye=R.pathname,Y=Q&&Q.navigation&&Q.navigation.location?Q.navigation.location.pathname:null;u||(ye=ye.toLowerCase(),Y=Y?Y.toLowerCase():null,ae=ae.toLowerCase());let V=ye===ae||!x&&ye.startsWith(ae)&&ye.charAt(ae.length)==="/",H=Y!=null&&(Y===ae||!x&&Y.startsWith(ae)&&Y.charAt(ae.length)==="/"),ce=V?s:void 0,xe;typeof p=="function"?xe=p({isActive:V,isPending:H}):xe=[p,V?"active":null,H?"pending":null].filter(Boolean).join(" ");let Ee=typeof c=="function"?c({isActive:V,isPending:H}):c;return Ie.createElement(hM,Hp({},L,{"aria-current":ce,className:xe,ref:i,style:Ee,to:E}),typeof C=="function"?C({isActive:V,isPending:H}):C)});var wb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(wb||(wb={}));var Eb;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Eb||(Eb={}));function dM(e,t){let{target:i,replace:s,state:u,preventScrollReset:p,relative:x}=t===void 0?{}:t,c=qA(),E=nd(),C=f0(e,{relative:x});return Ie.useCallback(L=>{if(oM(L,i)){L.preventDefault();let O=s!==void 0?s:Wp(E)===Wp(C);c(e,{replace:O,state:u,preventScrollReset:p,relative:x})}},[E,c,C,s,u,i,e,p,x])}function Ve(){return Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Ve.apply(this,arguments)}function rt(e,t){if(e==null)return{};var i={},s=Object.keys(e),u,p;for(p=0;p<s.length;p++)u=s[p],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function gS(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=gS(e[t]))&&(s&&(s+=" "),s+=i);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function zt(){for(var e=0,t,i,s="";e<arguments.length;)(t=arguments[e++])&&(i=gS(t))&&(s&&(s+=" "),s+=i);return s}function Wv(){return Wv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Wv.apply(this,arguments)}var fM=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,i=Object.create(null),s=Object.create(null);function u(p,x){i[p]=x,t++,t>=e&&(t=0,s=i,i=Object.create(null))}return{has:function(p){return i[p]!==void 0||s[p]!==void 0},remove:function(p){i[p]!==void 0&&(i[p]=void 0),s[p]!==void 0&&(s[p]=void 0)},get:function(p){var x=i[p];if(x!==void 0)return x;if((x=s[p])!==void 0)return u(p,x),x},set:function(p,x){i[p]!==void 0?i[p]=x:u(p,x)},clear:function(){i=Object.create(null),s=Object.create(null)}}},pM=fM;function mM(e){return e>=1?pM(e):{get:function(){},set:function(){}}}var p0="-";function gM(e){var t=vM(e);function i(u){var p=u.split(p0);return p[0]===""&&p.length!==1&&p.shift(),yS(p,t)||yM(u)}function s(u){return e.conflictingClassGroups[u]||[]}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function yS(e,t){var i;if(e.length===0)return t.classGroupId;var s=e[0],u=t.nextPart[s],p=u?yS(e.slice(1),u):void 0;if(p)return p;if(t.validators.length!==0){var x=e.join(p0);return(i=t.validators.find(function(c){var E=c.validator;return E(x)}))==null?void 0:i.classGroupId}}var Sb=/^\[(.+)\]$/;function yM(e){if(Sb.test(e)){var t=Sb.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}}function vM(e){var t=e.theme,i=e.prefix,s={nextPart:{},validators:[]},u=xM(Object.entries(e.classGroups),i);return u.forEach(function(p){var x=p[0],c=p[1];Zv(c,s,x,t)}),s}function Zv(e,t,i,s){e.forEach(function(u){if(typeof u=="string"){var p=u===""?t:Tb(t,u);p.classGroupId=i;return}if(typeof u=="function"){if(_M(u)){Zv(u(s),t,i,s);return}t.validators.push({validator:u,classGroupId:i});return}Object.entries(u).forEach(function(x){var c=x[0],E=x[1];Zv(E,Tb(t,c),i,s)})})}function Tb(e,t){var i=e;return t.split(p0).forEach(function(s){i.nextPart[s]===void 0&&(i.nextPart[s]={nextPart:{},validators:[]}),i=i.nextPart[s]}),i}function _M(e){return e.isThemeGetter}function xM(e,t){return t?e.map(function(i){var s=i[0],u=i[1],p=u.map(function(x){return typeof x=="string"?t+x:typeof x=="object"?Object.fromEntries(Object.entries(x).map(function(c){var E=c[0],C=c[1];return[t+E,C]})):x});return[s,p]}):e}function bM(e){return Wv({cache:mM(e.cacheSize)},gM(e))}var wM=/\s+/,kb="!",EM=/:(?![^[]*\])/,SM=":";function TM(e,t){var i=t.getClassGroupId,s=t.getConflictingClassGroupIds,u=new Set;return e.trim().split(wM).map(function(p){var x=p.split(EM),c=x.pop(),E=c.startsWith(kb),C=E?c.substring(1):c,L=i(C);if(!L)return{isTailwindClass:!1,originalClassName:p};var O=x.length===0?"":x.sort().concat("").join(SM),R=E?kb+O:O;return{isTailwindClass:!0,modifier:R,classGroupId:L,originalClassName:p}}).reverse().filter(function(p){if(!p.isTailwindClass)return!0;var x=p.modifier,c=p.classGroupId,E=x+":"+c;return u.has(E)?!1:(u.add(E),s(c).forEach(function(C){return u.add(x+":"+C)}),!0)}).reverse().map(function(p){return p.originalClassName}).join(" ")}function kM(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s,u,p,x=c;function c(C){var L=t[0],O=t.slice(1),R=O.reduce(function(Q,ie){return ie(Q)},L());return s=bM(R),u=s.cache.get,p=s.cache.set,x=E,E(C)}function E(C){var L=u(C);if(L)return L;var O=TM(C,s);return p(C,O),O}return function(){for(var L="",O,R=0;R<arguments.length;R+=1)(O=arguments[R])&&(L&&(L+=" "),L+=O);return x(L)}}function An(e){var t=function(s){return s[e]||[]};return t.isThemeGetter=!0,t}var Ss=/^\[(.+)\]$/,CM=/^\d+\/\d+$/,PM=new Set(["px","full","screen"]),IM=/^(\d+)?(xs|sm|md|lg|xl)$/,AM=/\d+(%|px|em|rem|vh|vw|pt|pc|in|cm|mm|cap|ch|ex|lh|rlh|vi|vb|vmin|vmax)/,MM=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ui(e){return!Number.isNaN(Number(e))||PM.has(e)||CM.test(e)||sl(e)}function sl(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?i.startsWith("length:")||AM.test(i):!1}function zM(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?i.startsWith("size:"):!1}function DM(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?i.startsWith("position:"):!1}function LM(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?i.startsWith("url(")||i.startsWith("url:"):!1}function RM(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?!Number.isNaN(Number(i))||i.startsWith("weight:"):!1}function ci(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?Number.isInteger(Number(i)):Number.isInteger(Number(e))}function Sr(e){return Ss.test(e)}function Ju(){return!0}function Ho(e){return IM.test(e)}function OM(e){var t,i=(t=Ss.exec(e))==null?void 0:t[1];return i?MM.test(i):!1}function BM(){var e=An("colors"),t=An("spacing"),i=An("blur"),s=An("brightness"),u=An("borderColor"),p=An("borderRadius"),x=An("borderWidth"),c=An("contrast"),E=An("grayscale"),C=An("hueRotate"),L=An("invert"),O=An("gap"),R=An("gradientColorStops"),Q=An("inset"),ie=An("margin"),ae=An("opacity"),ye=An("padding"),Y=An("saturate"),V=An("scale"),H=An("sepia"),ce=An("skew"),xe=An("space"),Ee=An("translate"),ze=function(){return["auto","contain","none"]},De=function(){return["auto","hidden","clip","visible","scroll"]},ot=function(){return["auto",t]},Fe=function(){return["",Ui]},St=function(){return["auto",ci]},Mt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Ct=function(){return["solid","dashed","dotted","double","none"]},Wt=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},Tt=function(){return["start","end","center","between","around","evenly"]},$e=function(){return["","0",Sr]},vt=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]};return{cacheSize:500,theme:{colors:[Ju],spacing:[Ui],blur:["none","",Ho,sl],brightness:[ci],borderColor:[e],borderRadius:["none","","full",Ho,sl],borderWidth:Fe(),contrast:[ci],grayscale:$e(),hueRotate:[ci],invert:$e(),gap:[t],gradientColorStops:[e],inset:ot(),margin:ot(),opacity:[ci],padding:[t],saturate:[ci],scale:[ci],sepia:$e(),skew:[ci,Sr],space:[t],translate:[t]},classGroups:{aspect:[{aspect:["auto","square","video",Sr]}],container:["container"],columns:[{columns:[Ho]}],"break-after":[{"break-after":vt()}],"break-before":[{"break-before":vt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Mt(),[Sr])}],overflow:[{overflow:De()}],"overflow-x":[{"overflow-x":De()}],"overflow-y":[{"overflow-y":De()}],overscroll:[{overscroll:ze()}],"overscroll-x":[{"overscroll-x":ze()}],"overscroll-y":[{"overscroll-y":ze()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[Q]}],"inset-x":[{"inset-x":[Q]}],"inset-y":[{"inset-y":[Q]}],top:[{top:[Q]}],right:[{right:[Q]}],bottom:[{bottom:[Q]}],left:[{left:[Q]}],visibility:["visible","invisible"],z:[{z:[Ui]}],basis:[{basis:[t]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Sr]}],grow:[{grow:$e()}],shrink:[{shrink:$e()}],order:[{order:["first","last","none",ci]}],"grid-cols":[{"grid-cols":[Ju]}],"col-start-end":[{col:["auto",{span:[ci]}]}],"col-start":[{"col-start":St()}],"col-end":[{"col-end":St()}],"grid-rows":[{"grid-rows":[Ju]}],"row-start-end":[{row:["auto",{span:[ci]}]}],"row-start":[{"row-start":St()}],"row-end":[{"row-end":St()}],"grid-flow":[{"grid-flow":["row","col","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Sr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Sr]}],gap:[{gap:[O]}],"gap-x":[{"gap-x":[O]}],"gap-y":[{"gap-y":[O]}],"justify-content":[{justify:Tt()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:Tt()}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Tt(),["stretch"])}],"place-items":[{"place-items":["start","end","center","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ye]}],px:[{px:[ye]}],py:[{py:[ye]}],pt:[{pt:[ye]}],pr:[{pr:[ye]}],pb:[{pb:[ye]}],pl:[{pl:[ye]}],m:[{m:[ie]}],mx:[{mx:[ie]}],my:[{my:[ie]}],mt:[{mt:[ie]}],mr:[{mr:[ie]}],mb:[{mb:[ie]}],ml:[{ml:[ie]}],"space-x":[{"space-x":[xe]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[xe]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max",t]}],"min-w":[{"min-w":["min","max","fit",Ui]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ho]},Ho,sl]}],h:[{h:ot()}],"min-h":[{"min-h":["min","max","fit",Ui]}],"max-h":[{"max-h":[t,"min","max","fit"]}],"font-size":[{text:["base",Ho,sl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",RM]}],"font-family":[{font:[Ju]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",sl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ui]}],"list-style-type":[{list:["none","disc","decimal",Sr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[ae]}],"text-alignment":[{text:["left","center","right","justify"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[ae]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Ct(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ui]}],"underline-offset":[{"underline-offset":["auto",Ui]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[t]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",sl]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all"]}],content:[{content:["none",Sr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[ae]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Mt(),[DM])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},LM]}],"bg-color":[{bg:[e]}],"gradient-from":[{from:[R]}],"gradient-via":[{via:[R]}],"gradient-to":[{to:[R]}],rounded:[{rounded:[p]}],"rounded-t":[{"rounded-t":[p]}],"rounded-r":[{"rounded-r":[p]}],"rounded-b":[{"rounded-b":[p]}],"rounded-l":[{"rounded-l":[p]}],"rounded-tl":[{"rounded-tl":[p]}],"rounded-tr":[{"rounded-tr":[p]}],"rounded-br":[{"rounded-br":[p]}],"rounded-bl":[{"rounded-bl":[p]}],"border-w":[{border:[x]}],"border-w-x":[{"border-x":[x]}],"border-w-y":[{"border-y":[x]}],"border-w-t":[{"border-t":[x]}],"border-w-r":[{"border-r":[x]}],"border-w-b":[{"border-b":[x]}],"border-w-l":[{"border-l":[x]}],"border-opacity":[{"border-opacity":[ae]}],"border-style":[{border:[].concat(Ct(),["hidden"])}],"divide-x":[{"divide-x":[x]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[x]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[ae]}],"divide-style":[{divide:Ct()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:[""].concat(Ct(),["hidden"])}],"outline-offset":[{"outline-offset":[Ui]}],"outline-w":[{outline:[Ui]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[ae]}],"ring-offset-w":[{"ring-offset":[Ui]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ho,OM]}],"shadow-color":[{shadow:[Ju]}],opacity:[{opacity:[ae]}],"mix-blend":[{"mix-blend":Wt()}],"bg-blend":[{"bg-blend":Wt()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ho,Sr]}],grayscale:[{grayscale:[E]}],"hue-rotate":[{"hue-rotate":[C]}],invert:[{invert:[L]}],saturate:[{saturate:[Y]}],sepia:[{sepia:[H]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[E]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[C]}],"backdrop-invert":[{"backdrop-invert":[L]}],"backdrop-opacity":[{"backdrop-opacity":[ae]}],"backdrop-saturate":[{"backdrop-saturate":[Y]}],"backdrop-sepia":[{"backdrop-sepia":[H]}],"border-collapse":[{border:["collapse","separate"]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Sr]}],duration:[{duration:[ci]}],ease:[{ease:["linear","in","out","in-out",Sr]}],delay:[{delay:[ci]}],animate:[{animate:["none","spin","ping","pulse","bounce",Sr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[ci,Sr]}],"translate-x":[{"translate-x":[Ee]}],"translate-y":[{"translate-y":[Ee]}],"skew-x":[{"skew-x":[ce]}],"skew-y":[{"skew-y":[ce]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Sr]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[t]}],"scroll-mx":[{"scroll-mx":[t]}],"scroll-my":[{"scroll-my":[t]}],"scroll-mt":[{"scroll-mt":[t]}],"scroll-mr":[{"scroll-mr":[t]}],"scroll-mb":[{"scroll-mb":[t]}],"scroll-ml":[{"scroll-ml":[t]}],"scroll-p":[{"scroll-p":[t]}],"scroll-px":[{"scroll-px":[t]}],"scroll-py":[{"scroll-py":[t]}],"scroll-pt":[{"scroll-pt":[t]}],"scroll-pr":[{"scroll-pr":[t]}],"scroll-pb":[{"scroll-pb":[t]}],"scroll-pl":[{"scroll-pl":[t]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sr]}],fill:[{fill:[e]}],"stroke-w":[{stroke:[Ui]}],stroke:[{stroke:[e]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],"col-start-end":["col-start","col-end"],"row-start-end":["row-start","row-end"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}var st=kM(BM);const NM=["children","href","shape","size","variant","color","startIcon","endIcon","fullWidth","responsive","animation","loading","active","disabled","dataTheme","className","style"],$h=Ie.forwardRef((e,t)=>{let{children:i,href:s,shape:u,size:p,variant:x,color:c,startIcon:E,endIcon:C,fullWidth:L,responsive:O,animation:R=!0,loading:Q,active:ie,disabled:ae,dataTheme:ye,className:Y,style:V}=e,H=rt(e,NM);const ce=st("btn",Y,zt((E&&!Q||C)&&"gap-2",{[`btn-${p}`]:p,[`btn-${u}`]:u,[`btn-${x}`]:x,[`btn-${c}`]:c,"btn-block":L,"btn-xs md:btn-sm lg:btn-md xl:btn-lg":O,"no-animation":!R,"btn-active":ie,"btn-disabled":ae,loading:Q}));return s?Ci("a",{className:ce,style:V,href:s,children:[E&&E,i,C&&C]}):Ci("button",Ve({},H,{ref:t,"data-theme":ye,className:ce,style:V,disabled:ae,children:[E&&!Q&&E,i,C&&C]}))});$h.displayName="Button";const FM=["dataTheme","className"],$M=e=>{let{dataTheme:t,className:i}=e,s=rt(e,FM);const u=st("dropdown-content menu p-2 shadow bg-base-100 rounded-box",i);return Oe("ul",Ve({},s,{tabIndex:0,"data-theme":t,className:u}))},UM=["className"],jM=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,UM);return Oe("li",{className:i,children:Oe("a",Ve({ref:t},s))})}),VM=["children","color","size","button","dataTheme","className","disabled"],GM=e=>{let{children:t,color:i,size:s,button:u=!0,dataTheme:p,className:x,disabled:c}=e,E=rt(e,VM);return Oe("label",Ve({tabIndex:0,className:x},E,{children:u?Oe($h,{type:"button",dataTheme:p,color:i,size:s,disabled:c,children:t}):t}))},qM=["children","className","item","horizontal","vertical","hover","open","dataTheme"],WM=we.forwardRef((e,t)=>{let{children:i,className:s,item:u,horizontal:p,vertical:x,hover:c,open:E,dataTheme:C}=e,L=rt(e,qM);const O=st("dropdown",s,zt({[`dropdown-${p}`]:p,[`dropdown-${x}`]:x,"dropdown-hover":c,"dropdown-open":E}));return Ci("div",Ve({role:"listbox"},L,{ref:t,"data-theme":C,className:O,children:[Oe("label",{tabIndex:0,children:i}),Oe("ul",{className:"dropdown-content",children:u})]}))});Object.assign(WM,{Toggle:GM,Menu:$M,Item:jM});const ZM=["children","className"],vS=we.forwardRef((e,t)=>{let{children:i,className:s}=e,u=rt(e,ZM);const p=st("modal-action",s);return Oe("div",Ve({},u,{className:p,ref:t,children:i}))});vS.displayName="ModalActions";const HM=["children","className"],_S=we.forwardRef((e,t)=>{let{children:i,className:s}=e,u=rt(e,HM);return Oe("div",Ve({},u,{className:s,ref:t,children:i}))});_S.displayName="ModalBody";const XM=["children","className"],xS=we.forwardRef((e,t)=>{let{children:i,className:s}=e,u=rt(e,XM);const p=st("w-full mb-8 text-xl",s);return Oe("div",Ve({},u,{className:p,ref:t,children:i}))});xS.displayName="ModalHeader";const YM=["children","open","responsive","onClickBackdrop","dataTheme","className"],bS=Ie.forwardRef((e,t)=>{let{children:i,open:s,responsive:u,onClickBackdrop:p,dataTheme:x,className:c}=e,E=rt(e,YM);const C=st("modal",zt({"modal-open":s,"modal-bottom sm:modal-middle":u})),L=st("modal-box",c);return Oe("div",{"aria-label":"Modal","aria-hidden":!s,"aria-modal":s,"data-theme":x,className:C,onClick:O=>{O.stopPropagation(),O.target===O.currentTarget&&(O.stopPropagation(),p&&p())},children:Oe("div",Ve({},E,{"data-theme":x,className:L,ref:t,children:i}))})});bS.displayName="Modal";Object.assign(bS,{Header:xS,Body:_S,Actions:vS});const KM=e=>e&&we.Children.count(e)===1&&we.isValidElement(e)&&typeof e.props.children=="string",JM=["children","icon","status","dataTheme","className","innerClassName"],QM=Ie.forwardRef((e,t)=>{let{children:i,icon:s,status:u,dataTheme:p,className:x,innerClassName:c}=e,E=rt(e,JM);const C=st("alert",x,zt({[`alert-${u}`]:u}));return Oe("div",Ve({role:"alert"},E,{ref:t,"data-theme":p,className:C,children:Ci("div",{className:st("flex-1",c),children:[s,i]})}))});QM.displayName="Alert";const ez=["children","space","className"],tz=we.forwardRef((e,t)=>{let{children:i,space:s=-6,className:u}=e,p=rt(e,ez);const x=`${s<0?"-":""}space-x-${Math.abs(s)}`,c=zt("avatar-group",x,u);return Oe("div",Ve({"aria-label":`Group of ${i.length} avatar photos`},p,{className:c,ref:t,children:i}))}),nz=["size","src","letters","shape","color","border","borderColor","online","offline","dataTheme","className","children"],rz=we.forwardRef((e,t)=>{let{size:i="md",src:s,letters:u,shape:p,color:x,border:c,borderColor:E,online:C,offline:L,dataTheme:O,className:R,children:Q}=e,ie=rt(e,nz);const ae=st("avatar",R,zt({online:C,offline:L,placeholder:!s})),ye=zt({"ring ring-offset-base-100 ring-offset-2":c,[`ring-${E}`]:E,"rounded-btn":p==="square","rounded-full":p==="circle","w-32 h-32":i==="lg","w-24 h-24":i==="md","w-14 h-14":i==="sm","w-10 h-10":i==="xs"}),Y=zt({"bg-neutral-focus":!x,"text-neutral-content":!x,[`bg-${x}`]:x,[`text-${x}-content`]:x,"ring ring-offset-base-100 ring-offset-2":c,[`ring-${E}`]:E,"rounded-btn":p==="square","rounded-full":p==="circle","w-32 h-32 text-3xl":i==="lg","w-24 h-24 text-xl":i==="md","w-14 h-14":i==="sm","w-10 h-10":i==="xs"}),V=typeof i=="number"?{width:i,height:i}:{};return Oe("div",Ve({"aria-label":"Avatar photo"},ie,{"data-theme":O,className:ae,ref:t,children:(()=>{if(s)return Oe("div",{className:ye,style:V,children:Oe("img",{src:s})});if(u||KM(Q))return Oe("div",{className:Y,style:V,children:Oe("span",{children:u||Q})});if(we.Children.count(Q)===1){const ce=we.Children.only(Q);return we.cloneElement(ce,{className:st(ye,ce.props.className),style:Ve({},V,ce.props.style)})}else return Oe("div",{className:ye,style:V,children:Q})})()}))});var iz=Object.assign(rz,{Group:tz});const az=["children","variant","size","color","responsive","dataTheme","className"],oz=Ie.forwardRef((e,t)=>{let{children:i,variant:s,size:u,color:p,responsive:x,dataTheme:c,className:E}=e,C=rt(e,az);const L=st("badge",E,zt({[`badge-${u}`]:u,[`badge-${s}`]:s,[`badge-${p}`]:p,"badge-xs md:badge-sm lg:badge-md xl:badge-lg":x}));return Oe("div",Ve({"aria-label":"Badge"},C,{"data-theme":c,className:L,ref:t,children:i}))});oz.displayName="Badge";const sz=["className"],lz=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,sz);return Oe("div",Ve({},s,{className:st("card-actions",i),ref:t}))}),cz=["className"],uz=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,cz);return Oe("div",Ve({},s,{className:st("card-body",i),ref:t}))}),hz=["className","tag"],dz=we.forwardRef((e,t)=>{let{className:i,tag:s="div"}=e,u=rt(e,hz);return Oe(s,Ve({},u,{className:st("card-title",i),ref:t}))}),fz=we.forwardRef((e,t)=>{let i=Ve({},e);return Oe("figure",{ref:t,children:Oe("img",Ve({},i))})}),pz=["bordered","imageFull","normal","compact","side","className"],Ty={compact:{true:"card-compact",xs:"xs:card-compact",sm:"sm:card-compact",md:"md:card-compact",lg:"lg:card-compact"},normal:{true:"card-normal",xs:"xs:card-normal",sm:"sm:card-normal",md:"md:card-normal",lg:"lg:card-normal"},side:{true:"card-side",xs:"xs:card-side",sm:"sm:card-side",md:"md:card-side",lg:"lg:card-side"}},mz=we.forwardRef((e,t)=>{let{bordered:i=!0,imageFull:s,normal:u,compact:p,side:x,className:c}=e,E=rt(e,pz);const C=st("card",c,zt({"card-bordered":i,"image-full":s,[p&&Ty.compact[p.toString()]||""]:p,[u&&Ty.normal[u.toString()]||""]:u,[x&&Ty.side[x.toString()]||""]:x}));return Oe("div",Ve({"aria-label":"Card"},E,{className:C,ref:t}))});Object.assign(mz,{Actions:lz,Body:uz,Title:dz,Image:fz});const gz=["children","innerRef","src","alt","index","width","hasButtons","buttonStyle","onPrev","onNext","className"],yz=e=>{let{children:t,innerRef:i,src:s,alt:u,index:p=0,width:x,hasButtons:c,buttonStyle:E,onPrev:C,onNext:L,className:O}=e,R=rt(e,gz);const Q=st("carousel-item relative",O,zt({"w-full":x==="full","w-1/2":x==="half","h-full":!0})),ie=zt({"w-full":x==="full"}),ae=()=>E!=null?Ci(bh,{children:[Ie.cloneElement(E("❮"),{onClick:C}),Ie.cloneElement(E("❯"),{onClick:L})]}):Ci(bh,{children:[Oe($h,{onClick:C,shape:"circle",children:"❮"}),Oe($h,{onClick:L,shape:"circle",children:"❯"})]});return Ci("div",Ve({},R,{id:`item${p}`,ref:i,className:Q,children:[s?Oe("img",{src:s,alt:u,className:ie}):t,c&&Oe("div",{className:"absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2",children:ae()})]}))},vz=["children","display","snap","vertical","width","buttonStyle","dataTheme","className"],_z=Ie.forwardRef((e,t)=>{let{children:i,display:s="slider",snap:u,vertical:p,width:x,buttonStyle:c,dataTheme:E,className:C}=e,L=rt(e,vz);const O=st("carousel",C,zt({[`carousel-${u}`]:u,"carousel-vertical":p,"w-full":s!=="slider"})),[R,Q]=Ie.useState([]),[ie,ae]=Ie.useState(0);Ie.useEffect(()=>{const Y=[];i.map(V=>{Y.push(Ie.createRef())}),Q(Y)},[i]);const ye=Y=>{var V;(V=R[Y].current)==null||V.scrollIntoView({behavior:"smooth",block:"nearest",inline:u}),ae(Y)};return Ci(bh,{children:[Oe("div",Ve({role:"listbox","aria-label":"Image carousel"},L,{ref:t,"data-theme":E,className:O,children:i.map((Y,V)=>Ie.cloneElement(Y,Ve({key:V,innerRef:R[V],index:V+1,children:Y.props.children,src:Y.props.src,alt:Y.props.alt,width:s!=="slider"?"full":x,hasButtons:s==="sequential",buttonStyle:c,onPrev:()=>ye(V-1<0?i.length-1:V-1),onNext:()=>ye(V+1>i.length-1?0:V+1)},Y.props)))})),s==="numbered"&&Oe("div",{className:"flex justify-center w-full py-2 gap-2",children:i.map((Y,V)=>c!=null?Ie.cloneElement(c((V+1).toString()),{key:V,onClick:()=>ye(V)}):Oe($h,{active:V===ie,onClick:()=>ye(V),children:V+1},V))})]})});Object.assign(_z,{Item:yz});const xz=["size","shape","className"],bz=we.forwardRef((e,t)=>{let{size:i="xs",shape:s="circle",className:u}=e,p=rt(e,xz);return Oe(iz,Ve({size:i,shape:s},p,{className:st("chat-image",u),ref:t}))}),wz=["color","className"],Ez=we.forwardRef((e,t)=>{let{color:i,className:s}=e,u=rt(e,wz);const p=st("chat-bubble",zt({[`chat-bubble-${i}`]:i}),s);return Oe("div",Ve({},u,{className:p,ref:t}))}),Sz=["className"],Tz=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,Sz);return Oe("div",Ve({},s,{className:st("chat-header",i),ref:t}))}),kz=["className"],Cz=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,kz);return Oe("time",Ve({},s,{className:st("text-xs opacity-50",i),ref:t}))}),Pz=["className"],Iz=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,Pz);return Oe("div",Ve({},s,{className:st("chat-footer opacity-50",i),ref:t}))}),Az=["end","color","dataTheme","className","children"],wS=Ie.forwardRef((e,t)=>{let{end:i=!1,dataTheme:s,className:u,children:p}=e,x=rt(e,Az);return Oe("div",Ve({},x,{"data-theme":s,className:st("chat",`chat-${i?"end":"start"}`,u),ref:t,children:p}))});wS.displayName="ChatBubble";Object.assign(wS,{Header:Tz,Time:Cz,Avatar:bz,Message:Ez,Footer:Iz});const Mz=["children","className"],zz=e=>{let{children:t,className:i}=e,s=rt(e,Mz);const u=st("collapse-title",i);return Oe("div",Ve({},s,{className:u,children:t}))},Dz=["children","className"],Lz=e=>{let{children:t,className:i}=e,s=rt(e,Dz);const u=st("collapse-content",i);return Oe("div",Ve({},s,{className:u,children:t}))},Rz=["children","checkbox","icon","open","dataTheme","className","onOpen","onClose","onToggle"],Oz=we.forwardRef((e,t)=>{let{children:i,checkbox:s,icon:u,open:p,dataTheme:x,className:c,onOpen:E,onClose:C,onToggle:L}=e,O=rt(e,Rz);const R=st("collapse",c,zt({[`collapse-${u}`]:u,"collapse-open":p===!0,"collapse-close":p===!1})),[Q,ie]=Ie.useState(p),ae=Ie.useRef(null);return Ci("div",Ve({"aria-expanded":p},O,{ref:t,tabIndex:Q===!0?void 0:0,"data-theme":x,className:R,onBlur:H=>{!s&&L&&L(),!s&&C&&C(),O.onBlur&&O.onBlur(H)},onFocus:H=>{!s&&L&&L(),!s&&E&&E(),O.onFocus&&O.onFocus(H)},children:[s&&Oe("input",{type:"checkbox",tabIndex:Q===!0?0:void 0,className:"peer",ref:ae,onChange:()=>{var H,ce,xe;L&&L(),E&&(H=ae.current)!=null&&H.checked?E():C&&!((ce=ae.current)!=null&&ce.checked)&&C(),ie((xe=ae.current)==null?void 0:xe.checked)}}),i]}))});Object.assign(Oz,{Title:zz,Content:Lz});const Bz=["value","dataTheme","className"],sN=e=>{let{value:t,dataTheme:i,className:s}=e,u=rt(e,Bz);const p=st("countdown",s),c={"--value":Math.min(99,Math.max(0,t))};return Oe("span",Ve({role:"timer"},u,{"data-theme":i,className:p,children:Oe("span",{style:c})}))},Nz=["color","dataTheme","className"],Fz=Ie.forwardRef((e,t)=>{let{color:i,dataTheme:s,className:u}=e,p=rt(e,Nz);const x=st("progress",u,zt({[`progress-${i}`]:i}));return Oe("progress",Ve({},p,{ref:t,"data-theme":s,className:x}))});Fz.displayName="Progress";const $z=["value","size","thickness","color","dataTheme","className","children"],Uz=Ie.forwardRef((e,t)=>{let{value:i,size:s="4rem",thickness:u="4px",color:p,dataTheme:x,className:c,children:E}=e,C=rt(e,$z);const L=st("radial-progress",c,zt({[`text-${p}`]:p})),O=Math.min(100,Math.max(0,i));return Oe("div",Ve({role:"progressbar","aria-valuenow":O,"aria-valuemin":0,"aria-valuemax":100},C,{ref:t,"data-theme":x,className:L,style:{"--value":O,"--size":s,"--thickness":u},children:E}))});Uz.displayName="RadialProgress";const jz=["variant","className"],Vz=we.forwardRef((e,t)=>{let{variant:i,className:s}=e,u=rt(e,jz);const p=st(s,zt({[`stat-${i}`]:i}));return Oe("div",Ve({},u,{className:p,ref:t}))}),Gz=["dataTheme","className"],qz=Ie.forwardRef((e,t)=>{let{dataTheme:i,className:s}=e,u=rt(e,Gz);const p=st("stat",s);return Oe("div",Ve({},u,{"data-theme":i,className:p,ref:t}))});var Wz=Object.assign(qz,{Item:Vz});const Zz=["horizontal","vertical","dataTheme","className","children"],Hz=we.forwardRef((e,t)=>{let{horizontal:i,vertical:s,dataTheme:u,className:p,children:x}=e,c=rt(e,Zz);const E=st("stats",p,zt({"stats-horizontal":i,"stats-vertical":s}));return Oe("div",Ve({},c,{ref:t,"data-theme":u,className:E,children:x}))});Object.assign(Hz,{Stat:Wz});const Xz=["children"],Yz=we.forwardRef((e,t)=>{let{children:i}=e,s=rt(e,Xz);return Oe("thead",Ve({},s,{ref:t,children:Oe("tr",{children:i==null?void 0:i.map((u,p)=>Oe("th",{children:u},p))})}))}),Kz=["children"],Jz=we.forwardRef((e,t)=>{let{children:i}=e,s=rt(e,Kz);return Oe("tbody",Ve({},s,{ref:t,children:i}))}),Qz=["children","active","hover","className"],eD=we.forwardRef((e,t)=>{let{children:i,active:s,hover:u,className:p}=e,x=rt(e,Qz);const c=st(p,zt({active:s,hover:u}));return Oe("tr",Ve({},x,{className:c,ref:t,children:i==null?void 0:i.map((E,C)=>C<1?Oe("th",{children:E},C):Oe("td",{children:E},C))}))}),tD=["children"],nD=we.forwardRef((e,t)=>{let{children:i}=e,s=rt(e,tD);return Oe("tfoot",Ve({},s,{ref:t,children:Oe("tr",{children:i==null?void 0:i.map((u,p)=>Oe("th",{children:u},p))})}))}),rD=["children","compact","zebra","dataTheme","className"],iD=we.forwardRef((e,t)=>{let{children:i,compact:s,zebra:u,dataTheme:p,className:x}=e,c=rt(e,rD);const E=st("table",x,zt({"table-zebra":u,"table-compact":s}));return Oe("table",Ve({},c,{"data-theme":p,className:E,ref:t,children:i}))});Object.assign(iD,{Head:Yz,Body:Jz,Row:eD,Footer:nD});const aD=["message","children","open","color","position","dataTheme","className"],oD=Ie.forwardRef((e,t)=>{let{message:i,children:s,open:u,color:p,position:x,dataTheme:c,className:E}=e,C=rt(e,aD);const L=st("tooltip",E,zt({"tooltip-open":u,[`tooltip-${p}`]:p,"tooltip-top":x==="top","tooltip-bottom":x==="bottom","tooltip-left":x==="left","tooltip-right":x==="right"}));return Oe("div",Ve({role:"tooltip"},C,{ref:t,"data-theme":c,"data-tip":i,className:L,children:s}))});oD.displayName="Tooltip";const sD=["children","title","dataTheme","className"],lD=we.forwardRef((e,t)=>{let{children:i,title:s,className:u}=e,p=rt(e,sD);const x=st("label",u);return Ci("label",Ve({},p,{className:x,children:[Oe("span",{className:"label-text cursor-pointer",ref:t,children:s}),i]}))}),cD=["children","dataTheme","className"],uD=we.forwardRef((e,t)=>{let{children:i,dataTheme:s,className:u}=e,p=rt(e,cD);const x=st("form-control",u);return Oe("form",Ve({role:"form"},p,{"data-theme":s,className:x,ref:t,children:i}))});var lN=Object.assign(uD,{Label:lD});const hD=["color","size","indeterminate","dataTheme","className"],dD=Ie.forwardRef((e,t)=>{let{color:i,size:s,indeterminate:u,dataTheme:p,className:x}=e,c=rt(e,hD);const E=st("checkbox",x,zt({[`checkbox-${s}`]:s,[`checkbox-${i}`]:i})),C=Ie.useRef(null);return Ie.useImperativeHandle(t,()=>C.current),Ie.useEffect(()=>{C.current&&(u?C.current.indeterminate=!0:C.current.indeterminate=!1)},[u]),Oe("input",Ve({},c,{ref:C,type:"checkbox","data-theme":p,className:E}))});dD.displayName="Checkbox";const fD=["value","placeholder","bordered","borderOffset","size","color","dataTheme","className","type"],pD=Ie.forwardRef((e,t)=>{let{value:i,placeholder:s,bordered:u=!0,borderOffset:p,size:x,color:c,dataTheme:E,className:C,type:L}=e,O=rt(e,fD);const R=st("input",C,zt({[`input-${x}`]:x,[`input-${c}`]:c,["focus:outline-offset-0"]:!p,"input-bordered":u}));return Oe("input",Ve({},O,{ref:t,type:L,value:i,placeholder:s,"data-theme":E,className:R}))});pD.displayName="Input";const mD=["color","size","name","dataTheme","className"],gD=Ie.forwardRef((e,t)=>{let{color:i,size:s,name:u,dataTheme:p,className:x}=e,c=rt(e,mD);const E=st("radio",x,zt({[`radio-${s}`]:s,[`radio-${i}`]:i}));return Oe("input",Ve({},c,{ref:t,type:"radio",name:u,"data-theme":p,className:E}))});gD.displayName="Radio";const yD=["color","size","step","dataTheme","className"],vD=Ie.forwardRef((e,t)=>{let{color:i,size:s,step:u,dataTheme:p,className:x}=e,c=rt(e,yD);const E=st("range",x,zt({[`range-${s}`]:s,[`range-${i}`]:i})),C=O=>!isNaN(parseFloat(O))&&isFinite(O),L=Ie.useMemo(()=>{var O;const R=Math.max(1,Number(u));return(O=Math.ceil(100/R))!=null?O:1},[c.max,u]);return Ci(bh,{children:[Oe("input",Ve({},c,{ref:t,type:"range",step:u,"data-theme":p,className:E})),C(u)&&Oe("div",{className:"w-full flex justify-between text-xs px-2",children:[...Array(L+1)].map((O,R)=>Oe("span",{children:"|"},R))})]})});vD.displayName="Range";const ES=e=>{let t=Ve({},e);return Oe("input",Ve({},t,{type:"checkbox"}))},_D=["children","size","half","hidden","dataTheme","className","value","onChange"],xD=we.forwardRef((e,t)=>{let{children:i,size:s,half:u,hidden:p,dataTheme:x,className:c,value:E,onChange:C}=e,L=rt(e,_D);const O=st("rating",c,zt({[`rating-${s}`]:s,"rating-half":u,"rating-hidden":p||E===0}));return Ci("div",Ve({"aria-label":"Rating"},L,{ref:t,"data-theme":x,className:O,children:[E===0&&Oe(ES,{className:zt(O,"hidden"),checked:!0,readOnly:!0}),we.Children.map(i,(R,Q)=>{const ie=R;return we.cloneElement(ie,{key:Q+E,checked:E===Q+1,readOnly:C==null,onChange:()=>{C==null||C(Q+1)}})})]}))});Object.assign(xD,{Item:ES});const bD=["children"],wD=e=>{let{children:t}=e,i=rt(e,bD);return Oe("option",Ve({},i,{children:t}))},ED=["children","size","color","bordered","borderOffset","dataTheme","className"],SD=(e,t)=>{const{children:i,size:s,color:u,bordered:p=!0,borderOffset:x,dataTheme:c,className:E}=e,C=rt(e,ED),L=st("select",E,zt({[`select-${s}`]:s,[`select-${u}`]:u,["focus:outline-offset-0"]:!x,"select-bordered":p}));return Oe("select",Ve({},C,{ref:t,"data-theme":c,className:L,children:i}))},TD=we.forwardRef(SD);Object.assign(TD,{Option:wD});const kD=["color","size","dataTheme","className"],CD=Ie.forwardRef((e,t)=>{let{color:i,size:s,dataTheme:u,className:p}=e,x=rt(e,kD);const c=st("toggle",p,zt({[`toggle-${s}`]:s,[`toggle-${i}`]:i}));return Oe("input",Ve({},x,{ref:t,type:"checkbox","data-theme":u,className:c}))});CD.displayName="Toggle";const PD=["className","size","color","bordered","dataTheme"],ID=Ie.forwardRef((e,t)=>{let{className:i,size:s,color:u,bordered:p,dataTheme:x}=e,c=rt(e,PD);const E=st("file-input",i,zt({[`file-input-${s}`]:s,[`file-input-${u}`]:u,"file-input-bordered":p}));return Oe("input",Ve({},c,{ref:t,type:"file","data-theme":x,className:E}))});ID.displayName="FileInput";const AD=["children","size","horizontal","dataTheme","className"],MD=Ie.forwardRef((e,t)=>{let{children:i,size:s,horizontal:u,dataTheme:p,className:x}=e,c=rt(e,AD);const E=st("artboard","artboard-demo",x,zt({[`phone-${s}`]:s,horizontal:u}));return Oe("div",Ve({"aria-label":"Artboard"},c,{ref:t,"data-theme":p,className:E,children:i}))});MD.displayName="Artboard";const zD=["className"],DD=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,zD);const u=st("footer-title",i);return Oe("span",Ve({},s,{className:u,ref:t}))}),LD=["center","dataTheme","className"],RD=we.forwardRef((e,t)=>{let{center:i,dataTheme:s,className:u}=e,p=rt(e,LD);const x=st("footer",u,zt({"footer-center":i}));return Oe("div",Ve({role:"contentinfo"},p,{"data-theme":s,className:x,ref:t}))});Object.assign(RD,{Title:DD});const OD=["dataTheme","className","children"],BD=we.forwardRef((e,t)=>{let{dataTheme:i,className:s,children:u}=e,p=rt(e,OD);const x=st("hero-content",s);return Oe("div",Ve({},p,{"data-theme":i,className:x,ref:t,children:u}))}),ND=["dataTheme","className","children"],FD=we.forwardRef((e,t)=>{let{dataTheme:i,className:s,children:u}=e,p=rt(e,ND);const x=st("hero-overlay",s);return Oe("div",Ve({},p,{"data-theme":i,className:x,ref:t,children:u}))}),$D=["dataTheme","className","children"],UD=we.forwardRef((e,t)=>{let{dataTheme:i,className:s,children:u}=e,p=rt(e,$D);const x=st("hero",s);return Oe("div",Ve({role:"banner"},p,{"data-theme":i,className:x,ref:t,children:u}))});Object.assign(UD,{Content:BD,Overlay:FD});const jD=["children","size","vertical","dataTheme","className"],VD=Ie.forwardRef((e,t)=>{let{children:i,size:s,vertical:u,dataTheme:p,className:x}=e,c=rt(e,jD);const E=st("input-group",x,zt({[`input-group-${s}`]:s,"input-group-vertical":u}));return Oe("label",Ve({},c,{"data-theme":p,className:E,ref:t,children:i}))});VD.displayName="InputGroup";const GD=["dataTheme","className","children"],qD=Ie.forwardRef((e,t)=>{let{dataTheme:i,className:s,children:u}=e,p=rt(e,GD);const x=st("stack",s);return Oe("div",Ve({"aria-label":"Stack"},p,{ref:t,"data-theme":i,className:x,children:u}))});qD.displayName="Stack";const WD=["horizontal","vertical","className","children"],ZD={start:"toast-start",center:"toast-center",end:"toast-end"},HD={top:"toast-top",middle:"toast-middle",bottom:"toast-bottom"},XD=Ie.forwardRef((e,t)=>{let{horizontal:i="end",vertical:s="bottom",className:u,children:p}=e,x=rt(e,WD);return Oe("div",Ve({},x,{className:st("toast",ZD[i],HD[s],u),ref:t,children:p}))});XD.displayName="Toast";const YD=["children","href"],KD=we.forwardRef((e,t)=>{let{children:i,href:s}=e,u=rt(e,YD);return Oe("li",Ve({role:"link"},u,{ref:t,children:s?Oe("a",{href:s,children:i}):Oe(bh,{children:i})}))}),JD=["children","dataTheme","className","innerProps","innerRef"],QD=we.forwardRef((e,t)=>{let{children:i,dataTheme:s,className:u,innerProps:p,innerRef:x}=e,c=rt(e,JD);const E=st("breadcrumbs","text-sm",u);return Oe("div",Ve({role:"navigation","aria-label":"Breadcrumbs"},c,{"data-theme":s,className:E,ref:t,children:Oe("ul",Ve({},p,{ref:x,children:i}))}))});Object.assign(QD,{Item:KD});const e5=["children","className"],t5=Ie.forwardRef((e,t)=>{let{children:i,className:s}=e,u=rt(e,e5);const p=st("btm-nav-label",s);return Oe("span",Ve({},u,{className:p,ref:t,children:i}))}),n5=["size","dataTheme","className","children"],SS=Ie.forwardRef((e,t)=>{let{size:i,dataTheme:s,className:u,children:p}=e,x=rt(e,n5);const c=st("btm-nav",zt({[`btm-nav-${i}`]:i}),u);return Oe("div",Ve({},x,{"data-theme":s,className:c,ref:t,children:p}))});SS.displayName="BottomNavigation";Object.assign(SS,{Label:t5});const r5=["children","href","color","hover","dataTheme","className"],i5=Ie.forwardRef((e,t)=>{let{children:i,href:s,color:u,hover:p=!0,dataTheme:x,className:c}=e,E=rt(e,r5);const C=st("link",c,zt({[`link-${u}`]:u,"link-hover":p}));return Oe("a",Ve({rel:"noopener noreferrer"},E,{href:s,"data-theme":x,className:C,ref:t,children:i}))});i5.displayName="Link";const a5=["className"],o5=we.forwardRef((e,t)=>{let{className:i}=e,s=rt(e,a5);const u=st("menu-title",i);return Oe("li",Ve({},s,{className:u,ref:t}))}),s5=["className","disabled"],l5=we.forwardRef((e,t)=>{let{className:i,disabled:s}=e,u=rt(e,s5);const p=st(i,zt({disabled:s}));return Oe("li",Ve({role:"menuitem",className:p},u,{ref:t}))}),c5=["normal","compact","horizontal","vertical","dataTheme","className"],$f={compact:{true:"menu-compact",xs:"xs:menu-compact",sm:"sm:menu-compact",md:"md:menu-compact",lg:"lg:menu-compact"},normal:{true:"menu-normal",xs:"xs:menu-normal",sm:"sm:menu-normal",md:"md:menu-normal",lg:"lg:menu-normal"},horizontal:{true:"menu-horizontal",xs:"xs:menu-horizontal",sm:"sm:menu-horizontal",md:"md:menu-horizontal",lg:"lg:menu-horizontal"},vertical:{true:"menu-vertical",xs:"xs:menu-vertical",sm:"sm:menu-vertical",md:"md:menu-vertical",lg:"lg:menu-vertical"}},u5=we.forwardRef((e,t)=>{let{normal:i,compact:s,horizontal:u,vertical:p,dataTheme:x,className:c}=e,E=rt(e,c5);const C=st("menu",c,zt({[s&&$f.compact[s.toString()]||""]:s,[i&&$f.normal[i.toString()]||""]:i,[u&&$f.horizontal[u.toString()]||""]:u,[p&&$f.vertical[p.toString()]||""]:p}));return Oe("ul",Ve({role:"menu","data-theme":x,className:C},E,{ref:t}))});Object.assign(u5,{Title:o5,Item:l5});const m0=we.forwardRef(({children:e,section:t,dataTheme:i,className:s,style:u},p)=>{const x=st(s,zt({["flex-1"]:t!=="center",[`navbar-${t}`]:t}));return Oe("div",{"data-theme":i,className:x,style:u,ref:p,children:e})}),h5=["children","dataTheme","className"],d5=we.forwardRef((e,t)=>{let{children:i,dataTheme:s,className:u}=e,p=rt(e,h5);const x=st("navbar",u);return Oe("div",Ve({role:"navigation","aria-label":"Navbar"},p,{"data-theme":s,className:x,ref:t,children:i}))}),f5=we.forwardRef((e,t)=>Oe(m0,Ve({},e,{section:"start",ref:t}))),p5=we.forwardRef((e,t)=>Oe(m0,Ve({},e,{section:"center",ref:t}))),m5=we.forwardRef((e,t)=>Oe(m0,Ve({},e,{section:"end",ref:t})));var cN=Object.assign(d5,{Start:f5,Center:p5,End:m5});const g5=["children","value","color","dataTheme","className"],y5=we.forwardRef((e,t)=>{let{children:i,value:s,color:u,dataTheme:p,className:x}=e,c=rt(e,g5);const E=st("step",x,zt({[`step-${u}`]:u}));return Oe("li",Ve({"aria-label":"Step"},c,{"data-theme":p,"data-content":s,className:E,ref:t,children:i}))}),v5=["children","dataTheme","className","vertical","horizontal"],_5=we.forwardRef((e,t)=>{let{children:i,dataTheme:s,className:u,vertical:p,horizontal:x}=e,c=rt(e,v5);const E=st("steps",u,zt({["steps-vertical"]:p,["steps-horizontal"]:x}));return Oe("ul",Ve({"aria-label":"Steps",role:"group"},c,{"data-theme":s,className:E,ref:t,children:i}))});Object.assign(_5,{Step:y5});const x5=["children","value","activeValue","onClick","size","variant","className","style"],b5=(e,t)=>{let{children:i,value:s,activeValue:u,onClick:p,size:x,variant:c,className:E,style:C}=e,L=rt(e,x5);const O=st("tab",E,zt({"tab-active":s!=null&&s===u,[`tab-${x}`]:x,[`tab-${c}`]:c}));return Oe("a",Ve({role:"tab"},L,{className:O,style:C,onClick:()=>p&&p(s),children:i}))},w5=we.forwardRef(b5),E5=["children","value","onChange","variant","size","boxed","dataTheme","className"],S5=(e,t)=>{let{children:i,value:s,onChange:u,variant:p,size:x,boxed:c,dataTheme:E,className:C}=e,L=rt(e,E5);const O=st("tabs",C,zt({"tabs-boxed":c}));return Oe("div",Ve({ref:t,role:"tablist"},L,{"data-theme":E,className:O,children:i.map((R,Q)=>Ie.cloneElement(R,{key:R.props.value,variant:p,size:x,activeValue:s,onClick:ie=>{u&&u(ie)}}))}))},T5=we.forwardRef(S5);Object.assign(T5,{Tab:w5});const k5=["dataPrefix","dataTheme","status","className","children","innerProps","innerRef"],TS=Ie.forwardRef((e,t)=>{let{dataPrefix:i,dataTheme:s,status:u,className:p,children:x,innerProps:c,innerRef:E}=e,C=rt(e,k5);const L=st(zt({[`bg-${u}`]:u,[`text-${u}-content`]:u}),p),O=Ve({},C,{className:L},i!==!1&&{"data-prefix":i||">"});return Oe("pre",Ve({},O,{"data-theme":s,className:L,ref:t,children:Oe("code",Ve({},c,{ref:E,children:x}))}))});TS.displayName="CodeMockup.Line";const C5=["dataTheme","className","children"],kS=Ie.forwardRef((e,t)=>{let{dataTheme:i,className:s,children:u}=e,p=rt(e,C5);const x=st("mockup-code",s);return Oe("div",Ve({"aria-label":"Code mockup"},p,{"data-theme":i,className:x,ref:t,children:we.Children.map(u,(c,E)=>{const C=c;return we.cloneElement(C,{key:E})})}))});kS.displayName="CodeMockup";Object.assign(kS,{Line:TS});const P5=["color","dataTheme","className","children","innerRef","innerProps"],I5=Ie.forwardRef((e,t)=>{let{color:i,dataTheme:s,className:u,children:p,innerRef:x,innerProps:c}=e,E=rt(e,P5);const C=st("mockup-phone",zt({[`border-${i}`]:i}),u);return Ci("div",Ve({"aria-label":"Phone mockup"},E,{"data-theme":s,className:C,ref:t,children:[Oe("div",{className:"camera"}),Oe("div",{className:"display",children:Oe("div",Ve({},c,{className:st("artboard artboard-demo phone-1",c==null?void 0:c.className),ref:x,children:p}))})]}))});I5.displayName="PhoneMockup";const A5=["border","borderColor","backgroundColor","frameColor","dataTheme","className","children"],M5=Ie.forwardRef((e,t)=>{let{border:i,borderColor:s,backgroundColor:u,frameColor:p,dataTheme:x,className:c,children:E}=e,C=rt(e,A5);const L=s||p||"base-300",O=st("mockup-window",i&&`border border-${L}`,zt({[`border-${L}`]:L,[`bg-${p}`]:p}),c),Q=we.Children.count(E)>0&&we.Children.toArray(E)[0],ie=zt(u&&`bg-${u}`,i&&`border-t border-${L}`,"p-4"),ae=Q&&we.isValidElement(Q)?we.cloneElement(Q,{className:st(ie,Q.props.className)}):Oe("div",{className:ie,children:E});return Oe("div",Ve({"aria-label":"Window mockup"},C,{"data-theme":x,className:O,ref:t,children:ae}))});M5.displayName="WindowMockup";function Cb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,s)}return i}function pt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Cb(Object(i),!0).forEach(function(s){ur(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Cb(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Xp(e){return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xp(e)}function z5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pb(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function D5(e,t,i){return t&&Pb(e.prototype,t),i&&Pb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ur(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g0(e,t){return R5(e)||B5(e,t)||CS(e,t)||F5()}function rd(e){return L5(e)||O5(e)||CS(e)||N5()}function L5(e){if(Array.isArray(e))return Hv(e)}function R5(e){if(Array.isArray(e))return e}function O5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function B5(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s=[],u=!0,p=!1,x,c;try{for(i=i.call(e);!(u=(x=i.next()).done)&&(s.push(x.value),!(t&&s.length===t));u=!0);}catch(E){p=!0,c=E}finally{try{!u&&i.return!=null&&i.return()}finally{if(p)throw c}}return s}}function CS(e,t){if(e){if(typeof e=="string")return Hv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Hv(e,t)}}function Hv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function N5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ib=function(){},y0={},PS={},IS=null,AS={mark:Ib,measure:Ib};try{typeof window<"u"&&(y0=window),typeof document<"u"&&(PS=document),typeof MutationObserver<"u"&&(IS=MutationObserver),typeof performance<"u"&&(AS=performance)}catch{}var $5=y0.navigator||{},Ab=$5.userAgent,Mb=Ab===void 0?"":Ab,ys=y0,Sn=PS,zb=IS,Uf=AS;ys.document;var bo=!!Sn.documentElement&&!!Sn.head&&typeof Sn.addEventListener=="function"&&typeof Sn.createElement=="function",MS=~Mb.indexOf("MSIE")||~Mb.indexOf("Trident/"),jf,Vf,Gf,qf,Wf,yo="___FONT_AWESOME___",Xv=16,zS="fa",DS="svg-inline--fa",wl="data-fa-i2svg",Yv="data-fa-pseudo-element",U5="data-fa-pseudo-element-pending",v0="data-prefix",_0="data-icon",Db="fontawesome-i2svg",j5="async",V5=["HTML","HEAD","STYLE","SCRIPT"],LS=function(){try{return!0}catch{return!1}}(),wn="classic",jn="sharp",x0=[wn,jn];function id(e){return new Proxy(e,{get:function(i,s){return s in i?i[s]:i[wn]}})}var Uh=id((jf={},ur(jf,wn,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),ur(jf,jn,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular"}),jf)),jh=id((Vf={},ur(Vf,wn,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ur(Vf,jn,{solid:"fass",regular:"fasr"}),Vf)),Vh=id((Gf={},ur(Gf,wn,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ur(Gf,jn,{fass:"fa-solid",fasr:"fa-regular"}),Gf)),G5=id((qf={},ur(qf,wn,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ur(qf,jn,{"fa-solid":"fass","fa-regular":"fasr"}),qf)),q5=/fa(s|r|l|t|d|b|k|ss|sr)?[\-\ ]/,RS="fa-layers-text",W5=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Z5=id((Wf={},ur(Wf,wn,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ur(Wf,jn,{900:"fass",400:"fasr"}),Wf)),OS=[1,2,3,4,5,6,7,8,9,10],H5=OS.concat([11,12,13,14,15,16,17,18,19,20]),X5=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],hl={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Gh=new Set;Object.keys(jh[wn]).map(Gh.add.bind(Gh));Object.keys(jh[jn]).map(Gh.add.bind(Gh));var Y5=[].concat(x0,rd(Gh),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",hl.GROUP,hl.SWAP_OPACITY,hl.PRIMARY,hl.SECONDARY]).concat(OS.map(function(e){return"".concat(e,"x")})).concat(H5.map(function(e){return"w-".concat(e)})),yh=ys.FontAwesomeConfig||{};function K5(e){var t=Sn.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function J5(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Sn&&typeof Sn.querySelector=="function"){var Q5=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Q5.forEach(function(e){var t=g0(e,2),i=t[0],s=t[1],u=J5(K5(i));u!=null&&(yh[s]=u)})}var BS={styleDefault:"solid",familyDefault:"classic",cssPrefix:zS,replacementClass:DS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};yh.familyPrefix&&(yh.cssPrefix=yh.familyPrefix);var Bc=pt(pt({},BS),yh);Bc.autoReplaceSvg||(Bc.observeMutations=!1);var xt={};Object.keys(BS).forEach(function(e){Object.defineProperty(xt,e,{enumerable:!0,set:function(i){Bc[e]=i,vh.forEach(function(s){return s(xt)})},get:function(){return Bc[e]}})});Object.defineProperty(xt,"familyPrefix",{enumerable:!0,set:function(t){Bc.cssPrefix=t,vh.forEach(function(i){return i(xt)})},get:function(){return Bc.cssPrefix}});ys.FontAwesomeConfig=xt;var vh=[];function e4(e){return vh.push(e),function(){vh.splice(vh.indexOf(e),1)}}var Xo=Xv,Ba={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function t4(e){if(!(!e||!bo)){var t=Sn.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=Sn.head.childNodes,s=null,u=i.length-1;u>-1;u--){var p=i[u],x=(p.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(x)>-1&&(s=p)}return Sn.head.insertBefore(t,s),e}}var n4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function qh(){for(var e=12,t="";e-- >0;)t+=n4[Math.random()*62|0];return t}function Vc(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function b0(e){return e.classList?Vc(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function NS(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(NS(e[i]),'" ')},"").trim()}function Cm(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function w0(e){return e.size!==Ba.size||e.x!==Ba.x||e.y!==Ba.y||e.rotate!==Ba.rotate||e.flipX||e.flipY}function i4(e){var t=e.transform,i=e.containerWidth,s=e.iconWidth,u={transform:"translate(".concat(i/2," 256)")},p="translate(".concat(t.x*32,", ").concat(t.y*32,") "),x="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),c="rotate(".concat(t.rotate," 0 0)"),E={transform:"".concat(p," ").concat(x," ").concat(c)},C={transform:"translate(".concat(s/2*-1," -256)")};return{outer:u,inner:E,path:C}}function a4(e){var t=e.transform,i=e.width,s=i===void 0?Xv:i,u=e.height,p=u===void 0?Xv:u,x=e.startCentered,c=x===void 0?!1:x,E="";return c&&MS?E+="translate(".concat(t.x/Xo-s/2,"em, ").concat(t.y/Xo-p/2,"em) "):c?E+="translate(calc(-50% + ".concat(t.x/Xo,"em), calc(-50% + ").concat(t.y/Xo,"em)) "):E+="translate(".concat(t.x/Xo,"em, ").concat(t.y/Xo,"em) "),E+="scale(".concat(t.size/Xo*(t.flipX?-1:1),", ").concat(t.size/Xo*(t.flipY?-1:1),") "),E+="rotate(".concat(t.rotate,"deg) "),E}var o4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function FS(){var e=zS,t=DS,i=xt.cssPrefix,s=xt.replacementClass,u=o4;if(i!==e||s!==t){var p=new RegExp("\\.".concat(e,"\\-"),"g"),x=new RegExp("\\--".concat(e,"\\-"),"g"),c=new RegExp("\\.".concat(t),"g");u=u.replace(p,".".concat(i,"-")).replace(x,"--".concat(i,"-")).replace(c,".".concat(s))}return u}var Lb=!1;function ky(){xt.autoAddCss&&!Lb&&(t4(FS()),Lb=!0)}var s4={mixout:function(){return{dom:{css:FS,insertCss:ky}}},hooks:function(){return{beforeDOMElementCreation:function(){ky()},beforeI2svg:function(){ky()}}}},vo=ys||{};vo[yo]||(vo[yo]={});vo[yo].styles||(vo[yo].styles={});vo[yo].hooks||(vo[yo].hooks={});vo[yo].shims||(vo[yo].shims=[]);var fa=vo[yo],$S=[],l4=function e(){Sn.removeEventListener("DOMContentLoaded",e),Yp=1,$S.map(function(t){return t()})},Yp=!1;bo&&(Yp=(Sn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Sn.readyState),Yp||Sn.addEventListener("DOMContentLoaded",l4));function c4(e){bo&&(Yp?setTimeout(e,0):$S.push(e))}function ad(e){var t=e.tag,i=e.attributes,s=i===void 0?{}:i,u=e.children,p=u===void 0?[]:u;return typeof e=="string"?NS(e):"<".concat(t," ").concat(r4(s),">").concat(p.map(ad).join(""),"</").concat(t,">")}function Rb(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var u4=function(t,i){return function(s,u,p,x){return t.call(i,s,u,p,x)}},Cy=function(t,i,s,u){var p=Object.keys(t),x=p.length,c=u!==void 0?u4(i,u):i,E,C,L;for(s===void 0?(E=1,L=t[p[0]]):(E=0,L=s);E<x;E++)C=p[E],L=c(L,t[C],C,t);return L};function h4(e){for(var t=[],i=0,s=e.length;i<s;){var u=e.charCodeAt(i++);if(u>=55296&&u<=56319&&i<s){var p=e.charCodeAt(i++);(p&64512)==56320?t.push(((u&1023)<<10)+(p&1023)+65536):(t.push(u),i--)}else t.push(u)}return t}function Kv(e){var t=h4(e);return t.length===1?t[0].toString(16):null}function d4(e,t){var i=e.length,s=e.charCodeAt(t),u;return s>=55296&&s<=56319&&i>t+1&&(u=e.charCodeAt(t+1),u>=56320&&u<=57343)?(s-55296)*1024+u-56320+65536:s}function Ob(e){return Object.keys(e).reduce(function(t,i){var s=e[i],u=!!s.icon;return u?t[s.iconName]=s.icon:t[i]=s,t},{})}function Jv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.skipHooks,u=s===void 0?!1:s,p=Ob(t);typeof fa.hooks.addPack=="function"&&!u?fa.hooks.addPack(e,Ob(t)):fa.styles[e]=pt(pt({},fa.styles[e]||{}),p),e==="fas"&&Jv("fa",t)}var Zf,Hf,Xf,_c=fa.styles,f4=fa.shims,p4=(Zf={},ur(Zf,wn,Object.values(Vh[wn])),ur(Zf,jn,Object.values(Vh[jn])),Zf),E0=null,US={},jS={},VS={},GS={},qS={},m4=(Hf={},ur(Hf,wn,Object.keys(Uh[wn])),ur(Hf,jn,Object.keys(Uh[jn])),Hf);function g4(e){return~Y5.indexOf(e)}function y4(e,t){var i=t.split("-"),s=i[0],u=i.slice(1).join("-");return s===e&&u!==""&&!g4(u)?u:null}var WS=function(){var t=function(p){return Cy(_c,function(x,c,E){return x[E]=Cy(c,p,{}),x},{})};US=t(function(u,p,x){if(p[3]&&(u[p[3]]=x),p[2]){var c=p[2].filter(function(E){return typeof E=="number"});c.forEach(function(E){u[E.toString(16)]=x})}return u}),jS=t(function(u,p,x){if(u[x]=x,p[2]){var c=p[2].filter(function(E){return typeof E=="string"});c.forEach(function(E){u[E]=x})}return u}),qS=t(function(u,p,x){var c=p[2];return u[x]=x,c.forEach(function(E){u[E]=x}),u});var i="far"in _c||xt.autoFetchSvg,s=Cy(f4,function(u,p){var x=p[0],c=p[1],E=p[2];return c==="far"&&!i&&(c="fas"),typeof x=="string"&&(u.names[x]={prefix:c,iconName:E}),typeof x=="number"&&(u.unicodes[x.toString(16)]={prefix:c,iconName:E}),u},{names:{},unicodes:{}});VS=s.names,GS=s.unicodes,E0=Pm(xt.styleDefault,{family:xt.familyDefault})};e4(function(e){E0=Pm(e.styleDefault,{family:xt.familyDefault})});WS();function S0(e,t){return(US[e]||{})[t]}function v4(e,t){return(jS[e]||{})[t]}function dl(e,t){return(qS[e]||{})[t]}function ZS(e){return VS[e]||{prefix:null,iconName:null}}function _4(e){var t=GS[e],i=S0("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function vs(){return E0}var T0=function(){return{prefix:null,iconName:null,rest:[]}};function Pm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,s=i===void 0?wn:i,u=Uh[s][e],p=jh[s][e]||jh[s][u],x=e in fa.styles?e:null;return p||x||null}var Bb=(Xf={},ur(Xf,wn,Object.keys(Vh[wn])),ur(Xf,jn,Object.keys(Vh[jn])),Xf);function Im(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.skipLookups,u=s===void 0?!1:s,p=(t={},ur(t,wn,"".concat(xt.cssPrefix,"-").concat(wn)),ur(t,jn,"".concat(xt.cssPrefix,"-").concat(jn)),t),x=null,c=wn;(e.includes(p[wn])||e.some(function(C){return Bb[wn].includes(C)}))&&(c=wn),(e.includes(p[jn])||e.some(function(C){return Bb[jn].includes(C)}))&&(c=jn);var E=e.reduce(function(C,L){var O=y4(xt.cssPrefix,L);if(_c[L]?(L=p4[c].includes(L)?G5[c][L]:L,x=L,C.prefix=L):m4[c].indexOf(L)>-1?(x=L,C.prefix=Pm(L,{family:c})):O?C.iconName=O:L!==xt.replacementClass&&L!==p[wn]&&L!==p[jn]&&C.rest.push(L),!u&&C.prefix&&C.iconName){var R=x==="fa"?ZS(C.iconName):{},Q=dl(C.prefix,C.iconName);R.prefix&&(x=null),C.iconName=R.iconName||Q||C.iconName,C.prefix=R.prefix||C.prefix,C.prefix==="far"&&!_c.far&&_c.fas&&!xt.autoFetchSvg&&(C.prefix="fas")}return C},T0());return(e.includes("fa-brands")||e.includes("fab"))&&(E.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(E.prefix="fad"),!E.prefix&&c===jn&&(_c.fass||xt.autoFetchSvg)&&(E.prefix="fass",E.iconName=dl(E.prefix,E.iconName)||E.iconName),(E.prefix==="fa"||x==="fa")&&(E.prefix=vs()||"fas"),E}var x4=function(){function e(){z5(this,e),this.definitions={}}return D5(e,[{key:"add",value:function(){for(var i=this,s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];var x=u.reduce(this._pullDefinitions,{});Object.keys(x).forEach(function(c){i.definitions[c]=pt(pt({},i.definitions[c]||{}),x[c]),Jv(c,x[c]);var E=Vh[wn][c];E&&Jv(E,x[c]),WS()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,s){var u=s.prefix&&s.iconName&&s.icon?{0:s}:s;return Object.keys(u).map(function(p){var x=u[p],c=x.prefix,E=x.iconName,C=x.icon,L=C[2];i[c]||(i[c]={}),L.length>0&&L.forEach(function(O){typeof O=="string"&&(i[c][O]=C)}),i[c][E]=C}),i}}]),e}(),Nb=[],xc={},Ic={},b4=Object.keys(Ic);function w4(e,t){var i=t.mixoutsTo;return Nb=e,xc={},Object.keys(Ic).forEach(function(s){b4.indexOf(s)===-1&&delete Ic[s]}),Nb.forEach(function(s){var u=s.mixout?s.mixout():{};if(Object.keys(u).forEach(function(x){typeof u[x]=="function"&&(i[x]=u[x]),Xp(u[x])==="object"&&Object.keys(u[x]).forEach(function(c){i[x]||(i[x]={}),i[x][c]=u[x][c]})}),s.hooks){var p=s.hooks();Object.keys(p).forEach(function(x){xc[x]||(xc[x]=[]),xc[x].push(p[x])})}s.provides&&s.provides(Ic)}),i}function Qv(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),u=2;u<i;u++)s[u-2]=arguments[u];var p=xc[e]||[];return p.forEach(function(x){t=x.apply(null,[t].concat(s))}),t}function El(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var u=xc[e]||[];u.forEach(function(p){p.apply(null,i)})}function _o(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Ic[e]?Ic[e].apply(null,t):void 0}function e_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||vs();if(t)return t=dl(i,t)||t,Rb(HS.definitions,i,t)||Rb(fa.styles,i,t)}var HS=new x4,E4=function(){xt.autoReplaceSvg=!1,xt.observeMutations=!1,El("noAuto")},S4={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return bo?(El("beforeI2svg",t),_o("pseudoElements2svg",t),_o("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;xt.autoReplaceSvg===!1&&(xt.autoReplaceSvg=!0),xt.observeMutations=!0,c4(function(){k4({autoReplaceSvgRoot:i}),El("watch",t)})}},T4={icon:function(t){if(t===null)return null;if(Xp(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:dl(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],s=Pm(t[0]);return{prefix:s,iconName:dl(s,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(xt.cssPrefix,"-"))>-1||t.match(q5))){var u=Im(t.split(" "),{skipLookups:!0});return{prefix:u.prefix||vs(),iconName:dl(u.prefix,u.iconName)||u.iconName}}if(typeof t=="string"){var p=vs();return{prefix:p,iconName:dl(p,t)||t}}}},zi={noAuto:E4,config:xt,dom:S4,parse:T4,library:HS,findIconDefinition:e_,toHtml:ad},k4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,s=i===void 0?Sn:i;(Object.keys(fa.styles).length>0||xt.autoFetchSvg)&&bo&&xt.autoReplaceSvg&&zi.dom.i2svg({node:s})};function Am(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(s){return ad(s)})}}),Object.defineProperty(e,"node",{get:function(){if(bo){var s=Sn.createElement("div");return s.innerHTML=e.html,s.children}}}),e}function C4(e){var t=e.children,i=e.main,s=e.mask,u=e.attributes,p=e.styles,x=e.transform;if(w0(x)&&i.found&&!s.found){var c=i.width,E=i.height,C={x:c/E/2,y:.5};u.style=Cm(pt(pt({},p),{},{"transform-origin":"".concat(C.x+x.x/16,"em ").concat(C.y+x.y/16,"em")}))}return[{tag:"svg",attributes:u,children:t}]}function P4(e){var t=e.prefix,i=e.iconName,s=e.children,u=e.attributes,p=e.symbol,x=p===!0?"".concat(t,"-").concat(xt.cssPrefix,"-").concat(i):p;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:pt(pt({},u),{},{id:x}),children:s}]}]}function k0(e){var t=e.icons,i=t.main,s=t.mask,u=e.prefix,p=e.iconName,x=e.transform,c=e.symbol,E=e.title,C=e.maskId,L=e.titleId,O=e.extra,R=e.watchable,Q=R===void 0?!1:R,ie=s.found?s:i,ae=ie.width,ye=ie.height,Y=u==="fak",V=[xt.replacementClass,p?"".concat(xt.cssPrefix,"-").concat(p):""].filter(function(ot){return O.classes.indexOf(ot)===-1}).filter(function(ot){return ot!==""||!!ot}).concat(O.classes).join(" "),H={children:[],attributes:pt(pt({},O.attributes),{},{"data-prefix":u,"data-icon":p,class:V,role:O.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(ae," ").concat(ye)})},ce=Y&&!~O.classes.indexOf("fa-fw")?{width:"".concat(ae/ye*16*.0625,"em")}:{};Q&&(H.attributes[wl]=""),E&&(H.children.push({tag:"title",attributes:{id:H.attributes["aria-labelledby"]||"title-".concat(L||qh())},children:[E]}),delete H.attributes.title);var xe=pt(pt({},H),{},{prefix:u,iconName:p,main:i,mask:s,maskId:C,transform:x,symbol:c,styles:pt(pt({},ce),O.styles)}),Ee=s.found&&i.found?_o("generateAbstractMask",xe)||{children:[],attributes:{}}:_o("generateAbstractIcon",xe)||{children:[],attributes:{}},ze=Ee.children,De=Ee.attributes;return xe.children=ze,xe.attributes=De,c?P4(xe):C4(xe)}function Fb(e){var t=e.content,i=e.width,s=e.height,u=e.transform,p=e.title,x=e.extra,c=e.watchable,E=c===void 0?!1:c,C=pt(pt(pt({},x.attributes),p?{title:p}:{}),{},{class:x.classes.join(" ")});E&&(C[wl]="");var L=pt({},x.styles);w0(u)&&(L.transform=a4({transform:u,startCentered:!0,width:i,height:s}),L["-webkit-transform"]=L.transform);var O=Cm(L);O.length>0&&(C.style=O);var R=[];return R.push({tag:"span",attributes:C,children:[t]}),p&&R.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),R}function I4(e){var t=e.content,i=e.title,s=e.extra,u=pt(pt(pt({},s.attributes),i?{title:i}:{}),{},{class:s.classes.join(" ")}),p=Cm(s.styles);p.length>0&&(u.style=p);var x=[];return x.push({tag:"span",attributes:u,children:[t]}),i&&x.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),x}var Py=fa.styles;function t_(e){var t=e[0],i=e[1],s=e.slice(4),u=g0(s,1),p=u[0],x=null;return Array.isArray(p)?x={tag:"g",attributes:{class:"".concat(xt.cssPrefix,"-").concat(hl.GROUP)},children:[{tag:"path",attributes:{class:"".concat(xt.cssPrefix,"-").concat(hl.SECONDARY),fill:"currentColor",d:p[0]}},{tag:"path",attributes:{class:"".concat(xt.cssPrefix,"-").concat(hl.PRIMARY),fill:"currentColor",d:p[1]}}]}:x={tag:"path",attributes:{fill:"currentColor",d:p}},{found:!0,width:t,height:i,icon:x}}var A4={found:!1,width:512,height:512};function M4(e,t){!LS&&!xt.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function n_(e,t){var i=t;return t==="fa"&&xt.styleDefault!==null&&(t=vs()),new Promise(function(s,u){if(_o("missingIconAbstract"),i==="fa"){var p=ZS(e)||{};e=p.iconName||e,t=p.prefix||t}if(e&&t&&Py[t]&&Py[t][e]){var x=Py[t][e];return s(t_(x))}M4(e,t),s(pt(pt({},A4),{},{icon:xt.showMissingIcons&&e?_o("missingIconAbstract")||{}:{}}))})}var $b=function(){},r_=xt.measurePerformance&&Uf&&Uf.mark&&Uf.measure?Uf:{mark:$b,measure:$b},sh='FA "6.3.0"',z4=function(t){return r_.mark("".concat(sh," ").concat(t," begins")),function(){return XS(t)}},XS=function(t){r_.mark("".concat(sh," ").concat(t," ends")),r_.measure("".concat(sh," ").concat(t),"".concat(sh," ").concat(t," begins"),"".concat(sh," ").concat(t," ends"))},C0={begin:z4,end:XS},vp=function(){};function Ub(e){var t=e.getAttribute?e.getAttribute(wl):null;return typeof t=="string"}function D4(e){var t=e.getAttribute?e.getAttribute(v0):null,i=e.getAttribute?e.getAttribute(_0):null;return t&&i}function L4(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(xt.replacementClass)}function R4(){if(xt.autoReplaceSvg===!0)return _p.replace;var e=_p[xt.autoReplaceSvg];return e||_p.replace}function O4(e){return Sn.createElementNS("http://www.w3.org/2000/svg",e)}function B4(e){return Sn.createElement(e)}function YS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,s=i===void 0?e.tag==="svg"?O4:B4:i;if(typeof e=="string")return Sn.createTextNode(e);var u=s(e.tag);Object.keys(e.attributes||[]).forEach(function(x){u.setAttribute(x,e.attributes[x])});var p=e.children||[];return p.forEach(function(x){u.appendChild(YS(x,{ceFn:s}))}),u}function N4(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var _p={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(u){i.parentNode.insertBefore(YS(u),i)}),i.getAttribute(wl)===null&&xt.keepOriginalSource){var s=Sn.createComment(N4(i));i.parentNode.replaceChild(s,i)}else i.remove()},nest:function(t){var i=t[0],s=t[1];if(~b0(i).indexOf(xt.replacementClass))return _p.replace(t);var u=new RegExp("".concat(xt.cssPrefix,"-.*"));if(delete s[0].attributes.id,s[0].attributes.class){var p=s[0].attributes.class.split(" ").reduce(function(c,E){return E===xt.replacementClass||E.match(u)?c.toSvg.push(E):c.toNode.push(E),c},{toNode:[],toSvg:[]});s[0].attributes.class=p.toSvg.join(" "),p.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",p.toNode.join(" "))}var x=s.map(function(c){return ad(c)}).join(`
`);i.setAttribute(wl,""),i.innerHTML=x}};function jb(e){e()}function KS(e,t){var i=typeof t=="function"?t:vp;if(e.length===0)i();else{var s=jb;xt.mutateApproach===j5&&(s=ys.requestAnimationFrame||jb),s(function(){var u=R4(),p=C0.begin("mutate");e.map(u),p(),i()})}}var P0=!1;function JS(){P0=!0}function i_(){P0=!1}var Kp=null;function Vb(e){if(zb&&xt.observeMutations){var t=e.treeCallback,i=t===void 0?vp:t,s=e.nodeCallback,u=s===void 0?vp:s,p=e.pseudoElementsCallback,x=p===void 0?vp:p,c=e.observeMutationsRoot,E=c===void 0?Sn:c;Kp=new zb(function(C){if(!P0){var L=vs();Vc(C).forEach(function(O){if(O.type==="childList"&&O.addedNodes.length>0&&!Ub(O.addedNodes[0])&&(xt.searchPseudoElements&&x(O.target),i(O.target)),O.type==="attributes"&&O.target.parentNode&&xt.searchPseudoElements&&x(O.target.parentNode),O.type==="attributes"&&Ub(O.target)&&~X5.indexOf(O.attributeName))if(O.attributeName==="class"&&D4(O.target)){var R=Im(b0(O.target)),Q=R.prefix,ie=R.iconName;O.target.setAttribute(v0,Q||L),ie&&O.target.setAttribute(_0,ie)}else L4(O.target)&&u(O.target)})}}),bo&&Kp.observe(E,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function F4(){Kp&&Kp.disconnect()}function $4(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(s,u){var p=u.split(":"),x=p[0],c=p.slice(1);return x&&c.length>0&&(s[x]=c.join(":").trim()),s},{})),i}function U4(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),s=e.innerText!==void 0?e.innerText.trim():"",u=Im(b0(e));return u.prefix||(u.prefix=vs()),t&&i&&(u.prefix=t,u.iconName=i),u.iconName&&u.prefix||(u.prefix&&s.length>0&&(u.iconName=v4(u.prefix,e.innerText)||S0(u.prefix,Kv(e.innerText))),!u.iconName&&xt.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(u.iconName=e.firstChild.data)),u}function j4(e){var t=Vc(e.attributes).reduce(function(u,p){return u.name!=="class"&&u.name!=="style"&&(u[p.name]=p.value),u},{}),i=e.getAttribute("title"),s=e.getAttribute("data-fa-title-id");return xt.autoA11y&&(i?t["aria-labelledby"]="".concat(xt.replacementClass,"-title-").concat(s||qh()):(t["aria-hidden"]="true",t.focusable="false")),t}function V4(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ba,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Gb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=U4(e),s=i.iconName,u=i.prefix,p=i.rest,x=j4(e),c=Qv("parseNodeAttributes",{},e),E=t.styleParser?$4(e):[];return pt({iconName:s,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:u,transform:Ba,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:p,styles:E,attributes:x}},c)}var G4=fa.styles;function QS(e){var t=xt.autoReplaceSvg==="nest"?Gb(e,{styleParser:!1}):Gb(e);return~t.extra.classes.indexOf(RS)?_o("generateLayersText",e,t):_o("generateSvgReplacementMutation",e,t)}var _s=new Set;x0.map(function(e){_s.add("fa-".concat(e))});Object.keys(Uh[wn]).map(_s.add.bind(_s));Object.keys(Uh[jn]).map(_s.add.bind(_s));_s=rd(_s);function qb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!bo)return Promise.resolve();var i=Sn.documentElement.classList,s=function(O){return i.add("".concat(Db,"-").concat(O))},u=function(O){return i.remove("".concat(Db,"-").concat(O))},p=xt.autoFetchSvg?_s:x0.map(function(L){return"fa-".concat(L)}).concat(Object.keys(G4));p.includes("fa")||p.push("fa");var x=[".".concat(RS,":not([").concat(wl,"])")].concat(p.map(function(L){return".".concat(L,":not([").concat(wl,"])")})).join(", ");if(x.length===0)return Promise.resolve();var c=[];try{c=Vc(e.querySelectorAll(x))}catch{}if(c.length>0)s("pending"),u("complete");else return Promise.resolve();var E=C0.begin("onTree"),C=c.reduce(function(L,O){try{var R=QS(O);R&&L.push(R)}catch(Q){LS||Q.name==="MissingIcon"&&console.error(Q)}return L},[]);return new Promise(function(L,O){Promise.all(C).then(function(R){KS(R,function(){s("active"),s("complete"),u("pending"),typeof t=="function"&&t(),E(),L()})}).catch(function(R){E(),O(R)})})}function q4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;QS(e).then(function(i){i&&KS([i],t)})}function W4(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(t||{}).icon?t:e_(t||{}),u=i.mask;return u&&(u=(u||{}).icon?u:e_(u||{})),e(s,pt(pt({},i),{},{mask:u}))}}var Z4=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.transform,u=s===void 0?Ba:s,p=i.symbol,x=p===void 0?!1:p,c=i.mask,E=c===void 0?null:c,C=i.maskId,L=C===void 0?null:C,O=i.title,R=O===void 0?null:O,Q=i.titleId,ie=Q===void 0?null:Q,ae=i.classes,ye=ae===void 0?[]:ae,Y=i.attributes,V=Y===void 0?{}:Y,H=i.styles,ce=H===void 0?{}:H;if(t){var xe=t.prefix,Ee=t.iconName,ze=t.icon;return Am(pt({type:"icon"},t),function(){return El("beforeDOMElementCreation",{iconDefinition:t,params:i}),xt.autoA11y&&(R?V["aria-labelledby"]="".concat(xt.replacementClass,"-title-").concat(ie||qh()):(V["aria-hidden"]="true",V.focusable="false")),k0({icons:{main:t_(ze),mask:E?t_(E.icon):{found:!1,width:null,height:null,icon:{}}},prefix:xe,iconName:Ee,transform:pt(pt({},Ba),u),symbol:x,title:R,maskId:L,titleId:ie,extra:{attributes:V,styles:ce,classes:ye}})})}},H4={mixout:function(){return{icon:W4(Z4)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=qb,i.nodeCallback=q4,i}}},provides:function(t){t.i2svg=function(i){var s=i.node,u=s===void 0?Sn:s,p=i.callback,x=p===void 0?function(){}:p;return qb(u,x)},t.generateSvgReplacementMutation=function(i,s){var u=s.iconName,p=s.title,x=s.titleId,c=s.prefix,E=s.transform,C=s.symbol,L=s.mask,O=s.maskId,R=s.extra;return new Promise(function(Q,ie){Promise.all([n_(u,c),L.iconName?n_(L.iconName,L.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(ae){var ye=g0(ae,2),Y=ye[0],V=ye[1];Q([i,k0({icons:{main:Y,mask:V},prefix:c,iconName:u,transform:E,symbol:C,maskId:O,title:p,titleId:x,extra:R,watchable:!0})])}).catch(ie)})},t.generateAbstractIcon=function(i){var s=i.children,u=i.attributes,p=i.main,x=i.transform,c=i.styles,E=Cm(c);E.length>0&&(u.style=E);var C;return w0(x)&&(C=_o("generateAbstractTransformGrouping",{main:p,transform:x,containerWidth:p.width,iconWidth:p.width})),s.push(C||p.icon),{children:s,attributes:u}}}},X4={mixout:function(){return{layer:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.classes,p=u===void 0?[]:u;return Am({type:"layer"},function(){El("beforeDOMElementCreation",{assembler:i,params:s});var x=[];return i(function(c){Array.isArray(c)?c.map(function(E){x=x.concat(E.abstract)}):x=x.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(xt.cssPrefix,"-layers")].concat(rd(p)).join(" ")},children:x}]})}}}},Y4={mixout:function(){return{counter:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.title,p=u===void 0?null:u,x=s.classes,c=x===void 0?[]:x,E=s.attributes,C=E===void 0?{}:E,L=s.styles,O=L===void 0?{}:L;return Am({type:"counter",content:i},function(){return El("beforeDOMElementCreation",{content:i,params:s}),I4({content:i.toString(),title:p,extra:{attributes:C,styles:O,classes:["".concat(xt.cssPrefix,"-layers-counter")].concat(rd(c))}})})}}}},K4={mixout:function(){return{text:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.transform,p=u===void 0?Ba:u,x=s.title,c=x===void 0?null:x,E=s.classes,C=E===void 0?[]:E,L=s.attributes,O=L===void 0?{}:L,R=s.styles,Q=R===void 0?{}:R;return Am({type:"text",content:i},function(){return El("beforeDOMElementCreation",{content:i,params:s}),Fb({content:i,transform:pt(pt({},Ba),p),title:c,extra:{attributes:O,styles:Q,classes:["".concat(xt.cssPrefix,"-layers-text")].concat(rd(C))}})})}}},provides:function(t){t.generateLayersText=function(i,s){var u=s.title,p=s.transform,x=s.extra,c=null,E=null;if(MS){var C=parseInt(getComputedStyle(i).fontSize,10),L=i.getBoundingClientRect();c=L.width/C,E=L.height/C}return xt.autoA11y&&!u&&(x.attributes["aria-hidden"]="true"),Promise.resolve([i,Fb({content:i.innerHTML,width:c,height:E,transform:p,title:u,extra:x,watchable:!0})])}}},J4=new RegExp('"',"ug"),Wb=[1105920,1112319];function Q4(e){var t=e.replace(J4,""),i=d4(t,0),s=i>=Wb[0]&&i<=Wb[1],u=t.length===2?t[0]===t[1]:!1;return{value:Kv(u?t[0]:t),isSecondary:s||u}}function Zb(e,t){var i="".concat(U5).concat(t.replace(":","-"));return new Promise(function(s,u){if(e.getAttribute(i)!==null)return s();var p=Vc(e.children),x=p.filter(function(ze){return ze.getAttribute(Yv)===t})[0],c=ys.getComputedStyle(e,t),E=c.getPropertyValue("font-family").match(W5),C=c.getPropertyValue("font-weight"),L=c.getPropertyValue("content");if(x&&!E)return e.removeChild(x),s();if(E&&L!=="none"&&L!==""){var O=c.getPropertyValue("content"),R=~["Sharp"].indexOf(E[2])?jn:wn,Q=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(E[2])?jh[R][E[2].toLowerCase()]:Z5[R][C],ie=Q4(O),ae=ie.value,ye=ie.isSecondary,Y=E[0].startsWith("FontAwesome"),V=S0(Q,ae),H=V;if(Y){var ce=_4(ae);ce.iconName&&ce.prefix&&(V=ce.iconName,Q=ce.prefix)}if(V&&!ye&&(!x||x.getAttribute(v0)!==Q||x.getAttribute(_0)!==H)){e.setAttribute(i,H),x&&e.removeChild(x);var xe=V4(),Ee=xe.extra;Ee.attributes[Yv]=t,n_(V,Q).then(function(ze){var De=k0(pt(pt({},xe),{},{icons:{main:ze,mask:T0()},prefix:Q,iconName:H,extra:Ee,watchable:!0})),ot=Sn.createElement("svg");t==="::before"?e.insertBefore(ot,e.firstChild):e.appendChild(ot),ot.outerHTML=De.map(function(Fe){return ad(Fe)}).join(`
`),e.removeAttribute(i),s()}).catch(u)}else s()}else s()})}function e3(e){return Promise.all([Zb(e,"::before"),Zb(e,"::after")])}function t3(e){return e.parentNode!==document.head&&!~V5.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Yv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function Hb(e){if(bo)return new Promise(function(t,i){var s=Vc(e.querySelectorAll("*")).filter(t3).map(e3),u=C0.begin("searchPseudoElements");JS(),Promise.all(s).then(function(){u(),i_(),t()}).catch(function(){u(),i_(),i()})})}var n3={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=Hb,i}}},provides:function(t){t.pseudoElements2svg=function(i){var s=i.node,u=s===void 0?Sn:s;xt.searchPseudoElements&&Hb(u)}}},Xb=!1,r3={mixout:function(){return{dom:{unwatch:function(){JS(),Xb=!0}}}},hooks:function(){return{bootstrap:function(){Vb(Qv("mutationObserverCallbacks",{}))},noAuto:function(){F4()},watch:function(i){var s=i.observeMutationsRoot;Xb?i_():Vb(Qv("mutationObserverCallbacks",{observeMutationsRoot:s}))}}}},Yb=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(s,u){var p=u.toLowerCase().split("-"),x=p[0],c=p.slice(1).join("-");if(x&&c==="h")return s.flipX=!0,s;if(x&&c==="v")return s.flipY=!0,s;if(c=parseFloat(c),isNaN(c))return s;switch(x){case"grow":s.size=s.size+c;break;case"shrink":s.size=s.size-c;break;case"left":s.x=s.x-c;break;case"right":s.x=s.x+c;break;case"up":s.y=s.y-c;break;case"down":s.y=s.y+c;break;case"rotate":s.rotate=s.rotate+c;break}return s},i)},i3={mixout:function(){return{parse:{transform:function(i){return Yb(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,s){var u=s.getAttribute("data-fa-transform");return u&&(i.transform=Yb(u)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var s=i.main,u=i.transform,p=i.containerWidth,x=i.iconWidth,c={transform:"translate(".concat(p/2," 256)")},E="translate(".concat(u.x*32,", ").concat(u.y*32,") "),C="scale(".concat(u.size/16*(u.flipX?-1:1),", ").concat(u.size/16*(u.flipY?-1:1),") "),L="rotate(".concat(u.rotate," 0 0)"),O={transform:"".concat(E," ").concat(C," ").concat(L)},R={transform:"translate(".concat(x/2*-1," -256)")},Q={outer:c,inner:O,path:R};return{tag:"g",attributes:pt({},Q.outer),children:[{tag:"g",attributes:pt({},Q.inner),children:[{tag:s.icon.tag,children:s.icon.children,attributes:pt(pt({},s.icon.attributes),Q.path)}]}]}}}},Iy={x:0,y:0,width:"100%",height:"100%"};function Kb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function a3(e){return e.tag==="g"?e.children:[e]}var o3={hooks:function(){return{parseNodeAttributes:function(i,s){var u=s.getAttribute("data-fa-mask"),p=u?Im(u.split(" ").map(function(x){return x.trim()})):T0();return p.prefix||(p.prefix=vs()),i.mask=p,i.maskId=s.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var s=i.children,u=i.attributes,p=i.main,x=i.mask,c=i.maskId,E=i.transform,C=p.width,L=p.icon,O=x.width,R=x.icon,Q=i4({transform:E,containerWidth:O,iconWidth:C}),ie={tag:"rect",attributes:pt(pt({},Iy),{},{fill:"white"})},ae=L.children?{children:L.children.map(Kb)}:{},ye={tag:"g",attributes:pt({},Q.inner),children:[Kb(pt({tag:L.tag,attributes:pt(pt({},L.attributes),Q.path)},ae))]},Y={tag:"g",attributes:pt({},Q.outer),children:[ye]},V="mask-".concat(c||qh()),H="clip-".concat(c||qh()),ce={tag:"mask",attributes:pt(pt({},Iy),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ie,Y]},xe={tag:"defs",children:[{tag:"clipPath",attributes:{id:H},children:a3(R)},ce]};return s.push(xe,{tag:"rect",attributes:pt({fill:"currentColor","clip-path":"url(#".concat(H,")"),mask:"url(#".concat(V,")")},Iy)}),{children:s,attributes:u}}}},s3={provides:function(t){var i=!1;ys.matchMedia&&(i=ys.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var s=[],u={fill:"currentColor"},p={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};s.push({tag:"path",attributes:pt(pt({},u),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var x=pt(pt({},p),{},{attributeName:"opacity"}),c={tag:"circle",attributes:pt(pt({},u),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||c.children.push({tag:"animate",attributes:pt(pt({},p),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:pt(pt({},x),{},{values:"1;0;1;1;0;1;"})}),s.push(c),s.push({tag:"path",attributes:pt(pt({},u),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:pt(pt({},x),{},{values:"1;0;0;0;0;1;"})}]}),i||s.push({tag:"path",attributes:pt(pt({},u),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:pt(pt({},x),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:s}}}},l3={hooks:function(){return{parseNodeAttributes:function(i,s){var u=s.getAttribute("data-fa-symbol"),p=u===null?!1:u===""?!0:u;return i.symbol=p,i}}}},c3=[s4,H4,X4,Y4,K4,n3,r3,i3,o3,s3,l3];w4(c3,{mixoutsTo:zi});zi.noAuto;zi.config;zi.library;zi.dom;var a_=zi.parse;zi.findIconDefinition;zi.toHtml;var u3=zi.icon;zi.layer;zi.text;zi.counter;var _t={},h3={get exports(){return _t},set exports(e){_t=e}},d3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",f3=d3,p3=f3;function eT(){}function tT(){}tT.resetWarningCache=eT;var m3=function(){function e(s,u,p,x,c,E){if(E!==p3){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tT,resetWarningCache:eT};return i.PropTypes=i,i};h3.exports=m3();function Jb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),i.push.apply(i,s)}return i}function as(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Jb(Object(i),!0).forEach(function(s){bc(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Jb(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Jp(e){return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function bc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g3(e,t){if(e==null)return{};var i={},s=Object.keys(e),u,p;for(p=0;p<s.length;p++)u=s[p],!(t.indexOf(u)>=0)&&(i[u]=e[u]);return i}function y3(e,t){if(e==null)return{};var i=g3(e,t),s,u;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(u=0;u<p.length;u++)s=p[u],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function o_(e){return v3(e)||_3(e)||x3(e)||b3()}function v3(e){if(Array.isArray(e))return s_(e)}function _3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function x3(e,t){if(e){if(typeof e=="string")return s_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s_(e,t)}}function s_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function b3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w3(e){var t,i=e.beat,s=e.fade,u=e.beatFade,p=e.bounce,x=e.shake,c=e.flash,E=e.spin,C=e.spinPulse,L=e.spinReverse,O=e.pulse,R=e.fixedWidth,Q=e.inverse,ie=e.border,ae=e.listItem,ye=e.flip,Y=e.size,V=e.rotation,H=e.pull,ce=(t={"fa-beat":i,"fa-fade":s,"fa-beat-fade":u,"fa-bounce":p,"fa-shake":x,"fa-flash":c,"fa-spin":E,"fa-spin-reverse":L,"fa-spin-pulse":C,"fa-pulse":O,"fa-fw":R,"fa-inverse":Q,"fa-border":ie,"fa-li":ae,"fa-flip":ye===!0,"fa-flip-horizontal":ye==="horizontal"||ye==="both","fa-flip-vertical":ye==="vertical"||ye==="both"},bc(t,"fa-".concat(Y),typeof Y<"u"&&Y!==null),bc(t,"fa-rotate-".concat(V),typeof V<"u"&&V!==null&&V!==0),bc(t,"fa-pull-".concat(H),typeof H<"u"&&H!==null),bc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ce).map(function(xe){return ce[xe]?xe:null}).filter(function(xe){return xe})}function E3(e){return e=e-0,e===e}function nT(e){return E3(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var S3=["style"];function T3(e){return e.charAt(0).toUpperCase()+e.slice(1)}function k3(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var s=i.indexOf(":"),u=nT(i.slice(0,s)),p=i.slice(s+1).trim();return u.startsWith("webkit")?t[T3(u)]=p:t[u]=p,t},{})}function rT(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var s=(t.children||[]).map(function(E){return rT(e,E)}),u=Object.keys(t.attributes||{}).reduce(function(E,C){var L=t.attributes[C];switch(C){case"class":E.attrs.className=L,delete t.attributes.class;break;case"style":E.attrs.style=k3(L);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?E.attrs[C.toLowerCase()]=L:E.attrs[nT(C)]=L}return E},{attrs:{}}),p=i.style,x=p===void 0?{}:p,c=y3(i,S3);return u.attrs.style=as(as({},u.attrs.style),x),e.apply(void 0,[t.tag,as(as({},u.attrs),c)].concat(o_(s)))}var iT=!1;try{iT=!0}catch{}function C3(){if(!iT&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Qb(e){if(e&&Jp(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(a_.icon)return a_.icon(e);if(e===null)return null;if(e&&Jp(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function Ay(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?bc({},e,t):{}}var Mm=we.forwardRef(function(e,t){var i=e.icon,s=e.mask,u=e.symbol,p=e.className,x=e.title,c=e.titleId,E=e.maskId,C=Qb(i),L=Ay("classes",[].concat(o_(w3(e)),o_(p.split(" ")))),O=Ay("transform",typeof e.transform=="string"?a_.transform(e.transform):e.transform),R=Ay("mask",Qb(s)),Q=u3(C,as(as(as(as({},L),O),R),{},{symbol:u,title:x,titleId:c,maskId:E}));if(!Q)return C3("Could not find icon",C),null;var ie=Q.abstract,ae={ref:t};return Object.keys(e).forEach(function(ye){Mm.defaultProps.hasOwnProperty(ye)||(ae[ye]=e[ye])}),P3(ie[0],ae)});Mm.displayName="FontAwesomeIcon";Mm.propTypes={beat:_t.bool,border:_t.bool,beatFade:_t.bool,bounce:_t.bool,className:_t.string,fade:_t.bool,flash:_t.bool,mask:_t.oneOfType([_t.object,_t.array,_t.string]),maskId:_t.string,fixedWidth:_t.bool,inverse:_t.bool,flip:_t.oneOf([!0,!1,"horizontal","vertical","both"]),icon:_t.oneOfType([_t.object,_t.array,_t.string]),listItem:_t.bool,pull:_t.oneOf(["right","left"]),pulse:_t.bool,rotation:_t.oneOf([0,90,180,270]),shake:_t.bool,size:_t.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:_t.bool,spinPulse:_t.bool,spinReverse:_t.bool,symbol:_t.oneOfType([_t.bool,_t.string]),title:_t.string,titleId:_t.string,transform:_t.oneOfType([_t.string,_t.object]),swapOpacity:_t.bool};Mm.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var P3=rT.bind(null,we.createElement),uN={prefix:"far",iconName:"compass",icon:[512,512,[129517],"f14e","M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},hN={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},dN={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},fN={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"]},$n={},I0={},od={},sd={},aT="Expected a function",ew=0/0,I3="[object Symbol]",A3=/^\s+|\s+$/g,M3=/^[-+]0x[0-9a-f]+$/i,z3=/^0b[01]+$/i,D3=/^0o[0-7]+$/i,L3=parseInt,R3=typeof Ge=="object"&&Ge&&Ge.Object===Object&&Ge,O3=typeof self=="object"&&self&&self.Object===Object&&self,B3=R3||O3||Function("return this")(),N3=Object.prototype,F3=N3.toString,$3=Math.max,U3=Math.min,My=function(){return B3.Date.now()};function j3(e,t,i){var s,u,p,x,c,E,C=0,L=!1,O=!1,R=!0;if(typeof e!="function")throw new TypeError(aT);t=tw(t)||0,Qp(i)&&(L=!!i.leading,O="maxWait"in i,p=O?$3(tw(i.maxWait)||0,t):p,R="trailing"in i?!!i.trailing:R);function Q(Ee){var ze=s,De=u;return s=u=void 0,C=Ee,x=e.apply(De,ze),x}function ie(Ee){return C=Ee,c=setTimeout(Y,t),L?Q(Ee):x}function ae(Ee){var ze=Ee-E,De=Ee-C,ot=t-ze;return O?U3(ot,p-De):ot}function ye(Ee){var ze=Ee-E,De=Ee-C;return E===void 0||ze>=t||ze<0||O&&De>=p}function Y(){var Ee=My();if(ye(Ee))return V(Ee);c=setTimeout(Y,ae(Ee))}function V(Ee){return c=void 0,R&&s?Q(Ee):(s=u=void 0,x)}function H(){c!==void 0&&clearTimeout(c),C=0,s=E=u=c=void 0}function ce(){return c===void 0?x:V(My())}function xe(){var Ee=My(),ze=ye(Ee);if(s=arguments,u=this,E=Ee,ze){if(c===void 0)return ie(E);if(O)return c=setTimeout(Y,t),Q(E)}return c===void 0&&(c=setTimeout(Y,t)),x}return xe.cancel=H,xe.flush=ce,xe}function V3(e,t,i){var s=!0,u=!0;if(typeof e!="function")throw new TypeError(aT);return Qp(i)&&(s="leading"in i?!!i.leading:s,u="trailing"in i?!!i.trailing:u),j3(e,t,{leading:s,maxWait:t,trailing:u})}function Qp(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function G3(e){return!!e&&typeof e=="object"}function q3(e){return typeof e=="symbol"||G3(e)&&F3.call(e)==I3}function tw(e){if(typeof e=="number")return e;if(q3(e))return ew;if(Qp(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qp(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(A3,"");var i=z3.test(e);return i||D3.test(e)?L3(e.slice(2),i?2:8):M3.test(e)?ew:+e}var W3=V3,ld={};Object.defineProperty(ld,"__esModule",{value:!0});ld.addPassiveEventListener=function(t,i,s){var u=function(){var p=!1;try{var x=Object.defineProperty({},"passive",{get:function(){p=!0}});window.addEventListener("test",null,x)}catch{}return p}();t.addEventListener(i,s,u?{passive:!0}:!1)};ld.removePassiveEventListener=function(t,i,s){t.removeEventListener(i,s)};Object.defineProperty(sd,"__esModule",{value:!0});var Z3=W3,H3=Y3(Z3),X3=ld;function Y3(e){return e&&e.__esModule?e:{default:e}}var K3=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,H3.default)(t,i)},Mn={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(t,i){if(t){var s=K3(function(u){Mn.scrollHandler(t)},i);Mn.scrollSpyContainers.push(t),(0,X3.addPassiveEventListener)(t,"scroll",s)}},isMounted:function(t){return Mn.scrollSpyContainers.indexOf(t)!==-1},currentPositionX:function(t){if(t===document){var i=window.pageYOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return i?window.pageXOffset:s?document.documentElement.scrollLeft:document.body.scrollLeft}else return t.scrollLeft},currentPositionY:function(t){if(t===document){var i=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return i?window.pageYOffset:s?document.documentElement.scrollTop:document.body.scrollTop}else return t.scrollTop},scrollHandler:function(t){var i=Mn.scrollSpyContainers[Mn.scrollSpyContainers.indexOf(t)].spyCallbacks||[];i.forEach(function(s){return s(Mn.currentPositionX(t),Mn.currentPositionY(t))})},addStateHandler:function(t){Mn.spySetState.push(t)},addSpyHandler:function(t,i){var s=Mn.scrollSpyContainers[Mn.scrollSpyContainers.indexOf(i)];s.spyCallbacks||(s.spyCallbacks=[]),s.spyCallbacks.push(t),t(Mn.currentPositionX(i),Mn.currentPositionY(i))},updateStates:function(){Mn.spySetState.forEach(function(t){return t()})},unmount:function(t,i){Mn.scrollSpyContainers.forEach(function(s){return s.spyCallbacks&&s.spyCallbacks.length&&s.spyCallbacks.indexOf(i)>-1&&s.spyCallbacks.splice(s.spyCallbacks.indexOf(i),1)}),Mn.spySetState&&Mn.spySetState.length&&Mn.spySetState.indexOf(t)>-1&&Mn.spySetState.splice(Mn.spySetState.indexOf(t),1),document.removeEventListener("scroll",Mn.scrollHandler)},update:function(){return Mn.scrollSpyContainers.forEach(function(t){return Mn.scrollHandler(t)})}};sd.default=Mn;var Gc={},cd={};Object.defineProperty(cd,"__esModule",{value:!0});var J3=function(t,i){var s=t.indexOf("#")===0?t.substring(1):t,u=s?"#"+s:"",p=window&&window.location,x=u?p.pathname+p.search+u:p.pathname+p.search;i?history.pushState(history.state,"",x):history.replaceState(history.state,"",x)},Q3=function(){return window.location.hash.replace(/^#/,"")},eL=function(t){return function(i){return t.contains?t!=i&&t.contains(i):!!(t.compareDocumentPosition(i)&16)}},tL=function(t){return getComputedStyle(t).position!=="static"},zy=function(t,i){for(var s=t.offsetTop,u=t.offsetParent;u&&!i(u);)s+=u.offsetTop,u=u.offsetParent;return{offsetTop:s,offsetParent:u}},nL=function(t,i,s){if(s)return t===document?i.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(t).position!=="static"?i.offsetLeft:i.offsetLeft-t.offsetLeft;if(t===document)return i.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(tL(t)){if(i.offsetParent!==t){var u=function(L){return L===t||L===document},p=zy(i,u),x=p.offsetTop,c=p.offsetParent;if(c!==t)throw new Error("Seems containerElement is not an ancestor of the Element");return x}return i.offsetTop}if(i.offsetParent===t.offsetParent)return i.offsetTop-t.offsetTop;var E=function(L){return L===document};return zy(i,E).offsetTop-zy(t,E).offsetTop};cd.default={updateHash:J3,getHash:Q3,filterElementInContainer:eL,scrollOffset:nL};var zm={},A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.default={defaultEasing:function(t){return t<.5?Math.pow(t*2,2)/2:1-Math.pow((1-t)*2,2)/2},linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};var M0={};Object.defineProperty(M0,"__esModule",{value:!0});var rL=ld,iL=["mousedown","mousewheel","touchmove","keydown"];M0.default={subscribe:function(t){return typeof document<"u"&&iL.forEach(function(i){return(0,rL.addPassiveEventListener)(document,i,t)})}};var ud={};Object.defineProperty(ud,"__esModule",{value:!0});var l_={registered:{},scrollEvent:{register:function(t,i){l_.registered[t]=i},remove:function(t){l_.registered[t]=null}}};ud.default=l_;Object.defineProperty(zm,"__esModule",{value:!0});var aL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},oL=cd;Dm(oL);var sL=A0,nw=Dm(sL),lL=M0,cL=Dm(lL),uL=ud,Ra=Dm(uL);function Dm(e){return e&&e.__esModule?e:{default:e}}var oT=function(t){return nw.default[t.smooth]||nw.default.defaultEasing},hL=function(t){return typeof t=="function"?t:function(){return t}},dL=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},c_=function(){return dL()||function(e,t,i){window.setTimeout(e,i||1e3/60,new Date().getTime())}}(),sT=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},lT=function(t){var i=t.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollLeft;var s=window.pageXOffset!==void 0,u=(document.compatMode||"")==="CSS1Compat";return s?window.pageXOffset:u?document.documentElement.scrollLeft:document.body.scrollLeft},cT=function(t){var i=t.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollTop;var s=window.pageXOffset!==void 0,u=(document.compatMode||"")==="CSS1Compat";return s?window.pageYOffset:u?document.documentElement.scrollTop:document.body.scrollTop},fL=function(t){var i=t.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollWidth-i.offsetWidth;var s=document.body,u=document.documentElement;return Math.max(s.scrollWidth,s.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth)},pL=function(t){var i=t.data.containerElement;if(i&&i!==document&&i!==document.body)return i.scrollHeight-i.offsetHeight;var s=document.body,u=document.documentElement;return Math.max(s.scrollHeight,s.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight)},mL=function e(t,i,s){var u=i.data;if(!i.ignoreCancelEvents&&u.cancel){Ra.default.registered.end&&Ra.default.registered.end(u.to,u.target,u.currentPositionY);return}if(u.delta=Math.round(u.targetPosition-u.startPosition),u.start===null&&(u.start=s),u.progress=s-u.start,u.percent=u.progress>=u.duration?1:t(u.progress/u.duration),u.currentPosition=u.startPosition+Math.ceil(u.delta*u.percent),u.containerElement&&u.containerElement!==document&&u.containerElement!==document.body?i.horizontal?u.containerElement.scrollLeft=u.currentPosition:u.containerElement.scrollTop=u.currentPosition:i.horizontal?window.scrollTo(u.currentPosition,0):window.scrollTo(0,u.currentPosition),u.percent<1){var p=e.bind(null,t,i);c_.call(window,p);return}Ra.default.registered.end&&Ra.default.registered.end(u.to,u.target,u.currentPosition)},z0=function(t){t.data.containerElement=t?t.containerId?document.getElementById(t.containerId):t.container&&t.container.nodeType?t.container:document:null},hd=function(t,i,s,u){if(i.data=i.data||sT(),window.clearTimeout(i.data.delayTimeout),cL.default.subscribe(function(){i.data.cancel=!0}),z0(i),i.data.start=null,i.data.cancel=!1,i.data.startPosition=i.horizontal?lT(i):cT(i),i.data.targetPosition=i.absolute?t:t+i.data.startPosition,i.data.startPosition===i.data.targetPosition){Ra.default.registered.end&&Ra.default.registered.end(i.data.to,i.data.target,i.data.currentPosition);return}i.data.delta=Math.round(i.data.targetPosition-i.data.startPosition),i.data.duration=hL(i.duration)(i.data.delta),i.data.duration=isNaN(parseFloat(i.data.duration))?1e3:parseFloat(i.data.duration),i.data.to=s,i.data.target=u;var p=oT(i),x=mL.bind(null,p,i);if(i&&i.delay>0){i.data.delayTimeout=window.setTimeout(function(){Ra.default.registered.begin&&Ra.default.registered.begin(i.data.to,i.data.target),c_.call(window,x)},i.delay);return}Ra.default.registered.begin&&Ra.default.registered.begin(i.data.to,i.data.target),c_.call(window,x)},Lm=function(t){return t=aL({},t),t.data=t.data||sT(),t.absolute=!0,t},gL=function(t){hd(0,Lm(t))},yL=function(t,i){hd(t,Lm(i))},vL=function(t){t=Lm(t),z0(t),hd(t.horizontal?fL(t):pL(t),t)},_L=function(t,i){i=Lm(i),z0(i);var s=i.horizontal?lT(i):cT(i);hd(t+s,i)};zm.default={animateTopScroll:hd,getAnimationType:oT,scrollToTop:gL,scrollToBottom:vL,scrollTo:yL,scrollMore:_L};Object.defineProperty(Gc,"__esModule",{value:!0});var xL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},bL=cd,wL=D0(bL),EL=zm,SL=D0(EL),TL=ud,Yf=D0(TL);function D0(e){return e&&e.__esModule?e:{default:e}}var Kf={},rw=void 0;Gc.default={unmount:function(){Kf={}},register:function(t,i){Kf[t]=i},unregister:function(t){delete Kf[t]},get:function(t){return Kf[t]||document.getElementById(t)||document.getElementsByName(t)[0]||document.getElementsByClassName(t)[0]},setActiveLink:function(t){return rw=t},getActiveLink:function(){return rw},scrollTo:function(t,i){var s=this.get(t);if(!s){console.warn("target Element not found");return}i=xL({},i,{absolute:!1});var u=i.containerId,p=i.container,x=void 0;u?x=document.getElementById(u):p&&p.nodeType?x=p:x=document,i.absolute=!0;var c=i.horizontal,E=wL.default.scrollOffset(x,s,c)+(i.offset||0);if(!i.smooth){Yf.default.registered.begin&&Yf.default.registered.begin(t,s),x===document?i.horizontal?window.scrollTo(E,0):window.scrollTo(0,E):x.scrollTop=E,Yf.default.registered.end&&Yf.default.registered.end(t,s);return}SL.default.animateTopScroll(E,i,t,s)}};var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});var kL=cd,Dy=CL(kL);function CL(e){return e&&e.__esModule?e:{default:e}}var PL={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(t){this.scroller=t,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(t,i){this.containers[t]=i},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var t=this,i=this.getHash();i?window.setTimeout(function(){t.scrollTo(i,!0),t.initialized=!0},10):this.initialized=!0},scrollTo:function(t,i){var s=this.scroller,u=s.get(t);if(u&&(i||t!==s.getActiveLink())){var p=this.containers[t]||document;s.scrollTo(t,{container:p})}},getHash:function(){return Dy.default.getHash()},changeHash:function(t,i){this.isInitialized()&&Dy.default.getHash()!==t&&Dy.default.updateHash(t,i)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};Rm.default=PL;Object.defineProperty(od,"__esModule",{value:!0});var Jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},IL=function(){function e(t,i){for(var s=0;s<i.length;s++){var u=i[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),AL=Ie,iw=dd(AL),ML=sd,Qf=dd(ML),zL=Gc,DL=dd(zL),LL=_t,Cn=dd(LL),RL=Rm,Yo=dd(RL);function dd(e){return e&&e.__esModule?e:{default:e}}function OL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function NL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var aw={to:Cn.default.string.isRequired,containerId:Cn.default.string,container:Cn.default.object,activeClass:Cn.default.string,activeStyle:Cn.default.object,spy:Cn.default.bool,horizontal:Cn.default.bool,smooth:Cn.default.oneOfType([Cn.default.bool,Cn.default.string]),offset:Cn.default.number,delay:Cn.default.number,isDynamic:Cn.default.bool,onClick:Cn.default.func,duration:Cn.default.oneOfType([Cn.default.number,Cn.default.func]),absolute:Cn.default.bool,onSetActive:Cn.default.func,onSetInactive:Cn.default.func,ignoreCancelEvents:Cn.default.bool,hashSpy:Cn.default.bool,saveHashHistory:Cn.default.bool,spyThrottle:Cn.default.number};od.default=function(e,t){var i=t||DL.default,s=function(p){NL(x,p);function x(c){OL(this,x);var E=BL(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,c));return u.call(E),E.state={active:!1},E}return IL(x,[{key:"getScrollSpyContainer",value:function(){var E=this.props.containerId,C=this.props.container;return E&&!C?document.getElementById(E):C&&C.nodeType?C:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var E=this.getScrollSpyContainer();Qf.default.isMounted(E)||Qf.default.mount(E,this.props.spyThrottle),this.props.hashSpy&&(Yo.default.isMounted()||Yo.default.mount(i),Yo.default.mapContainer(this.props.to,E)),Qf.default.addSpyHandler(this.spyHandler,E),this.setState({container:E})}}},{key:"componentWillUnmount",value:function(){Qf.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var E="";this.state&&this.state.active?E=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():E=this.props.className;var C={};this.state&&this.state.active?C=Jf({},this.props.style,this.props.activeStyle):C=Jf({},this.props.style);var L=Jf({},this.props);for(var O in aw)L.hasOwnProperty(O)&&delete L[O];return L.className=E,L.style=C,L.onClick=this.handleClick,iw.default.createElement(e,L)}}]),x}(iw.default.PureComponent),u=function(){var x=this;this.scrollTo=function(c,E){i.scrollTo(c,Jf({},x.state,E))},this.handleClick=function(c){x.props.onClick&&x.props.onClick(c),c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault(),x.scrollTo(x.props.to,x.props)},this.spyHandler=function(c,E){var C=x.getScrollSpyContainer();if(!(Yo.default.isMounted()&&!Yo.default.isInitialized())){var L=x.props.horizontal,O=x.props.to,R=null,Q=void 0,ie=void 0;if(L){var ae=0,ye=0,Y=0;if(C.getBoundingClientRect){var V=C.getBoundingClientRect();Y=V.left}if(!R||x.props.isDynamic){if(R=i.get(O),!R)return;var H=R.getBoundingClientRect();ae=H.left-Y+c,ye=ae+H.width}var ce=c-x.props.offset;Q=ce>=Math.floor(ae)&&ce<Math.floor(ye),ie=ce<Math.floor(ae)||ce>=Math.floor(ye)}else{var xe=0,Ee=0,ze=0;if(C.getBoundingClientRect){var De=C.getBoundingClientRect();ze=De.top}if(!R||x.props.isDynamic){if(R=i.get(O),!R)return;var ot=R.getBoundingClientRect();xe=ot.top-ze+E,Ee=xe+ot.height}var Fe=E-x.props.offset;Q=Fe>=Math.floor(xe)&&Fe<Math.floor(Ee),ie=Fe<Math.floor(xe)||Fe>=Math.floor(Ee)}var St=i.getActiveLink();if(ie){if(O===St&&i.setActiveLink(void 0),x.props.hashSpy&&Yo.default.getHash()===O){var Mt=x.props.saveHashHistory,Ct=Mt===void 0?!1:Mt;Yo.default.changeHash("",Ct)}x.props.spy&&x.state.active&&(x.setState({active:!1}),x.props.onSetInactive&&x.props.onSetInactive(O,R))}if(Q&&(St!==O||x.state.active===!1)){i.setActiveLink(O);var Wt=x.props.saveHashHistory,Tt=Wt===void 0?!1:Wt;x.props.hashSpy&&Yo.default.changeHash(O,Tt),x.props.spy&&(x.setState({active:!0}),x.props.onSetActive&&x.props.onSetActive(O,R))}}}};return s.propTypes=aw,s.defaultProps={offset:0},s};Object.defineProperty(I0,"__esModule",{value:!0});var FL=Ie,ow=uT(FL),$L=od,UL=uT($L);function uT(e){return e&&e.__esModule?e:{default:e}}function jL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sw(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function VL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var GL=function(e){VL(t,e);function t(){var i,s,u,p;jL(this,t);for(var x=arguments.length,c=Array(x),E=0;E<x;E++)c[E]=arguments[E];return p=(s=(u=sw(this,(i=t.__proto__||Object.getPrototypeOf(t)).call.apply(i,[this].concat(c))),u),u.render=function(){return ow.default.createElement("a",u.props,u.props.children)},s),sw(u,p)}return t}(ow.default.Component);I0.default=(0,UL.default)(GL);var L0={};Object.defineProperty(L0,"__esModule",{value:!0});var qL=function(){function e(t,i){for(var s=0;s<i.length;s++){var u=i[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),WL=Ie,lw=hT(WL),ZL=od,HL=hT(ZL);function hT(e){return e&&e.__esModule?e:{default:e}}function XL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YL(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function KL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var JL=function(e){KL(t,e);function t(){return XL(this,t),YL(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return qL(t,[{key:"render",value:function(){return lw.default.createElement("input",this.props,this.props.children)}}]),t}(lw.default.Component);L0.default=(0,HL.default)(JL);var R0={},Om={};Object.defineProperty(Om,"__esModule",{value:!0});var QL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},eR=function(){function e(t,i){for(var s=0;s<i.length;s++){var u=i[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),tR=Ie,cw=Bm(tR),nR=bp;Bm(nR);var rR=Gc,uw=Bm(rR),iR=_t,hw=Bm(iR);function Bm(e){return e&&e.__esModule?e:{default:e}}function aR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oR(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function sR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Om.default=function(e){var t=function(i){sR(s,i);function s(u){aR(this,s);var p=oR(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,u));return p.childBindings={domNode:null},p}return eR(s,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(p){this.props.name!==p.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;uw.default.unregister(this.props.name)}},{key:"registerElems",value:function(p){uw.default.register(p,this.childBindings.domNode)}},{key:"render",value:function(){return cw.default.createElement(e,QL({},this.props,{parentBindings:this.childBindings}))}}]),s}(cw.default.Component);return t.propTypes={name:hw.default.string,id:hw.default.string},t};Object.defineProperty(R0,"__esModule",{value:!0});var dw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},lR=function(){function e(t,i){for(var s=0;s<i.length;s++){var u=i[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),cR=Ie,fw=O0(cR),uR=Om,hR=O0(uR),dR=_t,pw=O0(dR);function O0(e){return e&&e.__esModule?e:{default:e}}function fR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pR(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dT=function(e){mR(t,e);function t(){return fR(this,t),pR(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return lR(t,[{key:"render",value:function(){var s=this,u=dw({},this.props);return u.parentBindings&&delete u.parentBindings,fw.default.createElement("div",dw({},u,{ref:function(x){s.props.parentBindings.domNode=x}}),this.props.children)}}]),t}(fw.default.Component);dT.propTypes={name:pw.default.string,id:pw.default.string};R0.default=(0,hR.default)(dT);var Ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},mw=function(){function e(t,i){for(var s=0;s<i.length;s++){var u=i[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function gw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yw(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function vw(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ep=Ie,il=sd,Ry=Gc,zn=_t,Ko=Rm,_w={to:zn.string.isRequired,containerId:zn.string,container:zn.object,activeClass:zn.string,spy:zn.bool,smooth:zn.oneOfType([zn.bool,zn.string]),offset:zn.number,delay:zn.number,isDynamic:zn.bool,onClick:zn.func,duration:zn.oneOfType([zn.number,zn.func]),absolute:zn.bool,onSetActive:zn.func,onSetInactive:zn.func,ignoreCancelEvents:zn.bool,hashSpy:zn.bool,spyThrottle:zn.number},gR={Scroll:function(t,i){console.warn("Helpers.Scroll is deprecated since v1.7.0");var s=i||Ry,u=function(x){vw(c,x);function c(E){gw(this,c);var C=yw(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,E));return p.call(C),C.state={active:!1},C}return mw(c,[{key:"getScrollSpyContainer",value:function(){var C=this.props.containerId,L=this.props.container;return C?document.getElementById(C):L&&L.nodeType?L:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var C=this.getScrollSpyContainer();il.isMounted(C)||il.mount(C,this.props.spyThrottle),this.props.hashSpy&&(Ko.isMounted()||Ko.mount(s),Ko.mapContainer(this.props.to,C)),this.props.spy&&il.addStateHandler(this.stateHandler),il.addSpyHandler(this.spyHandler,C),this.setState({container:C})}}},{key:"componentWillUnmount",value:function(){il.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var C="";this.state&&this.state.active?C=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():C=this.props.className;var L=Ly({},this.props);for(var O in _w)L.hasOwnProperty(O)&&delete L[O];return L.className=C,L.onClick=this.handleClick,ep.createElement(t,L)}}]),c}(ep.Component),p=function(){var c=this;this.scrollTo=function(E,C){s.scrollTo(E,Ly({},c.state,C))},this.handleClick=function(E){c.props.onClick&&c.props.onClick(E),E.stopPropagation&&E.stopPropagation(),E.preventDefault&&E.preventDefault(),c.scrollTo(c.props.to,c.props)},this.stateHandler=function(){s.getActiveLink()!==c.props.to&&(c.state!==null&&c.state.active&&c.props.onSetInactive&&c.props.onSetInactive(),c.setState({active:!1}))},this.spyHandler=function(E){var C=c.getScrollSpyContainer();if(!(Ko.isMounted()&&!Ko.isInitialized())){var L=c.props.to,O=null,R=0,Q=0,ie=0;if(C.getBoundingClientRect){var ae=C.getBoundingClientRect();ie=ae.top}if(!O||c.props.isDynamic){if(O=s.get(L),!O)return;var ye=O.getBoundingClientRect();R=ye.top-ie+E,Q=R+ye.height}var Y=E-c.props.offset,V=Y>=Math.floor(R)&&Y<Math.floor(Q),H=Y<Math.floor(R)||Y>=Math.floor(Q),ce=s.getActiveLink();if(H)return L===ce&&s.setActiveLink(void 0),c.props.hashSpy&&Ko.getHash()===L&&Ko.changeHash(),c.props.spy&&c.state.active&&(c.setState({active:!1}),c.props.onSetInactive&&c.props.onSetInactive()),il.updateStates();if(V&&ce!==L)return s.setActiveLink(L),c.props.hashSpy&&Ko.changeHash(L),c.props.spy&&(c.setState({active:!0}),c.props.onSetActive&&c.props.onSetActive(L)),il.updateStates()}}};return u.propTypes=_w,u.defaultProps={offset:0},u},Element:function(t){console.warn("Helpers.Element is deprecated since v1.7.0");var i=function(s){vw(u,s);function u(p){gw(this,u);var x=yw(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,p));return x.childBindings={domNode:null},x}return mw(u,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(x){this.props.name!==x.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;Ry.unregister(this.props.name)}},{key:"registerElems",value:function(x){Ry.register(x,this.childBindings.domNode)}},{key:"render",value:function(){return ep.createElement(t,Ly({},this.props,{parentBindings:this.childBindings}))}}]),u}(ep.Component);return i.propTypes={name:zn.string,id:zn.string},i}},yR=gR;Object.defineProperty($n,"__esModule",{value:!0});$n.Helpers=$n.ScrollElement=$n.ScrollLink=$n.animateScroll=$n.scrollSpy=$n.Events=$n.scroller=$n.Element=$n.Button=PR=$n.Link=void 0;var vR=I0,fT=$a(vR),_R=L0,pT=$a(_R),xR=R0,mT=$a(xR),bR=Gc,gT=$a(bR),wR=ud,yT=$a(wR),ER=sd,vT=$a(ER),SR=zm,_T=$a(SR),TR=od,xT=$a(TR),kR=Om,bT=$a(kR),CR=yR,wT=$a(CR);function $a(e){return e&&e.__esModule?e:{default:e}}var PR=$n.Link=fT.default;$n.Button=pT.default;$n.Element=mT.default;$n.scroller=gT.default;$n.Events=yT.default;$n.scrollSpy=vT.default;$n.animateScroll=_T.default;$n.ScrollLink=xT.default;$n.ScrollElement=bT.default;$n.Helpers=wT.default;$n.default={Link:fT.default,Button:pT.default,Element:mT.default,scroller:gT.default,Events:yT.default,scrollSpy:vT.default,animateScroll:_T.default,ScrollLink:xT.default,ScrollElement:bT.default,Helpers:wT.default};var IR={},Nm={},mi={},AR={get exports(){return mi},set exports(e){mi=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var s=[],u=0;u<arguments.length;u++){var p=arguments[u];if(p){var x=typeof p;if(x==="string"||x==="number")s.push(p);else if(Array.isArray(p)){if(p.length){var c=i.apply(null,p);c&&s.push(c)}}else if(x==="object"){if(p.toString!==Object.prototype.toString&&!p.toString.toString().includes("[native code]")){s.push(p.toString());continue}for(var E in p)t.call(p,E)&&p[E]&&s.push(E)}}}return s.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(AR);var qc={},MR=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qc,"__esModule",{value:!0});qc.useFrame=void 0;const zR=MR(Ie),DR=e=>zR.default.useMemo(()=>e||{document:typeof document<"u"?document:void 0,window:typeof window<"u"?window:void 0},[e]);qc.useFrame=DR;var ya={},va={},LR=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},ET=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(va,"__esModule",{value:!0});va.EmbedStyle=void 0;const RR=ET(mi),OR=ET(Ie),BR=e=>{var t=LR(e,[]);return OR.default.createElement("style",Object.assign({},t,{className:(0,RR.default)(t.className),style:Object.assign({},t.style)}),`
        .rsme-embed .rsme-d-none {
          display: none;
        }
    
        .rsme-embed .twitter-tweet {
          margin: 0 !important;
        }
    
        .rsme-embed blockquote {
          margin: 0 !important;
          padding: 0 !important;
        }

        .rsme-embed.rsme-facebook-embed .fb-post iframe {
          width: 100% !important;
        }

        .rsme-embed.rsme-facebook-embed .fb-post span {
          width: 100% !important;
        }
      `)};va.EmbedStyle=BR;var fd={},NR=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},ST=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});fd.BorderSpinner=void 0;const FR=ST(mi),tp=ST(Ie),$R=e=>{var t=NR(e,[]);return tp.default.createElement(tp.default.Fragment,null,tp.default.createElement("style",null,`
        .rsme-spinner {
          border: 3px solid rgba(0,0,0,0.75);
          border-right-color: transparent;
          border-radius: 50%;
          animation: rsme-spin 1s linear infinite;
        }
        @keyframes rsme-spin {
          0% {
            transform: rotate(0deg);
          }
          100% {
            transform: rotate(360deg);
          }
        }  
      `),tp.default.createElement("div",Object.assign({},t,{className:(0,FR.default)("rsme-spinner",t.className),style:Object.assign({width:10,height:10},t.style)})))};fd.BorderSpinner=$R;var TT={};(function(e){var t=Ge&&Ge.__rest||function(C,L){var O={};for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&L.indexOf(R)<0&&(O[R]=C[R]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,R=Object.getOwnPropertySymbols(C);Q<R.length;Q++)L.indexOf(R[Q])<0&&Object.prototype.propertyIsEnumerable.call(C,R[Q])&&(O[R[Q]]=C[R[Q]]);return O},i=Ge&&Ge.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(e,"__esModule",{value:!0}),e.ShareArrowIcon=e.ChatBubbleIcon=e.HeartIcon=e.EngagementIconsPlaceholder=void 0;const s=i(mi),u=i(Ie),p=C=>{var L=t(C,[]);return u.default.createElement("div",Object.assign({},L,{className:(0,s.default)(L.className),style:Object.assign({display:"flex",alignItems:"center",columnGap:14},L.style)}),u.default.createElement(e.HeartIcon,null),u.default.createElement(e.ChatBubbleIcon,null),u.default.createElement(e.ShareArrowIcon,null))};e.EngagementIconsPlaceholder=p;const x=C=>u.default.createElement("div",Object.assign({},C),u.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",height:"12.5px",width:"12.5px",transform:"translateX(0px) translateY(7px)"}}),u.default.createElement("div",{style:{backgroundColor:"#F4F4F4",height:"12.5px",transform:"rotate(-45deg) translateX(3px) translateY(1px)",width:"12.5px",flexGrow:0,marginRight:"6px",marginLeft:"2px"}}),u.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",height:"12.5px",width:"12.5px",transform:"translateX(9px) translateY(-18px)"}}));e.HeartIcon=x;const c=C=>u.default.createElement("div",Object.assign({},C),u.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",height:"20px",width:"20px"}}),u.default.createElement("div",{style:{width:0,height:0,borderTop:"2px solid transparent",borderLeft:"6px solid #f4f4f4",borderBottom:"2px solid transparent",transform:"translateX(16px) translateY(-4px) rotate(30deg)"}}));e.ChatBubbleIcon=c;const E=C=>u.default.createElement("div",Object.assign({},C,{style:{height:25,width:25,transform:"translateX(0px) translateY(-2px)"}}),u.default.createElement("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve"},u.default.createElement("path",{style:{fill:"#F4F4F4"},d:`M295.204,180.593C132.168,180.593,0,312.759,0,475.796
c51.398-130.047,184.869-203.22,317.483-183.603L295.204,180.593z`}),u.default.createElement("path",{style:{fill:"#F4F4F4"},d:`M512,253L295.204,36.204v217.818C159.946,249.655,34.992,339.262,0,475.794
c59.905-109.171,178.724-165.463,295.204-151.033v145.035L512,253z`})));e.ShareArrowIcon=E})(TT);var Fm={},UR=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},kT=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fm,"__esModule",{value:!0});Fm.ProfilePlaceholder=void 0;const jR=kT(mi),ic=kT(Ie),VR=e=>{var t=UR(e,[]);return ic.default.createElement("div",Object.assign({},t,{className:(0,jR.default)(t.className),style:Object.assign({},t.style)}),ic.default.createElement("div",{style:{display:"flex",columnGap:14}},ic.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:"50%",width:40,height:40}}),ic.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",rowGap:6}},ic.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:4,width:100,height:14}}),ic.default.createElement("div",{style:{backgroundColor:"#F4F4F4",borderRadius:4,width:60,height:14}}))))};Fm.ProfilePlaceholder=VR;var GR=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},CT=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ya,"__esModule",{value:!0});ya.PlaceholderEmbed=void 0;const qR=CT(mi),Tr=CT(Ie),WR=va,ZR=fd,HR=TT,XR=Fm,YR=e=>{var t,{url:i,linkText:s="View post",imageUrl:u,spinner:p=Tr.default.createElement(ZR.BorderSpinner,null),spinnerDisabled:x}=e,c=GR(e,["url","linkText","imageUrl","spinner","spinnerDisabled"]);return Tr.default.createElement("div",Object.assign({},c,{className:(0,qR.default)(c.className),style:Object.assign({overflow:"hidden",border:"1px solid #dee2e6",backgroundColor:"#ffffff",borderRadius:0,boxSizing:"border-box",position:"relative"},c.style)}),Tr.default.createElement(WR.EmbedStyle,null),Tr.default.createElement("a",{href:i,style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer"},!u&&Tr.default.createElement("div",{style:{position:"absolute",top:0,left:0,display:"flex",justifyContent:"space-between",alignItems:"start",paddingLeft:16,paddingRight:16,paddingTop:16,paddingBottom:16,zIndex:2,backgroundColor:"#ffffff"}},Tr.default.createElement(XR.ProfilePlaceholder,null)),Tr.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:u?"start":"center",height:"100%",width:"100%"}},!u&&Tr.default.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",rowGap:16,zIndex:3,padding:8,backgroundColor:"#ffffff"}},!x&&p,!!s&&Tr.default.createElement("div",{style:{color:"#000000",fontFamily:"Arial,sans-serif",fontSize:"14px",fontStyle:"normal",fontWeight:550,lineHeight:"18px",textAlign:"center"}},s)),u&&(typeof((t=c.style)===null||t===void 0?void 0:t.height)<"u"?Tr.default.createElement("div",{style:{width:"100%",height:"100%",background:`url("${u}")`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",marginBottom:"40"}}):Tr.default.createElement("div",{style:{width:"100%",marginBottom:40}},Tr.default.createElement("img",{src:u,style:{width:"100%"}})))),Tr.default.createElement("div",{style:{position:"absolute",bottom:0,left:0,height:40,width:"100%",backgroundColor:"#ffffff",zIndex:1}},!u&&Tr.default.createElement(HR.EngagementIconsPlaceholder,{style:{marginLeft:16}}),u&&Tr.default.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"space-between",columnGap:16}},Tr.default.createElement("div",{style:{color:"#0095f6",fontWeight:600,fontFamily:"Arial,sans-serif",fontSize:"14px",fontStyle:"normal",whiteSpace:"nowrap",marginLeft:16}},s),!x&&Tr.default.createElement("div",{style:{marginRight:16}},p)))))};ya.PlaceholderEmbed=YR;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.generateUUID=void 0;const KR=()=>{let e=new Date().getTime(),t=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){let s=Math.random()*16;return e>0?(s=(e+s)%16|0,e=Math.floor(e/16)):(s=(t+s)%16|0,t=Math.floor(t/16)),(i==="x"?s:s&3|8).toString(16)})};Wc.generateUUID=KR;var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.Subs=xs.Subscribe=void 0;class fl{static subscribe(t){try{return t()}catch(i){console.error(i)}return()=>{}}static subscribeEvent(t,i,s){return t.addListener(i,s),()=>{t.removeListener(i,s)}}static subscribeDOMEvent(t,i,s,u){return t.addEventListener(i,s,u),()=>{t.removeEventListener(i,s,u)}}static setTimeout(t,i,...s){const u=setTimeout(t,i,s);return()=>clearTimeout(u)}static setInterval(t,i,...s){const u=setInterval(t,i,s);return()=>clearInterval(u)}static unsubAll(t){if(Array.isArray(t))t.forEach(i=>{try{i()}catch(s){console.error(s)}});else try{t()}catch(i){console.error(i)}}static createCleanup(t){return()=>fl.unsubAll(t)}}xs.Subscribe=fl;class JR{constructor(t=[]){this.list=t}subscribe(t){const i=fl.subscribe(t);return this.push(i),i}subscribeEvent(t,i,s){const u=fl.subscribeEvent(t,i,s);return this.push(u),u}subscribeDOMEvent(t,i,s){const u=fl.subscribeDOMEvent(t,i,s);return this.push(u),u}setTimeout(t,i,...s){const u=setTimeout(t,i,s),p=()=>clearTimeout(u);return this.push(p),p}setInterval(t,i,...s){const u=setInterval(t,i,s),p=()=>clearInterval(u);return this.push(p),p}push(t){this.list.push(t)}unsubAll(){fl.unsubAll(this.list),this.list.splice(0,this.list.length)}createCleanup(){return()=>{this.unsubAll()}}}xs.Subs=JR;var QR=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},PT=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.FacebookEmbed=void 0;const xw=PT(mi),kr=PT(Ie),eO=qc,tO=ya,nO=Wc,rO=va,bw=xs,iO="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v16.0",u_=550,aO=u_,oO=372,ww=3,Ew="check-script",Sw="load-script",Tw="confirm-script-loaded",np="process-embed",kw="confirm-embed-success",Cw="retrying",Pw="embed-success",sO=e=>{var t,i,{url:s,width:u,height:p,linkText:x="View post on Facebook",placeholderImageUrl:c,placeholderSpinner:E,placeholderSpinnerDisabled:C=!1,placeholderProps:L,embedPlaceholder:O,placeholderDisabled:R=!1,scriptLoadDisabled:Q=!1,retryDelay:ie=5e3,retryDisabled:ae=!1,frame:ye=void 0,debug:Y=!1}=e,V=QR(e,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","scriptLoadDisabled","retryDelay","retryDisabled","frame","debug"]);const[H,ce]=kr.default.useState(Ew),xe=kr.default.useMemo(()=>H===Pw,[H]),Ee=kr.default.useRef((0,nO.generateUUID)()),[ze,De]=kr.default.useState(Date.now()),ot=kr.default.useMemo(()=>`${Ee.current}-${ze}`,[ze]),Fe=(0,eO.useFrame)(ye);kr.default.useEffect(()=>{Y&&console.log(`[${new Date().toISOString()}]: ${H}`)},[Y,H]),kr.default.useEffect(()=>{var Tt,$e,vt;H===Ew&&(!((vt=($e=(Tt=Fe.window)===null||Tt===void 0?void 0:Tt.FB)===null||$e===void 0?void 0:$e.XFBML)===null||vt===void 0)&&vt.parse?ce(np):Q?console.error("Facebook embed script not found. Unable to process Facebook embed:",s):ce(Sw))},[Q,H,s,Fe.window]),kr.default.useEffect(()=>{if(H===Sw&&Fe.document){const Tt=Fe.document.createElement("script");Tt.setAttribute("src",iO),Fe.document.head.appendChild(Tt),ce(Tw)}},[H,Fe.document]),kr.default.useEffect(()=>{const Tt=new bw.Subs;return H===Tw&&Tt.setInterval(()=>{var $e,vt,Re;!((Re=(vt=($e=Fe.window)===null||$e===void 0?void 0:$e.FB)===null||vt===void 0?void 0:vt.XFBML)===null||Re===void 0)&&Re.parse&&ce(np)},1),Tt.createCleanup()},[H,Fe.window]),kr.default.useEffect(()=>{var Tt,$e,vt;if(H===np){const Re=(vt=($e=(Tt=Fe.window)===null||Tt===void 0?void 0:Tt.FB)===null||$e===void 0?void 0:$e.XFBML)===null||vt===void 0?void 0:vt.parse;Re?(Re(),ce(kw)):console.error("Facebook embed script not found. Unable to process Facebook embed:",s)}},[H,s,Fe.window]),kr.default.useEffect(()=>{const Tt=new bw.Subs;return H===kw&&(Tt.setInterval(()=>{if(Fe.document){const $e=Fe.document.getElementById(Ee.current);if($e){const vt=$e.getElementsByClassName("fb-post")[0];vt&&vt.children.length>0&&ce(Pw)}}},1),ae||Tt.setTimeout(()=>{ce(Cw)},ie)),Tt.createCleanup()},[ae,ie,H,Fe.document]),kr.default.useEffect(()=>{H===Cw&&(De(Date.now()),ce(np))},[H]);const St=!!(u!=null&&u.toString().includes("%")),Mt=!!(p!=null&&p.toString().includes("%")),Ct={maxWidth:St?void 0:aO,width:typeof u<"u"?St?"100%":u:"100%",height:Mt?"100%":typeof p<"u"?p:typeof((t=V.style)===null||t===void 0?void 0:t.height)<"u"||typeof((i=V.style)===null||i===void 0?void 0:i.maxHeight)<"u"?"100%":oO,border:"1px solid #dee2e6",borderRadius:ww},Wt=O??kr.default.createElement(tO.PlaceholderEmbed,Object.assign({url:s,imageUrl:c,linkText:x,spinner:E,spinnerDisabled:C},L,{style:Object.assign(Object.assign({},Ct),L==null?void 0:L.style)}));return kr.default.createElement("div",Object.assign({},V,{className:(0,xw.default)("rsme-embed rsme-facebook-embed",V.className),style:Object.assign({overflow:"hidden",width:u??void 0,height:p??void 0,borderRadius:ww},V.style)}),kr.default.createElement(rO.EmbedStyle,null),kr.default.createElement("div",{id:Ee.current,className:(0,xw.default)(!xe&&"rsme-d-none")},kr.default.createElement("div",{key:ot,className:"fb-post","data-href":s,"data-width":St?"100%":u??u_,style:{width:St?"100%":u??u_,height:Mt?"100%":p??void 0}})),!xe&&!R&&Wt)};Nm.FacebookEmbed=sO;var $m={},lO=Ge&&Ge.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(t,i);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,u)}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),cO=Ge&&Ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),uO=Ge&&Ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&lO(t,e,i);return cO(t,e),t},hO=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},dO=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($m,"__esModule",{value:!0});$m.InstagramEmbed=void 0;const fO=dO(mi),Nr=uO(Ie),Iw=xs,pO=qc,mO=ya,gO=Wc,yO=va,vO="//www.instagram.com/embed.js",_O=328,xO=372,Aw=3,Mw="check-script",zw="load-script",Dw="confirm-script-loaded",rp="process-embed",Lw="confirm-embed-success",Rw="retrying",bO="embed-success",wO=e=>{var t,i,{url:s,width:u,height:p,linkText:x="View post on Instagram",placeholderImageUrl:c,placeholderSpinner:E,placeholderSpinnerDisabled:C=!1,placeholderProps:L,embedPlaceholder:O,placeholderDisabled:R=!1,scriptLoadDisabled:Q=!1,retryDelay:ie=5e3,retryDisabled:ae=!1,igVersion:ye="14",frame:Y=void 0,debug:V=!1}=e,H=hO(e,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","scriptLoadDisabled","retryDelay","retryDisabled","igVersion","frame","debug"]);const[ce,xe]=Nr.useState(Mw),Ee=Nr.useRef((0,gO.generateUUID)()),[ze,De]=Nr.useState(Date.now()),ot=Nr.useMemo(()=>`${Ee.current}-${ze}`,[ze]),Fe=(0,pO.useFrame)(Y);Nr.useEffect(()=>{V&&console.log(`[${new Date().toISOString()}]: ${ce}`)},[V,ce]),Nr.useEffect(()=>{var vt,Re,at;ce===Mw&&(!((at=(Re=(vt=Fe.window)===null||vt===void 0?void 0:vt.instgrm)===null||Re===void 0?void 0:Re.Embeds)===null||at===void 0)&&at.process?xe(rp):Q?console.error("Instagram embed script not found. Unable to process Instagram embed:",s):xe(zw))},[Q,ce,s,Fe.window]),Nr.useEffect(()=>{if(ce===zw&&Fe.document){const vt=Fe.document.createElement("script");vt.setAttribute("src",vO),Fe.document.head.appendChild(vt),xe(Dw)}},[ce,Fe.document]),Nr.useEffect(()=>{const vt=new Iw.Subs;return ce===Dw&&vt.setInterval(()=>{var Re,at,ut;!((ut=(at=(Re=Fe.window)===null||Re===void 0?void 0:Re.instgrm)===null||at===void 0?void 0:at.Embeds)===null||ut===void 0)&&ut.process&&xe(rp)},1),vt.createCleanup()},[ce,Fe.window]),Nr.useEffect(()=>{var vt,Re,at;if(ce===rp){const ut=(at=(Re=(vt=Fe.window)===null||vt===void 0?void 0:vt.instgrm)===null||Re===void 0?void 0:Re.Embeds)===null||at===void 0?void 0:at.process;ut?(ut(),xe(Lw)):console.error("Instagram embed script not found. Unable to process Instagram embed:",s)}},[ce,Fe.window,s]),Nr.useEffect(()=>{const vt=new Iw.Subs;return ce===Lw&&(vt.setInterval(()=>{Fe.document&&(Fe.document.getElementById(Ee.current)||xe(bO))},1),ae||vt.setTimeout(()=>{xe(Rw)},ie)),vt.createCleanup()},[ie,ae,ce,Fe.document]),Nr.useEffect(()=>{ce===Rw&&(De(Date.now()),xe(rp))},[ce]);const St=s.replace(/[?].*$/,""),Mt=`${St}${St.endsWith("/")?"":"/"}`,Ct=!!(u!=null&&u.toString().includes("%")),Wt=!!(p!=null&&p.toString().includes("%")),Tt={minWidth:Ct?void 0:_O,width:typeof u<"u"?Ct?"100%":u:"100%",height:Wt?"100%":typeof p<"u"?p:typeof((t=H.style)===null||t===void 0?void 0:t.height)<"u"||typeof((i=H.style)===null||i===void 0?void 0:i.maxHeight)<"u"?"100%":xO,border:"1px solid #dee2e6",borderRadius:Aw},$e=O??Nr.createElement(mO.PlaceholderEmbed,Object.assign({url:Mt,imageUrl:c,linkText:x,spinner:E,spinnerDisabled:C},L,{style:Object.assign(Object.assign({},Tt),L==null?void 0:L.style)}));return Nr.createElement("div",Object.assign({},H,{className:(0,fO.default)("rsme-embed rsme-instagram-embed",Ee.current,H.className),style:Object.assign({overflow:"hidden",width:u??void 0,height:p??void 0,borderRadius:Aw},H.style)}),Nr.createElement(yO.EmbedStyle,null),Nr.createElement("blockquote",{key:ot,className:"instagram-media","data-instgrm-permalink":`${Mt}?utm_source=ig_embed&utm_campaign=loading`,"data-instgrm-version":ye,"data-instgrm-captioned":!0,"data-width":Ct?"100%":u??void 0,style:{width:"calc(100% - 2px)"}},!R&&$e,Nr.createElement("div",{id:Ee.current,className:"instagram-media-pre-embed rsme-d-none"}," ")))};$m.InstagramEmbed=wO;var Um={},EO=Ge&&Ge.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(t,i);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,u)}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),SO=Ge&&Ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),TO=Ge&&Ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&EO(t,e,i);return SO(t,e),t},kO=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},CO=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Um,"__esModule",{value:!0});Um.LinkedInEmbed=void 0;const Ow=CO(mi),Qu=TO(Ie),PO=ya,IO=va,AO=250,MO=550,zO=550,Bw=8,DO=e=>{var t,i,{url:s,postUrl:u,width:p,height:x=500,linkText:c="View post on LinkedIn",placeholderImageUrl:E,placeholderSpinner:C,placeholderSpinnerDisabled:L=!1,placeholderProps:O,embedPlaceholder:R,placeholderDisabled:Q=!1}=e,ie=kO(e,["url","postUrl","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled"]);const[ae,ye]=Qu.useState(!1),Y={minWidth:AO,maxWidth:MO,width:typeof p<"u"?p:"100%",height:typeof x<"u"?x:typeof((t=ie.style)===null||t===void 0?void 0:t.height)<"u"||typeof((i=ie.style)===null||i===void 0?void 0:i.maxHeight)<"u"?"100%":zO,border:"solid 1px rgba(0, 0, 0, 0.15)",borderRadius:Bw},V=R??Qu.createElement(PO.PlaceholderEmbed,Object.assign({url:u??s,imageUrl:E,linkText:c,spinner:C,spinnerDisabled:L},O,{style:Object.assign(Object.assign({},Y),O==null?void 0:O.style)}));return Qu.createElement("div",Object.assign({},ie,{className:(0,Ow.default)("rsme-embed rsme-linkedin-embed",ie.className),style:Object.assign({overflow:"hidden",width:p??void 0,height:x??void 0,borderRadius:Bw},ie.style)}),Qu.createElement(IO.EmbedStyle,null),Qu.createElement("iframe",{className:(0,Ow.default)("linkedin-post",!ae&&"rsme-d-none"),src:s,width:"100%",height:ae?x:0,frameBorder:"0",onLoad:()=>ye(!0)}),!ae&&!Q&&V)};Um.LinkedInEmbed=DO;var jm={},LO=Ge&&Ge.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(t,i);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,u)}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),RO=Ge&&Ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),OO=Ge&&Ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&LO(t,e,i);return RO(t,e),t},BO=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},NO=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jm,"__esModule",{value:!0});jm.PinterestEmbed=void 0;const Nw=NO(mi),eh=OO(Ie),FO=ya,$O=va,UO=250,jO=550,VO=550,Fw=8,GO=e=>{var t,i,s,{url:u,postUrl:p,width:x,height:c=500,linkText:E="View post on Pinterest",placeholderImageUrl:C,placeholderSpinner:L,placeholderSpinnerDisabled:O=!1,placeholderProps:R,embedPlaceholder:Q,placeholderDisabled:ie=!1}=e,ae=BO(e,["url","postUrl","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled"]);const[ye,Y]=eh.useState(!1),V={minWidth:UO,maxWidth:jO,width:typeof x<"u"?x:"100%",height:typeof c<"u"?c:typeof((t=ae.style)===null||t===void 0?void 0:t.height)<"u"||typeof((i=ae.style)===null||i===void 0?void 0:i.maxHeight)<"u"?"100%":VO,border:"solid 1px rgba(0, 0, 0, 0.15)",borderRadius:Fw},H=Q??eh.createElement(FO.PlaceholderEmbed,Object.assign({url:p??u,imageUrl:C,linkText:E,spinner:L,spinnerDisabled:O},R,{style:Object.assign(Object.assign({},V),R==null?void 0:R.style)})),ce=(s=u.match(/pin\/([\w\d_-]+)/))===null||s===void 0?void 0:s[1],xe=ce??"000000000000000000";return eh.createElement("div",Object.assign({},ae,{className:(0,Nw.default)("rsme-embed rsme-pinterest-embed",ae.className),style:Object.assign({overflow:"hidden",width:x??void 0,height:c??void 0,borderRadius:Fw},ae.style)}),eh.createElement($O.EmbedStyle,null),eh.createElement("iframe",{className:(0,Nw.default)("pinterest-post",!ye&&"rsme-d-none"),src:`https://assets.pinterest.com/ext/embed.html?id=${xe}`,width:"100%",height:ye?c:0,frameBorder:"0",scrolling:"no",onLoad:()=>Y(!0)}),!ye&&!ie&&H)};jm.PinterestEmbed=GO;var Vm={},qO=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},IT=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.TikTokEmbed=void 0;const WO=IT(mi),Jr=IT(Ie),ZO=xs,HO=qc,XO=ya,YO=Wc,KO=va,JO="https://www.tiktok.com/embed.js",QO=325,e6=480,t6=550,$w=8,Oy="process-embed",Uw="confirm-embed-success",jw="retrying",n6="embed-success",r6=e=>{var t,i,{url:s,width:u,height:p,linkText:x="View post on TikTok",placeholderImageUrl:c,placeholderSpinner:E,placeholderSpinnerDisabled:C=!1,placeholderProps:L,embedPlaceholder:O,placeholderDisabled:R=!1,scriptLoadDisabled:Q=!1,retryDelay:ie=5e3,retryDisabled:ae=!1,frame:ye=void 0,debug:Y=!1}=e,V=qO(e,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","scriptLoadDisabled","retryDelay","retryDisabled","frame","debug"]);const[H,ce]=Jr.default.useState(Oy),xe=Jr.default.useRef((0,YO.generateUUID)()),[Ee,ze]=Jr.default.useState(Date.now()),De=Jr.default.useMemo(()=>`${xe.current}-${Ee}`,[Ee]),ot=(0,HO.useFrame)(ye);Jr.default.useEffect(()=>{Y&&console.log(`[${new Date().toISOString()}]: ${H}`)},[Y,H]),Jr.default.useEffect(()=>{if(H===Oy&&ot.document&&!Q){const Ct="tiktok-embed-script",Wt=ot.document.getElementById(Ct);Wt&&Wt.remove();const Tt=ot.document.createElement("script");Tt.setAttribute("src",`${JO}?t=${Date.now()}`),Tt.setAttribute("id",Ct),ot.document.head.appendChild(Tt),ce(Uw)}},[Q,H,ot.document]),Jr.default.useEffect(()=>{const Ct=new ZO.Subs;return H===Uw&&(Ct.setInterval(()=>{ot.document&&(ot.document.getElementById(xe.current)||ce(n6))},1),ae||Ct.setTimeout(()=>{ce(jw)},ie)),Ct.createCleanup()},[ie,ae,H,ot.document]),Jr.default.useEffect(()=>{H===jw&&(ze(Date.now()),ce(Oy))},[H]);const Fe=s.replace(/[?].*$/,"").replace(/^.+\//,""),St={minWidth:QO,maxWidth:e6,width:typeof u<"u"?u:"100%",height:typeof p<"u"?p:typeof((t=V.style)===null||t===void 0?void 0:t.height)<"u"||typeof((i=V.style)===null||i===void 0?void 0:i.maxHeight)<"u"?"100%":t6,border:"solid 1px rgba(22,24,35,0.12)",borderRadius:$w},Mt=O??Jr.default.createElement(XO.PlaceholderEmbed,Object.assign({url:s,imageUrl:c,linkText:x,spinner:E,spinnerDisabled:C},L,{style:Object.assign(Object.assign({},St),L==null?void 0:L.style)}));return Jr.default.createElement("div",Object.assign({},V,{className:(0,WO.default)("rsme-embed rsme-tiktok-embed",V.className),style:Object.assign({overflow:"hidden",width:u??void 0,height:p??void 0,borderRadius:$w},V.style)}),Jr.default.createElement(KO.EmbedStyle,null),Jr.default.createElement("div",{className:"tiktok-embed-container"},Jr.default.createElement("blockquote",{key:De,className:"tiktok-embed",cite:s,"data-video-id":Fe},R?Jr.default.createElement("div",{id:xe.current,style:{display:"none"}}," "):Jr.default.createElement("div",{id:xe.current,style:{display:"flex",justifyContent:"center"}},Mt))))};Vm.TikTokEmbed=r6;var Gm={},Ua="https://platform.twitter.com/widgets.js",By="createTimeline",i6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1],x=function(){var C=Object.assign({},t.options);if(t!=null&&t.autoHeight){var L,O;C.height=(L=i.current)===null||L===void 0||(O=L.parentNode)===null||O===void 0?void 0:O.offsetHeight}return C=Object.assign({},C,{theme:t==null?void 0:t.theme,linkColor:t==null?void 0:t.linkColor,borderColor:t==null?void 0:t.borderColor,lang:t==null?void 0:t.lang,tweetLimit:t==null?void 0:t.tweetLimit,ariaPolite:t==null?void 0:t.ariaPolite}),C},c=function(C){return C.chrome="",t.noHeader&&(C.chrome=C.chrome+" noheader"),t.noFooter&&(C.chrome=C.chrome+" nofooter"),t.noBorders&&(C.chrome=C.chrome+" noborders"),t.noScrollbar&&(C.chrome=C.chrome+" noscrollbar"),t.transparent&&(C.chrome=C.chrome+" transparent"),C};return we.useEffect(function(){var E=!0,C=require("scriptjs");return C(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(E){if(!window.twttr.widgets[By]){console.error("Method "+By+" is not present anymore in twttr.widget api");return}var L=x();L=c(L),window.twttr.widgets[By]({sourceType:t.sourceType,screenName:t.screenName,userId:t.userId,ownerScreenName:t.ownerScreenName,slug:t.slug,id:t.id||t.widgetId,url:t.url},i==null?void 0:i.current,L).then(function(O){p(!1),t.onLoad&&t.onLoad(O)})}}),function(){E=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},Ny="createShareButton",a6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[Ny]){console.error("Method "+Ny+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Ny](t.url,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},Fy="createFollowButton",o6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[Fy]){console.error("Method "+Fy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Fy](t.screenName,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},$y="createHashtagButton",s6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[$y]){console.error("Method "+$y+" is not present anymore in twttr.widget api");return}window.twttr.widgets[$y](t.tag,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},Uy="createMentionButton",l6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[Uy]){console.error("Method "+Uy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Uy](t.screenName,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},jy="createTweet",c6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[jy]){console.error("Method "+jy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[jy](t.tweetId,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},Vy="createMoment",u6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[Vy]){console.error("Method "+Vy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Vy](t.momentId,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},Gy="createDMButton",h6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[Gy]){console.error("Method "+Gy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Gy](t.id,i==null?void 0:i.current,t.options).then(function(E){x&&(p(!1),t.onLoad&&t.onLoad(E))})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},qy="createVideo",d6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[qy]){console.error("Method "+qy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[qy](t.id,i==null?void 0:i.current).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))},Wy="createPeriscopeOnAirButton",f6=function(t){var i=we.useRef(null),s=we.useState(!0),u=s[0],p=s[1];return we.useEffect(function(){var x=!0,c=require("scriptjs");return c(Ua,"twitter-embed",function(){if(!window.twttr){console.error("Failure to load window.twttr, aborting load");return}if(x){if(!window.twttr.widgets[Wy]){console.error("Method "+Wy+" is not present anymore in twttr.widget api");return}window.twttr.widgets[Wy](t.username,i==null?void 0:i.current,t.options).then(function(E){p(!1),t.onLoad&&t.onLoad(E)})}}),function(){x=!1}},[]),we.createElement(we.Fragment,null,u&&we.createElement(we.Fragment,null,t.placeholder),we.createElement("div",{ref:i}))};const p6=Object.freeze(Object.defineProperty({__proto__:null,TwitterDMButton:h6,TwitterFollowButton:o6,TwitterHashtagButton:s6,TwitterMentionButton:l6,TwitterMomentShare:u6,TwitterOnAirButton:f6,TwitterShareButton:a6,TwitterTimelineEmbed:i6,TwitterTweetEmbed:c6,TwitterVideoEmbed:d6},Symbol.toStringTag,{value:"Module"})),m6=e2(p6);var g6=Ge&&Ge.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(t,i);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,u)}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),y6=Ge&&Ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),v6=Ge&&Ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&g6(t,e,i);return y6(t,e),t},_6=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},x6=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gm,"__esModule",{value:!0});Gm.TwitterEmbed=void 0;const b6=x6(mi),ip=v6(Ie),w6=m6,E6=ya,S6=va,T6=250,k6=550,C6=350,Vw=12,P6=e=>{var t,i,{url:s,width:u,height:p,linkText:x="View post on Twitter",placeholderImageUrl:c,placeholderSpinner:E,placeholderSpinnerDisabled:C=!1,placeholderProps:L,embedPlaceholder:O,placeholderDisabled:R,twitterTweetEmbedProps:Q}=e,ie=_6(e,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","twitterTweetEmbedProps"]);const ae=s.substring(s.lastIndexOf("/")+1).replace(/[?].*$/,""),ye=!!(u!=null&&u.toString().includes("%")),Y=!!(p!=null&&p.toString().includes("%")),V={minWidth:T6,maxWidth:k6,width:typeof u<"u"?ye?"100%":u:"100%",height:Y?"100%":typeof p<"u"?p:typeof((t=ie.style)===null||t===void 0?void 0:t.height)<"u"||typeof((i=ie.style)===null||i===void 0?void 0:i.maxHeight)<"u"?"100%":C6,border:"solid 1px #c9d4d9",borderRadius:Vw},H=O??ip.createElement(E6.PlaceholderEmbed,Object.assign({url:s,imageUrl:c,linkText:x,spinner:E,spinnerDisabled:C},L,{style:Object.assign(Object.assign({},V),L==null?void 0:L.style)}));return ip.createElement("div",Object.assign({},ie,{className:(0,b6.default)("rsme-embed rsme-twitter-embed",ie.className),style:Object.assign({overflow:"hidden",width:u??void 0,height:p??void 0,borderRadius:Vw},ie.style)}),ip.createElement(S6.EmbedStyle,null),ip.createElement(w6.TwitterTweetEmbed,Object.assign({tweetId:ae,placeholder:R?void 0:H},Q)))};Gm.TwitterEmbed=P6;var qm={},I6=function e(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;var s,u,p;if(Array.isArray(t)){if(s=t.length,s!=i.length)return!1;for(u=s;u--!==0;)if(!e(t[u],i[u]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if(p=Object.keys(t),s=p.length,s!==Object.keys(i).length)return!1;for(u=s;u--!==0;)if(!Object.prototype.hasOwnProperty.call(i,p[u]))return!1;for(u=s;u--!==0;){var x=p[u];if(!e(t[x],i[x]))return!1}return!0}return t!==t&&i!==i},em={},A6={get exports(){return em},set exports(e){em=e}},AT;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/AT=function(){var e={},t={};return e.on=function(i,s){var u={name:i,handler:s};return t[i]=t[i]||[],t[i].unshift(u),u},e.off=function(i){var s=t[i.name].indexOf(i);s!==-1&&t[i.name].splice(s,1)},e.trigger=function(i,s){var u=t[i],p;if(u)for(p=u.length;p--;)u[p].handler(s)},e};var M6=AT,tm={},z6={get exports(){return tm},set exports(e){tm=e}},D6=function(t,i,s){var u=document.head||document.getElementsByTagName("head")[0],p=document.createElement("script");typeof i=="function"&&(s=i,i={}),i=i||{},s=s||function(){},p.type=i.type||"text/javascript",p.charset=i.charset||"utf8",p.async="async"in i?!!i.async:!0,p.src=t,i.attrs&&L6(p,i.attrs),i.text&&(p.text=""+i.text);var x="onload"in p?Gw:R6;x(p,s),p.onload||Gw(p,s),u.appendChild(p)};function L6(e,t){for(var i in t)e.setAttribute(i,t[i])}function Gw(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function R6(e,t){e.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,e))}}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=D6,s=u(i);function u(p){return p&&p.__esModule?p:{default:p}}t.default=function(p){var x=new Promise(function(c){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){c(window.YT);return}else{var E=window.location.protocol==="http:"?"http:":"https:";(0,s.default)(E+"//www.youtube.com/iframe_api",function(L){L&&p.trigger("error",L)})}var C=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){C&&C(),c(window.YT)}});return x},e.exports=t.default})(z6,tm);var nm={},O6={get exports(){return nm},set exports(e){nm=e}},rm={},B6={get exports(){return rm},set exports(e){rm=e}},im={},N6={get exports(){return im},set exports(e){im=e}},Wh=1e3,Zh=Wh*60,Hh=Zh*60,Xh=Hh*24,F6=Xh*365.25,$6=function(e,t){t=t||{};var i=typeof e;if(i==="string"&&e.length>0)return U6(e);if(i==="number"&&isNaN(e)===!1)return t.long?V6(e):j6(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function U6(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return i*F6;case"days":case"day":case"d":return i*Xh;case"hours":case"hour":case"hrs":case"hr":case"h":return i*Hh;case"minutes":case"minute":case"mins":case"min":case"m":return i*Zh;case"seconds":case"second":case"secs":case"sec":case"s":return i*Wh;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function j6(e){return e>=Xh?Math.round(e/Xh)+"d":e>=Hh?Math.round(e/Hh)+"h":e>=Zh?Math.round(e/Zh)+"m":e>=Wh?Math.round(e/Wh)+"s":e+"ms"}function V6(e){return ap(e,Xh,"day")||ap(e,Hh,"hour")||ap(e,Zh,"minute")||ap(e,Wh,"second")||e+" ms"}function ap(e,t,i){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}(function(e,t){t=e.exports=u.debug=u.default=u,t.coerce=E,t.disable=x,t.enable=p,t.enabled=c,t.humanize=$6,t.names=[],t.skips=[],t.formatters={};var i;function s(C){var L=0,O;for(O in C)L=(L<<5)-L+C.charCodeAt(O),L|=0;return t.colors[Math.abs(L)%t.colors.length]}function u(C){function L(){if(L.enabled){var O=L,R=+new Date,Q=R-(i||R);O.diff=Q,O.prev=i,O.curr=R,i=R;for(var ie=new Array(arguments.length),ae=0;ae<ie.length;ae++)ie[ae]=arguments[ae];ie[0]=t.coerce(ie[0]),typeof ie[0]!="string"&&ie.unshift("%O");var ye=0;ie[0]=ie[0].replace(/%([a-zA-Z%])/g,function(V,H){if(V==="%%")return V;ye++;var ce=t.formatters[H];if(typeof ce=="function"){var xe=ie[ye];V=ce.call(O,xe),ie.splice(ye,1),ye--}return V}),t.formatArgs.call(O,ie);var Y=L.log||t.log||console.log.bind(console);Y.apply(O,ie)}}return L.namespace=C,L.enabled=t.enabled(C),L.useColors=t.useColors(),L.color=s(C),typeof t.init=="function"&&t.init(L),L}function p(C){t.save(C),t.names=[],t.skips=[];for(var L=(typeof C=="string"?C:"").split(/[\s,]+/),O=L.length,R=0;R<O;R++)L[R]&&(C=L[R].replace(/\*/g,".*?"),C[0]==="-"?t.skips.push(new RegExp("^"+C.substr(1)+"$")):t.names.push(new RegExp("^"+C+"$")))}function x(){t.enable("")}function c(C){var L,O;for(L=0,O=t.skips.length;L<O;L++)if(t.skips[L].test(C))return!1;for(L=0,O=t.names.length;L<O;L++)if(t.names[L].test(C))return!0;return!1}function E(C){return C instanceof Error?C.stack||C.message:C}})(N6,im);(function(e,t){t=e.exports=im,t.log=u,t.formatArgs=s,t.save=p,t.load=x,t.useColors=i,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function i(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(E){try{return JSON.stringify(E)}catch(C){return"[UnexpectedJSONParseError]: "+C.message}};function s(E){var C=this.useColors;if(E[0]=(C?"%c":"")+this.namespace+(C?" %c":" ")+E[0]+(C?"%c ":" ")+"+"+t.humanize(this.diff),!!C){var L="color: "+this.color;E.splice(1,0,L,"color: inherit");var O=0,R=0;E[0].replace(/%[a-zA-Z%]/g,function(Q){Q!=="%%"&&(O++,Q==="%c"&&(R=O))}),E.splice(R,0,L)}}function u(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function p(E){try{E==null?t.storage.removeItem("debug"):t.storage.debug=E}catch{}}function x(){var E;try{E=t.storage.debug}catch{}return!E&&typeof process<"u"&&"env"in process&&(E={}.DEBUG),E}t.enable(x());function c(){try{return window.localStorage}catch{}}})(B6,rm);var am={},G6={get exports(){return am},set exports(e){am=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default})(G6,am);var om={},q6={get exports(){return om},set exports(e){om=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default})(q6,om);var sm={},W6={get exports(){return sm},set exports(e){sm=e}},lm={},Z6={get exports(){return lm},set exports(e){lm=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default})(Z6,lm);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=lm,s=u(i);function u(p){return p&&p.__esModule?p:{default:p}}t.default={pauseVideo:{acceptableStates:[s.default.ENDED,s.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[s.default.ENDED,s.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[s.default.ENDED,s.default.PLAYING,s.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default})(W6,sm);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=rm,s=L(i),u=am,p=L(u),x=om,c=L(x),E=sm,C=L(E);function L(Q){return Q&&Q.__esModule?Q:{default:Q}}var O=(0,s.default)("youtube-player"),R={};R.proxyEvents=function(Q){var ie={},ae=function(ze){var De="on"+ze.slice(0,1).toUpperCase()+ze.slice(1);ie[De]=function(ot){O('event "%s"',De,ot),Q.trigger(ze,ot)}},ye=!0,Y=!1,V=void 0;try{for(var H=c.default[Symbol.iterator](),ce;!(ye=(ce=H.next()).done);ye=!0){var xe=ce.value;ae(xe)}}catch(Ee){Y=!0,V=Ee}finally{try{!ye&&H.return&&H.return()}finally{if(Y)throw V}}return ie},R.promisifyPlayer=function(Q){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ae={},ye=function(De){ie&&C.default[De]?ae[De]=function(){for(var ot=arguments.length,Fe=Array(ot),St=0;St<ot;St++)Fe[St]=arguments[St];return Q.then(function(Mt){var Ct=C.default[De],Wt=Mt.getPlayerState(),Tt=Mt[De].apply(Mt,Fe);return Ct.stateChangeRequired||Array.isArray(Ct.acceptableStates)&&Ct.acceptableStates.indexOf(Wt)===-1?new Promise(function($e){var vt=function Re(){var at=Mt.getPlayerState(),ut=void 0;typeof Ct.timeout=="number"&&(ut=setTimeout(function(){Mt.removeEventListener("onStateChange",Re),$e()},Ct.timeout)),Array.isArray(Ct.acceptableStates)&&Ct.acceptableStates.indexOf(at)!==-1&&(Mt.removeEventListener("onStateChange",Re),clearTimeout(ut),$e())};Mt.addEventListener("onStateChange",vt)}).then(function(){return Tt}):Tt})}:ae[De]=function(){for(var ot=arguments.length,Fe=Array(ot),St=0;St<ot;St++)Fe[St]=arguments[St];return Q.then(function(Mt){return Mt[De].apply(Mt,Fe)})}},Y=!0,V=!1,H=void 0;try{for(var ce=p.default[Symbol.iterator](),xe;!(Y=(xe=ce.next()).done);Y=!0){var Ee=xe.value;ye(Ee)}}catch(ze){V=!0,H=ze}finally{try{!Y&&ce.return&&ce.return()}finally{if(V)throw H}}return ae},t.default=R,e.exports=t.default})(O6,nm);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},s=M6,u=C(s),p=tm,x=C(p),c=nm,E=C(c);function C(O){return O&&O.__esModule?O:{default:O}}var L=void 0;t.default=function(O){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ie=(0,u.default)();if(L||(L=(0,x.default)(ie)),R.events)throw new Error("Event handlers cannot be overwritten.");if(typeof O=="string"&&!document.getElementById(O))throw new Error('Element "'+O+'" does not exist.');R.events=E.default.proxyEvents(ie);var ae=new Promise(function(Y){if((typeof O>"u"?"undefined":i(O))==="object"&&O.playVideo instanceof Function){var V=O;Y(V)}else L.then(function(H){var ce=new H.Player(O,R);return ie.on("ready",function(){Y(ce)}),null})}),ye=E.default.promisifyPlayer(ae,Q);return ye.on=ie.on,ye.off=ie.off,ye},e.exports=t.default})(A6,em);const H6=Qw(em);var X6=Object.defineProperty,Y6=Object.defineProperties,K6=Object.getOwnPropertyDescriptors,qw=Object.getOwnPropertySymbols,J6=Object.prototype.hasOwnProperty,Q6=Object.prototype.propertyIsEnumerable,Ww=(e,t,i)=>t in e?X6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,h_=(e,t)=>{for(var i in t||(t={}))J6.call(t,i)&&Ww(e,i,t[i]);if(qw)for(var i of qw(t))Q6.call(t,i)&&Ww(e,i,t[i]);return e},d_=(e,t)=>Y6(e,K6(t)),eB=(e,t,i)=>new Promise((s,u)=>{var p=E=>{try{c(i.next(E))}catch(C){u(C)}},x=E=>{try{c(i.throw(E))}catch(C){u(C)}},c=E=>E.done?s(E.value):Promise.resolve(E.value).then(p,x);c((i=i.apply(e,t)).next())});function tB(e,t){var i,s;if(e.videoId!==t.videoId)return!0;const u=((i=e.opts)==null?void 0:i.playerVars)||{},p=((s=t.opts)==null?void 0:s.playerVars)||{};return u.start!==p.start||u.end!==p.end}function Zw(e={}){return d_(h_({},e),{height:0,width:0,playerVars:d_(h_({},e.playerVars),{autoplay:0,start:0,end:0})})}function nB(e,t){return e.videoId!==t.videoId||!I6(Zw(e.opts),Zw(t.opts))}function rB(e,t){var i,s,u,p;return e.id!==t.id||e.className!==t.className||((i=e.opts)==null?void 0:i.width)!==((s=t.opts)==null?void 0:s.width)||((u=e.opts)==null?void 0:u.height)!==((p=t.opts)==null?void 0:p.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var iB={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},aB={videoId:_t.string,id:_t.string,className:_t.string,iframeClassName:_t.string,style:_t.object,title:_t.string,loading:_t.oneOf(["lazy","eager"]),opts:_t.objectOf(_t.any),onReady:_t.func,onError:_t.func,onPlay:_t.func,onPause:_t.func,onEnd:_t.func,onStateChange:_t.func,onPlaybackRateChange:_t.func,onPlaybackQualityChange:_t.func},xp=class extends we.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var i,s;return(s=(i=this.props).onReady)==null?void 0:s.call(i,t)},this.onPlayerError=t=>{var i,s;return(s=(i=this.props).onError)==null?void 0:s.call(i,t)},this.onPlayerStateChange=t=>{var i,s,u,p,x,c,E,C;switch((s=(i=this.props).onStateChange)==null||s.call(i,t),t.data){case xp.PlayerState.ENDED:(p=(u=this.props).onEnd)==null||p.call(u,t);break;case xp.PlayerState.PLAYING:(c=(x=this.props).onPlay)==null||c.call(x,t);break;case xp.PlayerState.PAUSED:(C=(E=this.props).onPause)==null||C.call(E,t);break}},this.onPlayerPlaybackRateChange=t=>{var i,s;return(s=(i=this.props).onPlaybackRateChange)==null?void 0:s.call(i,t)},this.onPlayerPlaybackQualityChange=t=>{var i,s;return(s=(i=this.props).onPlaybackQualityChange)==null?void 0:s.call(i,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=d_(h_({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=H6(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(i=>{this.props.title&&i.setAttribute("title",this.props.title),this.props.loading&&i.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(i=>{this.props.id?i.setAttribute("id",this.props.id):i.removeAttribute("id"),this.props.iframeClassName?i.setAttribute("class",this.props.iframeClassName):i.removeAttribute("class"),this.props.opts&&this.props.opts.width?i.setAttribute("width",this.props.opts.width.toString()):i.removeAttribute("width"),this.props.opts&&this.props.opts.height?i.setAttribute("height",this.props.opts.height.toString()):i.removeAttribute("height"),this.props.title?i.setAttribute("title",this.props.title):i.setAttribute("title","YouTube video player"),this.props.loading?i.setAttribute("loading",this.props.loading):i.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,i,s,u;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let p=!1;const x={videoId:this.props.videoId};if((i=this.props.opts)!=null&&i.playerVars&&(p=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(x.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(x.endSeconds=this.props.opts.playerVars.end)),p){(s=this.internalPlayer)==null||s.loadVideoById(x);return}(u=this.internalPlayer)==null||u.cueVideoById(x)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return eB(this,null,function*(){rB(e,this.props)&&this.updatePlayer(),nB(e,this.props)&&(yield this.resetPlayer()),tB(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return we.createElement("div",{className:this.props.className,style:this.props.style},we.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},Wm=xp;Wm.propTypes=aB;Wm.defaultProps=iB;Wm.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var oB=Wm;const sB=Object.freeze(Object.defineProperty({__proto__:null,default:oB},Symbol.toStringTag,{value:"Module"})),lB=e2(sB);var cB=Ge&&Ge.__createBinding||(Object.create?function(e,t,i,s){s===void 0&&(s=i);var u=Object.getOwnPropertyDescriptor(t,i);(!u||("get"in u?!t.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,u)}:function(e,t,i,s){s===void 0&&(s=i),e[s]=t[i]}),uB=Ge&&Ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hB=Ge&&Ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&cB(t,e,i);return uB(t,e),t},dB=Ge&&Ge.__rest||function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(i[s[u]]=e[s[u]]);return i},MT=Ge&&Ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qm,"__esModule",{value:!0});qm.YouTubeEmbed=void 0;const Hw=MT(mi),ac=hB(Ie),fB=MT(lB),pB=ya,mB=va,gB=640,yB=360,Xw=0,vB=e=>{var t,i,s,u,p,x,c,E,C,L,O,{url:R,width:Q,height:ie,linkText:ae="Watch on YouTube",placeholderImageUrl:ye,placeholderSpinner:Y,placeholderSpinnerDisabled:V=!1,placeholderProps:H,embedPlaceholder:ce,placeholderDisabled:xe,youTubeProps:Ee}=e,ze=dB(e,["url","width","height","linkText","placeholderImageUrl","placeholderSpinner","placeholderSpinnerDisabled","placeholderProps","embedPlaceholder","placeholderDisabled","youTubeProps"]);const[De,ot]=ac.useState(!1),Fe=(t=R.match(/[?&]v=(.+?)(?:$|[&?])/))===null||t===void 0?void 0:t[1],St=(i=R.match(/https:\/\/youtu\.be\/(.+?)(?:$|[&?])/))===null||i===void 0?void 0:i[1],Mt=(s=R.match(/https:\/\/www.youtube(-nocookie)?\.com\/embed\/(.+?)(?:$|[&?])/))===null||s===void 0?void 0:s[2],Ct=(p=(u=Fe??St)!==null&&u!==void 0?u:Mt)!==null&&p!==void 0?p:"00000000",Wt=+((c=(x=R.match(/(.+?)(?:$|[&?])start=(\d+)/))===null||x===void 0?void 0:x[2])!==null&&c!==void 0?c:0),Tt=!!(Q!=null&&Q.toString().includes("%")),$e=!!(ie!=null&&ie.toString().includes("%"));let vt={};Wt&&(vt.playerVars={start:Wt}),typeof Q<"u"&&(vt.width=Tt?"100%":`${Q}`),typeof ie<"u"&&(vt.height=$e?"100%":`${ie}`),vt=Object.assign(Object.assign({},vt),Ee==null?void 0:Ee.opts);const Re={maxWidth:Tt?void 0:gB,width:typeof Q<"u"?Tt?"100%":Q:"100%",height:$e?"100%":typeof ie<"u"?ie:typeof((E=ze.style)===null||E===void 0?void 0:E.height)<"u"||typeof((C=ze.style)===null||C===void 0?void 0:C.maxHeight)<"u"?"100%":yB,border:"1px solid #dee2e6",borderRadius:Xw},at=ce??ac.createElement(pB.PlaceholderEmbed,Object.assign({url:R,imageUrl:ye,linkText:ae,spinner:Y,spinnerDisabled:V},H,{style:Object.assign(Object.assign({},Re),H==null?void 0:H.style)}));return ac.createElement("div",Object.assign({},ze,{className:(0,Hw.default)("rsme-embed rsme-youtube-embed",ze.className),style:Object.assign({overflow:"hidden",width:Q??void 0,height:ie??void 0,borderRadius:Xw},ze.style)}),ac.createElement(mB.EmbedStyle,null),ac.createElement("div",{className:(0,Hw.default)(!De&&"rsme-d-none")},ac.createElement(fB.default,Object.assign({},Ee,{className:(L=Ee==null?void 0:Ee.className)!==null&&L!==void 0?L:"youtube-iframe",videoId:(O=Ee==null?void 0:Ee.videoId)!==null&&O!==void 0?O:Ct,opts:vt,onReady:ut=>{ot(!0),Ee&&Ee.onReady&&(Ee==null||Ee.onReady(ut))}}))),!De&&!xe&&at)};qm.YouTubeEmbed=vB;(function(e){var t=Ge&&Ge.__createBinding||(Object.create?function(s,u,p,x){x===void 0&&(x=p);var c=Object.getOwnPropertyDescriptor(u,p);(!c||("get"in c?!u.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return u[p]}}),Object.defineProperty(s,x,c)}:function(s,u,p,x){x===void 0&&(x=p),s[x]=u[p]}),i=Ge&&Ge.__exportStar||function(s,u){for(var p in s)p!=="default"&&!Object.prototype.hasOwnProperty.call(u,p)&&t(u,s,p)};Object.defineProperty(e,"__esModule",{value:!0}),i(Nm,e),i($m,e),i(Um,e),i(jm,e),i(Vm,e),i(Gm,e),i(qm,e),i(ya,e),i(fd,e)})(IR);var f_={},_B={get exports(){return f_},set exports(e){f_=e}};(function(e,t){(function(i,s){e.exports=s()})(Ge,function(){var i,s,u;function p(c,E){if(!i)i=E;else if(!s)s=E;else{var C="var sharedChunk = {}; ("+i+")(sharedChunk); ("+s+")(sharedChunk);",L={};i(L),u=E(L),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}p(["exports"],function(c){var E=C;function C(a,n,o,h){this.cx=3*a,this.bx=3*(o-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=o,this.p2y=h}function L(a,n,o,h){const m=new E(a,n,o,h);return function(y){return m.solve(y)}}C.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var o=a,h=0;h<8;h++){var m=this.sampleCurveX(o)-a;if(Math.abs(m)<n)return o;var y=this.sampleCurveDerivativeX(o);if(Math.abs(y)<1e-6)break;o-=m/y}var _=0,w=1;for(o=a,h=0;h<20&&(m=this.sampleCurveX(o),!(Math.abs(m-a)<n));h++)a>m?_=o:w=o,o=.5*(w-_)+_;return o},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};const O=L(.25,.1,.25,1);function R(a,n,o){return Math.min(o,Math.max(n,a))}function Q(a,n,o){const h=o-n,m=((a-n)%h+h)%h+n;return m===n?o:m}function ie(a,...n){for(const o of n)for(const h in o)a[h]=o[h];return a}let ae=1;function ye(a,n){a.forEach(o=>{n[o]&&(n[o]=n[o].bind(n))})}function Y(a,n,o){const h={};for(const m in a)h[m]=n.call(o||this,a[m],m,a);return h}function V(a,n,o){const h={};for(const m in a)n.call(o||this,a[m],m,a)&&(h[m]=a[m]);return h}function H(a){return Array.isArray(a)?a.map(H):typeof a=="object"&&a?Y(a,H):a}const ce={};function xe(a){ce[a]||(typeof console<"u"&&console.warn(a),ce[a]=!0)}function Ee(a,n,o){return(o.y-a.y)*(n.x-a.x)>(n.y-a.y)*(o.x-a.x)}function ze(a){let n=0;for(let o,h,m=0,y=a.length,_=y-1;m<y;_=m++)o=a[m],h=a[_],n+=(h.x-o.x)*(o.y+h.y);return n}function De(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ot(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,h,m,y)=>{const _=m||y;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n}let Fe,St,Mt=null;function Ct(a){if(Mt==null){const n=a.navigator?a.navigator.userAgent:null;Mt=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Mt}function Wt(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Tt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){const o=window.document.createElement("canvas"),h=o.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return o.width=a.width,o.height=a.height,h.drawImage(a,0,0,a.width,a.height),h.getImageData(-n,-n,a.width+2*n,a.height+2*n)},resolveURL:a=>(Fe||(Fe=document.createElement("a")),Fe.href=a,Fe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(St==null&&(St=matchMedia("(prefers-reduced-motion: reduce)")),St.matches)}};var $e=vt;function vt(a,n){this.x=a,this.y=n}vt.prototype={clone:function(){return new vt(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,o=a.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),o=Math.sin(a),h=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=h,this},_rotateAround:function(a,n){var o=Math.cos(a),h=Math.sin(a),m=n.y+h*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},vt.convert=function(a){return a instanceof vt?a:Array.isArray(a)?new vt(a[0],a[1]):a};const Re={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},at="mapbox-tiles";let ut,Yt,Jt=500,_r=50;function Hn(){typeof caches>"u"||ut||(ut=caches.open(at))}let rr=1/0;const Vn={supported:!1,testSupport:function(a){!Ar&&gi&&(wo?Ts(a):hr=a)}};let hr,gi,Ar=!1,wo=!1;function Ts(a){const n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,gi),a.isContextLost())return;Vn.supported=!0}catch{}a.deleteTexture(n),Ar=!0}typeof document<"u"&&(gi=document.createElement("img"),gi.onload=function(){hr&&Ts(hr),hr=null,wo=!0},gi.onerror=function(){Ar=!0,hr=null},gi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Hi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Hi);class Ur extends Error{constructor(n,o,h,m){super(`AJAXError: ${o} (${n}): ${h}`),this.status=n,this.statusText=o,this.url=h,this.body=m}}const ks=De()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function _a(a,n){const o=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:ks(),signal:o.signal});let m=!1,y=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),((_,w,S)=>{if(y)return;const P=Date.now();fetch(h).then(M=>M.ok?((D,F,U)=>{(a.type==="arrayBuffer"?D.arrayBuffer():a.type==="json"?D.json():D.text()).then(j=>{y||(F&&U&&function(te,ee,fe){if(Hn(),!ut)return;const _e={status:ee.status,statusText:ee.statusText,headers:new Headers};ee.headers.forEach((ge,Me)=>_e.headers.set(Me,ge));const de=ot(ee.headers.get("Cache-Control")||"");de["no-store"]||(de["max-age"]&&_e.headers.set("Expires",new Date(fe+1e3*de["max-age"]).toUTCString()),new Date(_e.headers.get("Expires")).getTime()-fe<42e4||function(ge,Me){if(Yt===void 0)try{new Response(new ReadableStream),Yt=!0}catch{Yt=!1}Yt?Me(ge.body):ge.blob().then(Me)}(ee,ge=>{const Me=new Response(ge,_e);Hn(),ut&&ut.then(Ae=>Ae.put(function(nt){const ct=nt.indexOf("?");return ct<0?nt:nt.slice(0,ct)}(te.url),Me)).catch(Ae=>xe(Ae.message))}))}(h,F,U),m=!0,n(null,j,D.headers.get("Cache-Control"),D.headers.get("Expires")))}).catch(j=>{y||n(new Error(j.message))})})(M,null,P):M.blob().then(D=>n(new Ur(M.status,M.statusText,a.url,D)))).catch(M=>{M.code!==20&&n(new Error(M.message))})})(),{cancel:()=>{y=!0,m||o.abort()}}}const Eo=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(De()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!De()){const h=a.url.substring(0,a.url.indexOf("://"));return(Re.REGISTERED_PROTOCOLS[h]||_a)(a,n)}}if(!(/^file:/.test(o=a.url)||/^file:/.test(ks())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return _a(a,n);if(De()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var o;return function(h,m){const y=new XMLHttpRequest;y.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const _ in h.headers)y.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let _=y.response;if(h.type==="json")try{_=JSON.parse(y.response)}catch(w){return m(w)}m(null,_,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const _=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});m(new Ur(y.status,y.statusText,h.url,_))}},y.send(h.body),{cancel:()=>y.abort()}}(a,n)},So=function(a,n){return Eo(ie(a,{type:"arrayBuffer"}),n)};function Cs(a){const n=window.document.createElement("a");return n.href=a,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Di,xa;Di=[],xa=0;const ba=function(a,n){if(Vn.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),xa>=Re.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:a,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Di.push(y),y}xa++;let o=!1;const h=()=>{if(!o)for(o=!0,xa--;Di.length&&xa<Re.MAX_PARALLEL_IMAGE_REQUESTS;){const y=Di.shift(),{requestParameters:_,callback:w,cancelled:S}=y;S||(y.cancel=ba(_,w).cancel)}},m=So(a,(y,_,w,S)=>{h(),y?n(y):_&&function(P,M){typeof createImageBitmap=="function"?function(D,F){const U=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(U).then(j=>{F(null,j)}).catch(j=>{F(new Error(`Could not load image because of ${j.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(P,M):function(D,F){const U=new Image;U.onload=()=>{F(null,U),URL.revokeObjectURL(U.src),U.onload=null,window.requestAnimationFrame(()=>{U.src=Ut})},U.onerror=()=>F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new Blob([new Uint8Array(D)],{type:"image/png"});U.src=D.byteLength?URL.createObjectURL(j):Ut}(P,M)}(_,(P,M)=>{P!=null?n(P):M!=null&&n(null,M,{cacheControl:w,expires:S})})});return{cancel:()=>{m.cancel(),h()}}};function Ps(a,n,o){o[a]&&o[a].indexOf(n)!==-1||(o[a]=o[a]||[],o[a].push(n))}function Xi(a,n,o){if(o&&o[a]){const h=o[a].indexOf(n);h!==-1&&o[a].splice(h,1)}}class Yi{constructor(n,o={}){ie(this,o),this.type=n}}class To extends Yi{constructor(n,o={}){super("error",ie({error:n},o))}}class Ki{on(n,o){return this._listeners=this._listeners||{},Ps(n,o,this._listeners),this}off(n,o){return Xi(n,o,this._listeners),Xi(n,o,this._oneTimeListeners),this}once(n,o){return this._oneTimeListeners=this._oneTimeListeners||{},Ps(n,o,this._oneTimeListeners),this}fire(n,o){typeof n=="string"&&(n=new Yi(n,o||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of m)w.call(this,n);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of y)Xi(h,w,this._oneTimeListeners),w.call(this,n);const _=this._eventedParent;_&&(ie(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof To&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class He{constructor(n,o,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),o!=null&&o.__line__&&(this.line=o.__line__)}}function ja(a){const n=a.value;return n?[new He(a.key,n,"constants have been deprecated as of v8")]:[]}function yi(a,...n){for(const o of n)for(const h in o)a[h]=o[h];return a}function jt(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ii(a){if(Array.isArray(a))return a.map(ii);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const o in a)n[o]=ii(a[o]);return n}return jt(a)}class jr extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}class Vr{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[h,m]of o)this.bindings[h]=m}concat(n){return new Vr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const wa={kind:"null"},qe={kind:"number"},Dt={kind:"string"},It={kind:"boolean"},ir={kind:"color"},Ea={kind:"object"},Pt={kind:"value"},Ji={kind:"collator"},Xn={kind:"formatted"},ko={kind:"padding"},On={kind:"resolvedImage"};function xr(a,n){return{kind:"array",itemType:a,N:n}}function nn(a){if(a.kind==="array"){const n=nn(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const Co=[wa,qe,Dt,It,ir,Xn,Ea,xr(Pt),ko,On];function Li(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Li(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const o of Co)if(!Li(o,n))return null}}return`Expected ${nn(a)} but found ${nn(n)} instead.`}function Va(a,n){return n.some(o=>o.kind===a.kind)}function Ga(a,n){return n.some(o=>o==="null"?a===null:o==="array"?Array.isArray(a):o==="object"?a&&!Array.isArray(a)&&typeof a=="object":o===typeof a)}var Po,qa={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function W(a){return(a=Math.round(a))<0?0:a>255?255:a}function A(a){return W(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function B(a){return(n=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:n>1?1:n;var n}function G(a,n,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?a+(n-a)*o*6:2*o<1?n:3*o<2?a+(n-a)*(2/3-o)*6:a}try{Po={}.parseCSSColor=function(a){var n,o=a.replace(/ /g,"").toLowerCase();if(o in qa)return qa[o].slice();if(o[0]==="#")return o.length===4?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:o.length===7&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=o.indexOf("("),m=o.indexOf(")");if(h!==-1&&m+1===o.length){var y=o.substr(0,h),_=o.substr(h+1,m-(h+1)).split(","),w=1;switch(y){case"rgba":if(_.length!==4)return null;w=B(_.pop());case"rgb":return _.length!==3?null:[A(_[0]),A(_[1]),A(_[2]),w];case"hsla":if(_.length!==4)return null;w=B(_.pop());case"hsl":if(_.length!==3)return null;var S=(parseFloat(_[0])%360+360)%360/360,P=B(_[1]),M=B(_[2]),D=M<=.5?M*(P+1):M+P-M*P,F=2*M-D;return[W(255*G(F,D,S+1/3)),W(255*G(F,D,S)),W(255*G(F,D,S-1/3)),w];default:return null}}return null}}catch{}class q{constructor(n,o,h,m=1){this.r=n,this.g=o,this.b=h,this.a=m}static parse(n){if(!n)return;if(n instanceof q)return n;if(typeof n!="string")return;const o=Po(n);return o?new q(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[n,o,h,m]=this.toArray();return`rgba(${Math.round(n)},${Math.round(o)},${Math.round(h)},${m})`}toArray(){const{r:n,g:o,b:h,a:m}=this;return m===0?[0,0,0,0]:[255*n/m,255*o/m,255*h/m,m]}}q.black=new q(0,0,0,1),q.white=new q(1,1,1,1),q.transparent=new q(0,0,0,0),q.red=new q(1,0,0,1);class ne{constructor(n,o,h){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class le{constructor(n,o,h,m,y){this.text=n,this.image=o,this.scale=h,this.fontStack=m,this.textColor=y}}class oe{constructor(n){this.sections=n}static fromString(n){return new oe([new le(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof oe?n:oe.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class re{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof re)return n;if(typeof n=="number")return new re([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const o of n)if(typeof o!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new re(n)}}toString(){return JSON.stringify(this.values)}}class ue{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ue({name:n,available:!1}):null}}function Se(a,n,o,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,o,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,o,h]:[a,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Le(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof q||a instanceof ne||a instanceof oe||a instanceof re||a instanceof ue)return!0;if(Array.isArray(a)){for(const n of a)if(!Le(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Le(a[n]))return!1;return!0}return!1}function be(a){if(a===null)return wa;if(typeof a=="string")return Dt;if(typeof a=="boolean")return It;if(typeof a=="number")return qe;if(a instanceof q)return ir;if(a instanceof ne)return Ji;if(a instanceof oe)return Xn;if(a instanceof re)return ko;if(a instanceof ue)return On;if(Array.isArray(a)){const n=a.length;let o;for(const h of a){const m=be(h);if(o){if(o===m)continue;o=Pt;break}o=m}return xr(o||Pt,n)}return Ea}function lt(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof q||a instanceof oe||a instanceof re||a instanceof ue?a.toString():JSON.stringify(a)}class ht{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Le(n[1]))return o.error("invalid value");const h=n[1];let m=be(h);const y=o.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new ht(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Qe{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const bt={string:Dt,number:qe,boolean:It,object:Ea};class Et{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let h,m=1;const y=n[0];if(y==="array"){let w,S;if(n.length>2){const P=n[1];if(typeof P!="string"||!(P in bt)||P==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);w=bt[P],m++}else w=Pt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);S=n[2],m++}h=xr(w,S)}else{if(!bt[y])throw new Error(`Types doesn't contain name = ${y}`);h=bt[y]}const _=[];for(;m<n.length;m++){const w=o.parse(n[m],m,Pt);if(!w)return null;_.push(w)}return new Et(h,_)}evaluate(n){for(let o=0;o<this.args.length;o++){const h=this.args[o].evaluate(n);if(!Li(this.type,be(h)))return h;if(o===this.args.length-1)throw new Qe(`Expected value to be of type ${nn(this.type)}, but found ${nn(be(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Vt={"to-boolean":It,"to-color":ir,"to-number":qe,"to-string":Dt};class kt{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const h=n[0];if(!Vt[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return o.error("Expected one argument.");const m=Vt[h],y=[];for(let _=1;_<n.length;_++){const w=o.parse(n[_],_,Pt);if(!w)return null;y.push(w)}return new kt(m,y)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let o,h;for(const m of this.args){if(o=m.evaluate(n),h=null,o instanceof q)return o;if(typeof o=="string"){const y=n.parseColor(o);if(y)return y}else if(Array.isArray(o)&&(h=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Se(o[0],o[1],o[2],o[3]),!h))return new q(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Qe(h||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="padding"){let o;for(const h of this.args){o=h.evaluate(n);const m=re.parse(o);if(m)return m}throw new Qe(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="number"){let o=null;for(const h of this.args){if(o=h.evaluate(n),o===null)return 0;const m=Number(o);if(!isNaN(m))return m}throw new Qe(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?oe.fromString(lt(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?ue.fromString(lt(this.args[0].evaluate(n))):lt(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Lt=["Unknown","Point","LineString","Polygon"];class Gt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Lt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let o=this._parseColorCache[n];return o||(o=this._parseColorCache[n]=q.parse(n)),o}}class an{constructor(n,o,h,m){this.name=n,this.type=o,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,o){const h=n[0],m=an.definitions[h];if(!m)return o.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,w=_.filter(([P])=>!Array.isArray(P)||P.length===n.length-1);let S=null;for(const[P,M]of w){S=new Mo(o.registry,o.path,null,o.scope);const D=[];let F=!1;for(let U=1;U<n.length;U++){const j=n[U],te=Array.isArray(P)?P[U-1]:P.type,ee=S.parse(j,1+D.length,te);if(!ee){F=!0;break}D.push(ee)}if(!F)if(Array.isArray(P)&&P.length!==D.length)S.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let U=0;U<D.length;U++){const j=Array.isArray(P)?P[U]:P.type,te=D[U];S.concat(U+1).checkSubtype(j,te.type)}if(S.errors.length===0)return new an(h,y,M,D)}}if(w.length===1)o.errors.push(...S.errors);else{const P=(w.length?w:_).map(([D])=>{return F=D,Array.isArray(F)?`(${F.map(nn).join(", ")})`:`(${nn(F.type)}...)`;var F}).join(" | "),M=[];for(let D=1;D<n.length;D++){const F=o.parse(n[D],1+M.length);if(!F)return null;M.push(nn(F.type))}o.error(`Expected arguments of type ${P}, but found (${M.join(", ")}) instead.`)}return null}static register(n,o){an.definitions=o;for(const h in o)n[h]=an}}class Yn{constructor(n,o,h){this.type=Ji,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return o.error("Collator options argument must be an object.");const m=o.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,It);if(!m)return null;const y=o.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,It);if(!y)return null;let _=null;return h.locale&&(_=o.parse(h.locale,1,Dt),!_)?null:new Yn(m,y,_)}evaluate(n){return new ne(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const fn=8192;function dr(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Io(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function Is(a,n){const o=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(o*m*fn),Math.round(h*m*fn)]}function on(a,n,o){const h=a[0]-n[0],m=a[1]-n[1],y=a[0]-o[0],_=a[1]-o[1];return h*_-y*m==0&&h*y<=0&&m*_<=0}function Zc(a,n){let o=!1;for(let _=0,w=n.length;_<w;_++){const S=n[_];for(let P=0,M=S.length;P<M-1;P++){if(on(a,S[P],S[P+1]))return!1;(m=S[P])[1]>(h=a)[1]!=(y=S[P+1])[1]>h[1]&&h[0]<(y[0]-m[0])*(h[1]-m[1])/(y[1]-m[1])+m[0]&&(o=!o)}}var h,m,y;return o}function Hc(a,n){for(let o=0;o<n.length;o++)if(Zc(a,n[o]))return!0;return!1}function md(a,n,o,h){const m=h[0]-o[0],y=h[1]-o[1],_=(a[0]-o[0])*y-m*(a[1]-o[1]),w=(n[0]-o[0])*y-m*(n[1]-o[1]);return _>0&&w<0||_<0&&w>0}function gd(a,n,o){for(const P of o)for(let M=0;M<P.length-1;++M)if((w=[(_=P[M+1])[0]-(y=P[M])[0],_[1]-y[1]])[0]*(S=[(m=n)[0]-(h=a)[0],m[1]-h[1]])[1]-w[1]*S[0]!=0&&md(h,m,y,_)&&md(y,_,h,m))return!0;var h,m,y,_,w,S;return!1}function Xc(a,n){for(let o=0;o<a.length;++o)if(!Zc(a[o],n))return!1;for(let o=0;o<a.length-1;++o)if(gd(a[o],a[o+1],n))return!1;return!0}function Zm(a,n){for(let o=0;o<n.length;o++)if(Xc(a,n[o]))return!0;return!1}function Cl(a,n,o){const h=[];for(let m=0;m<a.length;m++){const y=[];for(let _=0;_<a[m].length;_++){const w=Is(a[m][_],o);dr(n,w),y.push(w)}h.push(y)}return h}function Yc(a,n,o){const h=[];for(let m=0;m<a.length;m++){const y=Cl(a[m],n,o);h.push(y)}return h}function yd(a,n,o,h){if(a[0]<o[0]||a[0]>o[2]){const m=.5*h;let y=a[0]-o[0]>m?-h:o[0]-a[0]>m?h:0;y===0&&(y=a[0]-o[2]>m?-h:o[2]-a[0]>m?h:0),a[0]+=y}dr(n,a)}function vd(a,n,o,h){const m=Math.pow(2,h.z)*fn,y=[h.x*fn,h.y*fn],_=[];for(const w of a)for(const S of w){const P=[S.x+y[0],S.y+y[1]];yd(P,n,o,m),_.push(P)}return _}function _d(a,n,o,h){const m=Math.pow(2,h.z)*fn,y=[h.x*fn,h.y*fn],_=[];for(const S of a){const P=[];for(const M of S){const D=[M.x+y[0],M.y+y[1]];dr(n,D),P.push(D)}_.push(P)}if(n[2]-n[0]<=m/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const S of _)for(const P of S)yd(P,n,o,m)}var w;return _}class Wa{constructor(n,o){this.type=It,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Le(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const y=h.features[m].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Wa(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Wa(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Wa(h,h)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(h.type==="Polygon"){const w=Cl(h.coordinates,y,_),S=vd(o.geometry(),m,y,_);if(!Io(m,y))return!1;for(const P of S)if(!Zc(P,w))return!1}if(h.type==="MultiPolygon"){const w=Yc(h.coordinates,y,_),S=vd(o.geometry(),m,y,_);if(!Io(m,y))return!1;for(const P of S)if(!Hc(P,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,h){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(h.type==="Polygon"){const w=Cl(h.coordinates,y,_),S=_d(o.geometry(),m,y,_);if(!Io(m,y))return!1;for(const P of S)if(!Xc(P,w))return!1}if(h.type==="MultiPolygon"){const w=Yc(h.coordinates,y,_),S=_d(o.geometry(),m,y,_);if(!Io(m,y))return!1;for(const P of S)if(!Zm(P,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function As(a){if(a instanceof an&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Wa)return!1;let n=!0;return a.eachChild(o=>{n&&!As(o)&&(n=!1)}),n}function Ao(a){if(a instanceof an&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(o=>{n&&!Ao(o)&&(n=!1)}),n}function Pl(a,n){if(a instanceof an&&n.indexOf(a.name)>=0)return!1;let o=!0;return a.eachChild(h=>{o&&!Pl(h,n)&&(o=!1)}),o}class Il{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const h=n[1];return o.scope.has(h)?new Il(h,o.scope.get(h)):o.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Mo{constructor(n,o=[],h,m=new Vr,y=[]){this.registry=n,this.path=o,this.key=o.map(_=>`[${_}]`).join(""),this.scope=m,this.errors=y,this.expectedType=h}parse(n,o,h,m,y={}){return o?this.concat(o,h,m)._parse(n,y):this._parse(n,y)}_parse(n,o){function h(m,y,_){return _==="assert"?new Et(y,[m]):_==="coerce"?new kt(y,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let _=y.parse(n,this);if(!_)return null;if(this.expectedType){const w=this.expectedType,S=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||S.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(w.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array"){if(this.checkSubtype(w,S))return null}else _=h(_,w,o.typeAnnotation||"coerce");else _=h(_,w,o.typeAnnotation||"coerce");else _=h(_,w,o.typeAnnotation||"assert")}if(!(_ instanceof ht)&&_.type.kind!=="resolvedImage"&&Kc(_)){const w=new Gt;try{_=new ht(_.type,_.evaluate(w))}catch(S){return this.error(S.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,h){const m=typeof n=="number"?this.path.concat(n):this.path,y=h?this.scope.concat(h):this.scope;return new Mo(this.registry,m,o||null,y,this.errors)}error(n,...o){const h=`${this.key}${o.map(m=>`[${m}]`).join("")}`;this.errors.push(new jr(h,n))}checkSubtype(n,o){const h=Li(n,o);return h&&this.error(h),h}}function Kc(a){if(a instanceof Il)return Kc(a.boundExpression);if(a instanceof an&&a.name==="error"||a instanceof Yn||a instanceof Wa)return!1;const n=a instanceof kt||a instanceof Et;let o=!0;return a.eachChild(h=>{o=n?o&&Kc(h):o&&h instanceof ht}),!!o&&As(a)&&Pl(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Al(a,n){const o=a.length-1;let h,m,y=0,_=o,w=0;for(;y<=_;)if(w=Math.floor((y+_)/2),h=a[w],m=a[w+1],h<=n){if(w===o||n<m)return w;y=w+1}else{if(!(h>n))throw new Qe("Input is not a number.");_=w-1}return 0}class Ms{constructor(n,o,h){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[m,y]of h)this.labels.push(m),this.outputs.push(y)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const h=o.parse(n[1],1,qe);if(!h)return null;const m=[];let y=null;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);for(let _=1;_<n.length;_+=2){const w=_===1?-1/0:n[_],S=n[_+1],P=_,M=_+1;if(typeof w!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(m.length&&m[m.length-1][0]>=w)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const D=o.parse(S,M,y);if(!D)return null;y=y||D.type,m.push([w,D])}return new Ms(y,h,m)}evaluate(n){const o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=o[0])return h[0].evaluate(n);const y=o.length;return m>=o[y-1]?h[y-1].evaluate(n):h[Al(o,m)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function pn(a,n,o){return a*(1-o)+n*o}var zs=Object.freeze({__proto__:null,number:pn,color:function(a,n,o){return new q(pn(a.r,n.r,o),pn(a.g,n.g,o),pn(a.b,n.b,o),pn(a.a,n.a,o))},array:function(a,n,o){return a.map((h,m)=>pn(h,n[m],o))},padding:function(a,n,o){const h=a.values,m=n.values;return new re([pn(h[0],m[0],o),pn(h[1],m[1],o),pn(h[2],m[2],o),pn(h[3],m[3],o)])}});const xd=.95047,bd=1.08883,Jc=4/29,Ml=6/29,wd=3*Ml*Ml,Hm=Math.PI/180,Xm=180/Math.PI;function Qc(a){return a>.008856451679035631?Math.pow(a,1/3):a/wd+Jc}function eu(a){return a>Ml?a*a*a:wd*(a-Jc)}function tu(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function nu(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ht(a){const n=nu(a.r),o=nu(a.g),h=nu(a.b),m=Qc((.4124564*n+.3575761*o+.1804375*h)/xd),y=Qc((.2126729*n+.7151522*o+.072175*h)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-Qc((.0193339*n+.119192*o+.9503041*h)/bd)),alpha:a.a}}function Ed(a){let n=(a.l+16)/116,o=isNaN(a.a)?n:n+a.a/500,h=isNaN(a.b)?n:n-a.b/200;return n=1*eu(n),o=xd*eu(o),h=bd*eu(h),new q(tu(3.2404542*o-1.5371385*n-.4985314*h),tu(-.969266*o+1.8760108*n+.041556*h),tu(.0556434*o-.2040259*n+1.0572252*h),a.alpha)}function Ym(a,n,o){const h=n-a;return a+o*(h>180||h<-180?h-360*Math.round(h/360):h)}const Ds={forward:Ht,reverse:Ed,interpolate:function(a,n,o){return{l:pn(a.l,n.l,o),a:pn(a.a,n.a,o),b:pn(a.b,n.b,o),alpha:pn(a.alpha,n.alpha,o)}}},Ls={forward:function(a){const{l:n,a:o,b:h}=Ht(a),m=Math.atan2(h,o)*Xm;return{h:m<0?m+360:m,c:Math.sqrt(o*o+h*h),l:n,alpha:a.a}},reverse:function(a){const n=a.h*Hm,o=a.c;return Ed({l:a.l,a:Math.cos(n)*o,b:Math.sin(n)*o,alpha:a.alpha})},interpolate:function(a,n,o){return{h:Ym(a.h,n.h,o),c:pn(a.c,n.c,o),l:pn(a.l,n.l,o),alpha:pn(a.alpha,n.alpha,o)}}};var Sd=Object.freeze({__proto__:null,lab:Ds,hcl:Ls});class Gr{constructor(n,o,h,m,y){this.type=n,this.operator=o,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[_,w]of y)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(n,o,h,m){let y=0;if(n.name==="exponential")y=ru(o,n.base,h,m);else if(n.name==="linear")y=ru(o,1,h,m);else if(n.name==="cubic-bezier"){const _=n.controlPoints;y=new E(_[0],_[1],_[2],_[3]).solve(ru(o,1,h,m))}return y}static parse(n,o){let[h,m,y,..._]=n;if(!Array.isArray(m)||m.length===0)return o.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const P=m[1];if(typeof P!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:P}}else{if(m[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const P=m.slice(1);if(P.length!==4||P.some(M=>typeof M!="number"||M<0||M>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(y=o.parse(y,2,qe),!y)return null;const w=[];let S=null;h==="interpolate-hcl"||h==="interpolate-lab"?S=ir:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let P=0;P<_.length;P+=2){const M=_[P],D=_[P+1],F=P+3,U=P+4;if(typeof M!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(w.length&&w[w.length-1][0]>=M)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const j=o.parse(D,U,S);if(!j)return null;S=S||j.type,w.push([M,j])}return S.kind==="number"||S.kind==="color"||S.kind==="padding"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Gr(S,h,m,y,w):o.error(`Type ${nn(S)} is not interpolatable.`)}evaluate(n){const o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=o[0])return h[0].evaluate(n);const y=o.length;if(m>=o[y-1])return h[y-1].evaluate(n);const _=Al(o,m),w=Gr.interpolationFactor(this.interpolation,m,o[_],o[_+1]),S=h[_].evaluate(n),P=h[_+1].evaluate(n);return this.operator==="interpolate"?zs[this.type.kind.toLowerCase()](S,P,w):this.operator==="interpolate-hcl"?Ls.reverse(Ls.interpolate(Ls.forward(S),Ls.forward(P),w)):Ds.reverse(Ds.interpolate(Ds.forward(S),Ds.forward(P),w))}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ru(a,n,o,h){const m=h-o,y=a-o;return m===0?0:n===1?y/m:(Math.pow(n,y)-1)/(Math.pow(n,m)-1)}class zl{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expectected at least one argument.");let h=null;const m=o.expectedType;m&&m.kind!=="value"&&(h=m);const y=[];for(const w of n.slice(1)){const S=o.parse(w,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!S)return null;h=h||S.type,y.push(S)}if(!h)throw new Error("No output type");const _=m&&y.some(w=>Li(m,w.type));return new zl(_?Pt:h,y)}evaluate(n){let o,h=null,m=0;for(const y of this.args)if(m++,h=y.evaluate(n),h&&h instanceof ue&&!h.available&&(o||(o=h.name),h=null,m===this.args.length&&(h=o)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Dl{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let y=1;y<n.length-1;y+=2){const _=n[y];if(typeof _!="string")return o.error(`Expected string, but found ${typeof _} instead.`,y);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",y);const w=o.parse(n[y+1],y+1);if(!w)return null;h.push([_,w])}const m=o.parse(n[n.length-1],n.length-1,o.expectedType,h);return m?new Dl(h,m):null}outputDefined(){return this.result.outputDefined()}}class iu{constructor(n,o,h){this.type=n,this.index=o,this.input=h}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=o.parse(n[1],1,qe),m=o.parse(n[2],2,xr(o.expectedType||Pt));return h&&m?new iu(m.type.itemType,h,m):null}evaluate(n){const o=this.index.evaluate(n),h=this.input.evaluate(n);if(o<0)throw new Qe(`Array index out of bounds: ${o} < 0.`);if(o>=h.length)throw new Qe(`Array index out of bounds: ${o} > ${h.length-1}.`);if(o!==Math.floor(o))throw new Qe(`Array index must be an integer, but found ${o} instead.`);return h[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class au{constructor(n,o){this.type=It,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=o.parse(n[1],1,Pt),m=o.parse(n[2],2,Pt);return h&&m?Va(h.type,[It,Dt,qe,wa,Pt])?new au(h,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${nn(h.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ga(o,["boolean","string","number","null"]))throw new Qe(`Expected first argument to be of type boolean, string, number or null, but found ${nn(be(o))} instead.`);if(!Ga(h,["string","array"]))throw new Qe(`Expected second argument to be of type array or string, but found ${nn(be(h))} instead.`);return h.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Ll{constructor(n,o,h){this.type=qe,this.needle=n,this.haystack=o,this.fromIndex=h}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=o.parse(n[1],1,Pt),m=o.parse(n[2],2,Pt);if(!h||!m)return null;if(!Va(h.type,[It,Dt,qe,wa,Pt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${nn(h.type)} instead`);if(n.length===4){const y=o.parse(n[3],3,qe);return y?new Ll(h,m,y):null}return new Ll(h,m)}evaluate(n){const o=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ga(o,["boolean","string","number","null"]))throw new Qe(`Expected first argument to be of type boolean, string, number or null, but found ${nn(be(o))} instead.`);if(!Ga(h,["string","array"]))throw new Qe(`Expected second argument to be of type array or string, but found ${nn(be(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(o,m)}return h.indexOf(o)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class ou{constructor(n,o,h,m,y,_){this.inputType=n,this.type=o,this.input=h,this.cases=m,this.outputs=y,this.otherwise=_}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let h,m;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);const y={},_=[];for(let P=2;P<n.length-1;P+=2){let M=n[P];const D=n[P+1];Array.isArray(M)||(M=[M]);const F=o.concat(P);if(M.length===0)return F.error("Expected at least one branch label.");for(const j of M){if(typeof j!="number"&&typeof j!="string")return F.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return F.error("Numeric branch labels must be integer values.");if(h){if(F.checkSubtype(h,be(j)))return null}else h=be(j);if(y[String(j)]!==void 0)return F.error("Branch labels must be unique.");y[String(j)]=_.length}const U=o.parse(D,P,m);if(!U)return null;m=m||U.type,_.push(U)}const w=o.parse(n[1],1,Pt);if(!w)return null;const S=o.parse(n[n.length-1],n.length-1,m);return S?w.type.kind!=="value"&&o.concat(1).checkSubtype(h,w.type)?null:new ou(h,m,w,y,_,S):null}evaluate(n){const o=this.input.evaluate(n);return(be(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class su{constructor(n,o,h){this.type=n,this.branches=o,this.otherwise=h}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);const m=[];for(let _=1;_<n.length-1;_+=2){const w=o.parse(n[_],_,It);if(!w)return null;const S=o.parse(n[_+1],_+1,h);if(!S)return null;m.push([w,S]),h=h||S.type}const y=o.parse(n[n.length-1],n.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new su(h,m,y)}evaluate(n){for(const[o,h]of this.branches)if(o.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,h]of this.branches)n(o),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Rl{constructor(n,o,h,m){this.type=n,this.input=o,this.beginIndex=h,this.endIndex=m}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=o.parse(n[1],1,Pt),m=o.parse(n[2],2,qe);if(!h||!m)return null;if(!Va(h.type,[xr(Pt),Dt,Pt]))return o.error(`Expected first argument to be of type array or string, but found ${nn(h.type)} instead`);if(n.length===4){const y=o.parse(n[3],3,qe);return y?new Rl(h.type,h,m,y):null}return new Rl(h.type,h,m)}evaluate(n){const o=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ga(o,["string","array"]))throw new Qe(`Expected first argument to be of type array or string, but found ${nn(be(o))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return o.slice(h,m)}return o.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Td(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function kd(a,n,o,h){return h.compare(n,o)===0}function zo(a,n,o){const h=a!=="=="&&a!=="!=";return class zT{constructor(y,_,w){this.type=It,this.lhs=y,this.rhs=_,this.collator=w,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}static parse(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");const w=y[0];let S=_.parse(y[1],1,Pt);if(!S)return null;if(!Td(w,S.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${nn(S.type)}'.`);let P=_.parse(y[2],2,Pt);if(!P)return null;if(!Td(w,P.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${nn(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${nn(S.type)}' and '${nn(P.type)}'.`);h&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new Et(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new Et(S.type,[P])));let M=null;if(y.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(M=_.parse(y[3],3,Ji),!M)return null}return new zT(S,P,M)}evaluate(y){const _=this.lhs.evaluate(y),w=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const S=be(_),P=be(w);if(S.kind!==P.kind||S.kind!=="string"&&S.kind!=="number")throw new Qe(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const S=be(_),P=be(w);if(S.kind!=="string"||P.kind!=="string")return n(y,_,w)}return this.collator?o(y,_,w,this.collator.evaluate(y)):n(y,_,w)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const Km=zo("==",function(a,n,o){return n===o},kd),Jm=zo("!=",function(a,n,o){return n!==o},function(a,n,o,h){return!kd(0,n,o,h)}),Qm=zo("<",function(a,n,o){return n<o},function(a,n,o,h){return h.compare(n,o)<0}),eg=zo(">",function(a,n,o){return n>o},function(a,n,o,h){return h.compare(n,o)>0}),tg=zo("<=",function(a,n,o){return n<=o},function(a,n,o,h){return h.compare(n,o)<=0}),ng=zo(">=",function(a,n,o){return n>=o},function(a,n,o,h){return h.compare(n,o)>=0});class lu{constructor(n,o,h,m,y){this.type=Dt,this.number=n,this.locale=o,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const h=o.parse(n[1],1,qe);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=o.parse(m.locale,1,Dt),!y))return null;let _=null;if(m.currency&&(_=o.parse(m.currency,1,Dt),!_))return null;let w=null;if(m["min-fraction-digits"]&&(w=o.parse(m["min-fraction-digits"],1,qe),!w))return null;let S=null;return m["max-fraction-digits"]&&(S=o.parse(m["max-fraction-digits"],1,qe),!S)?null:new lu(h,y,_,w,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Ol{constructor(n){this.type=Xn,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return o.error("First argument must be an image or text section.");const m=[];let y=!1;for(let _=1;_<=n.length-1;++_){const w=n[_];if(y&&typeof w=="object"&&!Array.isArray(w)){y=!1;let S=null;if(w["font-scale"]&&(S=o.parse(w["font-scale"],1,qe),!S))return null;let P=null;if(w["text-font"]&&(P=o.parse(w["text-font"],1,xr(Dt)),!P))return null;let M=null;if(w["text-color"]&&(M=o.parse(w["text-color"],1,ir),!M))return null;const D=m[m.length-1];D.scale=S,D.font=P,D.textColor=M}else{const S=o.parse(n[_],1,Pt);if(!S)return null;const P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:S,scale:null,font:null,textColor:null})}}return new Ol(m)}evaluate(n){return new oe(this.sections.map(o=>{const h=o.content.evaluate(n);return be(h)===On?new le("",h,null,null,null):new le(lt(h),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor)}outputDefined(){return!1}}class cu{constructor(n){this.type=On,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const h=o.parse(n[1],1,Dt);return h?new cu(h):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),h=ue.fromString(o);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(o)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class uu{constructor(n){this.type=qe,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=o.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${nn(h.type)} instead.`):new uu(h):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Qe(`Expected value to be of type string or array, but found ${nn(be(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Do={"==":Km,"!=":Jm,">":eg,"<":Qm,">=":ng,"<=":tg,array:Et,at:iu,boolean:Et,case:su,coalesce:zl,collator:Yn,format:Ol,image:cu,in:au,"index-of":Ll,interpolate:Gr,"interpolate-hcl":Gr,"interpolate-lab":Gr,length:uu,let:Dl,literal:ht,match:ou,number:Et,"number-format":lu,object:Et,slice:Rl,step:Ms,string:Et,"to-boolean":kt,"to-color":kt,"to-number":kt,"to-string":kt,var:Il,within:Wa};function Cd(a,[n,o,h,m]){n=n.evaluate(a),o=o.evaluate(a),h=h.evaluate(a);const y=m?m.evaluate(a):1,_=Se(n,o,h,y);if(_)throw new Qe(_);return new q(n/255*y,o/255*y,h/255*y,y)}function Pd(a,n){return a in n}function Bl(a,n){const o=n[a];return o===void 0?null:o}function Za(a){return{type:a}}function Id(a){return{result:"success",value:a}}function Lo(a){return{result:"error",value:a}}function hn(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Ad(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ft(a){return!!a.expression&&a.expression.interpolated}function Xt(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function cn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function mn(a){return a}function Rs(a,n){const o=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",m=h||!(h||a.property!==void 0),y=a.type||(Ft(n)?"exponential":"interval");if(o||n.type==="padding"){const P=o?q.parse:re.parse;(a=yi({},a)).stops&&(a.stops=a.stops.map(M=>[M[0],P(M[1])])),a.default=P(a.default?a.default:n.default)}if(a.colorSpace&&a.colorSpace!=="rgb"&&!Sd[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let _,w,S;if(y==="exponential")_=Md;else if(y==="interval")_=ig;else if(y==="categorical"){_=rg,w=Object.create(null);for(const P of a.stops)w[P[0]]=P[1];S=typeof a.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);_=ag}if(h){const P={},M=[];for(let U=0;U<a.stops.length;U++){const j=a.stops[U],te=j[0].zoom;P[te]===void 0&&(P[te]={zoom:te,type:a.type,property:a.property,default:a.default,stops:[]},M.push(te)),P[te].stops.push([j[0].value,j[1]])}const D=[];for(const U of M)D.push([P[U].zoom,Rs(P[U],n)]);const F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:Gr.interpolationFactor.bind(void 0,F),zoomStops:D.map(U=>U[0]),evaluate:({zoom:U},j)=>Md({stops:D,base:a.base},n,U).evaluate(U,j)}}if(m){const P=y==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Gr.interpolationFactor.bind(void 0,P),zoomStops:a.stops.map(M=>M[0]),evaluate:({zoom:M})=>_(a,n,M,w,S)}}return{kind:"source",evaluate(P,M){const D=M&&M.properties?M.properties[a.property]:void 0;return D===void 0?Ro(a.default,n.default):_(a,n,D,w,S)}}}function Ro(a,n,o){return a!==void 0?a:n!==void 0?n:o!==void 0?o:void 0}function rg(a,n,o,h,m){return Ro(typeof o===m?h[o]:void 0,a.default,n.default)}function ig(a,n,o){if(Xt(o)!=="number")return Ro(a.default,n.default);const h=a.stops.length;if(h===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[h-1][0])return a.stops[h-1][1];const m=Al(a.stops.map(y=>y[0]),o);return a.stops[m][1]}function Md(a,n,o){const h=a.base!==void 0?a.base:1;if(Xt(o)!=="number")return Ro(a.default,n.default);const m=a.stops.length;if(m===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[m-1][0])return a.stops[m-1][1];const y=Al(a.stops.map(M=>M[0]),o),_=function(M,D,F,U){const j=U-F,te=M-F;return j===0?0:D===1?te/j:(Math.pow(D,te)-1)/(Math.pow(D,j)-1)}(o,h,a.stops[y][0],a.stops[y+1][0]),w=a.stops[y][1],S=a.stops[y+1][1];let P=zs[n.type]||mn;if(a.colorSpace&&a.colorSpace!=="rgb"){const M=Sd[a.colorSpace];P=(D,F)=>M.reverse(M.interpolate(M.forward(D),M.forward(F),_))}return typeof w.evaluate=="function"?{evaluate(...M){const D=w.evaluate.apply(void 0,M),F=S.evaluate.apply(void 0,M);if(D!==void 0&&F!==void 0)return P(D,F,_)}}:P(w,S,_)}function ag(a,n,o){switch(n.type){case"color":o=q.parse(o);break;case"formatted":o=oe.fromString(o.toString());break;case"resolvedImage":o=ue.fromString(o.toString());break;case"padding":o=re.parse(o);break;default:Xt(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0)}return Ro(o,a.default,n.default)}an.register(Do,{error:[{kind:"error"},[Dt],(a,[n])=>{throw new Qe(n.evaluate(a))}],typeof:[Dt,[Pt],(a,[n])=>nn(be(n.evaluate(a)))],"to-rgba":[xr(qe,4),[ir],(a,[n])=>n.evaluate(a).toArray()],rgb:[ir,[qe,qe,qe],Cd],rgba:[ir,[qe,qe,qe,qe],Cd],has:{type:It,overloads:[[[Dt],(a,[n])=>Pd(n.evaluate(a),a.properties())],[[Dt,Ea],(a,[n,o])=>Pd(n.evaluate(a),o.evaluate(a))]]},get:{type:Pt,overloads:[[[Dt],(a,[n])=>Bl(n.evaluate(a),a.properties())],[[Dt,Ea],(a,[n,o])=>Bl(n.evaluate(a),o.evaluate(a))]]},"feature-state":[Pt,[Dt],(a,[n])=>Bl(n.evaluate(a),a.featureState||{})],properties:[Ea,[],a=>a.properties()],"geometry-type":[Dt,[],a=>a.geometryType()],id:[Pt,[],a=>a.id()],zoom:[qe,[],a=>a.globals.zoom],"heatmap-density":[qe,[],a=>a.globals.heatmapDensity||0],"line-progress":[qe,[],a=>a.globals.lineProgress||0],accumulated:[Pt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[qe,Za(qe),(a,n)=>{let o=0;for(const h of n)o+=h.evaluate(a);return o}],"*":[qe,Za(qe),(a,n)=>{let o=1;for(const h of n)o*=h.evaluate(a);return o}],"-":{type:qe,overloads:[[[qe,qe],(a,[n,o])=>n.evaluate(a)-o.evaluate(a)],[[qe],(a,[n])=>-n.evaluate(a)]]},"/":[qe,[qe,qe],(a,[n,o])=>n.evaluate(a)/o.evaluate(a)],"%":[qe,[qe,qe],(a,[n,o])=>n.evaluate(a)%o.evaluate(a)],ln2:[qe,[],()=>Math.LN2],pi:[qe,[],()=>Math.PI],e:[qe,[],()=>Math.E],"^":[qe,[qe,qe],(a,[n,o])=>Math.pow(n.evaluate(a),o.evaluate(a))],sqrt:[qe,[qe],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[qe,[qe],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[qe,[qe],(a,[n])=>Math.log(n.evaluate(a))],log2:[qe,[qe],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[qe,[qe],(a,[n])=>Math.sin(n.evaluate(a))],cos:[qe,[qe],(a,[n])=>Math.cos(n.evaluate(a))],tan:[qe,[qe],(a,[n])=>Math.tan(n.evaluate(a))],asin:[qe,[qe],(a,[n])=>Math.asin(n.evaluate(a))],acos:[qe,[qe],(a,[n])=>Math.acos(n.evaluate(a))],atan:[qe,[qe],(a,[n])=>Math.atan(n.evaluate(a))],min:[qe,Za(qe),(a,n)=>Math.min(...n.map(o=>o.evaluate(a)))],max:[qe,Za(qe),(a,n)=>Math.max(...n.map(o=>o.evaluate(a)))],abs:[qe,[qe],(a,[n])=>Math.abs(n.evaluate(a))],round:[qe,[qe],(a,[n])=>{const o=n.evaluate(a);return o<0?-Math.round(-o):Math.round(o)}],floor:[qe,[qe],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[qe,[qe],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[It,[Dt,Pt],(a,[n,o])=>a.properties()[n.value]===o.value],"filter-id-==":[It,[Pt],(a,[n])=>a.id()===n.value],"filter-type-==":[It,[Dt],(a,[n])=>a.geometryType()===n.value],"filter-<":[It,[Dt,Pt],(a,[n,o])=>{const h=a.properties()[n.value],m=o.value;return typeof h==typeof m&&h<m}],"filter-id-<":[It,[Pt],(a,[n])=>{const o=a.id(),h=n.value;return typeof o==typeof h&&o<h}],"filter->":[It,[Dt,Pt],(a,[n,o])=>{const h=a.properties()[n.value],m=o.value;return typeof h==typeof m&&h>m}],"filter-id->":[It,[Pt],(a,[n])=>{const o=a.id(),h=n.value;return typeof o==typeof h&&o>h}],"filter-<=":[It,[Dt,Pt],(a,[n,o])=>{const h=a.properties()[n.value],m=o.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[It,[Pt],(a,[n])=>{const o=a.id(),h=n.value;return typeof o==typeof h&&o<=h}],"filter->=":[It,[Dt,Pt],(a,[n,o])=>{const h=a.properties()[n.value],m=o.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[It,[Pt],(a,[n])=>{const o=a.id(),h=n.value;return typeof o==typeof h&&o>=h}],"filter-has":[It,[Pt],(a,[n])=>n.value in a.properties()],"filter-has-id":[It,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[It,[xr(Dt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[It,[xr(Pt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[It,[Dt,xr(Pt)],(a,[n,o])=>o.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[It,[Dt,xr(Pt)],(a,[n,o])=>function(h,m,y,_){for(;y<=_;){const w=y+_>>1;if(m[w]===h)return!0;m[w]>h?_=w-1:y=w+1}return!1}(a.properties()[n.value],o.value,0,o.value.length-1)],all:{type:It,overloads:[[[It,It],(a,[n,o])=>n.evaluate(a)&&o.evaluate(a)],[Za(It),(a,n)=>{for(const o of n)if(!o.evaluate(a))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(a,[n,o])=>n.evaluate(a)||o.evaluate(a)],[Za(It),(a,n)=>{for(const o of n)if(o.evaluate(a))return!0;return!1}]]},"!":[It,[It],(a,[n])=>!n.evaluate(a)],"is-supported-script":[It,[Dt],(a,[n])=>{const o=a.globals&&a.globals.isSupportedScript;return!o||o(n.evaluate(a))}],upcase:[Dt,[Dt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Dt,[Dt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Dt,Za(Pt),(a,n)=>n.map(o=>lt(o.evaluate(a))).join("")],"resolved-locale":[Dt,[Ji],(a,[n])=>n.evaluate(a).resolvedLocale()]});class Nl{constructor(n,o){this.expression=n,this._warningHistory={},this._evaluator=new Gt,this._defaultValue=o?function(h){return h.type==="color"&&cn(h.default)?new q(0,0,0,0):h.type==="color"?q.parse(h.default)||null:h.type==="padding"?re.parse(h.default)||null:h.default===void 0?null:h.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(n,o,h,m,y,_){return this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,o,h,m,y,_){this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Qe(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Os(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Do}function Bs(a,n){const o=new Mo(Do,[],n?function(m){const y={color:ir,string:Dt,number:qe,enum:Dt,boolean:It,formatted:Xn,padding:ko,resolvedImage:On};return m.type==="array"?xr(y[m.value]||Pt,m.length):y[m.type]}(n):void 0),h=o.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Id(new Nl(h,n)):Lo(o.errors)}class Ns{constructor(n,o){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!Ao(o.expression)}evaluateWithoutErrorHandling(n,o,h,m,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,o,h,m,y,_)}evaluate(n,o,h,m,y,_){return this._styleExpression.evaluate(n,o,h,m,y,_)}}class hu{constructor(n,o,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!Ao(o.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,o,h,m,y,_){return this._styleExpression.evaluateWithoutErrorHandling(n,o,h,m,y,_)}evaluate(n,o,h,m,y,_){return this._styleExpression.evaluate(n,o,h,m,y,_)}interpolationFactor(n,o,h){return this.interpolationType?Gr.interpolationFactor(this.interpolationType,n,o,h):0}}function zd(a,n){const o=Bs(a,n);if(o.result==="error")return o;const h=o.value.expression,m=As(h);if(!m&&!hn(n))return Lo([new jr("","data expressions not supported")]);const y=Pl(h,["zoom"]);if(!y&&!Ad(n))return Lo([new jr("","zoom expressions not supported")]);const _=$l(h);return _||y?_ instanceof jr?Lo([_]):_ instanceof Gr&&!Ft(n)?Lo([new jr("",'"interpolate" expressions cannot be used with this property')]):Id(_?new hu(m?"camera":"composite",o.value,_.labels,_ instanceof Gr?_.interpolation:void 0):new Ns(m?"constant":"source",o.value)):Lo([new jr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fl{constructor(n,o){this._parameters=n,this._specification=o,yi(this,Rs(this._parameters,this._specification))}static deserialize(n){return new Fl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function $l(a){let n=null;if(a instanceof Dl)n=$l(a.result);else if(a instanceof zl){for(const o of a.args)if(n=$l(o),n)break}else(a instanceof Ms||a instanceof Gr)&&a.input instanceof an&&a.input.name==="zoom"&&(n=a);return n instanceof jr||a.eachChild(o=>{const h=$l(o);h instanceof jr?n=h:!n&&h?n=new jr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new jr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function vi(a){const n=a.key,o=a.value,h=a.valueSpec||{},m=a.objectElementValidators||{},y=a.style,_=a.styleSpec;let w=[];const S=Xt(o);if(S!=="object")return[new He(n,o,`object expected, ${S} found`)];for(const P in o){const M=P.split(".")[0],D=h[M]||h["*"];let F;if(m[M])F=m[M];else if(h[M])F=Wr;else if(m["*"])F=m["*"];else{if(!h["*"]){w.push(new He(n,o[P],`unknown property "${P}"`));continue}F=Wr}w=w.concat(F({key:(n&&`${n}.`)+P,value:o[P],valueSpec:D,style:y,styleSpec:_,object:o,objectKey:P},o))}for(const P in h)m[P]||h[P].required&&h[P].default===void 0&&o[P]===void 0&&w.push(new He(n,o,`missing required property "${P}"`));return w}function Dd(a){const n=a.value,o=a.valueSpec,h=a.style,m=a.styleSpec,y=a.key,_=a.arrayElementValidator||Wr;if(Xt(n)!=="array")return[new He(y,n,`array expected, ${Xt(n)} found`)];if(o.length&&n.length!==o.length)return[new He(y,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new He(y,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let w={type:o.value,values:o.values};m.$version<7&&(w.function=o.function),Xt(o.value)==="object"&&(w=o.value);let S=[];for(let P=0;P<n.length;P++)S=S.concat(_({array:n,arrayIndex:P,value:n[P],valueSpec:w,style:h,styleSpec:m,key:`${y}[${P}]`}));return S}function du(a){const n=a.key,o=a.value,h=a.valueSpec;let m=Xt(o);return m==="number"&&o!=o&&(m="NaN"),m!=="number"?[new He(n,o,`number expected, ${m} found`)]:"minimum"in h&&o<h.minimum?[new He(n,o,`${o} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&o>h.maximum?[new He(n,o,`${o} is greater than the maximum value ${h.maximum}`)]:[]}function Ld(a){const n=a.valueSpec,o=jt(a.value.type);let h,m,y,_={};const w=o!=="categorical"&&a.value.property===void 0,S=!w,P=Xt(a.value.stops)==="array"&&Xt(a.value.stops[0])==="array"&&Xt(a.value.stops[0][0])==="object",M=vi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(U){if(o==="identity")return[new He(U.key,U.value,'identity function may not have a "stops" property')];let j=[];const te=U.value;return j=j.concat(Dd({key:U.key,value:te,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:D})),Xt(te)==="array"&&te.length===0&&j.push(new He(U.key,te,"array must have at least one stop")),j},default:function(U){return Wr({key:U.key,value:U.value,valueSpec:n,style:U.style,styleSpec:U.styleSpec})}}});return o==="identity"&&w&&M.push(new He(a.key,a.value,'missing required property "property"')),o==="identity"||a.value.stops||M.push(new He(a.key,a.value,'missing required property "stops"')),o==="exponential"&&a.valueSpec.expression&&!Ft(a.valueSpec)&&M.push(new He(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(S&&!hn(a.valueSpec)?M.push(new He(a.key,a.value,"property functions not supported")):w&&!Ad(a.valueSpec)&&M.push(new He(a.key,a.value,"zoom functions not supported"))),o!=="categorical"&&!P||a.value.property!==void 0||M.push(new He(a.key,a.value,'"property" property is required')),M;function D(U){let j=[];const te=U.value,ee=U.key;if(Xt(te)!=="array")return[new He(ee,te,`array expected, ${Xt(te)} found`)];if(te.length!==2)return[new He(ee,te,`array length 2 expected, length ${te.length} found`)];if(P){if(Xt(te[0])!=="object")return[new He(ee,te,`object expected, ${Xt(te[0])} found`)];if(te[0].zoom===void 0)return[new He(ee,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new He(ee,te,"object stop key must have value")];if(y&&y>jt(te[0].zoom))return[new He(ee,te[0].zoom,"stop zoom values must appear in ascending order")];jt(te[0].zoom)!==y&&(y=jt(te[0].zoom),m=void 0,_={}),j=j.concat(vi({key:`${ee}[0]`,value:te[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:du,value:F}}))}else j=j.concat(F({key:`${ee}[0]`,value:te[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},te));return Os(ii(te[1]))?j.concat([new He(`${ee}[1]`,te[1],"expressions are not allowed in function stops.")]):j.concat(Wr({key:`${ee}[1]`,value:te[1],valueSpec:n,style:U.style,styleSpec:U.styleSpec}))}function F(U,j){const te=Xt(U.value),ee=jt(U.value),fe=U.value!==null?U.value:j;if(h){if(te!==h)return[new He(U.key,fe,`${te} stop domain type must match previous stop domain type ${h}`)]}else h=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new He(U.key,fe,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&o!=="categorical"){let _e=`number expected, ${te} found`;return hn(n)&&o===void 0&&(_e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new He(U.key,fe,_e)]}return o!=="categorical"||te!=="number"||isFinite(ee)&&Math.floor(ee)===ee?o!=="categorical"&&te==="number"&&m!==void 0&&ee<m?[new He(U.key,fe,"stop domain values must appear in ascending order")]:(m=ee,o==="categorical"&&ee in _?[new He(U.key,fe,"stop domain values must be unique")]:(_[ee]=!0,[])):[new He(U.key,fe,`integer expected, found ${ee}`)]}}function Ha(a){const n=(a.expressionContext==="property"?zd:Bs)(ii(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new He(`${a.key}${h.key}`,a.value,h.message));const o=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!o.outputDefined())return[new He(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ao(o))return[new He(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ao(o))return[new He(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Pl(o,["zoom","feature-state"]))return[new He(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!As(o))return[new He(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fs(a){const n=a.key,o=a.value,h=a.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(jt(o))===-1&&m.push(new He(n,o,`expected one of [${h.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(h.values).indexOf(jt(o))===-1&&m.push(new He(n,o,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function Oo(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Oo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const og={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ul(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Oo(a)||(a=$s(a));const n=Bs(a,og);if(n.result==="error")throw new Error(n.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,h,m)=>n.value.evaluate(o,h,{},m),needGeometry:Od(a)}}function Rd(a,n){return a<n?-1:a>n?1:0}function Od(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(Od(a[n]))return!0;return!1}function $s(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?fu(a[1],a[2],"=="):n==="!="?Bo(fu(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?fu(a[1],a[2],n):n==="any"?(o=a.slice(1),["any"].concat(o.map($s))):n==="all"?["all"].concat(a.slice(1).map($s)):n==="none"?["all"].concat(a.slice(1).map($s).map(Bo)):n==="in"?jl(a[1],a.slice(2)):n==="!in"?Bo(jl(a[1],a.slice(2))):n==="has"?Us(a[1]):n==="!has"?Bo(Us(a[1])):n!=="within"||a;var o}function fu(a,n,o){switch(a){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,a,n]}}function jl(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Rd)]]:["filter-in-small",a,["literal",n]]}}function Us(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Bo(a){return["!",a]}function js(a){return Oo(ii(a.value))?Ha(yi({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bd(a)}function Bd(a){const n=a.value,o=a.key;if(Xt(n)!=="array")return[new He(o,n,`array expected, ${Xt(n)} found`)];const h=a.styleSpec;let m,y=[];if(n.length<1)return[new He(o,n,"filter array must have at least 1 element")];switch(y=y.concat(Fs({key:`${o}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),jt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&jt(n[1])==="$type"&&y.push(new He(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&y.push(new He(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Xt(n[1]),m!=="string"&&y.push(new He(`${o}[1]`,n[1],`string expected, ${m} found`)));for(let _=2;_<n.length;_++)m=Xt(n[_]),jt(n[1])==="$type"?y=y.concat(Fs({key:`${o}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new He(`${o}[${_}]`,n[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)y=y.concat(Bd({key:`${o}[${_}]`,value:n[_],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Xt(n[1]),n.length!==2?y.push(new He(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new He(`${o}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Xt(n[1]),n.length!==2?y.push(new He(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&y.push(new He(`${o}[1]`,n[1],`object expected, ${m} found`))}return y}function Vs(a,n){const o=a.key,h=a.style,m=a.styleSpec,y=a.value,_=a.objectKey,w=m[`${n}_${a.layerType}`];if(!w)return[];const S=_.match(/^(.*)-transition$/);if(n==="paint"&&S&&w[S[1]]&&w[S[1]].transition)return Wr({key:o,value:y,valueSpec:m.transition,style:h,styleSpec:m});const P=a.valueSpec||w[_];if(!P)return[new He(o,y,`unknown property "${_}"`)];let M;if(Xt(y)==="string"&&hn(P)&&!P.tokens&&(M=/^{([^}]+)}$/.exec(y)))return[new He(o,y,`"${_}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(M[1])} }\`.`)];const D=[];return a.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&D.push(new He(o,y,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&cn(ii(y))&&jt(y.type)==="identity"&&D.push(new He(o,y,'"text-font" does not support identity functions'))),D.concat(Wr({key:a.key,value:y,valueSpec:P,style:h,styleSpec:m,expressionContext:"property",propertyType:n,propertyKey:_}))}function Nd(a){return Vs(a,"paint")}function Fd(a){return Vs(a,"layout")}function $d(a){let n=[];const o=a.value,h=a.key,m=a.style,y=a.styleSpec;o.type||o.ref||n.push(new He(h,o,'either "type" or "ref" is required'));let _=jt(o.type);const w=jt(o.ref);if(o.id){const S=jt(o.id);for(let P=0;P<a.arrayIndex;P++){const M=m.layers[P];jt(M.id)===S&&n.push(new He(h,o.id,`duplicate layer id "${o.id}", previously used at line ${M.id.__line__}`))}}if("ref"in o){let S;["type","source","source-layer","filter","layout"].forEach(P=>{P in o&&n.push(new He(h,o[P],`"${P}" is prohibited for ref layers`))}),m.layers.forEach(P=>{jt(P.id)===w&&(S=P)}),S?S.ref?n.push(new He(h,o.ref,"ref cannot reference another ref layer")):_=jt(S.type):n.push(new He(h,o.ref,`ref layer "${w}" not found`))}else if(_!=="background")if(o.source){const S=m.sources&&m.sources[o.source],P=S&&jt(S.type);S?P==="vector"&&_==="raster"?n.push(new He(h,o.source,`layer "${o.id}" requires a raster source`)):P==="raster"&&_!=="raster"?n.push(new He(h,o.source,`layer "${o.id}" requires a vector source`)):P!=="vector"||o["source-layer"]?P==="raster-dem"&&_!=="hillshade"?n.push(new He(h,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!o.paint||!o.paint["line-gradient"]||P==="geojson"&&S.lineMetrics||n.push(new He(h,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new He(h,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new He(h,o.source,`source "${o.source}" not found`))}else n.push(new He(h,o,'missing required property "source"'));return n=n.concat(vi({key:h,value:o,valueSpec:y.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wr({key:`${h}.type`,value:o.type,valueSpec:y.layer.type,style:a.style,styleSpec:a.styleSpec,object:o,objectKey:"type"}),filter:js,layout:S=>vi({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":P=>Fd(yi({layerType:_},P))}}),paint:S=>vi({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":P=>Nd(yi({layerType:_},P))}})}})),n}function No(a){const n=a.value,o=a.key,h=Xt(n);return h!=="string"?[new He(o,n,`string expected, ${h} found`)]:[]}const Ud={promoteId:function({key:a,value:n}){if(Xt(n)==="string")return No({key:a,value:n});{const o=[];for(const h in n)o.push(...No({key:`${a}.${h}`,value:n[h]}));return o}}};function Gs(a){const n=a.value,o=a.key,h=a.styleSpec,m=a.style;if(!n.type)return[new He(o,n,'"type" is required')];const y=jt(n.type);let _;switch(y){case"vector":case"raster":case"raster-dem":return _=vi({key:o,value:n,valueSpec:h[`source_${y.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Ud}),_;case"geojson":if(_=vi({key:o,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,objectElementValidators:Ud}),n.cluster)for(const w in n.clusterProperties){const[S,P]=n.clusterProperties[w],M=typeof S=="string"?[S,["accumulated"],["get",w]]:S;_.push(...Ha({key:`${o}.${w}.map`,value:P,expressionContext:"cluster-map"})),_.push(...Ha({key:`${o}.${w}.reduce`,value:M,expressionContext:"cluster-reduce"}))}return _;case"video":return vi({key:o,value:n,valueSpec:h.source_video,style:m,styleSpec:h});case"image":return vi({key:o,value:n,valueSpec:h.source_image,style:m,styleSpec:h});case"canvas":return[new He(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fs({key:`${o}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:h})}}function qs(a){const n=a.value,o=a.styleSpec,h=o.light,m=a.style;let y=[];const _=Xt(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new He("light",n,`object expected, ${_} found`)]),y;for(const w in n){const S=w.match(/^(.*)-transition$/);y=y.concat(S&&h[S[1]]&&h[S[1]].transition?Wr({key:w,value:n[w],valueSpec:o.transition,style:m,styleSpec:o}):h[w]?Wr({key:w,value:n[w],valueSpec:h[w],style:m,styleSpec:o}):[new He(w,n[w],`unknown property "${w}"`)])}return y}function qr(a){const n=a.value,o=a.styleSpec,h=o.terrain,m=a.style;let y=[];const _=Xt(n);if(n===void 0)return y;if(_!=="object")return y=y.concat([new He("terrain",n,`object expected, ${_} found`)]),y;for(const w in n)y=y.concat(h[w]?Wr({key:w,value:n[w],valueSpec:h[w],style:m,styleSpec:o}):[new He(w,n[w],`unknown property "${w}"`)]);return y}const Ws={"*":()=>[],array:Dd,boolean:function(a){const n=a.value,o=a.key,h=Xt(n);return h!=="boolean"?[new He(o,n,`boolean expected, ${h} found`)]:[]},number:du,color:function(a){const n=a.key,o=a.value,h=Xt(o);return h!=="string"?[new He(n,o,`color expected, ${h} found`)]:Po(o)===null?[new He(n,o,`color expected, "${o}" found`)]:[]},constants:ja,enum:Fs,filter:js,function:Ld,layer:$d,object:vi,source:Gs,light:qs,terrain:qr,string:No,formatted:function(a){return No(a).length===0?[]:Ha(a)},resolvedImage:function(a){return No(a).length===0?[]:Ha(a)},padding:function(a){const n=a.key,o=a.value;if(Xt(o)==="array"){if(o.length<1||o.length>4)return[new He(n,o,`padding requires 1 to 4 values; ${o.length} values found`)];const h={type:"number"};let m=[];for(let y=0;y<o.length;y++)m=m.concat(Wr({key:`${n}[${y}]`,value:o[y],valueSpec:h}));return m}return du({key:n,value:o,valueSpec:{}})}};function Wr(a){const n=a.value,o=a.valueSpec,h=a.styleSpec;return o.expression&&cn(jt(n))?Ld(a):o.expression&&Os(ii(n))?Ha(a):o.type&&Ws[o.type]?Ws[o.type](a):vi(yi({},a,{valueSpec:o.type?h[o.type]:o}))}function sg(a){const n=a.value,o=a.key,h=No(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new He(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new He(o,n,'"glyphs" url must include a "{range}" token'))),h}function Sa(a,n=Pe){let o=[];return o=o.concat(Wr({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,objectElementValidators:{glyphs:sg,"*":()=>[]}})),a.constants&&(o=o.concat(ja({key:"constants",value:a.constants,style:a,styleSpec:n}))),jd(o)}function jd(a){return[].concat(a).sort((n,o)=>n.line-o.line)}function Qi(a){return function(...n){return jd(a.apply(this,n))}}Sa.source=Qi(Gs),Sa.light=Qi(qs),Sa.terrain=Qi(qr),Sa.layer=Qi($d),Sa.filter=Qi(js),Sa.paintProperty=Qi(Nd),Sa.layoutProperty=Qi(Fd);const Zs=Sa,pu=Zs.light,lg=Zs.paintProperty,cg=Zs.layoutProperty;function Vl(a,n){let o=!1;if(n&&n.length)for(const h of n)a.fire(new To(new Error(h.message))),o=!0;return o}class Hs{constructor(n,o,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(o=_[1])+2*(h=_[2]);for(let S=0;S<this.d*this.d;S++){const P=_[3+S],M=_[3+S+1];m.push(P===M?null:_.subarray(P,M))}const w=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=o+2*h;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=n,this.padding=h,this.scale=o/n,this.uid=0;const y=h/o*n;this.min=-y,this.max=n+y}insert(n,o,h,m,y){this._forEachCell(o,h,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,o,h,m,y,_){this.cells[y].push(_)}query(n,o,h,m,y){const _=this.min,w=this.max;if(n<=_&&o<=_&&w<=h&&w<=m&&!y)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(n,o,h,m,this._queryCell,S,{},y),S}}_queryCell(n,o,h,m,y,_,w,S){const P=this.cells[y];if(P!==null){const M=this.keys,D=this.bboxes;for(let F=0;F<P.length;F++){const U=P[F];if(w[U]===void 0){const j=4*U;(S?S(D[j+0],D[j+1],D[j+2],D[j+3]):n<=D[j+2]&&o<=D[j+3]&&h>=D[j+0]&&m>=D[j+1])?(w[U]=!0,_.push(M[U])):w[U]=!1}}}}_forEachCell(n,o,h,m,y,_,w,S){const P=this._convertToCellCoord(n),M=this._convertToCellCoord(o),D=this._convertToCellCoord(h),F=this._convertToCellCoord(m);for(let U=P;U<=D;U++)for(let j=M;j<=F;j++){const te=this.d*j+U;if((!S||S(this._convertFromCellCoord(U),this._convertFromCellCoord(j),this._convertFromCellCoord(U+1),this._convertFromCellCoord(j+1)))&&y.call(this,n,o,h,m,te,_,w,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,o=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const m=new Int32Array(o+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=o;for(let _=0;_<n.length;_++){const w=n[_];m[3+_]=y,m.set(w,y),y+=w.length}return m[3+n.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+n.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(n,o){const h=n.toArrayBuffer();return o&&o.push(h),{buffer:h}}static deserialize(n){return new Hs(n.buffer)}}const ea={};function it(a,n,o={}){if(ea[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),ea[a]={klass:n,omit:o.omit||[],shallow:o.shallow||[]}}it("Object",Object),it("TransferableGridIndex",Hs),it("Color",q),it("Error",Error),it("AJAXError",Ur),it("ResolvedImage",ue),it("StylePropertyFunction",Fl),it("StyleExpression",Nl,{omit:["_evaluator"]}),it("ZoomDependentExpression",hu),it("ZoomConstantExpression",Ns),it("CompoundExpression",an,{omit:["_evaluate"]});for(const a in Do)Do[a]._classRegistryKey||it(`Expression_${a}`,Do[a]);function Vd(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Xa(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Vd(a)||Wt(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const o=a;return n&&n.push(o.buffer),o}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const o=[];for(const h of a)o.push(Xa(h,n));return o}if(typeof a=="object"){const o=a.constructor,h=o._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!ea[h])throw new Error(`${h} is not registered.`);const m=o.serialize?o.serialize(a,n):{};if(o.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in a){if(!a.hasOwnProperty(y)||ea[h].omit.indexOf(y)>=0)continue;const _=a[y];m[y]=ea[h].shallow.indexOf(y)>=0?_:Xa(_,n)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof a)}function Ta(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Vd(a)||Wt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Ta);if(typeof a=="object"){const n=a.$name||"Object";if(!ea[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:o}=ea[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(a);const h=Object.create(o.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const y=a[m];h[m]=ea[n].shallow.indexOf(m)>=0?y:Ta(y)}return h}throw new Error("can't deserialize object of type "+typeof a)}class mu{constructor(){this.first=!0}update(n,o){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=o),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ye={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Gl(a){for(const n of a)if(yu(n.charCodeAt(0)))return!0;return!1}function ug(a){for(const n of a)if(!gu(n.charCodeAt(0)))return!1;return!0}function gu(a){return!(Ye.Arabic(a)||Ye["Arabic Supplement"](a)||Ye["Arabic Extended-A"](a)||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a))}function yu(a){return!(a!==746&&a!==747&&(a<4352||!(Ye["Bopomofo Extended"](a)||Ye.Bopomofo(a)||Ye["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ye["CJK Compatibility Ideographs"](a)||Ye["CJK Compatibility"](a)||Ye["CJK Radicals Supplement"](a)||Ye["CJK Strokes"](a)||!(!Ye["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ye["CJK Unified Ideographs Extension A"](a)||Ye["CJK Unified Ideographs"](a)||Ye["Enclosed CJK Letters and Months"](a)||Ye["Hangul Compatibility Jamo"](a)||Ye["Hangul Jamo Extended-A"](a)||Ye["Hangul Jamo Extended-B"](a)||Ye["Hangul Jamo"](a)||Ye["Hangul Syllables"](a)||Ye.Hiragana(a)||Ye["Ideographic Description Characters"](a)||Ye.Kanbun(a)||Ye["Kangxi Radicals"](a)||Ye["Katakana Phonetic Extensions"](a)||Ye.Katakana(a)&&a!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ye["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](a)||Ye["Unified Canadian Aboriginal Syllabics Extended"](a)||Ye["Vertical Forms"](a)||Ye["Yijing Hexagram Symbols"](a)||Ye["Yi Syllables"](a)||Ye["Yi Radicals"](a))))}function Gd(a){return!(yu(a)||function(n){return!!(Ye["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ye["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ye["Letterlike Symbols"](n)||Ye["Number Forms"](n)||Ye["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ye["Control Pictures"](n)&&n!==9251||Ye["Optical Character Recognition"](n)||Ye["Enclosed Alphanumerics"](n)||Ye["Geometric Shapes"](n)||Ye["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ye["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ye["CJK Symbols and Punctuation"](n)||Ye.Katakana(n)||Ye["Private Use Area"](n)||Ye["CJK Compatibility Forms"](n)||Ye["Small Form Variants"](n)||Ye["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function qd(a){return a>=1424&&a<=2303||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a)}function hg(a,n){return!(!n&&qd(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ye.Khmer(a))}function Wd(a){for(const n of a)if(qd(n.charCodeAt(0)))return!0;return!1}const vu="deferred",_u="loading",xu="loaded";let bu=null,Mr="unavailable",ka=null;const Zd=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Mr="error"),bu&&bu(a)};function Fo(){wu.fire(new Yi("pluginStateChange",{pluginStatus:Mr,pluginURL:ka}))}const wu=new Ki,Xs=function(){return Mr},Hd=function(){if(Mr!==vu||!ka)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mr=_u,Fo(),ka&&So({url:ka},a=>{a?Zd(a):(Mr=xu,Fo())})},ai={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Mr===xu||ai.applyArabicShaping!=null,isLoading:()=>Mr===_u,setState(a){if(!De())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Mr=a.pluginStatus,ka=a.pluginURL},isParsed(){if(!De())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ai.applyArabicShaping!=null&&ai.processBidirectionalText!=null&&ai.processStyledBidirectionalText!=null},getPluginURL(){if(!De())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ka}};class gn{constructor(n,o){this.zoom=n,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new mu,this.transition={})}isSupportedScript(n){return function(o,h){for(const m of o)if(!hg(m.charCodeAt(0),h))return!1;return!0}(n,ai.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,o=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*o}}}class Ys{constructor(n,o){this.property=n,this.value=o,this.expression=function(h,m){if(cn(h))return new Fl(h,m);if(Os(h)){const y=zd(h,m);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}{let y=h;return m.type==="color"&&typeof h=="string"?y=q.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(y=re.parse(h)),{kind:"constant",evaluate:()=>y}}}(o===void 0?n.specification.default:o,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,o,h){return this.property.possiblyEvaluate(this,n,o,h)}}class ql{constructor(n){this.property=n,this.value=new Ys(n,void 0)}transitioned(n,o){return new Yd(this.property,this.value,o,ie({},n.transition,this.transition),n.now)}untransitioned(){return new Yd(this.property,this.value,null,{},0)}}class Xd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return H(this._values[n].value.value)}setValue(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ql(this._values[n].property)),this._values[n].value=new Ys(this._values[n].property,o===null?void 0:H(o))}getTransition(n){return H(this._values[n].transition)}setTransition(n,o){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ql(this._values[n].property)),this._values[n].transition=H(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const h=this.getValue(o);h!==void 0&&(n[o]=h);const m=this.getTransition(o);m!==void 0&&(n[`${o}-transition`]=m)}return n}transitioned(n,o){const h=new Kd(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,o._values[m]);return h}untransitioned(){const n=new Kd(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class Yd{constructor(n,o,h,m,y){this.property=n,this.value=o,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,o,h){const m=n.now||0,y=this.value.possiblyEvaluate(n,o,h),_=this.prior;if(_){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return _.possiblyEvaluate(n,o,h);{const w=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,o,h),y,function(S){if(S<=0)return 0;if(S>=1)return 1;const P=S*S,M=P*S;return 4*(S<.5?M:3*(S-P)+M-.75)}(w))}}return y}}class Kd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,h){const m=new Ks(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(n,o,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class dg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return H(this._values[n].value)}setValue(n,o){this._values[n]=new Ys(this._values[n].property,o===null?void 0:H(o))}serialize(){const n={};for(const o of Object.keys(this._values)){const h=this.getValue(o);h!==void 0&&(n[o]=h)}return n}possiblyEvaluate(n,o,h){const m=new Ks(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(n,o,h);return m}}class Ri{constructor(n,o,h){this.property=n,this.value=o,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,h,m){return this.property.evaluate(this.value,this.parameters,n,o,h,m)}}class Ks{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class dt{constructor(n){this.specification=n}possiblyEvaluate(n,o){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(o)}interpolate(n,o,h){const m=zs[this.specification.type];return m?m(n,o,h):n}}class wt{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,h,m){return new Ri(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},h,m)}:n.expression,o)}interpolate(n,o,h){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new Ri(this,{kind:"constant",value:void 0},n.parameters);const m=zs[this.specification.type];return m?new Ri(this,{kind:"constant",value:m(n.value.value,o.value.value,h)},n.parameters):n}evaluate(n,o,h,m,y,_){return n.kind==="constant"?n.value:n.evaluate(o,h,m,y,_)}}class $o extends wt{possiblyEvaluate(n,o,h,m){if(n.value===void 0)return new Ri(this,{kind:"constant",value:void 0},o);if(n.expression.kind==="constant"){const y=n.expression.evaluate(o,null,{},h,m),_=n.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,w=this._calculate(_,_,_,o);return new Ri(this,{kind:"constant",value:w},o)}if(n.expression.kind==="camera"){const y=this._calculate(n.expression.evaluate({zoom:o.zoom-1}),n.expression.evaluate({zoom:o.zoom}),n.expression.evaluate({zoom:o.zoom+1}),o);return new Ri(this,{kind:"constant",value:y},o)}return new Ri(this,n.expression,o)}evaluate(n,o,h,m,y,_){if(n.kind==="source"){const w=n.evaluate(o,h,m,y,_);return this._calculate(w,w,w,o)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(o.zoom)-1},h,m),n.evaluate({zoom:Math.floor(o.zoom)},h,m),n.evaluate({zoom:Math.floor(o.zoom)+1},h,m),o):n.value}_calculate(n,o,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:h,to:o}}interpolate(n){return n}}class Eu{constructor(n){this.specification=n}possiblyEvaluate(n,o,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const y=n.expression.evaluate(o,null,{},h,m);return this._calculate(y,y,y,o)}return this._calculate(n.expression.evaluate(new gn(Math.floor(o.zoom-1),o)),n.expression.evaluate(new gn(Math.floor(o.zoom),o)),n.expression.evaluate(new gn(Math.floor(o.zoom+1),o)),o)}}_calculate(n,o,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:o}:{from:h,to:o}}interpolate(n){return n}}class Ca{constructor(n){this.specification=n}possiblyEvaluate(n,o,h,m){return!!n.expression.evaluate(o,null,{},h,m)}interpolate(){return!1}}class ar{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in n){const h=n[o];h.specification.overridable&&this.overridableProperties.push(o);const m=this.defaultPropertyValues[o]=new Ys(h,void 0),y=this.defaultTransitionablePropertyValues[o]=new ql(h);this.defaultTransitioningPropertyValues[o]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=m.possiblyEvaluate({})}}}it("DataDrivenProperty",wt),it("DataConstantProperty",dt),it("CrossFadedDataDrivenProperty",$o),it("CrossFadedProperty",Eu),it("ColorRampProperty",Ca);const Pa="-transition";class Oi extends Ki{constructor(n,o){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),o.layout&&(this._unevaluatedLayout=new dg(o.layout)),o.paint)){this._transitionablePaint=new Xd(o.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ks(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,o,h={}){o!=null&&this._validate(cg,`layers.${this.id}.layout.${n}`,n,o,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return n.endsWith(Pa)?this._transitionablePaint.getTransition(n.slice(0,-Pa.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,h={}){if(o!=null&&this._validate(lg,`layers.${this.id}.paint.${n}`,n,o,h))return!1;if(n.endsWith(Pa))return this._transitionablePaint.setTransition(n.slice(0,-Pa.length),o||void 0),!1;{const m=this._transitionablePaint._values[n],y=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),w=m.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const S=this._transitionablePaint._values[n].value;return S.isDataDriven()||_||y||this._handleOverridablePaintPropertyUpdate(n,w,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,o,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),V(n,(o,h)=>!(o===void 0||h==="layout"&&!Object.keys(o).length||h==="paint"&&!Object.keys(o).length))}_validate(n,o,h,m,y={}){return(!y||y.validate!==!1)&&Vl(this,n.call(Zs,{key:o,layerType:this.type,objectKey:h,value:m,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof Ri&&hn(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Jd={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ia{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Bn(a,n=1){let o=0,h=0;return{members:a.map(m=>{const y=Jd[m.type].BYTES_PER_ELEMENT,_=o=Su(o,Math.max(n,y)),w=m.components||1;return h=Math.max(h,y),o+=y*w,{name:m.name,type:m.type,components:w,offset:_}}),size:Su(o,Math.max(h,n)),alignment:n}}function Su(a,n){return Math.ceil(a/n)*n}class Ya extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const h=this.length;return this.resize(h+1),this.emplace(h,n,o)}emplace(n,o,h){const m=2*n;return this.int16[m+0]=o,this.int16[m+1]=h,n}}Ya.prototype.bytesPerElement=4,it("StructArrayLayout2i4",Ya);class f extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,h,m)}emplace(n,o,h,m,y){const _=4*n;return this.int16[_+0]=o,this.int16[_+1]=h,this.int16[_+2]=m,this.int16[_+3]=y,n}}f.prototype.bytesPerElement=8,it("StructArrayLayout4i8",f);class r extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,h,m,y,_)}emplace(n,o,h,m,y,_,w){const S=6*n;return this.int16[S+0]=o,this.int16[S+1]=h,this.int16[S+2]=m,this.int16[S+3]=y,this.int16[S+4]=_,this.int16[S+5]=w,n}}r.prototype.bytesPerElement=12,it("StructArrayLayout2i4i12",r);class l extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,h,m,y,_)}emplace(n,o,h,m,y,_,w){const S=4*n,P=8*n;return this.int16[S+0]=o,this.int16[S+1]=h,this.uint8[P+4]=m,this.uint8[P+5]=y,this.uint8[P+6]=_,this.uint8[P+7]=w,n}}l.prototype.bytesPerElement=8,it("StructArrayLayout2i4ub8",l);class d extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const h=this.length;return this.resize(h+1),this.emplace(h,n,o)}emplace(n,o,h){const m=2*n;return this.float32[m+0]=o,this.float32[m+1]=h,n}}d.prototype.bytesPerElement=8,it("StructArrayLayout2f8",d);class g extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_,w,S,P,M){const D=this.length;return this.resize(D+1),this.emplace(D,n,o,h,m,y,_,w,S,P,M)}emplace(n,o,h,m,y,_,w,S,P,M,D){const F=10*n;return this.uint16[F+0]=o,this.uint16[F+1]=h,this.uint16[F+2]=m,this.uint16[F+3]=y,this.uint16[F+4]=_,this.uint16[F+5]=w,this.uint16[F+6]=S,this.uint16[F+7]=P,this.uint16[F+8]=M,this.uint16[F+9]=D,n}}g.prototype.bytesPerElement=20,it("StructArrayLayout10ui20",g);class v extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_,w,S,P,M,D,F){const U=this.length;return this.resize(U+1),this.emplace(U,n,o,h,m,y,_,w,S,P,M,D,F)}emplace(n,o,h,m,y,_,w,S,P,M,D,F,U){const j=12*n;return this.int16[j+0]=o,this.int16[j+1]=h,this.int16[j+2]=m,this.int16[j+3]=y,this.uint16[j+4]=_,this.uint16[j+5]=w,this.uint16[j+6]=S,this.uint16[j+7]=P,this.int16[j+8]=M,this.int16[j+9]=D,this.int16[j+10]=F,this.int16[j+11]=U,n}}v.prototype.bytesPerElement=24,it("StructArrayLayout4i4ui4i24",v);class b extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,h)}emplace(n,o,h,m){const y=3*n;return this.float32[y+0]=o,this.float32[y+1]=h,this.float32[y+2]=m,n}}b.prototype.bytesPerElement=12,it("StructArrayLayout3f12",b);class T extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}T.prototype.bytesPerElement=4,it("StructArrayLayout1ul4",T);class k extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_,w,S,P){const M=this.length;return this.resize(M+1),this.emplace(M,n,o,h,m,y,_,w,S,P)}emplace(n,o,h,m,y,_,w,S,P,M){const D=10*n,F=5*n;return this.int16[D+0]=o,this.int16[D+1]=h,this.int16[D+2]=m,this.int16[D+3]=y,this.int16[D+4]=_,this.int16[D+5]=w,this.uint32[F+3]=S,this.uint16[D+8]=P,this.uint16[D+9]=M,n}}k.prototype.bytesPerElement=20,it("StructArrayLayout6i1ul2ui20",k);class I extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_){const w=this.length;return this.resize(w+1),this.emplace(w,n,o,h,m,y,_)}emplace(n,o,h,m,y,_,w){const S=6*n;return this.int16[S+0]=o,this.int16[S+1]=h,this.int16[S+2]=m,this.int16[S+3]=y,this.int16[S+4]=_,this.int16[S+5]=w,n}}I.prototype.bytesPerElement=12,it("StructArrayLayout2i2i2i12",I);class z extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y){const _=this.length;return this.resize(_+1),this.emplace(_,n,o,h,m,y)}emplace(n,o,h,m,y,_){const w=4*n,S=8*n;return this.float32[w+0]=o,this.float32[w+1]=h,this.float32[w+2]=m,this.int16[S+6]=y,this.int16[S+7]=_,n}}z.prototype.bytesPerElement=16,it("StructArrayLayout2f1f2i16",z);class N extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,h,m)}emplace(n,o,h,m,y){const _=12*n,w=3*n;return this.uint8[_+0]=o,this.uint8[_+1]=h,this.float32[w+1]=m,this.float32[w+2]=y,n}}N.prototype.bytesPerElement=12,it("StructArrayLayout2ub2f12",N);class $ extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,h)}emplace(n,o,h,m){const y=3*n;return this.uint16[y+0]=o,this.uint16[y+1]=h,this.uint16[y+2]=m,n}}$.prototype.bytesPerElement=6,it("StructArrayLayout3ui6",$);class K extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_,w,S,P,M,D,F,U,j,te,ee,fe){const _e=this.length;return this.resize(_e+1),this.emplace(_e,n,o,h,m,y,_,w,S,P,M,D,F,U,j,te,ee,fe)}emplace(n,o,h,m,y,_,w,S,P,M,D,F,U,j,te,ee,fe,_e){const de=24*n,ge=12*n,Me=48*n;return this.int16[de+0]=o,this.int16[de+1]=h,this.uint16[de+2]=m,this.uint16[de+3]=y,this.uint32[ge+2]=_,this.uint32[ge+3]=w,this.uint32[ge+4]=S,this.uint16[de+10]=P,this.uint16[de+11]=M,this.uint16[de+12]=D,this.float32[ge+7]=F,this.float32[ge+8]=U,this.uint8[Me+36]=j,this.uint8[Me+37]=te,this.uint8[Me+38]=ee,this.uint32[ge+10]=fe,this.int16[de+22]=_e,n}}K.prototype.bytesPerElement=48,it("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",K);class Z extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,h,m,y,_,w,S,P,M,D,F,U,j,te,ee,fe,_e,de,ge,Me,Ae,nt,ct,Ke,Ze,je,Je){const Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,n,o,h,m,y,_,w,S,P,M,D,F,U,j,te,ee,fe,_e,de,ge,Me,Ae,nt,ct,Ke,Ze,je,Je)}emplace(n,o,h,m,y,_,w,S,P,M,D,F,U,j,te,ee,fe,_e,de,ge,Me,Ae,nt,ct,Ke,Ze,je,Je,Xe){const Ne=34*n,yt=17*n;return this.int16[Ne+0]=o,this.int16[Ne+1]=h,this.int16[Ne+2]=m,this.int16[Ne+3]=y,this.int16[Ne+4]=_,this.int16[Ne+5]=w,this.int16[Ne+6]=S,this.int16[Ne+7]=P,this.uint16[Ne+8]=M,this.uint16[Ne+9]=D,this.uint16[Ne+10]=F,this.uint16[Ne+11]=U,this.uint16[Ne+12]=j,this.uint16[Ne+13]=te,this.uint16[Ne+14]=ee,this.uint16[Ne+15]=fe,this.uint16[Ne+16]=_e,this.uint16[Ne+17]=de,this.uint16[Ne+18]=ge,this.uint16[Ne+19]=Me,this.uint16[Ne+20]=Ae,this.uint16[Ne+21]=nt,this.uint16[Ne+22]=ct,this.uint32[yt+12]=Ke,this.float32[yt+13]=Ze,this.float32[yt+14]=je,this.float32[yt+15]=Je,this.float32[yt+16]=Xe,n}}Z.prototype.bytesPerElement=68,it("StructArrayLayout8i15ui1ul4f68",Z);class X extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}X.prototype.bytesPerElement=4,it("StructArrayLayout1f4",X);class se extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,h)}emplace(n,o,h,m){const y=3*n;return this.int16[y+0]=o,this.int16[y+1]=h,this.int16[y+2]=m,n}}se.prototype.bytesPerElement=6,it("StructArrayLayout3i6",se);class he extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,h)}emplace(n,o,h,m){const y=4*n;return this.uint32[2*n+0]=o,this.uint16[y+2]=h,this.uint16[y+3]=m,n}}he.prototype.bytesPerElement=8,it("StructArrayLayout1ul2ui8",he);class pe extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const h=this.length;return this.resize(h+1),this.emplace(h,n,o)}emplace(n,o,h){const m=2*n;return this.uint16[m+0]=o,this.uint16[m+1]=h,n}}pe.prototype.bytesPerElement=4,it("StructArrayLayout2ui4",pe);class J extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}J.prototype.bytesPerElement=2,it("StructArrayLayout1ui2",J);class ve extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,h,m)}emplace(n,o,h,m,y){const _=4*n;return this.float32[_+0]=o,this.float32[_+1]=h,this.float32[_+2]=m,this.float32[_+3]=y,n}}ve.prototype.bytesPerElement=16,it("StructArrayLayout4f16",ve);class me extends Ia{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new $e(this.anchorPointX,this.anchorPointY)}}me.prototype.size=20;class ke extends k{get(n){return new me(this,n)}}it("CollisionBoxArray",ke);class Ce extends Ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ce.prototype.size=48;class Be extends K{get(n){return new Ce(this,n)}}it("PlacedSymbolArray",Be);class Te extends Ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Te.prototype.size=68;class et extends Z{get(n){return new Te(this,n)}}it("SymbolInstanceArray",et);class We extends X{getoffsetX(n){return this.float32[1*n+0]}}it("GlyphOffsetArray",We);class tt extends se{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}it("SymbolLineVertexArray",tt);class At extends Ia{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}At.prototype.size=8;class Rt extends he{get(n){return new At(this,n)}}it("FeatureIndexArray",Rt);class gt extends Ya{}class Qt extends Ya{}class en extends Ya{}class $t extends r{}class qt extends l{}class rn extends d{}class Kn extends g{}class Bi extends v{}class _i extends b{}class Ni extends T{}class Aa extends I{}class oi extends N{}class zr extends ${}class ta extends pe{}const Wl=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gn}=Wl;class Bt{constructor(n=[]){this.segments=n}prepareSegment(n,o,h,m){let y=this.segments[this.segments.length-1];return n>Bt.MAX_VERTEX_ARRAY_LENGTH&&xe(`Max vertices per segment is ${Bt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!y||y.vertexLength+n>Bt.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:o.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,h,m){return new Bt([{vertexOffset:n,primitiveOffset:o,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Kt(a,n){return 256*(a=R(Math.floor(a),0,255))+R(Math.floor(n),0,255)}Bt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,it("SegmentVector",Bt);const Jn=Bn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qn={exports:{}},yn={exports:{}};yn.exports=function(a,n){var o,h,m,y,_,w,S,P;for(h=a.length-(o=3&a.length),m=n,_=3432918353,w=461845907,P=0;P<h;)S=255&a.charCodeAt(P)|(255&a.charCodeAt(++P))<<8|(255&a.charCodeAt(++P))<<16|(255&a.charCodeAt(++P))<<24,++P,m=27492+(65535&(y=5*(65535&(m=(m^=S=(65535&(S=(S=(65535&S)*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(S=0,o){case 3:S^=(255&a.charCodeAt(P+2))<<16;case 2:S^=(255&a.charCodeAt(P+1))<<8;case 1:m^=S=(65535&(S=(S=(65535&(S^=255&a.charCodeAt(P)))*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var si={exports:{}};si.exports=function(a,n){for(var o,h=a.length,m=n^h,y=0;h>=4;)o=1540483477*(65535&(o=255&a.charCodeAt(y)|(255&a.charCodeAt(++y))<<8|(255&a.charCodeAt(++y))<<16|(255&a.charCodeAt(++y))<<24))+((1540483477*(o>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:m^=(255&a.charCodeAt(y+2))<<16;case 2:m^=(255&a.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Ka=yn.exports,Tu=si.exports;Qn.exports=Ka,Qn.exports.murmur3=Ka,Qn.exports.murmur2=Tu;class Uo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,h,m){this.ids.push(Qd(n)),this.positions.push(o,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Qd(n);let h=0,m=this.ids.length-1;for(;h<m;){const _=h+m>>1;this.ids[_]>=o?m=_:h=_+1}const y=[];for(;this.ids[h]===o;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(n,o){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return ku(h,m,0,h.length-1),o&&o.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const o=new Uo;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function Qd(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Qn.exports(String(a))}function ku(a,n,o,h){for(;o<h;){const m=a[o+h>>1];let y=o-1,_=h+1;for(;;){do y++;while(a[y]<m);do _--;while(a[_]>m);if(y>=_)break;Ma(a,y,_),Ma(n,3*y,3*_),Ma(n,3*y+1,3*_+1),Ma(n,3*y+2,3*_+2)}_-o<h-_?(ku(a,n,o,_),o=_+1):(ku(a,n,_+1,h),h=_)}}function Ma(a,n,o){const h=a[n];a[n]=a[o],a[o]=h}it("FeaturePositionMap",Uo);class Ja{constructor(n,o){this.gl=n.gl,this.location=o}}class Qa extends Ja{constructor(n,o){super(n,o),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Zl extends Ja{constructor(n,o){super(n,o),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class N0 extends Ja{constructor(n,o){super(n,o),this.current=q.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const ZT=new Float32Array(16);function fg(a){return[Kt(255*a.r,255*a.g),Kt(255*a.b,255*a.a)]}class Cu{constructor(n,o,h){this.value=n,this.uniformNames=o.map(m=>`u_${m}`),this.type=h}setUniform(n,o,h){n.set(h.constantOr(this.value))}getBinding(n,o,h){return this.type==="color"?new N0(n,o):new Qa(n,o)}}class Hl{constructor(n,o){this.uniformNames=o.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=n.tlbr}setUniform(n,o,h,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&n.set(y)}getBinding(n,o,h){return h.substr(0,9)==="u_pattern"?new Zl(n,o):new Qa(n,o)}}class eo{constructor(n,o,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,o,h,m,y){const _=this.paintVertexArray.length,w=this.expression.evaluate(new gn(0),o,{},m,[],y);this.paintVertexArray.resize(n),this._setPaintValue(_,n,w)}updatePaintArray(n,o,h,m){const y=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,o,y)}_setPaintValue(n,o,h){if(this.type==="color"){const m=fg(h);for(let y=n;y<o;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class na{constructor(n,o,h,m,y,_){this.expression=n,this.uniformNames=o.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,o,h,m,y){const _=this.expression.evaluate(new gn(this.zoom),o,{},m,[],y),w=this.expression.evaluate(new gn(this.zoom+1),o,{},m,[],y),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,_,w)}updatePaintArray(n,o,h,m){const y=this.expression.evaluate({zoom:this.zoom},h,m),_=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,o,y,_)}_setPaintValue(n,o,h,m){if(this.type==="color"){const y=fg(h),_=fg(m);for(let w=n;w<o;w++)this.paintVertexArray.emplace(w,y[0],y[1],_[0],_[1])}else{for(let y=n;y<o;y++)this.paintVertexArray.emplace(y,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o){const h=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,m=R(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,o,h){return new Qa(n,o)}}class jo{constructor(n,o,h,m,y,_){this.expression=n,this.type=o,this.useIntegerZoom=h,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(n,o,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,o.patterns&&o.patterns[this.layerId],h)}updatePaintArray(n,o,h,m,y){this._setPaintValues(n,o,h.patterns&&h.patterns[this.layerId],y)}_setPaintValues(n,o,h,m){if(!m||!h)return;const{min:y,mid:_,max:w}=h,S=m[y],P=m[_],M=m[w];if(S&&P&&M)for(let D=n;D<o;D++)this.zoomInPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],P.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],P.pixelRatio,M.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Jn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Jn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class F0{constructor(n,o,h){this.binders={},this._buffers=[];const m=[];for(const y in n.paint._values){if(!h(y))continue;const _=n.paint.get(y);if(!(_ instanceof Ri&&hn(_.property.specification)))continue;const w=HT(y,n.type),S=_.value,P=_.property.specification.type,M=_.property.useIntegerZoom,D=_.property.specification["property-type"],F=D==="cross-faded"||D==="cross-faded-data-driven";if(S.kind==="constant")this.binders[y]=F?new Hl(S.value,w):new Cu(S.value,w,P),m.push(`/u_${y}`);else if(S.kind==="source"||F){const U=$0(y,P,"source");this.binders[y]=F?new jo(S,P,M,o,U,n.id):new eo(S,w,P,U),m.push(`/a_${y}`)}else{const U=$0(y,P,"composite");this.binders[y]=new na(S,w,P,M,o,U),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof eo||o instanceof na?o.maxValue:0}populatePaintArrays(n,o,h,m,y){for(const _ in this.binders){const w=this.binders[_];(w instanceof eo||w instanceof na||w instanceof jo)&&w.populatePaintArray(n,o,h,m,y)}}setConstantPatternPositions(n,o){for(const h in this.binders){const m=this.binders[h];m instanceof Hl&&m.setConstantPatternPositions(n,o)}}updatePaintArrays(n,o,h,m,y){let _=!1;for(const w in n){const S=o.getPositions(w);for(const P of S){const M=h.feature(P.index);for(const D in this.binders){const F=this.binders[D];if((F instanceof eo||F instanceof na||F instanceof jo)&&F.expression.isStateDependent===!0){const U=m.paint.get(D);F.expression=U.value,F.updatePaintArray(P.start,P.end,M,n[w],y),_=!0}}}}return _}defines(){const n=[];for(const o in this.binders){const h=this.binders[o];(h instanceof Cu||h instanceof Hl)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const h=this.binders[o];if(h instanceof eo||h instanceof na)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof jo)for(let m=0;m<Jn.members.length;m++)n.push(Jn.members[m].name)}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const h=this.binders[o];if(h instanceof Cu||h instanceof Hl||h instanceof na)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,o){const h=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof Cu||y instanceof Hl||y instanceof na){for(const _ of y.uniformNames)if(o[_]){const w=y.getBinding(n,o[_],_);h.push({name:_,property:m,binding:w})}}}return h}setUniforms(n,o,h,m){for(const{name:y,property:_,binding:w}of o)this.binders[_].setUniform(w,m,h.get(_),y)}updatePaintBuffers(n){this._buffers=[];for(const o in this.binders){const h=this.binders[o];if(n&&h instanceof jo){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof eo||h instanceof na)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const o in this.binders){const h=this.binders[o];(h instanceof eo||h instanceof na||h instanceof jo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof eo||o instanceof na||o instanceof jo)&&o.destroy()}}}class Js{constructor(n,o,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new F0(m,o,h);this.needsUpload=!1,this._featureMap=new Uo,this._bufferOffset=0}populatePaintArrays(n,o,h,m,y,_){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,o,m,y,_);o.id!==void 0&&this._featureMap.add(o.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,h,m){for(const y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,o,y,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function HT(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function $0(a,n,o){const h={color:{source:d,composite:ve},number:{source:X,composite:d}},m=function(y){return{"line-pattern":{source:Kn,composite:Kn},"fill-pattern":{source:Kn,composite:Kn},"fill-extrusion-pattern":{source:Kn,composite:Kn}}[y]}(a);return m&&m[o]||h[n][o]}it("ConstantBinder",Cu),it("CrossFadedConstantBinder",Hl),it("SourceExpressionBinder",eo),it("CrossFadedCompositeBinder",jo),it("CompositeExpressionBinder",na),it("ProgramConfiguration",F0,{omit:["_buffers"]}),it("ProgramConfigurationSet",Js);var qn=8192;const pg=Math.pow(2,14)-1,U0=-pg-1;function Qs(a){const n=qn/a.extent,o=a.loadGeometry();for(let h=0;h<o.length;h++){const m=o[h];for(let y=0;y<m.length;y++){const _=m[y],w=Math.round(_.x*n),S=Math.round(_.y*n);_.x=R(w,U0,pg),_.y=R(S,U0,pg),(w<_.x||w>_.x+1||S<_.y||S>_.y+1)&&xe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function el(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Qs(a):[]}}function ef(a,n,o,h,m){a.emplaceBack(2*n+(h+1)/2,2*o+(m+1)/2)}class mg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Qt,this.indexArray=new zr,this.segments=new Bt,this.programConfigurations=new Js(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,h){const m=this.layers[0],y=[];let _=null,w=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),w=!_.isConstant());for(const{feature:S,id:P,index:M,sourceLayerIndex:D}of n){const F=this.layers[0]._featureFilter.needGeometry,U=el(S,F);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),U,h))continue;const j=w?_.evaluate(U,{},h):void 0,te={id:P,properties:S.properties,type:S.type,sourceLayerIndex:D,index:M,geometry:F?U.geometry:Qs(S),patterns:{},sortKey:j};y.push(te)}w&&y.sort((S,P)=>S.sortKey-P.sortKey);for(const S of y){const{geometry:P,index:M,sourceLayerIndex:D}=S,F=n[M].feature;this.addFeature(S,P,M,h),o.featureIndex.insert(F,P,M,D,this.index)}}update(n,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,h,m){for(const y of o)for(const _ of y){const w=_.x,S=_.y;if(w<0||w>=qn||S<0||S>=qn)continue;const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),M=P.vertexLength;ef(this.layoutVertexArray,w,S,-1,-1),ef(this.layoutVertexArray,w,S,1,-1),ef(this.layoutVertexArray,w,S,1,1),ef(this.layoutVertexArray,w,S,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function j0(a,n){for(let o=0;o<a.length;o++)if(Xl(n,a[o]))return!0;for(let o=0;o<n.length;o++)if(Xl(a,n[o]))return!0;return!!gg(a,n)}function XT(a,n,o){return!!Xl(a,n)||!!yg(n,a,o)}function V0(a,n){if(a.length===1)return q0(n,a[0]);for(let o=0;o<n.length;o++){const h=n[o];for(let m=0;m<h.length;m++)if(Xl(a,h[m]))return!0}for(let o=0;o<a.length;o++)if(q0(n,a[o]))return!0;for(let o=0;o<n.length;o++)if(gg(a,n[o]))return!0;return!1}function YT(a,n,o){if(a.length>1){if(gg(a,n))return!0;for(let h=0;h<n.length;h++)if(yg(n[h],a,o))return!0}for(let h=0;h<a.length;h++)if(yg(a[h],n,o))return!0;return!1}function gg(a,n){if(a.length===0||n.length===0)return!1;for(let o=0;o<a.length-1;o++){const h=a[o],m=a[o+1];for(let y=0;y<n.length-1;y++)if(KT(h,m,n[y],n[y+1]))return!0}return!1}function KT(a,n,o,h){return Ee(a,o,h)!==Ee(n,o,h)&&Ee(a,n,o)!==Ee(a,n,h)}function yg(a,n,o){const h=o*o;if(n.length===1)return a.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(G0(a,n[m-1],n[m])<h)return!0;return!1}function G0(a,n,o){const h=n.distSqr(o);if(h===0)return a.distSqr(n);const m=((a.x-n.x)*(o.x-n.x)+(a.y-n.y)*(o.y-n.y))/h;return a.distSqr(m<0?n:m>1?o:o.sub(n)._mult(m)._add(n))}function q0(a,n){let o,h,m,y=!1;for(let _=0;_<a.length;_++){o=a[_];for(let w=0,S=o.length-1;w<o.length;S=w++)h=o[w],m=o[S],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(y=!y)}return y}function Xl(a,n){let o=!1;for(let h=0,m=a.length-1;h<a.length;m=h++){const y=a[h],_=a[m];y.y>n.y!=_.y>n.y&&n.x<(_.x-y.x)*(n.y-y.y)/(_.y-y.y)+y.x&&(o=!o)}return o}function JT(a,n,o){const h=o[0],m=o[2];if(a.x<h.x&&n.x<h.x||a.x>m.x&&n.x>m.x||a.y<h.y&&n.y<h.y||a.y>m.y&&n.y>m.y)return!1;const y=Ee(a,n,o[0]);return y!==Ee(a,n,o[1])||y!==Ee(a,n,o[2])||y!==Ee(a,n,o[3])}function Pu(a,n,o){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:o.programConfigurations.get(n.id).getMaxValue(a)}function tf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function nf(a,n,o,h,m){if(!n[0]&&!n[1])return a;const y=$e.convert(n)._mult(m);o==="viewport"&&y._rotate(-h);const _=[];for(let w=0;w<a.length;w++)_.push(a[w].sub(y));return _}it("CircleBucket",mg,{omit:["layers"]});const QT=new ar({"circle-sort-key":new wt(Pe.layout_circle["circle-sort-key"])});var ek={paint:new ar({"circle-radius":new wt(Pe.paint_circle["circle-radius"]),"circle-color":new wt(Pe.paint_circle["circle-color"]),"circle-blur":new wt(Pe.paint_circle["circle-blur"]),"circle-opacity":new wt(Pe.paint_circle["circle-opacity"]),"circle-translate":new dt(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new dt(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dt(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dt(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wt(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wt(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wt(Pe.paint_circle["circle-stroke-opacity"])}),layout:QT},Dr=1e-6,Lr=typeof Float32Array<"u"?Float32Array:Array;function W0(){var a=new Lr(9);return Lr!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function vg(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Z0(a,n,o){var h=n[0],m=n[1],y=n[2],_=n[3],w=n[4],S=n[5],P=n[6],M=n[7],D=n[8],F=n[9],U=n[10],j=n[11],te=n[12],ee=n[13],fe=n[14],_e=n[15],de=o[0],ge=o[1],Me=o[2],Ae=o[3];return a[0]=de*h+ge*w+Me*D+Ae*te,a[1]=de*m+ge*S+Me*F+Ae*ee,a[2]=de*y+ge*P+Me*U+Ae*fe,a[3]=de*_+ge*M+Me*j+Ae*_e,a[4]=(de=o[4])*h+(ge=o[5])*w+(Me=o[6])*D+(Ae=o[7])*te,a[5]=de*m+ge*S+Me*F+Ae*ee,a[6]=de*y+ge*P+Me*U+Ae*fe,a[7]=de*_+ge*M+Me*j+Ae*_e,a[8]=(de=o[8])*h+(ge=o[9])*w+(Me=o[10])*D+(Ae=o[11])*te,a[9]=de*m+ge*S+Me*F+Ae*ee,a[10]=de*y+ge*P+Me*U+Ae*fe,a[11]=de*_+ge*M+Me*j+Ae*_e,a[12]=(de=o[12])*h+(ge=o[13])*w+(Me=o[14])*D+(Ae=o[15])*te,a[13]=de*m+ge*S+Me*F+Ae*ee,a[14]=de*y+ge*P+Me*U+Ae*fe,a[15]=de*_+ge*M+Me*j+Ae*_e,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var Iu,tk=Z0;function H0(){var a=new Lr(3);return Lr!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function X0(a,n,o){var h=new Lr(3);return h[0]=a,h[1]=n,h[2]=o,h}function rf(a,n,o){var h=n[0],m=n[1],y=n[2],_=n[3];return a[0]=o[0]*h+o[4]*m+o[8]*y+o[12]*_,a[1]=o[1]*h+o[5]*m+o[9]*y+o[13]*_,a[2]=o[2]*h+o[6]*m+o[10]*y+o[14]*_,a[3]=o[3]*h+o[7]*m+o[11]*y+o[15]*_,a}function Y0(){var a=new Lr(4);return Lr!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function K0(a,n){const o=rf([],[a.x,a.y,0,1],n);return new $e(o[0]/o[3],o[1]/o[3])}H0(),Iu=new Lr(4),Lr!=Float32Array&&(Iu[0]=0,Iu[1]=0,Iu[2]=0,Iu[3]=0),H0(),X0(1,0,0),X0(0,1,0),Y0(),Y0(),W0(),function(){var a;a=new Lr(2),Lr!=Float32Array&&(a[0]=0,a[1]=0)}();class J0 extends mg{}it("HeatmapBucket",J0,{omit:["layers"]});var nk={paint:new ar({"heatmap-radius":new wt(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wt(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dt(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ca(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dt(Pe.paint_heatmap["heatmap-opacity"])})};function _g(a,{width:n,height:o},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*o*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*o*h}`)}else m=new Uint8Array(n*o*h);return a.width=n,a.height=o,a.data=m,a}function Q0(a,{width:n,height:o},h){if(n===a.width&&o===a.height)return;const m=_g({},{width:n,height:o},h);xg(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,o)},h),a.width=n,a.height=o,a.data=m.data}function xg(a,n,o,h,m,y){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||o.x>a.width-m.width||o.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=a.data,w=n.data;if(_===w)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<m.height;S++){const P=((o.y+S)*a.width+o.x)*y,M=((h.y+S)*n.width+h.x)*y;for(let D=0;D<m.width*y;D++)w[M+D]=_[P+D]}return n}class Au{constructor(n,o){_g(this,n,1,o)}resize(n){Q0(this,n,1)}clone(){return new Au({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,h,m,y){xg(n,o,h,m,y,1)}}class xi{constructor(n,o){_g(this,n,4,o)}resize(n){Q0(this,n,4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new xi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,h,m,y){xg(n,o,h,m,y,4)}}function ex(a){const n={},o=a.resolution||256,h=a.clips?a.clips.length:1,m=a.image||new xi({width:o,height:h});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const y=(_,w,S)=>{n[a.evaluationKey]=S;const P=a.expression.evaluate(n);m.data[_+w+0]=Math.floor(255*P.r/P.a),m.data[_+w+1]=Math.floor(255*P.g/P.a),m.data[_+w+2]=Math.floor(255*P.b/P.a),m.data[_+w+3]=Math.floor(255*P.a)};if(a.clips)for(let _=0,w=0;_<h;++_,w+=4*o)for(let S=0,P=0;S<o;S++,P+=4){const M=S/(o-1),{start:D,end:F}=a.clips[_];y(w,P,D*(1-M)+F*M)}else for(let _=0,w=0;_<o;_++,w+=4)y(0,w,_/(o-1));return m}it("AlphaImage",Au),it("RGBAImage",xi);var rk={paint:new ar({"hillshade-illumination-direction":new dt(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new dt(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dt(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dt(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dt(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dt(Pe.paint_hillshade["hillshade-accent-color"])})};const ik=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:ak}=ik;var af={exports:{}};function of(a,n,o){o=o||2;var h,m,y,_,w,S,P,M=n&&n.length,D=M?n[0]*o:a.length,F=tx(a,0,D,o,!0),U=[];if(!F||F.next===F.prev)return U;if(M&&(F=function(te,ee,fe,_e){var de,ge,Me,Ae=[];for(de=0,ge=ee.length;de<ge;de++)(Me=tx(te,ee[de]*_e,de<ge-1?ee[de+1]*_e:te.length,_e,!1))===Me.next&&(Me.steiner=!0),Ae.push(fk(Me));for(Ae.sort(uk),de=0;de<Ae.length;de++)fe=hk(Ae[de],fe);return fe}(a,n,F,o)),a.length>80*o){h=y=a[0],m=_=a[1];for(var j=o;j<D;j+=o)(w=a[j])<h&&(h=w),(S=a[j+1])<m&&(m=S),w>y&&(y=w),S>_&&(_=S);P=(P=Math.max(y-h,_-m))!==0?32767/P:0}return Mu(F,U,o,h,m,P,0),U}function tx(a,n,o,h,m){var y,_;if(m===Eg(a,n,o,h)>0)for(y=n;y<o;y+=h)_=ix(y,a[y],a[y+1],_);else for(y=o-h;y>=n;y-=h)_=ix(y,a[y],a[y+1],_);return _&&sf(_,_.next)&&(Du(_),_=_.next),_}function tl(a,n){if(!a)return a;n||(n=a);var o,h=a;do if(o=!1,h.steiner||!sf(h,h.next)&&In(h.prev,h,h.next)!==0)h=h.next;else{if(Du(h),(h=n=h.prev)===h.next)break;o=!0}while(o||h!==n);return n}function Mu(a,n,o,h,m,y,_){if(a){!_&&y&&function(M,D,F,U){var j=M;do j.z===0&&(j.z=bg(j.x,j.y,D,F,U)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==M);j.prevZ.nextZ=null,j.prevZ=null,function(te){var ee,fe,_e,de,ge,Me,Ae,nt,ct=1;do{for(fe=te,te=null,ge=null,Me=0;fe;){for(Me++,_e=fe,Ae=0,ee=0;ee<ct&&(Ae++,_e=_e.nextZ);ee++);for(nt=ct;Ae>0||nt>0&&_e;)Ae!==0&&(nt===0||!_e||fe.z<=_e.z)?(de=fe,fe=fe.nextZ,Ae--):(de=_e,_e=_e.nextZ,nt--),ge?ge.nextZ=de:te=de,de.prevZ=ge,ge=de;fe=_e}ge.nextZ=null,ct*=2}while(Me>1)}(j)}(a,h,m,y);for(var w,S,P=a;a.prev!==a.next;)if(w=a.prev,S=a.next,y?sk(a,h,m,y):ok(a))n.push(w.i/o|0),n.push(a.i/o|0),n.push(S.i/o|0),Du(a),a=S.next,P=S.next;else if((a=S)===P){_?_===1?Mu(a=lk(tl(a),n,o),n,o,h,m,y,2):_===2&&ck(a,n,o,h,m,y):Mu(tl(a),n,o,h,m,y,1);break}}}function ok(a){var n=a.prev,o=a,h=a.next;if(In(n,o,h)>=0)return!1;for(var m=n.x,y=o.x,_=h.x,w=n.y,S=o.y,P=h.y,M=m<y?m<_?m:_:y<_?y:_,D=w<S?w<P?w:P:S<P?S:P,F=m>y?m>_?m:_:y>_?y:_,U=w>S?w>P?w:P:S>P?S:P,j=h.next;j!==n;){if(j.x>=M&&j.x<=F&&j.y>=D&&j.y<=U&&Yl(m,w,y,S,_,P,j.x,j.y)&&In(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function sk(a,n,o,h){var m=a.prev,y=a,_=a.next;if(In(m,y,_)>=0)return!1;for(var w=m.x,S=y.x,P=_.x,M=m.y,D=y.y,F=_.y,U=w<S?w<P?w:P:S<P?S:P,j=M<D?M<F?M:F:D<F?D:F,te=w>S?w>P?w:P:S>P?S:P,ee=M>D?M>F?M:F:D>F?D:F,fe=bg(U,j,n,o,h),_e=bg(te,ee,n,o,h),de=a.prevZ,ge=a.nextZ;de&&de.z>=fe&&ge&&ge.z<=_e;){if(de.x>=U&&de.x<=te&&de.y>=j&&de.y<=ee&&de!==m&&de!==_&&Yl(w,M,S,D,P,F,de.x,de.y)&&In(de.prev,de,de.next)>=0||(de=de.prevZ,ge.x>=U&&ge.x<=te&&ge.y>=j&&ge.y<=ee&&ge!==m&&ge!==_&&Yl(w,M,S,D,P,F,ge.x,ge.y)&&In(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;de&&de.z>=fe;){if(de.x>=U&&de.x<=te&&de.y>=j&&de.y<=ee&&de!==m&&de!==_&&Yl(w,M,S,D,P,F,de.x,de.y)&&In(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;ge&&ge.z<=_e;){if(ge.x>=U&&ge.x<=te&&ge.y>=j&&ge.y<=ee&&ge!==m&&ge!==_&&Yl(w,M,S,D,P,F,ge.x,ge.y)&&In(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function lk(a,n,o){var h=a;do{var m=h.prev,y=h.next.next;!sf(m,y)&&nx(m,h,h.next,y)&&zu(m,y)&&zu(y,m)&&(n.push(m.i/o|0),n.push(h.i/o|0),n.push(y.i/o|0),Du(h),Du(h.next),h=a=y),h=h.next}while(h!==a);return tl(h)}function ck(a,n,o,h,m,y){var _=a;do{for(var w=_.next.next;w!==_.prev;){if(_.i!==w.i&&pk(_,w)){var S=rx(_,w);return _=tl(_,_.next),S=tl(S,S.next),Mu(_,n,o,h,m,y,0),void Mu(S,n,o,h,m,y,0)}w=w.next}_=_.next}while(_!==a)}function uk(a,n){return a.x-n.x}function hk(a,n){var o=function(m,y){var _,w=y,S=m.x,P=m.y,M=-1/0;do{if(P<=w.y&&P>=w.next.y&&w.next.y!==w.y){var D=w.x+(P-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(D<=S&&D>M&&(M=D,_=w.x<w.next.x?w:w.next,D===S))return _}w=w.next}while(w!==y);if(!_)return null;var F,U=_,j=_.x,te=_.y,ee=1/0;w=_;do S>=w.x&&w.x>=j&&S!==w.x&&Yl(P<te?S:M,P,j,te,P<te?M:S,P,w.x,w.y)&&(F=Math.abs(P-w.y)/(S-w.x),zu(w,m)&&(F<ee||F===ee&&(w.x>_.x||w.x===_.x&&dk(_,w)))&&(_=w,ee=F)),w=w.next;while(w!==U);return _}(a,n);if(!o)return n;var h=rx(o,a);return tl(h,h.next),tl(o,o.next)}function dk(a,n){return In(a.prev,a,n.prev)<0&&In(n.next,a,a.next)<0}function bg(a,n,o,h,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-o)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function fk(a){var n=a,o=a;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==a);return o}function Yl(a,n,o,h,m,y,_,w){return(m-_)*(n-w)>=(a-_)*(y-w)&&(a-_)*(h-w)>=(o-_)*(n-w)&&(o-_)*(y-w)>=(m-_)*(h-w)}function pk(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(o,h){var m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==h.i&&m.next.i!==h.i&&nx(m,m.next,o,h))return!0;m=m.next}while(m!==o);return!1}(a,n)&&(zu(a,n)&&zu(n,a)&&function(o,h){var m=o,y=!1,_=(o.x+h.x)/2,w=(o.y+h.y)/2;do m.y>w!=m.next.y>w&&m.next.y!==m.y&&_<(m.next.x-m.x)*(w-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==o);return y}(a,n)&&(In(a.prev,a,n.prev)||In(a,n.prev,n))||sf(a,n)&&In(a.prev,a,a.next)>0&&In(n.prev,n,n.next)>0)}function In(a,n,o){return(n.y-a.y)*(o.x-n.x)-(n.x-a.x)*(o.y-n.y)}function sf(a,n){return a.x===n.x&&a.y===n.y}function nx(a,n,o,h){var m=cf(In(a,n,o)),y=cf(In(a,n,h)),_=cf(In(o,h,a)),w=cf(In(o,h,n));return m!==y&&_!==w||!(m!==0||!lf(a,o,n))||!(y!==0||!lf(a,h,n))||!(_!==0||!lf(o,a,h))||!(w!==0||!lf(o,n,h))}function lf(a,n,o){return n.x<=Math.max(a.x,o.x)&&n.x>=Math.min(a.x,o.x)&&n.y<=Math.max(a.y,o.y)&&n.y>=Math.min(a.y,o.y)}function cf(a){return a>0?1:a<0?-1:0}function zu(a,n){return In(a.prev,a,a.next)<0?In(a,n,a.next)>=0&&In(a,a.prev,n)>=0:In(a,n,a.prev)<0||In(a,a.next,n)<0}function rx(a,n){var o=new wg(a.i,a.x,a.y),h=new wg(n.i,n.x,n.y),m=a.next,y=n.prev;return a.next=n,n.prev=a,o.next=m,m.prev=o,h.next=o,o.prev=h,y.next=h,h.prev=y,h}function ix(a,n,o,h){var m=new wg(a,n,o);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Du(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function wg(a,n,o){this.i=a,this.x=n,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Eg(a,n,o,h){for(var m=0,y=n,_=o-h;y<o;y+=h)m+=(a[_]-a[y])*(a[y+1]+a[_+1]),_=y;return m}function mk(a,n,o,h,m){ax(a,n,o||0,h||a.length-1,m||gk)}function ax(a,n,o,h,m){for(;h>o;){if(h-o>600){var y=h-o+1,_=n-o+1,w=Math.log(y),S=.5*Math.exp(2*w/3),P=.5*Math.sqrt(w*S*(y-S)/y)*(_-y/2<0?-1:1);ax(a,n,Math.max(o,Math.floor(n-_*S/y+P)),Math.min(h,Math.floor(n+(y-_)*S/y+P)),m)}var M=a[n],D=o,F=h;for(Lu(a,o,n),m(a[h],M)>0&&Lu(a,o,h);D<F;){for(Lu(a,D,F),D++,F--;m(a[D],M)<0;)D++;for(;m(a[F],M)>0;)F--}m(a[o],M)===0?Lu(a,o,F):Lu(a,++F,h),F<=n&&(o=F+1),n<=F&&(h=F-1)}}function Lu(a,n,o){var h=a[n];a[n]=a[o],a[o]=h}function gk(a,n){return a<n?-1:a>n?1:0}function Sg(a,n){const o=a.length;if(o<=1)return[a];const h=[];let m,y;for(let _=0;_<o;_++){const w=ze(a[_]);w!==0&&(a[_].area=Math.abs(w),y===void 0&&(y=w<0),y===w<0?(m&&h.push(m),m=[a[_]]):m.push(a[_]))}if(m&&h.push(m),n>1)for(let _=0;_<h.length;_++)h[_].length<=n||(mk(h[_],n,1,h[_].length-1,yk),h[_]=h[_].slice(0,n));return h}function yk(a,n){return n.area-a.area}function Tg(a,n,o){const h=o.patternDependencies;let m=!1;for(const y of n){const _=y.paint.get(`${a}-pattern`);_.isConstant()||(m=!0);const w=_.constantOr(null);w&&(m=!0,h[w.to]=!0,h[w.from]=!0)}return m}function kg(a,n,o,h,m){const y=m.patternDependencies;for(const _ of n){const w=_.paint.get(`${a}-pattern`).value;if(w.kind!=="constant"){let S=w.evaluate({zoom:h-1},o,{},m.availableImages),P=w.evaluate({zoom:h},o,{},m.availableImages),M=w.evaluate({zoom:h+1},o,{},m.availableImages);S=S&&S.name?S.name:S,P=P&&P.name?P.name:P,M=M&&M.name?M.name:M,y[S]=!0,y[P]=!0,y[M]=!0,o.patterns[_.id]={min:S,mid:P,max:M}}}return o}af.exports=of,af.exports.default=of,of.deviation=function(a,n,o,h){var m=n&&n.length,y=Math.abs(Eg(a,0,m?n[0]*o:a.length,o));if(m)for(var _=0,w=n.length;_<w;_++)y-=Math.abs(Eg(a,n[_]*o,_<w-1?n[_+1]*o:a.length,o));var S=0;for(_=0;_<h.length;_+=3){var P=h[_]*o,M=h[_+1]*o,D=h[_+2]*o;S+=Math.abs((a[P]-a[D])*(a[M+1]-a[P+1])-(a[P]-a[M])*(a[D+1]-a[P+1]))}return y===0&&S===0?0:Math.abs((S-y)/y)},of.flatten=function(a){for(var n=a[0][0].length,o={vertices:[],holes:[],dimensions:n},h=0,m=0;m<a.length;m++){for(var y=0;y<a[m].length;y++)for(var _=0;_<n;_++)o.vertices.push(a[m][y][_]);m>0&&o.holes.push(h+=a[m-1].length)}return o};class Cg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new en,this.indexArray=new zr,this.indexArray2=new ta,this.programConfigurations=new Js(n.layers,n.zoom),this.segments=new Bt,this.segments2=new Bt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,h){this.hasPattern=Tg("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),_=[];for(const{feature:w,id:S,index:P,sourceLayerIndex:M}of n){const D=this.layers[0]._featureFilter.needGeometry,F=el(w,D);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),F,h))continue;const U=y?m.evaluate(F,{},h,o.availableImages):void 0,j={id:S,properties:w.properties,type:w.type,sourceLayerIndex:M,index:P,geometry:D?F.geometry:Qs(w),patterns:{},sortKey:U};_.push(j)}y&&_.sort((w,S)=>w.sortKey-S.sortKey);for(const w of _){const{geometry:S,index:P,sourceLayerIndex:M}=w;if(this.hasPattern){const D=kg("fill",this.layers,w,this.zoom,o);this.patternFeatures.push(D)}else this.addFeature(w,S,P,h,{});o.featureIndex.insert(n[P].feature,S,P,M,this.index)}}update(n,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,h)}addFeatures(n,o,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ak),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,h,m,y){for(const _ of Sg(o,500)){let w=0;for(const U of _)w+=U.length;const S=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),P=S.vertexLength,M=[],D=[];for(const U of _){if(U.length===0)continue;U!==_[0]&&D.push(M.length/2);const j=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),te=j.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(te+U.length-1,te),M.push(U[0].x),M.push(U[0].y);for(let ee=1;ee<U.length;ee++)this.layoutVertexArray.emplaceBack(U[ee].x,U[ee].y),this.indexArray2.emplaceBack(te+ee-1,te+ee),M.push(U[ee].x),M.push(U[ee].y);j.vertexLength+=U.length,j.primitiveLength+=U.length}const F=af.exports(M,D);for(let U=0;U<F.length;U+=3)this.indexArray.emplaceBack(P+F[U],P+F[U+1],P+F[U+2]);S.vertexLength+=w,S.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,m)}}it("FillBucket",Cg,{omit:["layers","patternFeatures"]});const vk=new ar({"fill-sort-key":new wt(Pe.layout_fill["fill-sort-key"])});var _k={paint:new ar({"fill-antialias":new dt(Pe.paint_fill["fill-antialias"]),"fill-opacity":new wt(Pe.paint_fill["fill-opacity"]),"fill-color":new wt(Pe.paint_fill["fill-color"]),"fill-outline-color":new wt(Pe.paint_fill["fill-outline-color"]),"fill-translate":new dt(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new dt(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new $o(Pe.paint_fill["fill-pattern"])}),layout:vk};const xk=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bk=Bn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wk}=xk;var Vo={},Ek=$e,ox=Kl;function Kl(a,n,o,h,m){this.properties={},this.extent=o,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=m,a.readFields(Sk,this,n)}function Sk(a,n,o){a==1?n.id=o.readVarint():a==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=m._keys[h.readVarint()],w=m._values[h.readVarint()];m.properties[_]=w}}(o,n):a==3?n.type=o.readVarint():a==4&&(n._geometry=o.pos)}function Tk(a){for(var n,o,h=0,m=0,y=a.length,_=y-1;m<y;_=m++)h+=((o=a[_]).x-(n=a[m]).x)*(n.y+o.y);return h}Kl.types=["Unknown","Point","LineString","Polygon"],Kl.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,o=a.readVarint()+a.pos,h=1,m=0,y=0,_=0,w=[];a.pos<o;){if(m<=0){var S=a.readVarint();h=7&S,m=S>>3}if(m--,h===1||h===2)y+=a.readSVarint(),_+=a.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new Ek(y,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},Kl.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,o=1,h=0,m=0,y=0,_=1/0,w=-1/0,S=1/0,P=-1/0;a.pos<n;){if(h<=0){var M=a.readVarint();o=7&M,h=M>>3}if(h--,o===1||o===2)(m+=a.readSVarint())<_&&(_=m),m>w&&(w=m),(y+=a.readSVarint())<S&&(S=y),y>P&&(P=y);else if(o!==7)throw new Error("unknown command "+o)}return[_,S,w,P]},Kl.prototype.toGeoJSON=function(a,n,o){var h,m,y=this.extent*Math.pow(2,o),_=this.extent*a,w=this.extent*n,S=this.loadGeometry(),P=Kl.types[this.type];function M(U){for(var j=0;j<U.length;j++){var te=U[j];U[j]=[360*(te.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+w)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(h=0;h<S.length;h++)D[h]=S[h][0];M(S=D);break;case 2:for(h=0;h<S.length;h++)M(S[h]);break;case 3:for(S=function(U){var j=U.length;if(j<=1)return[U];for(var te,ee,fe=[],_e=0;_e<j;_e++){var de=Tk(U[_e]);de!==0&&(ee===void 0&&(ee=de<0),ee===de<0?(te&&fe.push(te),te=[U[_e]]):te.push(U[_e]))}return te&&fe.push(te),fe}(S),h=0;h<S.length;h++)for(m=0;m<S[h].length;m++)M(S[h][m])}S.length===1?S=S[0]:P="Multi"+P;var F={type:"Feature",geometry:{type:P,coordinates:S},properties:this.properties};return"id"in this&&(F.id=this.id),F};var kk=ox,sx=lx;function lx(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Ck,this,n),this.length=this._features.length}function Ck(a,n,o){a===15?n.version=o.readVarint():a===1?n.name=o.readString():a===5?n.extent=o.readVarint():a===2?n._features.push(o.pos):a===3?n._keys.push(o.readString()):a===4&&n._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(o))}lx.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new kk(this._pbf,n,this.extent,this._keys,this._values)};var Pk=sx;function Ik(a,n,o){if(a===3){var h=new Pk(o,o.readVarint()+o.pos);h.length&&(n[h.name]=h)}}Vo.VectorTile=function(a,n){this.layers=a.readFields(Ik,{},n)},Vo.VectorTileFeature=ox,Vo.VectorTileLayer=sx;const Ak=Vo.VectorTileFeature.types,Pg=Math.pow(2,13);function Ru(a,n,o,h,m,y,_,w){a.emplaceBack(n,o,2*Math.floor(h*Pg)+_,m*Pg*2,y*Pg*2,Math.round(w))}class Ig{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.centroidVertexArray=new gt,this.indexArray=new zr,this.programConfigurations=new Js(n.layers,n.zoom),this.segments=new Bt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,h){this.features=[],this.hasPattern=Tg("fill-extrusion",this.layers,o);for(const{feature:m,id:y,index:_,sourceLayerIndex:w}of n){const S=this.layers[0]._featureFilter.needGeometry,P=el(m,S);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),P,h))continue;const M={id:y,sourceLayerIndex:w,index:_,geometry:S?P.geometry:Qs(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(kg("fill-extrusion",this.layers,M,this.zoom,o)):this.addFeature(M,M.geometry,_,h,{}),o.featureIndex.insert(m,M.geometry,_,w,this.index,!0)}}addFeatures(n,o,h){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,o,h)}}update(n,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wk),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,bk.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,o,h,m,y){const _={x:0,y:0,vertexCount:0};for(const w of Sg(o,500)){let S=0;for(const j of w)S+=j.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const j of w){if(j.length===0||zk(j))continue;let te=0;for(let ee=0;ee<j.length;ee++){const fe=j[ee];if(ee>=1){const _e=j[ee-1];if(!Mk(fe,_e)){P.vertexLength+4>Bt.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const de=fe.sub(_e)._perp()._unit(),ge=_e.dist(fe);te+ge>32768&&(te=0),Ru(this.layoutVertexArray,fe.x,fe.y,de.x,de.y,0,0,te),Ru(this.layoutVertexArray,fe.x,fe.y,de.x,de.y,0,1,te),_.x+=2*fe.x,_.y+=2*fe.y,_.vertexCount+=2,te+=ge,Ru(this.layoutVertexArray,_e.x,_e.y,de.x,de.y,0,0,te),Ru(this.layoutVertexArray,_e.x,_e.y,de.x,de.y,0,1,te),_.x+=2*_e.x,_.y+=2*_e.y,_.vertexCount+=2;const Me=P.vertexLength;this.indexArray.emplaceBack(Me,Me+2,Me+1),this.indexArray.emplaceBack(Me+1,Me+2,Me+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+S>Bt.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),Ak[n.type]!=="Polygon")continue;const M=[],D=[],F=P.vertexLength;for(const j of w)if(j.length!==0){j!==w[0]&&D.push(M.length/2);for(let te=0;te<j.length;te++){const ee=j[te];Ru(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),_.x+=ee.x,_.y+=ee.y,_.vertexCount+=1,M.push(ee.x),M.push(ee.y)}}const U=af.exports(M,D);for(let j=0;j<U.length;j+=3)this.indexArray.emplaceBack(F+U[j],F+U[j+2],F+U[j+1]);P.primitiveLength+=U.length/3,P.vertexLength+=S}for(let w=0;w<_.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,m)}}function Mk(a,n){return a.x===n.x&&(a.x<0||a.x>qn)||a.y===n.y&&(a.y<0||a.y>qn)}function zk(a){return a.every(n=>n.x<0)||a.every(n=>n.x>qn)||a.every(n=>n.y<0)||a.every(n=>n.y>qn)}it("FillExtrusionBucket",Ig,{omit:["layers","features"]});var Dk={paint:new ar({"fill-extrusion-opacity":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wt(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $o(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wt(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wt(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dt(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ou(a,n){return a.x*n.x+a.y*n.y}function cx(a,n){if(a.length===1){let o=0;const h=n[o++];let m;for(;!m||h.equals(m);)if(m=n[o++],!m)return 1/0;for(;o<n.length;o++){const y=n[o],_=a[0],w=m.sub(h),S=y.sub(h),P=_.sub(h),M=Ou(w,w),D=Ou(w,S),F=Ou(S,S),U=Ou(P,w),j=Ou(P,S),te=M*F-D*D,ee=(F*U-D*j)/te,fe=(M*j-D*U)/te,_e=h.z*(1-ee-fe)+m.z*ee+y.z*fe;if(isFinite(_e))return _e}return 1/0}{let o=1/0;for(const h of n)o=Math.min(o,h.z);return o}}const Lk=Bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Rk}=Lk,Ok=Bn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Bk}=Ok,Nk=Vo.VectorTileFeature.types,Fk=Math.cos(Math.PI/180*37.5),ux=Math.pow(2,14)/.5;class Ag{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new qt,this.layoutVertexArray2=new rn,this.indexArray=new zr,this.programConfigurations=new Js(n.layers,n.zoom),this.segments=new Bt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,h){this.hasPattern=Tg("line",this.layers,o);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),_=[];for(const{feature:w,id:S,index:P,sourceLayerIndex:M}of n){const D=this.layers[0]._featureFilter.needGeometry,F=el(w,D);if(!this.layers[0]._featureFilter.filter(new gn(this.zoom),F,h))continue;const U=y?m.evaluate(F,{},h):void 0,j={id:S,properties:w.properties,type:w.type,sourceLayerIndex:M,index:P,geometry:D?F.geometry:Qs(w),patterns:{},sortKey:U};_.push(j)}y&&_.sort((w,S)=>w.sortKey-S.sortKey);for(const w of _){const{geometry:S,index:P,sourceLayerIndex:M}=w;if(this.hasPattern){const D=kg("line",this.layers,w,this.zoom,o);this.patternFeatures.push(D)}else this.addFeature(w,S,P,h,{});o.featureIndex.insert(n[P].feature,S,P,M,this.index)}}update(n,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,h)}addFeatures(n,o,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Bk)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Rk),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,h,m,y){const _=this.layers[0].layout,w=_.get("line-join").evaluate(n,{}),S=_.get("line-cap"),P=_.get("line-miter-limit"),M=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const D of o)this.addLine(D,n,w,S,P,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,y,m)}addLine(n,o,h,m,y,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<n.length-1;fe++)this.totalDistance+=n[fe].dist(n[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=Nk[o.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let P=0;for(;P<S-1&&n[P].equals(n[P+1]);)P++;if(S<(w?3:2))return;h==="bevel"&&(y=1.05);const M=this.overscaling<=16?122880/(512*this.overscaling):0,D=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let F,U,j,te,ee;this.e1=this.e2=-1,w&&(F=n[S-2],ee=n[P].sub(F)._unit()._perp());for(let fe=P;fe<S;fe++){if(j=fe===S-1?w?n[P+1]:void 0:n[fe+1],j&&n[fe].equals(j))continue;ee&&(te=ee),F&&(U=F),F=n[fe],ee=j?j.sub(F)._unit()._perp():te,te=te||ee;let _e=te.add(ee);_e.x===0&&_e.y===0||_e._unit();const de=te.x*ee.x+te.y*ee.y,ge=_e.x*ee.x+_e.y*ee.y,Me=ge!==0?1/ge:1/0,Ae=2*Math.sqrt(2-2*ge),nt=ge<Fk&&U&&j,ct=te.x*ee.y-te.y*ee.x>0;if(nt&&fe>P){const je=F.dist(U);if(je>2*M){const Je=F.sub(F.sub(U)._mult(M/je)._round());this.updateDistance(U,Je),this.addCurrentVertex(Je,te,0,0,D),U=Je}}const Ke=U&&j;let Ze=Ke?h:w?"butt":m;if(Ke&&Ze==="round"&&(Me<_?Ze="miter":Me<=2&&(Ze="fakeround")),Ze==="miter"&&Me>y&&(Ze="bevel"),Ze==="bevel"&&(Me>2&&(Ze="flipbevel"),Me<y&&(Ze="miter")),U&&this.updateDistance(U,F),Ze==="miter")_e._mult(Me),this.addCurrentVertex(F,_e,0,0,D);else if(Ze==="flipbevel"){if(Me>100)_e=ee.mult(-1);else{const je=Me*te.add(ee).mag()/te.sub(ee).mag();_e._perp()._mult(je*(ct?-1:1))}this.addCurrentVertex(F,_e,0,0,D),this.addCurrentVertex(F,_e.mult(-1),0,0,D)}else if(Ze==="bevel"||Ze==="fakeround"){const je=-Math.sqrt(Me*Me-1),Je=ct?je:0,Xe=ct?0:je;if(U&&this.addCurrentVertex(F,te,Je,Xe,D),Ze==="fakeround"){const Ne=Math.round(180*Ae/Math.PI/20);for(let yt=1;yt<Ne;yt++){let ft=yt/Ne;if(ft!==.5){const dn=ft-.5;ft+=ft*dn*(ft-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*dn*dn+(.848013+de*(.215638*de-1.06021)))}const Ot=ee.sub(te)._mult(ft)._add(te)._unit()._mult(ct?-1:1);this.addHalfVertex(F,Ot.x,Ot.y,!1,ct,0,D)}}j&&this.addCurrentVertex(F,ee,-Je,-Xe,D)}else if(Ze==="butt")this.addCurrentVertex(F,_e,0,0,D);else if(Ze==="square"){const je=U?1:-1;this.addCurrentVertex(F,_e,je,je,D)}else Ze==="round"&&(U&&(this.addCurrentVertex(F,te,0,0,D),this.addCurrentVertex(F,te,1,1,D,!0)),j&&(this.addCurrentVertex(F,ee,-1,-1,D,!0),this.addCurrentVertex(F,ee,0,0,D)));if(nt&&fe<S-1){const je=F.dist(j);if(je>2*M){const Je=F.add(j.sub(F)._mult(M/je)._round());this.updateDistance(F,Je),this.addCurrentVertex(Je,ee,0,0,D),F=Je}}}}addCurrentVertex(n,o,h,m,y,_=!1){const w=o.y*m-o.x,S=-o.y-o.x*m;this.addHalfVertex(n,o.x+o.y*h,o.y-o.x*h,_,!1,h,y),this.addHalfVertex(n,w,S,_,!0,-m,y),this.distance>ux/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,o,h,m,y,_))}addHalfVertex({x:n,y:o},h,m,y,_,w,S){const P=.5*(this.lineClips?this.scaledDistance*(ux-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(y?1:0),(o<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(w===0?0:w<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),S.primitiveLength++),_?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}}it("LineBucket",Ag,{omit:["layers","patternFeatures"]});const $k=new ar({"line-cap":new dt(Pe.layout_line["line-cap"]),"line-join":new wt(Pe.layout_line["line-join"]),"line-miter-limit":new dt(Pe.layout_line["line-miter-limit"]),"line-round-limit":new dt(Pe.layout_line["line-round-limit"]),"line-sort-key":new wt(Pe.layout_line["line-sort-key"])});var hx={paint:new ar({"line-opacity":new wt(Pe.paint_line["line-opacity"]),"line-color":new wt(Pe.paint_line["line-color"]),"line-translate":new dt(Pe.paint_line["line-translate"]),"line-translate-anchor":new dt(Pe.paint_line["line-translate-anchor"]),"line-width":new wt(Pe.paint_line["line-width"]),"line-gap-width":new wt(Pe.paint_line["line-gap-width"]),"line-offset":new wt(Pe.paint_line["line-offset"]),"line-blur":new wt(Pe.paint_line["line-blur"]),"line-dasharray":new Eu(Pe.paint_line["line-dasharray"]),"line-pattern":new $o(Pe.paint_line["line-pattern"]),"line-gradient":new Ca(Pe.paint_line["line-gradient"])}),layout:$k};const dx=new class extends wt{possiblyEvaluate(a,n){return n=new gn(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(a,n)}evaluate(a,n,o,h){return n=ie({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(a,n,o,h)}}(hx.paint.properties["line-width"].specification);function fx(a,n){return n>0?n+2*a:a}dx.useIntegerZoom=!0;const Uk=Bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jk=Bn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Vk=Bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Bn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const px=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gk=Bn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qk(a,n,o){return a.sections.forEach(h=>{h.text=function(m,y,_){const w=y.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?m=m.toLocaleUpperCase():w==="lowercase"&&(m=m.toLocaleLowerCase()),ai.applyArabicShaping&&(m=ai.applyArabicShaping(m)),m}(h.text,n,o)}),a}Bn([{name:"triangle",components:3,type:"Uint16"}]),Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Bn([{type:"Float32",name:"offsetX"}]),Bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Bu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var or=24,Mg=sn,mx=function(a,n,o,h,m){var y,_,w=8*m-h-1,S=(1<<w)-1,P=S>>1,M=-7,D=o?m-1:0,F=o?-1:1,U=a[n+D];for(D+=F,y=U&(1<<-M)-1,U>>=-M,M+=w;M>0;y=256*y+a[n+D],D+=F,M-=8);for(_=y&(1<<-M)-1,y>>=-M,M+=h;M>0;_=256*_+a[n+D],D+=F,M-=8);if(y===0)y=1-P;else{if(y===S)return _?NaN:1/0*(U?-1:1);_+=Math.pow(2,h),y-=P}return(U?-1:1)*_*Math.pow(2,y-h)},gx=function(a,n,o,h,m,y){var _,w,S,P=8*y-m-1,M=(1<<P)-1,D=M>>1,F=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=h?0:y-1,j=h?1:-1,te=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,_=M):(_=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-_))<1&&(_--,S*=2),(n+=_+D>=1?F/S:F*Math.pow(2,1-D))*S>=2&&(_++,S/=2),_+D>=M?(w=0,_=M):_+D>=1?(w=(n*S-1)*Math.pow(2,m),_+=D):(w=n*Math.pow(2,D-1)*Math.pow(2,m),_=0));m>=8;a[o+U]=255&w,U+=j,w/=256,m-=8);for(_=_<<m|w,P+=m;P>0;a[o+U]=255&_,U+=j,_/=256,P-=8);a[o+U-j]|=128*te};function sn(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}sn.Varint=0,sn.Fixed64=1,sn.Bytes=2,sn.Fixed32=5;var Go,zg=4294967296,yx=1/zg,vx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function to(a){return a.type===sn.Bytes?a.readVarint()+a.pos:a.pos+1}function Jl(a,n,o){return o?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function _x(a,n,o){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(h);for(var m=o.pos-1;m>=a;m--)o.buf[m+h]=o.buf[m]}function Wk(a,n){for(var o=0;o<a.length;o++)n.writeVarint(a[o])}function Zk(a,n){for(var o=0;o<a.length;o++)n.writeSVarint(a[o])}function Hk(a,n){for(var o=0;o<a.length;o++)n.writeFloat(a[o])}function Xk(a,n){for(var o=0;o<a.length;o++)n.writeDouble(a[o])}function Yk(a,n){for(var o=0;o<a.length;o++)n.writeBoolean(a[o])}function Kk(a,n){for(var o=0;o<a.length;o++)n.writeFixed32(a[o])}function Jk(a,n){for(var o=0;o<a.length;o++)n.writeSFixed32(a[o])}function Qk(a,n){for(var o=0;o<a.length;o++)n.writeFixed64(a[o])}function eC(a,n){for(var o=0;o<a.length;o++)n.writeSFixed64(a[o])}function uf(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function Ql(a,n,o){a[o]=n,a[o+1]=n>>>8,a[o+2]=n>>>16,a[o+3]=n>>>24}function xx(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}function tC(a,n,o){a===1&&o.readMessage(nC,n)}function nC(a,n,o){if(a===3){const{id:h,bitmap:m,width:y,height:_,left:w,top:S,advance:P}=o.readMessage(rC,{});n.push({id:h,bitmap:new Au({width:y+6,height:_+6},m),metrics:{width:y,height:_,left:w,top:S,advance:P}})}}function rC(a,n,o){a===1?n.id=o.readVarint():a===2?n.bitmap=o.readBytes():a===3?n.width=o.readVarint():a===4?n.height=o.readVarint():a===5?n.left=o.readSVarint():a===6?n.top=o.readSVarint():a===7&&(n.advance=o.readVarint())}function bx(a){let n=0,o=0;for(const _ of a)n+=_.w*_.h,o=Math.max(o,_.w);a.sort((_,w)=>w.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let m=0,y=0;for(const _ of a)for(let w=h.length-1;w>=0;w--){const S=h[w];if(!(_.w>S.w||_.h>S.h)){if(_.x=S.x,_.y=S.y,y=Math.max(y,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===S.w&&_.h===S.h){const P=h.pop();w<h.length&&(h[w]=P)}else _.h===S.h?(S.x+=_.w,S.w-=_.w):_.w===S.w?(S.y+=_.h,S.h-=_.h):(h.push({x:S.x+_.w,y:S.y,w:S.w-_.w,h:_.h}),S.y+=_.h,S.h-=_.h);break}}return{w:m,h:y,fill:n/(m*y)||0}}sn.prototype={destroy:function(){this.buf=null},readFields:function(a,n,o){for(o=o||this.length;this.pos<o;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,a(m,n,this),this.pos===y&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=uf(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=xx(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=uf(this.buf,this.pos)+uf(this.buf,this.pos+4)*zg;return this.pos+=8,a},readSFixed64:function(){var a=uf(this.buf,this.pos)+xx(this.buf,this.pos+4)*zg;return this.pos+=8,a},readFloat:function(){var a=mx(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=mx(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,o,h=this.buf;return n=127&(o=h[this.pos++]),o<128?n:(n|=(127&(o=h[this.pos++]))<<7,o<128?n:(n|=(127&(o=h[this.pos++]))<<14,o<128?n:(n|=(127&(o=h[this.pos++]))<<21,o<128?n:function(m,y,_){var w,S,P=_.buf;if(w=(112&(S=P[_.pos++]))>>4,S<128||(w|=(127&(S=P[_.pos++]))<<3,S<128)||(w|=(127&(S=P[_.pos++]))<<10,S<128)||(w|=(127&(S=P[_.pos++]))<<17,S<128)||(w|=(127&(S=P[_.pos++]))<<24,S<128)||(w|=(1&(S=P[_.pos++]))<<31,S<128))return Jl(m,w,y);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(o=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&vx?function(o,h,m){return vx.decode(o.subarray(h,m))}(this.buf,n,a):function(o,h,m){for(var y="",_=h;_<m;){var w,S,P,M=o[_],D=null,F=M>239?4:M>223?3:M>191?2:1;if(_+F>m)break;F===1?M<128&&(D=M):F===2?(192&(w=o[_+1]))==128&&(D=(31&M)<<6|63&w)<=127&&(D=null):F===3?(S=o[_+2],(192&(w=o[_+1]))==128&&(192&S)==128&&((D=(15&M)<<12|(63&w)<<6|63&S)<=2047||D>=55296&&D<=57343)&&(D=null)):F===4&&(S=o[_+2],P=o[_+3],(192&(w=o[_+1]))==128&&(192&S)==128&&(192&P)==128&&((D=(15&M)<<18|(63&w)<<12|(63&S)<<6|63&P)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,F=1):D>65535&&(D-=65536,y+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),y+=String.fromCharCode(D),_+=F}return y}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==sn.Bytes)return a.push(this.readVarint(n));var o=to(this);for(a=a||[];this.pos<o;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==sn.Bytes)return a.push(this.readSVarint());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==sn.Bytes)return a.push(this.readBoolean());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==sn.Bytes)return a.push(this.readFloat());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==sn.Bytes)return a.push(this.readDouble());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==sn.Bytes)return a.push(this.readFixed32());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==sn.Bytes)return a.push(this.readSFixed32());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==sn.Bytes)return a.push(this.readFixed64());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==sn.Bytes)return a.push(this.readSFixed64());var n=to(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===sn.Varint)for(;this.buf[this.pos++]>127;);else if(n===sn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===sn.Fixed32)this.pos+=4;else{if(n!==sn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var o=new Uint8Array(n);o.set(this.buf),this.buf=o,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Ql(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Ql(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Ql(this.buf,-1&a,this.pos),Ql(this.buf,Math.floor(a*yx),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Ql(this.buf,-1&a,this.pos),Ql(this.buf,Math.floor(a*yx),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,o){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(y,_,w){w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,y>>>=7,w.buf[w.pos++]=127&y|128,w.buf[w.pos]=127&(y>>>=7)}(h,0,o),function(y,_){var w=(7&y)<<4;_.buf[_.pos++]|=w|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(m,o)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(Boolean(a))},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,m,y){for(var _,w,S=0;S<m.length;S++){if((_=m.charCodeAt(S))>55295&&_<57344){if(!w){_>56319||S+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):w=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,w=_;continue}_=w-55296<<10|_-56320|65536,w=null}else w&&(h[y++]=239,h[y++]=191,h[y++]=189,w=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,a,this.pos);var o=this.pos-n;o>=128&&_x(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeFloat:function(a){this.realloc(4),gx(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),gx(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var o=0;o<n;o++)this.buf[this.pos++]=a[o]},writeRawMessage:function(a,n){this.pos++;var o=this.pos;a(n,this);var h=this.pos-o;h>=128&&_x(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,o){this.writeTag(a,sn.Bytes),this.writeRawMessage(n,o)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,Wk,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,Zk,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,Yk,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,Hk,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,Xk,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,Kk,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,Jk,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,Qk,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,eC,n)},writeBytesField:function(a,n){this.writeTag(a,sn.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,sn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,sn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,sn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,sn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,sn.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,sn.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,sn.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,sn.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,sn.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,Boolean(n))}};class Dg{constructor(n,{pixelRatio:o,version:h,stretchX:m,stretchY:y,content:_}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=m,this.stretchY=y,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class wx{constructor(n,o){const h={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(n,h,y),this.addImages(o,m,y);const{w:_,h:w}=bx(y),S=new xi({width:_||1,height:w||1});for(const P in n){const M=n[P],D=h[P].paddedRect;xi.copy(M.data,S,{x:0,y:0},{x:D.x+1,y:D.y+1},M.data)}for(const P in o){const M=o[P],D=m[P].paddedRect,F=D.x+1,U=D.y+1,j=M.data.width,te=M.data.height;xi.copy(M.data,S,{x:0,y:0},{x:F,y:U},M.data),xi.copy(M.data,S,{x:0,y:te-1},{x:F,y:U-1},{width:j,height:1}),xi.copy(M.data,S,{x:0,y:0},{x:F,y:U+te},{width:j,height:1}),xi.copy(M.data,S,{x:j-1,y:0},{x:F-1,y:U},{width:1,height:te}),xi.copy(M.data,S,{x:0,y:0},{x:F+j,y:U},{width:1,height:te})}this.image=S,this.iconPositions=h,this.patternPositions=m}addImages(n,o,h){for(const m in n){const y=n[m],_={x:0,y:0,w:y.data.width+2,h:y.data.height+2};h.push(_),o[m]=new Dg(_,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,o){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),o),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),o)}patchUpdatedImage(n,o,h){if(!n||!o||n.version===o.version)return;n.version=o.version;const[m,y]=n.tl;h.update(o.data,void 0,{x:m,y})}}it("ImagePosition",Dg),it("ImageAtlas",wx),c.WritingMode=void 0,(Go=c.WritingMode||(c.WritingMode={}))[Go.none=0]="none",Go[Go.horizontal=1]="horizontal",Go[Go.vertical=2]="vertical",Go[Go.horizontalOnly=3]="horizontalOnly";const hf=-17;class Nu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,o){const h=new Nu;return h.scale=n||1,h.fontStack=o,h}static forImage(n){const o=new Nu;return o.imageName=n,o}}class ec{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const h=new ec;for(let m=0;m<n.sections.length;m++){const y=n.sections[m];y.image?h.addImageSection(y):h.addTextSection(y,o)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let o="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,y=n.charCodeAt(h-1)||null;o+=m&&Gd(m)&&!Bu[n[h+1]]||y&&Gd(y)&&!Bu[n[h-1]]||!Bu[n[h]]?n[h]:Bu[n[h]]}return o}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&ff[this.text.charCodeAt(h)];h++)n++;let o=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&ff[this.text.charCodeAt(h)];h--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const h=new ec;return h.text=this.text.substring(n,o),h.sectionIndex=this.sectionIndex.slice(n,o),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}addTextSection(n,o){this.text+=n.text,this.sections.push(Nu.forText(n.scale,n.fontStack||o));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void xe("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Nu.forImage(o)),this.sectionIndex.push(this.sections.length-1)):xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function df(a,n,o,h,m,y,_,w,S,P,M,D,F,U,j,te){const ee=ec.fromFeature(a,m);let fe;D===c.WritingMode.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:_e,processStyledBidirectionalText:de}=ai;if(_e&&ee.sections.length===1){fe=[];const Ae=_e(ee.toString(),Lg(ee,P,y,n,h,U,j));for(const nt of Ae){const ct=new ec;ct.text=nt,ct.sections=ee.sections;for(let Ke=0;Ke<nt.length;Ke++)ct.sectionIndex.push(0);fe.push(ct)}}else if(de){fe=[];const Ae=de(ee.text,ee.sectionIndex,Lg(ee,P,y,n,h,U,j));for(const nt of Ae){const ct=new ec;ct.text=nt[0],ct.sectionIndex=nt[1],ct.sections=ee.sections,fe.push(ct)}}else fe=function(Ae,nt){const ct=[],Ke=Ae.text;let Ze=0;for(const je of nt)ct.push(Ae.substring(Ze,je)),Ze=je;return Ze<Ke.length&&ct.push(Ae.substring(Ze,Ke.length)),ct}(ee,Lg(ee,P,y,n,h,U,j));const ge=[],Me={positionedLines:ge,text:ee.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Ae,nt,ct,Ke,Ze,je,Je,Xe,Ne,yt,ft,Ot){let dn=0,vn=hf,Wn=0,wi=0;const fr=Xe==="right"?1:Xe==="left"?0:.5;let Nn=0;for(const Fn of Ze){Fn.trim();const mr=Fn.getMaxScale(),wr=(mr-1)*or,Rr={positionedGlyphs:[],lineOffset:0};Ae.positionedLines[Nn]=Rr;const Hr=Rr.positionedGlyphs;let Xr=0;if(!Fn.length()){vn+=je,++Nn;continue}for(let tr=0;tr<Fn.length();tr++){const Nt=Fn.getSection(tr),li=Fn.getSectionIndex(tr),gr=Fn.getCharCode(tr);let Er=0,Fi=null,ra=null,ia=null,ro=or;const $i=!(Ne===c.WritingMode.horizontal||!ft&&!yu(gr)||ft&&(ff[gr]||(er=gr,Ye.Arabic(er)||Ye["Arabic Supplement"](er)||Ye["Arabic Extended-A"](er)||Ye["Arabic Presentation Forms-A"](er)||Ye["Arabic Presentation Forms-B"](er))));if(Nt.imageName){const Ei=Ke[Nt.imageName];if(!Ei)continue;ia=Nt.imageName,Ae.iconsInText=Ae.iconsInText||!0,ra=Ei.paddedRect;const Yr=Ei.displaySize;Nt.scale=Nt.scale*or/Ot,Fi={width:Yr[0],height:Yr[1],left:1,top:-3,advance:$i?Yr[1]:Yr[0]},Er=wr+(or-Yr[1]*Nt.scale),ro=Fi.advance;const io=$i?Yr[0]*Nt.scale-or*mr:Yr[1]*Nt.scale-or*mr;io>0&&io>Xr&&(Xr=io)}else{const Ei=ct[Nt.fontStack],Yr=Ei&&Ei[gr];if(Yr&&Yr.rect)ra=Yr.rect,Fi=Yr.metrics;else{const io=nt[Nt.fontStack],Uu=io&&io[gr];if(!Uu)continue;Fi=Uu.metrics}Er=(mr-Nt.scale)*or}$i?(Ae.verticalizable=!0,Hr.push({glyph:gr,imageName:ia,x:dn,y:vn+Er,vertical:$i,scale:Nt.scale,fontStack:Nt.fontStack,sectionIndex:li,metrics:Fi,rect:ra}),dn+=ro*Nt.scale+yt):(Hr.push({glyph:gr,imageName:ia,x:dn,y:vn+Er,vertical:$i,scale:Nt.scale,fontStack:Nt.fontStack,sectionIndex:li,metrics:Fi,rect:ra}),dn+=Fi.advance*Nt.scale+yt)}Hr.length!==0&&(Wn=Math.max(dn-yt,Wn),oC(Hr,0,Hr.length-1,fr,Xr)),dn=0;const _n=je*mr+Xr;Rr.lineOffset=Math.max(Xr,wr),vn+=_n,wi=Math.max(_n,wi),++Nn}var er;const pr=vn-hf,{horizontalAlign:br,verticalAlign:Zr}=Rg(Je);(function(Fn,mr,wr,Rr,Hr,Xr,_n,tr,Nt){const li=(mr-wr)*Hr;let gr=0;gr=Xr!==_n?-tr*Rr-hf:(-Rr*Nt+.5)*_n;for(const Er of Fn)for(const Fi of Er.positionedGlyphs)Fi.x+=li,Fi.y+=gr})(Ae.positionedLines,fr,br,Zr,Wn,wi,je,pr,Ze.length),Ae.top+=-Zr*pr,Ae.bottom=Ae.top+pr,Ae.left+=-br*Wn,Ae.right=Ae.left+Wn}(Me,n,o,h,fe,_,w,S,D,P,F,te),!function(Ae){for(const nt of Ae)if(nt.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Me}const ff={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iC={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ex(a,n,o,h,m,y){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*or/y+m:0}{const _=o[n.fontStack],w=_&&_[a];return w?w.metrics.advance*n.scale+m:0}}function Sx(a,n,o,h){const m=Math.pow(a-n,2);return h?a<n?m/2:2*m:m+Math.abs(o)*o}function aC(a,n,o){let h=0;return a===10&&(h-=1e4),o&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Tx(a,n,o,h,m,y){let _=null,w=Sx(n,o,m,y);for(const S of h){const P=Sx(n-S.x,o,m,y)+S.badness;P<=w&&(_=S,w=P)}return{index:a,x:n,priorBreak:_,badness:w}}function kx(a){return a?kx(a.priorBreak).concat(a.index):[]}function Lg(a,n,o,h,m,y,_){if(y!=="point")return[];if(!a)return[];const w=[],S=function(F,U,j,te,ee,fe){let _e=0;for(let de=0;de<F.length();de++){const ge=F.getSection(de);_e+=Ex(F.getCharCode(de),ge,te,ee,U,fe)}return _e/Math.max(1,Math.ceil(_e/j))}(a,n,o,h,m,_),P=a.text.indexOf("​")>=0;let M=0;for(let F=0;F<a.length();F++){const U=a.getSection(F),j=a.getCharCode(F);if(ff[j]||(M+=Ex(j,U,h,m,n,_)),F<a.length()-1){const te=!((D=j)<11904||!(Ye["Bopomofo Extended"](D)||Ye.Bopomofo(D)||Ye["CJK Compatibility Forms"](D)||Ye["CJK Compatibility Ideographs"](D)||Ye["CJK Compatibility"](D)||Ye["CJK Radicals Supplement"](D)||Ye["CJK Strokes"](D)||Ye["CJK Symbols and Punctuation"](D)||Ye["CJK Unified Ideographs Extension A"](D)||Ye["CJK Unified Ideographs"](D)||Ye["Enclosed CJK Letters and Months"](D)||Ye["Halfwidth and Fullwidth Forms"](D)||Ye.Hiragana(D)||Ye["Ideographic Description Characters"](D)||Ye["Kangxi Radicals"](D)||Ye["Katakana Phonetic Extensions"](D)||Ye.Katakana(D)||Ye["Vertical Forms"](D)||Ye["Yi Radicals"](D)||Ye["Yi Syllables"](D)));(iC[j]||te||U.imageName)&&w.push(Tx(F+1,M,S,w,aC(j,a.getCharCode(F+1),te&&P),!1))}}var D;return kx(Tx(a.length(),M,S,w,0,!0))}function Rg(a){let n=.5,o=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function oC(a,n,o,h,m){if(!h&&!m)return;const y=a[o],_=(a[o].x+y.metrics.advance*y.scale)*h;for(let w=n;w<=o;w++)a[w].x-=_,a[w].y+=m}function sC(a,n,o){const{horizontalAlign:h,verticalAlign:m}=Rg(o),y=n[0]-a.displaySize[0]*h,_=n[1]-a.displaySize[1]*m;return{image:a,top:_,bottom:_+a.displaySize[1],left:y,right:y+a.displaySize[0]}}function Cx(a,n,o,h,m,y){const _=a.image;let w;if(_.content){const ee=_.content,fe=_.pixelRatio||1;w=[ee[0]/fe,ee[1]/fe,_.displaySize[0]-ee[2]/fe,_.displaySize[1]-ee[3]/fe]}const S=n.left*y,P=n.right*y;let M,D,F,U;o==="width"||o==="both"?(U=m[0]+S-h[3],D=m[0]+P+h[1]):(U=m[0]+(S+P-_.displaySize[0])/2,D=U+_.displaySize[0]);const j=n.top*y,te=n.bottom*y;return o==="height"||o==="both"?(M=m[1]+j-h[0],F=m[1]+te+h[2]):(M=m[1]+(j+te-_.displaySize[1])/2,F=M+_.displaySize[1]),{image:_,top:M,right:D,bottom:F,left:U,collisionPadding:w}}const no=128;function Px(a,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new gn(a+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=o;let y=0;for(;y<h.length&&h[y]<=a;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<a+1;)_++;_=Math.min(h.length-1,_);const w=h[y],S=h[_];return o.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:S,interpolationType:m}:{kind:"camera",minZoom:w,maxZoom:S,minSize:o.evaluate(new gn(w)),maxSize:o.evaluate(new gn(S)),interpolationType:m}}}class qo extends $e{constructor(n,o,h,m){super(n,o),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new qo(this.x,this.y,this.angle,this.segment)}}function Ix(a,n,o,h,m){if(n.segment===void 0)return!0;let y=n,_=n.segment+1,w=0;for(;w>-o/2;){if(_--,_<0)return!1;w-=a[_].dist(y),y=a[_]}w+=a[_].dist(a[_+1]),_++;const S=[];let P=0;for(;w<o/2;){const M=a[_],D=a[_+1];if(!D)return!1;let F=a[_-1].angleTo(M)-M.angleTo(D);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:w,angleDelta:F}),P+=F;w-S[0].distance>h;)P-=S.shift().angleDelta;if(P>m)return!1;_++,w+=M.dist(D)}return!0}function Ax(a){let n=0;for(let o=0;o<a.length-1;o++)n+=a[o].dist(a[o+1]);return n}function Mx(a,n,o){return a?.6*n*o:0}function zx(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function lC(a,n,o,h,m,y){const _=Mx(o,m,y),w=zx(o,h)*y;let S=0;const P=Ax(a)/2;for(let M=0;M<a.length-1;M++){const D=a[M],F=a[M+1],U=D.dist(F);if(S+U>P){const j=(P-S)/U,te=pn(D.x,F.x,j),ee=pn(D.y,F.y,j),fe=new qo(te,ee,F.angleTo(D),M);return fe._round(),!_||Ix(a,fe,w,_,n)?fe:void 0}S+=U}}function cC(a,n,o,h,m,y,_,w,S){const P=Mx(h,y,_),M=zx(h,m),D=M*_,F=a[0].x===0||a[0].x===S||a[0].y===0||a[0].y===S;return n-D<n/4&&(n=D+n/4),Dx(a,F?n/2*w%n:(M/2+2*y)*_*w%n,n,P,o,D,F,!1,S)}function Dx(a,n,o,h,m,y,_,w,S){const P=y/2,M=Ax(a);let D=0,F=n-o,U=[];for(let j=0;j<a.length-1;j++){const te=a[j],ee=a[j+1],fe=te.dist(ee),_e=ee.angleTo(te);for(;F+o<D+fe;){F+=o;const de=(F-D)/fe,ge=pn(te.x,ee.x,de),Me=pn(te.y,ee.y,de);if(ge>=0&&ge<S&&Me>=0&&Me<S&&F-P>=0&&F+P<=M){const Ae=new qo(ge,Me,_e,j);Ae._round(),h&&!Ix(a,Ae,y,h,m)||U.push(Ae)}}D+=fe}return w||U.length||_||(U=Dx(a,D/2,o,h,m,y,_,!0,S)),U}function Lx(a,n,o,h,m){const y=[];for(let _=0;_<a.length;_++){const w=a[_];let S;for(let P=0;P<w.length-1;P++){let M=w[P],D=w[P+1];M.x<n&&D.x<n||(M.x<n?M=new $e(n,M.y+(n-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x<n&&(D=new $e(n,M.y+(n-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y<o&&D.y<o||(M.y<o?M=new $e(M.x+(o-M.y)/(D.y-M.y)*(D.x-M.x),o)._round():D.y<o&&(D=new $e(M.x+(o-M.y)/(D.y-M.y)*(D.x-M.x),o)._round()),M.x>=h&&D.x>=h||(M.x>=h?M=new $e(h,M.y+(h-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x>=h&&(D=new $e(h,M.y+(h-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y>=m&&D.y>=m||(M.y>=m?M=new $e(M.x+(m-M.y)/(D.y-M.y)*(D.x-M.x),m)._round():D.y>=m&&(D=new $e(M.x+(m-M.y)/(D.y-M.y)*(D.x-M.x),m)._round()),S&&M.equals(S[S.length-1])||(S=[M],y.push(S)),S.push(D)))))}}return y}function Rx(a,n,o,h){const m=[],y=a.image,_=y.pixelRatio,w=y.paddedRect.w-2,S=y.paddedRect.h-2,P=a.right-a.left,M=a.bottom-a.top,D=y.stretchX||[[0,w]],F=y.stretchY||[[0,S]],U=(je,Je)=>je+Je[1]-Je[0],j=D.reduce(U,0),te=F.reduce(U,0),ee=w-j,fe=S-te;let _e=0,de=j,ge=0,Me=te,Ae=0,nt=ee,ct=0,Ke=fe;if(y.content&&h){const je=y.content;_e=pf(D,0,je[0]),ge=pf(F,0,je[1]),de=pf(D,je[0],je[2]),Me=pf(F,je[1],je[3]),Ae=je[0]-_e,ct=je[1]-ge,nt=je[2]-je[0]-de,Ke=je[3]-je[1]-Me}const Ze=(je,Je,Xe,Ne)=>{const yt=mf(je.stretch-_e,de,P,a.left),ft=gf(je.fixed-Ae,nt,je.stretch,j),Ot=mf(Je.stretch-ge,Me,M,a.top),dn=gf(Je.fixed-ct,Ke,Je.stretch,te),vn=mf(Xe.stretch-_e,de,P,a.left),Wn=gf(Xe.fixed-Ae,nt,Xe.stretch,j),wi=mf(Ne.stretch-ge,Me,M,a.top),fr=gf(Ne.fixed-ct,Ke,Ne.stretch,te),Nn=new $e(yt,Ot),er=new $e(vn,Ot),pr=new $e(vn,wi),br=new $e(yt,wi),Zr=new $e(ft/_,dn/_),Fn=new $e(Wn/_,fr/_),mr=n*Math.PI/180;if(mr){const Hr=Math.sin(mr),Xr=Math.cos(mr),_n=[Xr,-Hr,Hr,Xr];Nn._matMult(_n),er._matMult(_n),br._matMult(_n),pr._matMult(_n)}const wr=je.stretch+je.fixed,Rr=Je.stretch+Je.fixed;return{tl:Nn,tr:er,bl:br,br:pr,tex:{x:y.paddedRect.x+1+wr,y:y.paddedRect.y+1+Rr,w:Xe.stretch+Xe.fixed-wr,h:Ne.stretch+Ne.fixed-Rr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:Fn,minFontScaleX:nt/_/P,minFontScaleY:Ke/_/M,isSDF:o}};if(h&&(y.stretchX||y.stretchY)){const je=Ox(D,ee,j),Je=Ox(F,fe,te);for(let Xe=0;Xe<je.length-1;Xe++){const Ne=je[Xe],yt=je[Xe+1];for(let ft=0;ft<Je.length-1;ft++)m.push(Ze(Ne,Je[ft],yt,Je[ft+1]))}}else m.push(Ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:S+1}));return m}function pf(a,n,o){let h=0;for(const m of a)h+=Math.max(n,Math.min(o,m[1]))-Math.max(n,Math.min(o,m[0]));return h}function Ox(a,n,o){const h=[{fixed:-1,stretch:0}];for(const[m,y]of a){const _=h[h.length-1];h.push({fixed:m-_.stretch,stretch:_.stretch}),h.push({fixed:m-_.stretch,stretch:_.stretch+(y-m)})}return h.push({fixed:n+1,stretch:o}),h}function mf(a,n,o,h){return a/n*o+h}function gf(a,n,o,h){return a-n*o/h}it("Anchor",qo);class yf{constructor(n,o,h,m,y,_,w,S,P,M){if(this.boxStartIndex=n.length,P){let D=_.top,F=_.bottom;const U=_.collisionPadding;U&&(D-=U[1],F+=U[3]);let j=F-D;j>0&&(j=Math.max(10,j),this.circleDiameter=j)}else{let D=_.top*w-S[0],F=_.bottom*w+S[2],U=_.left*w-S[3],j=_.right*w+S[1];const te=_.collisionPadding;if(te&&(U-=te[0]*w,D-=te[1]*w,j+=te[2]*w,F+=te[3]*w),M){const ee=new $e(U,D),fe=new $e(j,D),_e=new $e(U,F),de=new $e(j,F),ge=M*Math.PI/180;ee._rotate(ge),fe._rotate(ge),_e._rotate(ge),de._rotate(ge),U=Math.min(ee.x,fe.x,_e.x,de.x),j=Math.max(ee.x,fe.x,_e.x,de.x),D=Math.min(ee.y,fe.y,_e.y,de.y),F=Math.max(ee.y,fe.y,_e.y,de.y)}n.emplaceBack(o.x,o.y,U,D,j,F,h,m,y)}this.boxEndIndex=n.length}}class uC{constructor(n=[],o=hC){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:h}=this,m=o[n];for(;n>0;){const y=n-1>>1,_=o[y];if(h(m,_)>=0)break;o[n]=_,n=y}o[n]=m}_down(n){const{data:o,compare:h}=this,m=this.length>>1,y=o[n];for(;n<m;){let _=1+(n<<1),w=o[_];const S=_+1;if(S<this.length&&h(o[S],w)<0&&(_=S,w=o[S]),h(w,y)>=0)break;o[n]=w,n=_}o[n]=y}}function hC(a,n){return a<n?-1:a>n?1:0}function dC(a,n=1,o=!1){let h=1/0,m=1/0,y=-1/0,_=-1/0;const w=a[0];for(let U=0;U<w.length;U++){const j=w[U];(!U||j.x<h)&&(h=j.x),(!U||j.y<m)&&(m=j.y),(!U||j.x>y)&&(y=j.x),(!U||j.y>_)&&(_=j.y)}const S=Math.min(y-h,_-m);let P=S/2;const M=new uC([],fC);if(S===0)return new $e(h,m);for(let U=h;U<y;U+=S)for(let j=m;j<_;j+=S)M.push(new tc(U+P,j+P,P,a));let D=function(U){let j=0,te=0,ee=0;const fe=U[0];for(let _e=0,de=fe.length,ge=de-1;_e<de;ge=_e++){const Me=fe[_e],Ae=fe[ge],nt=Me.x*Ae.y-Ae.x*Me.y;te+=(Me.x+Ae.x)*nt,ee+=(Me.y+Ae.y)*nt,j+=3*nt}return new tc(te/j,ee/j,0,U)}(a),F=M.length;for(;M.length;){const U=M.pop();(U.d>D.d||!D.d)&&(D=U,o&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,F)),U.max-D.d<=n||(P=U.h/2,M.push(new tc(U.p.x-P,U.p.y-P,P,a)),M.push(new tc(U.p.x+P,U.p.y-P,P,a)),M.push(new tc(U.p.x-P,U.p.y+P,P,a)),M.push(new tc(U.p.x+P,U.p.y+P,P,a)),F+=4)}return o&&(console.log(`num probes: ${F}`),console.log(`best distance: ${D.d}`)),D.p}function fC(a,n){return n.max-a.max}function tc(a,n,o,h){this.p=new $e(a,n),this.h=o,this.d=function(m,y){let _=!1,w=1/0;for(let S=0;S<y.length;S++){const P=y[S];for(let M=0,D=P.length,F=D-1;M<D;F=M++){const U=P[M],j=P[F];U.y>m.y!=j.y>m.y&&m.x<(j.x-U.x)*(m.y-U.y)/(j.y-U.y)+U.x&&(_=!_),w=Math.min(w,G0(m,U,j))}}return(_?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const Og=Number.POSITIVE_INFINITY;function Bx(a,n){return n[1]!==Og?function(o,h,m){let y=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),o){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(o){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(a,n[0],n[1]):function(o,h){let m=0,y=0;h<0&&(h=0);const _=h/Math.sqrt(2);switch(o){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(o){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(a,n[0])}function Bg(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pC(a,n,o,h,m,y,_,w,S,P,M){let D=y.textMaxSize.evaluate(n,{});D===void 0&&(D=_);const F=a.layers[0].layout,U=F.get("icon-offset").evaluate(n,{},M),j=Fx(o.horizontal),te=_/24,ee=a.tilePixelRatio*te,fe=a.tilePixelRatio*D/24,_e=a.tilePixelRatio*w,de=a.tilePixelRatio*F.get("symbol-spacing"),ge=F.get("text-padding")*a.tilePixelRatio,Me=function(Ne,yt,ft,Ot=1){const dn=Ne.get("icon-padding").evaluate(yt,{},ft),vn=dn&&dn.values;return[vn[0]*Ot,vn[1]*Ot,vn[2]*Ot,vn[3]*Ot]}(F,n,M,a.tilePixelRatio),Ae=F.get("text-max-angle")/180*Math.PI,nt=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",ct=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",Ke=F.get("symbol-placement"),Ze=de/2,je=F.get("icon-text-fit");let Je;h&&je!=="none"&&(a.allowVerticalPlacement&&o.vertical&&(Je=Cx(h,o.vertical,je,F.get("icon-text-fit-padding"),U,te)),j&&(h=Cx(h,j,je,F.get("icon-text-fit-padding"),U,te)));const Xe=(Ne,yt)=>{yt.x<0||yt.x>=qn||yt.y<0||yt.y>=qn||function(ft,Ot,dn,vn,Wn,wi,fr,Nn,er,pr,br,Zr,Fn,mr,wr,Rr,Hr,Xr,_n,tr,Nt,li,gr,Er,Fi){const ra=ft.addToLineVertexArray(Ot,dn);let ia,ro,$i,Ei,Yr=0,io=0,Uu=0,t1=0,Zg=-1,Hg=-1;const ao={};let n1=Qn.exports(""),Xg=0,Yg=0;if(Nn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Xg,Yg]=Nn.layout.get("text-offset").evaluate(Nt,{},Er).map(Kr=>Kr*or):(Xg=Nn.layout.get("text-radial-offset").evaluate(Nt,{},Er)*or,Yg=Og),ft.allowVerticalPlacement&&vn.vertical){const Kr=Nn.layout.get("text-rotate").evaluate(Nt,{},Er)+90;$i=new yf(er,Ot,pr,br,Zr,vn.vertical,Fn,mr,wr,Kr),fr&&(Ei=new yf(er,Ot,pr,br,Zr,fr,Hr,Xr,wr,Kr))}if(Wn){const Kr=Nn.layout.get("icon-rotate").evaluate(Nt,{}),za=Nn.layout.get("icon-text-fit")!=="none",ju=Rx(Wn,Kr,gr,za),Vu=fr?Rx(fr,Kr,gr,za):void 0;ro=new yf(er,Ot,pr,br,Zr,Wn,Hr,Xr,!1,Kr),Yr=4*ju.length;const a1=ft.iconSizeData;let rl=null;a1.kind==="source"?(rl=[no*Nn.layout.get("icon-size").evaluate(Nt,{})],rl[0]>Wo&&xe(`${ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):a1.kind==="composite"&&(rl=[no*li.compositeIconSizes[0].evaluate(Nt,{},Er),no*li.compositeIconSizes[1].evaluate(Nt,{},Er)],(rl[0]>Wo||rl[1]>Wo)&&xe(`${ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ft.addSymbols(ft.icon,ju,rl,tr,_n,Nt,c.WritingMode.none,Ot,ra.lineStartIndex,ra.lineLength,-1,Er),Zg=ft.icon.placedSymbolArray.length-1,Vu&&(io=4*Vu.length,ft.addSymbols(ft.icon,Vu,rl,tr,_n,Nt,c.WritingMode.vertical,Ot,ra.lineStartIndex,ra.lineLength,-1,Er),Hg=ft.icon.placedSymbolArray.length-1)}const r1=Object.keys(vn.horizontal);for(const Kr of r1){const za=vn.horizontal[Kr];if(!ia){n1=Qn.exports(za.text);const Vu=Nn.layout.get("text-rotate").evaluate(Nt,{},Er);ia=new yf(er,Ot,pr,br,Zr,za,Fn,mr,wr,Vu)}const ju=za.positionedLines.length===1;if(Uu+=Nx(ft,Ot,za,wi,Nn,wr,Nt,Rr,ra,vn.vertical?c.WritingMode.horizontal:c.WritingMode.horizontalOnly,ju?r1:[Kr],ao,Zg,li,Er),ju)break}vn.vertical&&(t1+=Nx(ft,Ot,vn.vertical,wi,Nn,wr,Nt,Rr,ra,c.WritingMode.vertical,["vertical"],ao,Hg,li,Er));const CC=ia?ia.boxStartIndex:ft.collisionBoxArray.length,PC=ia?ia.boxEndIndex:ft.collisionBoxArray.length,IC=$i?$i.boxStartIndex:ft.collisionBoxArray.length,AC=$i?$i.boxEndIndex:ft.collisionBoxArray.length,MC=ro?ro.boxStartIndex:ft.collisionBoxArray.length,zC=ro?ro.boxEndIndex:ft.collisionBoxArray.length,DC=Ei?Ei.boxStartIndex:ft.collisionBoxArray.length,LC=Ei?Ei.boxEndIndex:ft.collisionBoxArray.length;let aa=-1;const wf=(Kr,za)=>Kr&&Kr.circleDiameter?Math.max(Kr.circleDiameter,za):za;aa=wf(ia,aa),aa=wf($i,aa),aa=wf(ro,aa),aa=wf(Ei,aa);const i1=aa>-1?1:0;i1&&(aa*=Fi/or),ft.glyphOffsetArray.length>=nc.MAX_GLYPHS&&xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Nt.sortKey!==void 0&&ft.addToSortKeyRanges(ft.symbolInstances.length,Nt.sortKey),ft.symbolInstances.emplaceBack(Ot.x,Ot.y,ao.right>=0?ao.right:-1,ao.center>=0?ao.center:-1,ao.left>=0?ao.left:-1,ao.vertical||-1,Zg,Hg,n1,CC,PC,IC,AC,MC,zC,DC,LC,pr,Uu,t1,Yr,io,i1,0,Fn,Xg,Yg,aa)}(a,yt,Ne,o,h,m,Je,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,ee,[ge,ge,ge,ge],nt,S,_e,Me,ct,U,n,y,P,M,_)};if(Ke==="line")for(const Ne of Lx(n.geometry,0,0,qn,qn)){const yt=cC(Ne,de,Ae,o.vertical||j,h,24,fe,a.overscaling,qn);for(const ft of yt){const Ot=j;Ot&&mC(a,Ot.text,Ze,ft)||Xe(Ne,ft)}}else if(Ke==="line-center"){for(const Ne of n.geometry)if(Ne.length>1){const yt=lC(Ne,Ae,o.vertical||j,h,24,fe);yt&&Xe(Ne,yt)}}else if(n.type==="Polygon")for(const Ne of Sg(n.geometry,0)){const yt=dC(Ne,16);Xe(Ne[0],new qo(yt.x,yt.y,0))}else if(n.type==="LineString")for(const Ne of n.geometry)Xe(Ne,new qo(Ne[0].x,Ne[0].y,0));else if(n.type==="Point")for(const Ne of n.geometry)for(const yt of Ne)Xe([yt],new qo(yt.x,yt.y,0))}const Wo=32640;function Nx(a,n,o,h,m,y,_,w,S,P,M,D,F,U,j){const te=function(_e,de,ge,Me,Ae,nt,ct,Ke){const Ze=Me.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,je=[];for(const Je of de.positionedLines)for(const Xe of Je.positionedGlyphs){if(!Xe.rect)continue;const Ne=Xe.rect||{};let yt=4,ft=!0,Ot=1,dn=0;const vn=(Ae||Ke)&&Xe.vertical,Wn=Xe.metrics.advance*Xe.scale/2;if(Ke&&de.verticalizable){const _n=(Xe.scale-1)*or,tr=(or-Xe.metrics.width*Xe.scale)/2;dn=Je.lineOffset/2-(Xe.imageName?-tr:_n)}if(Xe.imageName){const _n=ct[Xe.imageName];ft=_n.sdf,Ot=_n.pixelRatio,yt=1/Ot}const wi=Ae?[Xe.x+Wn,Xe.y]:[0,0];let fr=Ae?[0,0]:[Xe.x+Wn+ge[0],Xe.y+ge[1]-dn],Nn=[0,0];vn&&(Nn=fr,fr=[0,0]);const er=(Xe.metrics.left-yt)*Xe.scale-Wn+fr[0],pr=(-Xe.metrics.top-yt)*Xe.scale+fr[1],br=er+Ne.w*Xe.scale/Ot,Zr=pr+Ne.h*Xe.scale/Ot,Fn=new $e(er,pr),mr=new $e(br,pr),wr=new $e(er,Zr),Rr=new $e(br,Zr);if(vn){const _n=new $e(-Wn,Wn-hf),tr=-Math.PI/2,Nt=12-Wn,li=new $e(22-Nt,-(Xe.imageName?Nt:0)),gr=new $e(...Nn);Fn._rotateAround(tr,_n)._add(li)._add(gr),mr._rotateAround(tr,_n)._add(li)._add(gr),wr._rotateAround(tr,_n)._add(li)._add(gr),Rr._rotateAround(tr,_n)._add(li)._add(gr)}if(Ze){const _n=Math.sin(Ze),tr=Math.cos(Ze),Nt=[tr,-_n,_n,tr];Fn._matMult(Nt),mr._matMult(Nt),wr._matMult(Nt),Rr._matMult(Nt)}const Hr=new $e(0,0),Xr=new $e(0,0);je.push({tl:Fn,tr:mr,bl:wr,br:Rr,tex:Ne,writingMode:de.writingMode,glyphOffset:wi,sectionIndex:Xe.sectionIndex,isSDF:ft,pixelOffsetTL:Hr,pixelOffsetBR:Xr,minFontScaleX:0,minFontScaleY:0})}return je}(0,o,w,m,y,_,h,a.allowVerticalPlacement),ee=a.textSizeData;let fe=null;ee.kind==="source"?(fe=[no*m.layout.get("text-size").evaluate(_,{})],fe[0]>Wo&&xe(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ee.kind==="composite"&&(fe=[no*U.compositeTextSizes[0].evaluate(_,{},j),no*U.compositeTextSizes[1].evaluate(_,{},j)],(fe[0]>Wo||fe[1]>Wo)&&xe(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,te,fe,w,y,_,P,n,S.lineStartIndex,S.lineLength,F,j);for(const _e of M)D[_e]=a.text.placedSymbolArray.length-1;return 4*te.length}function Fx(a){for(const n in a)return a[n];return null}function mC(a,n,o,h){const m=a.compareText;if(n in m){const y=m[n];for(let _=y.length-1;_>=0;_--)if(h.dist(y[_])<o)return!0}else m[n]=[];return m[n].push(h),!1}const gC=Vo.VectorTileFeature.types,yC=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vf(a,n,o,h,m,y,_,w,S,P,M,D,F){const U=w?Math.min(Wo,Math.round(w[0])):0,j=w?Math.min(Wo,Math.round(w[1])):0;a.emplaceBack(n,o,Math.round(32*h),Math.round(32*m),y,_,(U<<1)+(S?1:0),j,16*P,16*M,256*D,256*F)}function Ng(a,n,o){a.emplaceBack(n.x,n.y,o),a.emplaceBack(n.x,n.y,o),a.emplaceBack(n.x,n.y,o),a.emplaceBack(n.x,n.y,o)}function vC(a){for(const n of a.sections)if(Wd(n.text))return!0;return!1}class Fg{constructor(n){this.layoutVertexArray=new Bi,this.indexArray=new zr,this.programConfigurations=n,this.segments=new Bt,this.dynamicLayoutVertexArray=new _i,this.opacityVertexArray=new Ni,this.placedSymbolArray=new Be}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Uk.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,jk.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,yC,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}it("SymbolBuffers",Fg);class $g{constructor(n,o,h){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new h,this.segments=new Bt,this.collisionVertexArray=new oi}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Vk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}it("CollisionBuffers",$g);class nc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=vg([]),this.placementViewportMatrix=vg([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Px(this.zoom,o["text-size"]),this.iconSizeData=Px(this.zoom,o["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=jg(h,"text-overlap","text-allow-overlap")!=="never"||jg(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>c.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new Fg(new Js(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Fg(new Js(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new We,this.lineVertexArray=new tt,this.symbolInstances=new et}calculateGlyphDependencies(n,o,h,m,y){for(let _=0;_<n.length;_++)if(o[n.charCodeAt(_)]=!0,(h||m)&&y){const w=Bu[n.charAt(_)];w&&(o[w.charCodeAt(0)]=!0)}}populate(n,o,h){const m=this.layers[0],y=m.layout,_=y.get("text-font"),w=y.get("text-field"),S=y.get("icon-image"),P=(w.value.kind!=="constant"||w.value.value instanceof oe&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),M=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,D=y.get("symbol-sort-key");if(this.features=[],!P&&!M)return;const F=o.iconDependencies,U=o.glyphDependencies,j=o.availableImages,te=new gn(this.zoom);for(const{feature:ee,id:fe,index:_e,sourceLayerIndex:de}of n){const ge=m._featureFilter.needGeometry,Me=el(ee,ge);if(!m._featureFilter.filter(te,Me,h))continue;let Ae,nt;if(ge||(Me.geometry=Qs(ee)),P){const Ke=m.getValueAndResolveTokens("text-field",Me,h,j),Ze=oe.factory(Ke);vC(Ze)&&(this.hasRTLText=!0),(!this.hasRTLText||Xs()==="unavailable"||this.hasRTLText&&ai.isParsed())&&(Ae=qk(Ze,m,Me))}if(M){const Ke=m.getValueAndResolveTokens("icon-image",Me,h,j);nt=Ke instanceof ue?Ke:ue.fromString(Ke)}if(!Ae&&!nt)continue;const ct=this.sortFeaturesByKey?D.evaluate(Me,{},h):void 0;if(this.features.push({id:fe,text:Ae,icon:nt,index:_e,sourceLayerIndex:de,geometry:Me.geometry,properties:ee.properties,type:gC[ee.type],sortKey:ct}),nt&&(F[nt.name]=!0),Ae){const Ke=_.evaluate(Me,{},h).join(","),Ze=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.WritingMode.vertical)>=0;for(const je of Ae.sections)if(je.image)F[je.image.name]=!0;else{const Je=Gl(Ae.toString()),Xe=je.fontStack||Ke,Ne=U[Xe]=U[Xe]||{};this.calculateGlyphDependencies(je.text,Ne,Ze,this.allowVerticalPlacement,Je)}}}y.get("symbol-placement")==="line"&&(this.features=function(ee){const fe={},_e={},de=[];let ge=0;function Me(Ke){de.push(ee[Ke]),ge++}function Ae(Ke,Ze,je){const Je=_e[Ke];return delete _e[Ke],_e[Ze]=Je,de[Je].geometry[0].pop(),de[Je].geometry[0]=de[Je].geometry[0].concat(je[0]),Je}function nt(Ke,Ze,je){const Je=fe[Ze];return delete fe[Ze],fe[Ke]=Je,de[Je].geometry[0].shift(),de[Je].geometry[0]=je[0].concat(de[Je].geometry[0]),Je}function ct(Ke,Ze,je){const Je=je?Ze[0][Ze[0].length-1]:Ze[0][0];return`${Ke}:${Je.x}:${Je.y}`}for(let Ke=0;Ke<ee.length;Ke++){const Ze=ee[Ke],je=Ze.geometry,Je=Ze.text?Ze.text.toString():null;if(!Je){Me(Ke);continue}const Xe=ct(Je,je),Ne=ct(Je,je,!0);if(Xe in _e&&Ne in fe&&_e[Xe]!==fe[Ne]){const yt=nt(Xe,Ne,je),ft=Ae(Xe,Ne,de[yt].geometry);delete fe[Xe],delete _e[Ne],_e[ct(Je,de[ft].geometry,!0)]=ft,de[yt].geometry=null}else Xe in _e?Ae(Xe,Ne,je):Ne in fe?nt(Xe,Ne,je):(Me(Ke),fe[Xe]=ge-1,_e[Ne]=ge-1)}return de.filter(Ke=>Ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,fe)=>ee.sortKey-fe.sortKey)}update(n,o,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(o[n.segment+1]),y=n.dist(o[n.segment]);const _={};for(let w=n.segment+1;w<o.length;w++)_[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:m},w<o.length-1&&(m+=o[w+1].dist(o[w]));for(let w=n.segment||0;w>=0;w--)_[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:y},w>0&&(y+=o[w-1].dist(o[w]));for(let w=0;w<o.length;w++){const S=_[w];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,o,h,m,y,_,w,S,P,M,D,F){const U=n.indexArray,j=n.layoutVertexArray,te=n.segments.prepareSegment(4*o.length,j,U,this.canOverlap?_.sortKey:void 0),ee=this.glyphOffsetArray.length,fe=te.vertexLength,_e=this.allowVerticalPlacement&&w===c.WritingMode.vertical?Math.PI/2:0,de=_.text&&_.text.sections;for(let ge=0;ge<o.length;ge++){const{tl:Me,tr:Ae,bl:nt,br:ct,tex:Ke,pixelOffsetTL:Ze,pixelOffsetBR:je,minFontScaleX:Je,minFontScaleY:Xe,glyphOffset:Ne,isSDF:yt,sectionIndex:ft}=o[ge],Ot=te.vertexLength,dn=Ne[1];vf(j,S.x,S.y,Me.x,dn+Me.y,Ke.x,Ke.y,h,yt,Ze.x,Ze.y,Je,Xe),vf(j,S.x,S.y,Ae.x,dn+Ae.y,Ke.x+Ke.w,Ke.y,h,yt,je.x,Ze.y,Je,Xe),vf(j,S.x,S.y,nt.x,dn+nt.y,Ke.x,Ke.y+Ke.h,h,yt,Ze.x,je.y,Je,Xe),vf(j,S.x,S.y,ct.x,dn+ct.y,Ke.x+Ke.w,Ke.y+Ke.h,h,yt,je.x,je.y,Je,Xe),Ng(n.dynamicLayoutVertexArray,S,_e),U.emplaceBack(Ot,Ot+1,Ot+2),U.emplaceBack(Ot+1,Ot+2,Ot+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ne[0]),ge!==o.length-1&&ft===o[ge+1].sectionIndex||n.programConfigurations.populatePaintArrays(j.length,_,_.index,{},F,de&&de[ft])}n.placedSymbolArray.emplaceBack(S.x,S.y,ee,this.glyphOffsetArray.length-ee,fe,P,M,S.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],w,0,!1,0,D)}_addCollisionDebugVertex(n,o,h,m,y,_){return o.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,y,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,o,h,m,y,_,w){const S=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),P=S.vertexLength,M=y.layoutVertexArray,D=y.collisionVertexArray,F=w.anchorX,U=w.anchorY;this._addCollisionDebugVertex(M,D,_,F,U,new $e(n,o)),this._addCollisionDebugVertex(M,D,_,F,U,new $e(h,o)),this._addCollisionDebugVertex(M,D,_,F,U,new $e(h,m)),this._addCollisionDebugVertex(M,D,_,F,U,new $e(n,m)),S.vertexLength+=4;const j=y.indexArray;j.emplaceBack(P,P+1),j.emplaceBack(P+1,P+2),j.emplaceBack(P+2,P+3),j.emplaceBack(P+3,P),S.primitiveLength+=4}addDebugCollisionBoxes(n,o,h,m){for(let y=n;y<o;y++){const _=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $g(Aa,px.members,ta),this.iconCollisionBox=new $g(Aa,px.members,ta);for(let n=0;n<this.symbolInstances.length;n++){const o=this.symbolInstances.get(n);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(n,o,h,m,y,_,w,S,P){const M={};for(let D=o;D<h;D++){const F=n.get(D);M.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.textFeatureIndex=F.featureIndex;break}for(let D=m;D<y;D++){const F=n.get(D);M.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalTextFeatureIndex=F.featureIndex;break}for(let D=_;D<w;D++){const F=n.get(D);M.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.iconFeatureIndex=F.featureIndex;break}for(let D=S;D<P;D++){const F=n.get(D);M.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalIconFeatureIndex=F.featureIndex;break}return M}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const h=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const h=n.placedSymbolArray.get(o),m=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<m;y+=4)n.indexArray.emplaceBack(y,y+1,y+2),n.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),h=Math.cos(n),m=[],y=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);const S=this.symbolInstances.get(w);m.push(0|Math.round(o*S.anchorX+h*S.anchorY)),y.push(S.featureIndex)}return _.sort((w,S)=>m[w]-m[S]||y[S]-y[w]),_}addToSortKeyRanges(n,o){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===o?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const h=this.symbolInstances.get(o);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,y,_)=>{m>=0&&_.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}it("SymbolBucket",nc,{omit:["layers","collisionBoxArray","features","compareText"]}),nc.MAX_GLYPHS=65535,nc.addDynamicAttributes=Ng;const _C=new ar({"symbol-placement":new dt(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new dt(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dt(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wt(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dt(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dt(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new dt(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new dt(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new dt(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dt(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new wt(Pe.layout_symbol["icon-size"]),"icon-text-fit":new dt(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dt(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new wt(Pe.layout_symbol["icon-image"]),"icon-rotate":new wt(Pe.layout_symbol["icon-rotate"]),"icon-padding":new wt(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new dt(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new wt(Pe.layout_symbol["icon-offset"]),"icon-anchor":new wt(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dt(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dt(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dt(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new wt(Pe.layout_symbol["text-field"]),"text-font":new wt(Pe.layout_symbol["text-font"]),"text-size":new wt(Pe.layout_symbol["text-size"]),"text-max-width":new wt(Pe.layout_symbol["text-max-width"]),"text-line-height":new dt(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new wt(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new wt(Pe.layout_symbol["text-justify"]),"text-radial-offset":new wt(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dt(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new wt(Pe.layout_symbol["text-anchor"]),"text-max-angle":new dt(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new dt(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new wt(Pe.layout_symbol["text-rotate"]),"text-padding":new dt(Pe.layout_symbol["text-padding"]),"text-keep-upright":new dt(Pe.layout_symbol["text-keep-upright"]),"text-transform":new wt(Pe.layout_symbol["text-transform"]),"text-offset":new wt(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new dt(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new dt(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new dt(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new dt(Pe.layout_symbol["text-optional"])});var Ug={paint:new ar({"icon-opacity":new wt(Pe.paint_symbol["icon-opacity"]),"icon-color":new wt(Pe.paint_symbol["icon-color"]),"icon-halo-color":new wt(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new wt(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wt(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new dt(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new dt(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new wt(Pe.paint_symbol["text-opacity"]),"text-color":new wt(Pe.paint_symbol["text-color"],{runtimeType:ir,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new wt(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new wt(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new wt(Pe.paint_symbol["text-halo-blur"]),"text-translate":new dt(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new dt(Pe.paint_symbol["text-translate-anchor"])}),layout:_C};class $x{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:wa,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}it("FormatSectionOverride",$x,{omit:["defaultValue"]});class _f extends Oi{constructor(n){super(n,Ug)}recalculate(n,o){if(super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const y of h)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,o,h,m){const y=this.layout.get(n).evaluate(o,{},h,m),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Os(_.value)||!y?y:function(w,S){return S.replace(/{([^{}]+)}/g,(P,M)=>M in w?String(w[M]):"")}(o.properties,y)}createBucket(n){return new nc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Ug.paint.overridableProperties){if(!_f.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),h=new $x(o),m=new Nl(h,o.property.specification);let y=null;y=o.value.kind==="constant"||o.value.kind==="source"?new Ns("source",m):new hu("composite",m,o.value.zoomStops),this.paint._values[n]=new Ri(o.property,y,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,h){return!(!this.layout||o.isDataDriven()||h.isDataDriven())&&_f.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const h=n.get("text-field"),m=Ug.paint.properties[o];let y=!1;const _=w=>{for(const S of w)if(m.overrides&&m.overrides.hasOverride(S))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof oe)_(h.value.value.sections);else if(h.value.kind==="source"){const w=P=>{y||(P instanceof ht&&be(P.value)===Xn?_(P.value.sections):P instanceof Ol?_(P.sections):P.eachChild(w))},S=h.value;S._styleExpression&&w(S._styleExpression.expression)}return y}}function jg(a,n,o){let h="never";const m=a.get(n);return m?h=m:a.get(o)&&(h="always"),h}var xC={paint:new ar({"background-color":new dt(Pe.paint_background["background-color"]),"background-pattern":new Eu(Pe.paint_background["background-pattern"]),"background-opacity":new dt(Pe.paint_background["background-opacity"])})},bC={paint:new ar({"raster-opacity":new dt(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new dt(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dt(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dt(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new dt(Pe.paint_raster["raster-saturation"]),"raster-contrast":new dt(Pe.paint_raster["raster-contrast"]),"raster-resampling":new dt(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new dt(Pe.paint_raster["raster-fade-duration"])})};class wC extends Oi{constructor(n){super(n,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const EC={circle:class extends Oi{constructor(a){super(a,ek)}createBucket(a){return new mg(a)}queryRadius(a){const n=a;return Pu("circle-radius",this,n)+Pu("circle-stroke-width",this,n)+tf(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,o,h,m,y,_,w){const S=nf(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,_),P=this.paint.get("circle-radius").evaluate(n,o)+this.paint.get("circle-stroke-width").evaluate(n,o),M=this.paint.get("circle-pitch-alignment")==="map",D=M?S:function(U,j){return U.map(te=>K0(te,j))}(S,w),F=M?P*_:P;for(const U of h)for(const j of U){const te=M?j:K0(j,w);let ee=F;const fe=rf([],[j.x,j.y,0,1],w);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ee*=fe[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ee*=y.cameraToCenterDistance/fe[3]),XT(D,te,ee))return!0}return!1}},heatmap:class extends Oi{constructor(a){super(a,nk),this._updateColorRamp()}createBucket(a){return new J0(a)}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ex({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Oi{constructor(a){super(a,rk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Oi{constructor(a){super(a,_k)}recalculate(a,n){super.recalculate(a,n);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Cg(a)}queryRadius(){return tf(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,o,h,m,y,_){return V0(nf(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,_),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Oi{constructor(a){super(a,Dk)}createBucket(a){return new Ig(a)}queryRadius(){return tf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,n,o,h,m,y,_,w){const S=nf(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,_),P=this.paint.get("fill-extrusion-height").evaluate(n,o),M=this.paint.get("fill-extrusion-base").evaluate(n,o),D=function(U,j,te,ee){const fe=[];for(const _e of U){const de=[_e.x,_e.y,0,1];rf(de,de,j),fe.push(new $e(de[0]/de[3],de[1]/de[3]))}return fe}(S,w),F=function(U,j,te,ee){const fe=[],_e=[],de=ee[8]*j,ge=ee[9]*j,Me=ee[10]*j,Ae=ee[11]*j,nt=ee[8]*te,ct=ee[9]*te,Ke=ee[10]*te,Ze=ee[11]*te;for(const je of U){const Je=[],Xe=[];for(const Ne of je){const yt=Ne.x,ft=Ne.y,Ot=ee[0]*yt+ee[4]*ft+ee[12],dn=ee[1]*yt+ee[5]*ft+ee[13],vn=ee[2]*yt+ee[6]*ft+ee[14],Wn=ee[3]*yt+ee[7]*ft+ee[15],wi=vn+Me,fr=Wn+Ae,Nn=Ot+nt,er=dn+ct,pr=vn+Ke,br=Wn+Ze,Zr=new $e((Ot+de)/fr,(dn+ge)/fr);Zr.z=wi/fr,Je.push(Zr);const Fn=new $e(Nn/br,er/br);Fn.z=pr/br,Xe.push(Fn)}fe.push(Je),_e.push(Xe)}return[fe,_e]}(h,M,P,w);return function(U,j,te){let ee=1/0;V0(te,j)&&(ee=cx(te,j[0]));for(let fe=0;fe<j.length;fe++){const _e=j[fe],de=U[fe];for(let ge=0;ge<_e.length-1;ge++){const Me=_e[ge],Ae=[Me,_e[ge+1],de[ge+1],de[ge],Me];j0(te,Ae)&&(ee=Math.min(ee,cx(te,Ae)))}}return ee!==1/0&&ee}(F[0],F[1],D)}},line:class extends Oi{constructor(a){super(a,hx),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){a==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ms,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=dx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ag(a)}queryRadius(a){const n=a,o=fx(Pu("line-width",this,n),Pu("line-gap-width",this,n)),h=Pu("line-offset",this,n);return o/2+Math.abs(h)+tf(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,o,h,m,y,_){const w=nf(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,_),S=_/2*fx(this.paint.get("line-width").evaluate(n,o),this.paint.get("line-gap-width").evaluate(n,o)),P=this.paint.get("line-offset").evaluate(n,o);return P&&(h=function(M,D){const F=[];for(let U=0;U<M.length;U++){const j=M[U],te=[];for(let ee=0;ee<j.length;ee++){const fe=j[ee-1],_e=j[ee],de=j[ee+1],ge=ee===0?new $e(0,0):_e.sub(fe)._unit()._perp(),Me=ee===j.length-1?new $e(0,0):de.sub(_e)._unit()._perp(),Ae=ge._add(Me)._unit(),nt=Ae.x*Me.x+Ae.y*Me.y;nt!==0&&Ae._mult(1/nt),te.push(Ae._mult(D)._add(_e))}F.push(te)}return F}(h,P*_)),function(M,D,F){for(let U=0;U<D.length;U++){const j=D[U];if(M.length>=3){for(let te=0;te<j.length;te++)if(Xl(M,j[te]))return!0}if(YT(M,j,F))return!0}return!1}(w,h,S)}isTileClipped(){return!0}},symbol:_f,background:class extends Oi{constructor(a){super(a,xC)}},raster:class extends Oi{constructor(a){super(a,bC)}}};class SC{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ux=63710088e-1;class kn{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new kn(Q(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,h=this.lat*o,m=n.lat*o,y=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*o);return Ux*Math.acos(Math.min(y,1))}toBounds(n=0){const o=360*n/40075017,h=o/Math.cos(Math.PI/180*this.lat);return new nl(new kn(this.lng-h,this.lat-o),new kn(this.lng+h,this.lat+o))}static convert(n){if(n instanceof kn)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new kn(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new kn(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class nl{constructor(n,o){n&&(o?this.setSouthWest(n).setNorthEast(o):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof kn?new kn(n.lng,n.lat):kn.convert(n),this}setSouthWest(n){return this._sw=n instanceof kn?new kn(n.lng,n.lat):kn.convert(n),this}extend(n){const o=this._sw,h=this._ne;let m,y;if(n instanceof kn)m=n,y=n;else{if(!(n instanceof nl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(nl.convert(n)):this.extend(kn.convert(n)):this;if(m=n._sw,y=n._ne,!m||!y)return this}return o||h?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),h.lng=Math.max(y.lng,h.lng),h.lat=Math.max(y.lat,h.lat)):(this._sw=new kn(m.lng,m.lat),this._ne=new kn(y.lng,y.lat)),this}getCenter(){return new kn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new kn(this.getWest(),this.getNorth())}getSouthEast(){return new kn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:o,lat:h}=kn.convert(n);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m}static convert(n){return n instanceof nl?n:n&&new nl(n)}}const jx=2*Math.PI*Ux;function Vx(a){return jx*Math.cos(a*Math.PI/180)}function Gx(a){return(180+a)/360}function qx(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Wx(a,n){return a/Vx(n)}function Vg(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class xf{constructor(n,o,h=0){this.x=+n,this.y=+o,this.z=+h}static fromLngLat(n,o=0){const h=kn.convert(n);return new xf(Gx(h.lng),qx(h.lat),Wx(o,h.lat))}toLngLat(){return new kn(360*this.x-180,Vg(this.y))}toAltitude(){return this.z*Vx(Vg(this.y))}meterInMercatorCoordinateUnits(){return 1/jx*(n=Vg(this.y),1/Math.cos(n*Math.PI/180));var n}}function Zx(a,n,o){var h=2*Math.PI*6378137/256/Math.pow(2,o);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Gg{constructor(n,o,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||o<0||o>=Math.pow(2,n))throw new Error(`x=${o}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=o,this.y=h,this.key=Fu(0,n,n,o,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o,h){const m=(_=this.y,w=this.z,S=Zx(256*(y=this.x),256*(_=Math.pow(2,w)-_-1),w),P=Zx(256*(y+1),256*(_+1),w),S[0]+","+S[1]+","+P[0]+","+P[1]);var y,_,w,S,P;const M=function(D,F,U){let j,te="";for(let ee=D;ee>0;ee--)j=1<<ee-1,te+=(F&j?1:0)+(U&j?2:0);return te}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const o=this.z-n.z;return o>0&&n.x===this.x>>o&&n.y===this.y>>o}getTilePoint(n){const o=Math.pow(2,this.z);return new $e((n.x*o-this.x)*qn,(n.y*o-this.y)*qn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Hx{constructor(n,o){this.wrap=n,this.canonical=o,this.key=Fu(n,o.z,o.z,o.x,o.y)}}class bi{constructor(n,o,h,m,y){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=o,this.canonical=new Gg(h,+m,+y),this.key=Fu(o,n,h,m,y)}clone(){return new bi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-n;return n>this.canonical.z?new bi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new bi(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(n,o){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Fu(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y):Fu(this.wrap*+o,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const o=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new bi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new bi(o,this.wrap,o,h,m),new bi(o,this.wrap,o,h+1,m),new bi(o,this.wrap,o,h,m+1),new bi(o,this.wrap,o,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new bi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new bi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Hx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new xf(n.x-this.wrap,n.y))}}function Fu(a,n,o,h,m){(a*=2)<0&&(a=-1*a-1);const y=1<<o;return(y*y*a+y*m+h).toString(36)+o.toString(36)+n.toString(36)}it("CanonicalTileID",Gg),it("OverscaledTileID",bi,{omit:["posMatrix"]});class Xx{constructor(n,o,h){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void xe(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const m=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=h||"mapbox";for(let y=0;y<m;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(m,y)]=this.data[this._idx(m-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,m)]=this.data[this._idx(y,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let y=0;y<m;y++)for(let _=0;_<m;_++){const w=this.get(y,_);w>this.max&&(this.max=w),w<this.min&&(this.min=w)}}get(n,o){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[m],h[m+1],h[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}_unpackMapbox(n,o,h){return(256*n*256+256*o+h)/10-1e4}_unpackTerrarium(n,o,h){return 256*n+o+h/256-32768}getPixels(){return new xi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,o,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,y=o*this.dim+this.dim,_=h*this.dim,w=h*this.dim+this.dim;switch(o){case-1:m=y-1;break;case 1:y=m+1}switch(h){case-1:_=w-1;break;case 1:w=_+1}const S=-o*this.dim,P=-h*this.dim;for(let M=_;M<w;M++)for(let D=m;D<y;D++)this.data[this._idx(D,M)]=n.data[this._idx(D+S,M+P)]}}it("DEMData",Xx);class Yx{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const h=n[o];this._stringToNumber[h]=o,this._numberToString[o]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Kx{constructor(n,o,h,m,y){this.type="Feature",this._vectorTileFeature=n,n._z=o,n._x=h,n._y=m,this.properties=n.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(n[o]=this[o]);return n}}class Jx{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Hs(qn,16,0),this.grid3D=new Hs(qn,16,0),this.featureIndexArray=new Rt,this.promoteId=o}insert(n,o,h,m,y,_){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,y);const S=_?this.grid3D:this.grid;for(let P=0;P<o.length;P++){const M=o[P],D=[1/0,1/0,-1/0,-1/0];for(let F=0;F<M.length;F++){const U=M[F];D[0]=Math.min(D[0],U.x),D[1]=Math.min(D[1],U.y),D[2]=Math.max(D[2],U.x),D[3]=Math.max(D[3],U.y)}D[0]<qn&&D[1]<qn&&D[2]>=0&&D[3]>=0&&S.insert(w,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Vo.VectorTile(new Mg(this.rawTileData)).layers,this.sourceLayerCoder=new Yx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,o,h,m){this.loadVTLayers();const y=n.params||{},_=qn/n.tileSize/n.scale,w=Ul(y.filter),S=n.queryGeometry,P=n.queryPadding*_,M=e1(S),D=this.grid.query(M.minX-P,M.minY-P,M.maxX+P,M.maxY+P),F=e1(n.cameraQueryGeometry),U=this.grid3D.query(F.minX-P,F.minY-P,F.maxX+P,F.maxY+P,(ee,fe,_e,de)=>function(ge,Me,Ae,nt,ct){for(const Ze of ge)if(Me<=Ze.x&&Ae<=Ze.y&&nt>=Ze.x&&ct>=Ze.y)return!0;const Ke=[new $e(Me,Ae),new $e(Me,ct),new $e(nt,ct),new $e(nt,Ae)];if(ge.length>2){for(const Ze of Ke)if(Xl(ge,Ze))return!0}for(let Ze=0;Ze<ge.length-1;Ze++)if(JT(ge[Ze],ge[Ze+1],Ke))return!0;return!1}(n.cameraQueryGeometry,ee-P,fe-P,_e+P,de+P));for(const ee of U)D.push(ee);D.sort(TC);const j={};let te;for(let ee=0;ee<D.length;ee++){const fe=D[ee];if(fe===te)continue;te=fe;const _e=this.featureIndexArray.get(fe);let de=null;this.loadMatchingFeature(j,_e.bucketIndex,_e.sourceLayerIndex,_e.featureIndex,w,y.layers,y.availableImages,o,h,m,(ge,Me,Ae)=>(de||(de=Qs(ge)),Me.queryIntersectsFeature(S,ge,Ae,de,this.z,n.transform,_,n.pixelPosMatrix)))}return j}loadMatchingFeature(n,o,h,m,y,_,w,S,P,M,D){const F=this.bucketLayerIDs[o];if(_&&!function(ee,fe){for(let _e=0;_e<ee.length;_e++)if(fe.indexOf(ee[_e])>=0)return!0;return!1}(_,F))return;const U=this.sourceLayerCoder.decode(h),j=this.vtLayers[U].feature(m);if(y.needGeometry){const ee=el(j,!0);if(!y.filter(new gn(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!y.filter(new gn(this.tileID.overscaledZ),j))return;const te=this.getId(j,U);for(let ee=0;ee<F.length;ee++){const fe=F[ee];if(_&&_.indexOf(fe)<0)continue;const _e=S[fe];if(!_e)continue;let de={};te&&M&&(de=M.getState(_e.sourceLayer||"_geojsonTileLayer",te));const ge=ie({},P[fe]);ge.paint=Qx(ge.paint,_e.paint,j,de,w),ge.layout=Qx(ge.layout,_e.layout,j,de,w);const Me=!D||D(j,_e,de);if(!Me)continue;const Ae=new Kx(j,this.z,this.x,this.y,te);Ae.layer=ge;let nt=n[fe];nt===void 0&&(nt=n[fe]=[]),nt.push({featureIndex:m,feature:Ae,intersectionZ:Me})}}lookupSymbolFeatures(n,o,h,m,y,_,w,S){const P={};this.loadVTLayers();const M=Ul(y);for(const D of n)this.loadMatchingFeature(P,h,m,D,M,_,w,S,o);return P}hasLayer(n){for(const o of this.bucketLayerIDs)for(const h of o)if(n===h)return!0;return!1}getId(n,o){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof h=="boolean"&&(h=Number(h))),h}}function Qx(a,n,o,h,m){return Y(a,(y,_)=>{const w=n instanceof Ks?n.get(_):null;return w&&w.evaluate?w.evaluate(o,h,m):w})}function e1(a){let n=1/0,o=1/0,h=-1/0,m=-1/0;for(const y of a)n=Math.min(n,y.x),o=Math.min(o,y.y),h=Math.max(h,y.x),m=Math.max(m,y.y);return{minX:n,minY:o,maxX:h,maxY:m}}function TC(a,n){return n-a}var qg;it("FeatureIndex",Jx,{omit:["rawTileData","sourceLayerCoder"]}),c.PerformanceMarkers=void 0,(qg=c.PerformanceMarkers||(c.PerformanceMarkers={})).create="create",qg.load="load",qg.fullLoad="fullLoad";let bf=null,$u=[];const Wg=1e3/30,kC={mark(a){performance.mark(a)},frame(a){const n=a;bf!=null&&$u.push(n-bf),bf=n},clearMetrics(){bf=null,$u=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const a in c.PerformanceMarkers)performance.clearMarks(c.PerformanceMarkers[a])},getPerformanceMetrics(){performance.measure("loadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.load),performance.measure("fullLoadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.fullLoad);const a=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,o=$u.length,h=1/($u.reduce((y,_)=>y+_,0)/o/1e3),m=$u.filter(y=>y>Wg).reduce((y,_)=>y+(_-Wg)/Wg,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:m/(o+m)*100}}};c.AJAXError=Ur,c.ARRAY_TYPE=Lr,c.Actor=class{constructor(a,n,o){this.target=a,this.parent=n,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ye(["receive","process"],this),this.invoker=new SC(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=De()?a:window}send(a,n,o,h,m=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[y]=o);const _=Ct(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:a,hasCallback:!!o,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Xa(n,_)},_),{cancel:()=>{o&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(a){const n=a.data,o=n.id;if(o&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[o];const h=this.cancelCallbacks[o];delete this.cancelCallbacks[o],h&&h()}else De()||n.mustQueue?(this.tasks[o]=n,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,n)}process(){if(!this.taskQueue.length)return;const a=this.taskQueue.shift(),n=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(a,n)}processTask(a,n){if(n.type==="<response>"){const o=this.callbacks[a];delete this.callbacks[a],o&&(n.error?o(Ta(n.error)):o(null,Ta(n.data)))}else{let o=!1;const h=Ct(this.globalScope)?void 0:[],m=n.hasCallback?(w,S)=>{o=!0,delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:w?Xa(w):null,data:Xa(S,h)},h)}:w=>{o=!0};let y=null;const _=Ta(n.data);if(this.parent[n.type])y=this.parent[n.type](n.sourceMapId,_,m);else if(this.parent.getWorkerSource){const w=n.type.split(".");y=this.parent.getWorkerSource(n.sourceMapId,w[0],_.source)[w[1]](_,m)}else m(new Error(`Could not find function ${n.type}`));!o&&y&&y.cancel&&(this.cancelCallbacks[a]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.AlphaImage=Au,c.CanonicalTileID=Gg,c.CollisionBoxArray=ke,c.CollisionCircleLayoutArray=class extends z{},c.Color=q,c.DEMData=Xx,c.DataConstantProperty=dt,c.DictionaryCoder=Yx,c.EXTENT=qn,c.ErrorEvent=To,c.EvaluationParameters=gn,c.Event=Yi,c.Evented=Ki,c.FeatureIndex=Jx,c.FillBucket=Cg,c.FillExtrusionBucket=Ig,c.GeoJSONFeature=Kx,c.ImageAtlas=wx,c.ImagePosition=Dg,c.LineBucket=Ag,c.LineStripIndexArray=class extends J{},c.LngLat=kn,c.LngLatBounds=nl,c.MercatorCoordinate=xf,c.ONE_EM=or,c.OverscaledTileID=bi,c.PerformanceUtils=kC,c.PosArray=gt,c.Properties=ar,c.QuadTriangleArray=class extends ${},c.RGBAImage=xi,c.RasterBoundsArray=class extends f{},c.RequestPerformance=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},c.ResourceType=Hi,c.SegmentVector=Bt,c.SymbolBucket=nc,c.Transitionable=Xd,c.TriangleIndexArray=zr,c.Uniform1f=Qa,c.Uniform1i=class extends Ja{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},c.Uniform2f=class extends Ja{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},c.Uniform3f=class extends Ja{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},c.Uniform4f=Zl,c.UniformColor=N0,c.UniformMatrix4f=class extends Ja{constructor(a,n){super(a,n),this.current=ZT}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},c.UnwrappedTileID=Hx,c.ValidationError=He,c.ZoomHistory=mu,c.add=function(a,n,o){return a[0]=n[0]+o[0],a[1]=n[1]+o[1],a[2]=n[2]+o[2],a},c.addDynamicAttributes=Ng,c.asyncAll=function(a,n,o){if(!a.length)return o(null,[]);let h=a.length;const m=new Array(a.length);let y=null;a.forEach((_,w)=>{n(_,(S,P)=>{S&&(y=S),m[w]=P,--h==0&&o(y,m)})})},c.bezier=L,c.bindAll=ye,c.cacheEntryPossiblyAdded=function(a){rr++,rr>_r&&(a.getActor().send("enforceCacheSizeLimit",Jt),rr=0)},c.clamp=R,c.clearTileCache=function(a){const n=caches.delete(at);a&&n.catch(a).then(()=>a())},c.clipLine=Lx,c.clone=function(a){var n=new Lr(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},c.clone$1=H,c.clone$2=function(a){var n=new Lr(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n},c.collisionCircleLayout=Gk,c.config=Re,c.copy=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.create=function(){var a=new Lr(16);return Lr!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},c.create$1=W0,c.createExpression=Bs,c.createFilter=Ul,c.createLayout=Bn,c.createStyleLayer=function(a){return a.type==="custom"?new wC(a):new EC[a.type](a)},c.cross=function(a,n,o){var h=n[0],m=n[1],y=n[2],_=o[0],w=o[1],S=o[2];return a[0]=m*S-y*w,a[1]=y*_-h*S,a[2]=h*w-m*_,a},c.dot=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]},c.dot$1=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},c.ease=O,c.emitValidationErrors=Vl,c.enforceCacheSizeLimit=function(a){Hn(),ut&&ut.then(n=>{n.keys().then(o=>{for(let h=0;h<o.length-a;h++)n.delete(o[h])})})},c.equals=function(a,n){var o=a[0],h=a[1],m=a[2],y=a[3],_=a[4],w=a[5],S=a[6],P=a[7],M=a[8],D=a[9],F=a[10],U=a[11],j=a[12],te=a[13],ee=a[14],fe=a[15],_e=n[0],de=n[1],ge=n[2],Me=n[3],Ae=n[4],nt=n[5],ct=n[6],Ke=n[7],Ze=n[8],je=n[9],Je=n[10],Xe=n[11],Ne=n[12],yt=n[13],ft=n[14],Ot=n[15];return Math.abs(o-_e)<=Dr*Math.max(1,Math.abs(o),Math.abs(_e))&&Math.abs(h-de)<=Dr*Math.max(1,Math.abs(h),Math.abs(de))&&Math.abs(m-ge)<=Dr*Math.max(1,Math.abs(m),Math.abs(ge))&&Math.abs(y-Me)<=Dr*Math.max(1,Math.abs(y),Math.abs(Me))&&Math.abs(_-Ae)<=Dr*Math.max(1,Math.abs(_),Math.abs(Ae))&&Math.abs(w-nt)<=Dr*Math.max(1,Math.abs(w),Math.abs(nt))&&Math.abs(S-ct)<=Dr*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(P-Ke)<=Dr*Math.max(1,Math.abs(P),Math.abs(Ke))&&Math.abs(M-Ze)<=Dr*Math.max(1,Math.abs(M),Math.abs(Ze))&&Math.abs(D-je)<=Dr*Math.max(1,Math.abs(D),Math.abs(je))&&Math.abs(F-Je)<=Dr*Math.max(1,Math.abs(F),Math.abs(Je))&&Math.abs(U-Xe)<=Dr*Math.max(1,Math.abs(U),Math.abs(Xe))&&Math.abs(j-Ne)<=Dr*Math.max(1,Math.abs(j),Math.abs(Ne))&&Math.abs(te-yt)<=Dr*Math.max(1,Math.abs(te),Math.abs(yt))&&Math.abs(ee-ft)<=Dr*Math.max(1,Math.abs(ee),Math.abs(ft))&&Math.abs(fe-Ot)<=Dr*Math.max(1,Math.abs(fe),Math.abs(Ot))},c.evaluateSizeForFeature=function(a,{uSize:n,uSizeT:o},{lowerSize:h,upperSize:m}){return a.kind==="source"?h/no:a.kind==="composite"?pn(h/no,m/no,o):n},c.evaluateSizeForZoom=function(a,n){let o=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:_}=a,w=m?R(Gr.interpolationFactor(m,n,y,_),0,1):0;a.kind==="camera"?h=pn(a.minSize,a.maxSize,w):o=w}return{uSizeT:o,uSize:h}},c.evaluateVariableOffset=Bx,c.evented=wu,c.exported=Tt,c.exported$1=Vn,c.extend=ie,c.filterObject=V,c.fromRotation=function(a,n){var o=Math.sin(n),h=Math.cos(n);return a[0]=h,a[1]=o,a[2]=0,a[3]=-o,a[4]=h,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},c.fromScaling=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},c.getAnchorAlignment=Rg,c.getAnchorJustification=Bg,c.getArrayBuffer=So,c.getImage=ba,c.getJSON=function(a,n){return Eo(ie(a,{type:"json"}),n)},c.getOverlapMode=jg,c.getRTLTextPluginStatus=Xs,c.getReferrer=ks,c.getVideo=function(a,n){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(let h=0;h<a.length;h++){const m=window.document.createElement("source");Cs(a[h])||(o.crossOrigin="Anonymous"),m.src=a[h],o.appendChild(m)}return{cancel:()=>{}}},c.identity=vg,c.invert=function(a,n){var o=n[0],h=n[1],m=n[2],y=n[3],_=n[4],w=n[5],S=n[6],P=n[7],M=n[8],D=n[9],F=n[10],U=n[11],j=n[12],te=n[13],ee=n[14],fe=n[15],_e=o*w-h*_,de=o*S-m*_,ge=o*P-y*_,Me=h*S-m*w,Ae=h*P-y*w,nt=m*P-y*S,ct=M*te-D*j,Ke=M*ee-F*j,Ze=M*fe-U*j,je=D*ee-F*te,Je=D*fe-U*te,Xe=F*fe-U*ee,Ne=_e*Xe-de*Je+ge*je+Me*Ze-Ae*Ke+nt*ct;return Ne?(a[0]=(w*Xe-S*Je+P*je)*(Ne=1/Ne),a[1]=(m*Je-h*Xe-y*je)*Ne,a[2]=(te*nt-ee*Ae+fe*Me)*Ne,a[3]=(F*Ae-D*nt-U*Me)*Ne,a[4]=(S*Ze-_*Xe-P*Ke)*Ne,a[5]=(o*Xe-m*Ze+y*Ke)*Ne,a[6]=(ee*ge-j*nt-fe*de)*Ne,a[7]=(M*nt-F*ge+U*de)*Ne,a[8]=(_*Je-w*Ze+P*ct)*Ne,a[9]=(h*Ze-o*Je-y*ct)*Ne,a[10]=(j*Ae-te*ge+fe*_e)*Ne,a[11]=(D*ge-M*Ae-U*_e)*Ne,a[12]=(w*Ke-_*je-S*ct)*Ne,a[13]=(o*je-h*Ke+m*ct)*Ne,a[14]=(te*de-j*Me-ee*_e)*Ne,a[15]=(M*Me-D*de+F*_e)*Ne,a):null},c.isImageBitmap=Wt,c.isSafari=Ct,c.isWorker=De,c.keysDifference=function(a,n){const o=[];for(const h in a)h in n||o.push(h);return o},c.lazyLoadRTLTextPlugin=function(){ai.isLoading()||ai.isLoaded()||Xs()!=="deferred"||Hd()},c.makeRequest=Eo,c.mapObject=Y,c.mercatorXfromLng=Gx,c.mercatorYfromLat=qx,c.mercatorZfromAltitude=Wx,c.mul=tk,c.mul$1=function(a,n,o){return a[0]=n[0]*o[0],a[1]=n[1]*o[1],a[2]=n[2]*o[2],a[3]=n[3]*o[3],a},c.multiply=Z0,c.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},c.normalize=function(a,n){var o=n[0],h=n[1],m=n[2],y=o*o+h*h+m*m;return y>0&&(y=1/Math.sqrt(y)),a[0]=n[0]*y,a[1]=n[1]*y,a[2]=n[2]*y,a},c.number=pn,c.ortho=function(a,n,o,h,m,y,_){var w=1/(n-o),S=1/(h-m),P=1/(y-_);return a[0]=-2*w,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*S,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*P,a[11]=0,a[12]=(n+o)*w,a[13]=(m+h)*S,a[14]=(_+y)*P,a[15]=1,a},c.parseCacheControl=ot,c.parseGlyphPbf=function(a){return new Mg(a).readFields(tC,[])},c.pbf=Mg,c.performSymbolLayout=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=qn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0].layout,o=a.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:o["icon-size"].possiblyEvaluate(new gn(a.bucket.zoom+1),a.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new gn(a.bucket.zoom+1),a.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new gn(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:S,maxZoom:P}=a.bucket.textSizeData;h.compositeTextSizes=[o["text-size"].possiblyEvaluate(new gn(S),a.canonical),o["text-size"].possiblyEvaluate(new gn(P),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:S,maxZoom:P}=a.bucket.iconSizeData;h.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new gn(S),a.canonical),o["icon-size"].possiblyEvaluate(new gn(P),a.canonical)]}const m=n.get("text-line-height")*or,y=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",_=n.get("text-keep-upright"),w=n.get("text-size");for(const S of a.bucket.features){const P=n.get("text-font").evaluate(S,{},a.canonical).join(","),M=w.evaluate(S,{},a.canonical),D=h.layoutTextSize.evaluate(S,{},a.canonical),F=h.layoutIconSize.evaluate(S,{},a.canonical),U={horizontal:{},vertical:void 0},j=S.text;let te,ee=[0,0];if(j){const de=j.toString(),ge=n.get("text-letter-spacing").evaluate(S,{},a.canonical)*or,Me=ug(de)?ge:0,Ae=n.get("text-anchor").evaluate(S,{},a.canonical),nt=n.get("text-variable-anchor");if(!nt){const Je=n.get("text-radial-offset").evaluate(S,{},a.canonical);ee=Je?Bx(Ae,[Je*or,Og]):n.get("text-offset").evaluate(S,{},a.canonical).map(Xe=>Xe*or)}let ct=y?"center":n.get("text-justify").evaluate(S,{},a.canonical);const Ke=n.get("symbol-placement"),Ze=Ke==="point"?n.get("text-max-width").evaluate(S,{},a.canonical)*or:0,je=()=>{a.bucket.allowVerticalPlacement&&Gl(de)&&(U.vertical=df(j,a.glyphMap,a.glyphPositions,a.imagePositions,P,Ze,m,Ae,"left",Me,ee,c.WritingMode.vertical,!0,Ke,D,M))};if(!y&&nt){const Je=ct==="auto"?nt.map(Ne=>Bg(Ne)):[ct];let Xe=!1;for(let Ne=0;Ne<Je.length;Ne++){const yt=Je[Ne];if(!U.horizontal[yt])if(Xe)U.horizontal[yt]=U.horizontal[0];else{const ft=df(j,a.glyphMap,a.glyphPositions,a.imagePositions,P,Ze,m,"center",yt,Me,ee,c.WritingMode.horizontal,!1,Ke,D,M);ft&&(U.horizontal[yt]=ft,Xe=ft.positionedLines.length===1)}}je()}else{ct==="auto"&&(ct=Bg(Ae));const Je=df(j,a.glyphMap,a.glyphPositions,a.imagePositions,P,Ze,m,Ae,ct,Me,ee,c.WritingMode.horizontal,!1,Ke,D,M);Je&&(U.horizontal[ct]=Je),je(),Gl(de)&&y&&_&&(U.vertical=df(j,a.glyphMap,a.glyphPositions,a.imagePositions,P,Ze,m,Ae,ct,Me,ee,c.WritingMode.vertical,!1,Ke,D,M))}}let fe=!1;if(S.icon&&S.icon.name){const de=a.imageMap[S.icon.name];de&&(te=sC(a.imagePositions[S.icon.name],n.get("icon-offset").evaluate(S,{},a.canonical),n.get("icon-anchor").evaluate(S,{},a.canonical)),fe=!!de.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=fe:a.bucket.sdfIcons!==fe&&xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(de.pixelRatio!==a.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const _e=Fx(U.horizontal)||U.vertical;a.bucket.iconsInText=!!_e&&_e.iconsInText,(_e||te)&&pC(a.bucket,S,U,te,a.imageMap,h,D,F,ee,fe,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},c.perspective=function(a,n,o,h,m){var y,_=1/Math.tan(n/2);return a[0]=_/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=_,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+h)*(y=1/(h-m)),a[14]=2*m*h*y):(a[10]=-1,a[14]=-2*h),a},c.pick=function(a,n){const o={};for(let h=0;h<n.length;h++){const m=n[h];m in a&&(o[m]=a[m])}return o},c.plugin=ai,c.pointGeometry=$e,c.polygonIntersectsPolygon=j0,c.potpack=bx,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=it,c.registerForPluginStateChange=function(a){return a({pluginStatus:Mr,pluginURL:ka}),wu.on("pluginStateChange",a),a},c.renderColorRamp=ex,c.rotateX=function(a,n,o){var h=Math.sin(o),m=Math.cos(o),y=n[4],_=n[5],w=n[6],S=n[7],P=n[8],M=n[9],D=n[10],F=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=y*m+P*h,a[5]=_*m+M*h,a[6]=w*m+D*h,a[7]=S*m+F*h,a[8]=P*m-y*h,a[9]=M*m-_*h,a[10]=D*m-w*h,a[11]=F*m-S*h,a},c.rotateZ=function(a,n,o){var h=Math.sin(o),m=Math.cos(o),y=n[0],_=n[1],w=n[2],S=n[3],P=n[4],M=n[5],D=n[6],F=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=y*m+P*h,a[1]=_*m+M*h,a[2]=w*m+D*h,a[3]=S*m+F*h,a[4]=P*m-y*h,a[5]=M*m-_*h,a[6]=D*m-w*h,a[7]=F*m-S*h,a},c.scale=function(a,n,o){var h=o[0],m=o[1],y=o[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*y,a[9]=n[9]*y,a[10]=n[10]*y,a[11]=n[11]*y,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.scale$1=function(a,n,o){return a[0]=n[0]*o,a[1]=n[1]*o,a[2]=n[2]*o,a},c.setCacheLimits=function(a,n){Jt=a,_r=n},c.setRTLTextPlugin=function(a,n,o=!1){if(Mr===vu||Mr===_u||Mr===xu)throw new Error("setRTLTextPlugin cannot be called multiple times.");ka=Tt.resolveURL(a),Mr=vu,bu=n,Fo(),o||Hd()},c.spec=Pe,c.sphericalToCartesian=function([a,n,o]){return n+=90,n*=Math.PI/180,o*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(o),y:a*Math.sin(n)*Math.sin(o),z:a*Math.cos(o)}},c.sqrLen=function(a){var n=a[0],o=a[1];return n*n+o*o},c.sub=function(a,n,o){return a[0]=n[0]-o[0],a[1]=n[1]-o[1],a[2]=n[2]-o[2],a},c.toEvaluationFeature=el,c.transformMat3=function(a,n,o){var h=n[0],m=n[1],y=n[2];return a[0]=h*o[0]+m*o[3]+y*o[6],a[1]=h*o[1]+m*o[4]+y*o[7],a[2]=h*o[2]+m*o[5]+y*o[8],a},c.transformMat4=rf,c.transformMat4$1=function(a,n,o){var h=n[0],m=n[1];return a[0]=o[0]*h+o[4]*m+o[12],a[1]=o[1]*h+o[5]*m+o[13],a},c.translate=function(a,n,o){var h,m,y,_,w,S,P,M,D,F,U,j,te=o[0],ee=o[1],fe=o[2];return n===a?(a[12]=n[0]*te+n[4]*ee+n[8]*fe+n[12],a[13]=n[1]*te+n[5]*ee+n[9]*fe+n[13],a[14]=n[2]*te+n[6]*ee+n[10]*fe+n[14],a[15]=n[3]*te+n[7]*ee+n[11]*fe+n[15]):(m=n[1],y=n[2],_=n[3],w=n[4],S=n[5],P=n[6],M=n[7],D=n[8],F=n[9],U=n[10],j=n[11],a[0]=h=n[0],a[1]=m,a[2]=y,a[3]=_,a[4]=w,a[5]=S,a[6]=P,a[7]=M,a[8]=D,a[9]=F,a[10]=U,a[11]=j,a[12]=h*te+w*ee+D*fe+n[12],a[13]=m*te+S*ee+F*fe+n[13],a[14]=y*te+P*ee+U*fe+n[14],a[15]=_*te+M*ee+j*fe+n[15]),a},c.triggerPluginCompletionEvent=Zd,c.unicodeBlockLookup=Ye,c.uniqueId=function(){return ae++},c.validateCustomStyleLayer=function(a){const n=[],o=a.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},c.validateLight=pu,c.validateStyle=Zs,c.vectorTile=Vo,c.warnOnce=xe,c.wrap=Q}),p(["./shared"],function(c){function E(W){const A=typeof W;if(A==="number"||A==="boolean"||A==="string"||W==null)return JSON.stringify(W);if(Array.isArray(W)){let q="[";for(const ne of W)q+=`${E(ne)},`;return`${q}]`}const B=Object.keys(W).sort();let G="{";for(let q=0;q<B.length;q++)G+=`${JSON.stringify(B[q])}:${E(W[B[q]])},`;return`${G}}`}function C(W){let A="";for(const B of c.refProperties)A+=`/${E(W[B])}`;return A}class L{constructor(A){this.keyCache={},A&&this.replace(A)}replace(A){this._layerConfigs={},this._layers={},this.update(A,[])}update(A,B){for(const q of A){this._layerConfigs[q.id]=q;const ne=this._layers[q.id]=c.createStyleLayer(q);ne._featureFilter=c.createFilter(ne.filter),this.keyCache[q.id]&&delete this.keyCache[q.id]}for(const q of B)delete this.keyCache[q],delete this._layerConfigs[q],delete this._layers[q];this.familiesBySource={};const G=function(q,ne){const le={};for(let re=0;re<q.length;re++){const ue=ne&&ne[q[re].id]||C(q[re]);ne&&(ne[q[re].id]=ue);let Se=le[ue];Se||(Se=le[ue]=[]),Se.push(q[re])}const oe=[];for(const re in le)oe.push(le[re]);return oe}(Object.values(this._layerConfigs),this.keyCache);for(const q of G){const ne=q.map(Le=>this._layers[Le.id]),le=ne[0];if(le.visibility==="none")continue;const oe=le.source||"";let re=this.familiesBySource[oe];re||(re=this.familiesBySource[oe]={});const ue=le.sourceLayer||"_geojsonTileLayer";let Se=re[ue];Se||(Se=re[ue]=[]),Se.push(ne)}}}class O{constructor(A){const B={},G=[];for(const oe in A){const re=A[oe],ue=B[oe]={};for(const Se in re){const Le=re[+Se];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const be={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};G.push(be),ue[Se]={rect:be,metrics:Le.metrics}}}const{w:q,h:ne}=c.potpack(G),le=new c.AlphaImage({width:q||1,height:ne||1});for(const oe in A){const re=A[oe];for(const ue in re){const Se=re[+ue];if(!Se||Se.bitmap.width===0||Se.bitmap.height===0)continue;const Le=B[oe][ue].rect;c.AlphaImage.copy(Se.bitmap,le,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Se.bitmap)}}this.image=le,this.positions=B}}c.register("GlyphAtlas",O);class R{constructor(A){this.tileID=new c.OverscaledTileID(A.tileID.overscaledZ,A.tileID.wrap,A.tileID.canonical.z,A.tileID.canonical.x,A.tileID.canonical.y),this.uid=A.uid,this.zoom=A.zoom,this.pixelRatio=A.pixelRatio,this.tileSize=A.tileSize,this.source=A.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=A.showCollisionBoxes,this.collectResourceTiming=!!A.collectResourceTiming,this.returnDependencies=!!A.returnDependencies,this.promoteId=A.promoteId}parse(A,B,G,q,ne){this.status="parsing",this.data=A,this.collisionBoxArray=new c.CollisionBoxArray;const le=new c.DictionaryCoder(Object.keys(A.layers).sort()),oe=new c.FeatureIndex(this.tileID,this.promoteId);oe.bucketLayerIDs=[];const re={},ue={featureIndex:oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},Se=B.familiesBySource[this.source];for(const kt in Se){const Lt=A.layers[kt];if(!Lt)continue;Lt.version===1&&c.warnOnce(`Vector tile source "${this.source}" layer "${kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Gt=le.encode(kt),an=[];for(let Yn=0;Yn<Lt.length;Yn++){const fn=Lt.feature(Yn),dr=oe.getId(fn,kt);an.push({feature:fn,id:dr,index:Yn,sourceLayerIndex:Gt})}for(const Yn of Se[kt]){const fn=Yn[0];fn.source!==this.source&&c.warnOnce(`layer.source = ${fn.source} does not equal this.source = ${this.source}`),fn.minzoom&&this.zoom<Math.floor(fn.minzoom)||fn.maxzoom&&this.zoom>=fn.maxzoom||fn.visibility!=="none"&&(Q(Yn,this.zoom,G),(re[fn.id]=fn.createBucket({index:oe.bucketLayerIDs.length,layers:Yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gt,sourceID:this.source})).populate(an,ue,this.tileID.canonical),oe.bucketLayerIDs.push(Yn.map(dr=>dr.id)))}}let Le,be,lt,ht;const Qe=c.mapObject(ue.glyphDependencies,kt=>Object.keys(kt).map(Number));Object.keys(Qe).length?q.send("getGlyphs",{uid:this.uid,stacks:Qe},(kt,Lt)=>{Le||(Le=kt,be=Lt,Vt.call(this))}):be={};const bt=Object.keys(ue.iconDependencies);bt.length?q.send("getImages",{icons:bt,source:this.source,tileID:this.tileID,type:"icons"},(kt,Lt)=>{Le||(Le=kt,lt=Lt,Vt.call(this))}):lt={};const Et=Object.keys(ue.patternDependencies);function Vt(){if(Le)return ne(Le);if(be&&lt&&ht){const kt=new O(be),Lt=new c.ImageAtlas(lt,ht);for(const Gt in re){const an=re[Gt];an instanceof c.SymbolBucket?(Q(an.layers,this.zoom,G),c.performSymbolLayout({bucket:an,glyphMap:be,glyphPositions:kt.positions,imageMap:lt,imagePositions:Lt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):an.hasPattern&&(an instanceof c.LineBucket||an instanceof c.FillBucket||an instanceof c.FillExtrusionBucket)&&(Q(an.layers,this.zoom,G),an.addFeatures(ue,this.tileID.canonical,Lt.patternPositions))}this.status="done",ne(null,{buckets:Object.values(re).filter(Gt=>!Gt.isEmpty()),featureIndex:oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kt.image,imageAtlas:Lt,glyphMap:this.returnDependencies?be:null,iconMap:this.returnDependencies?lt:null,glyphPositions:this.returnDependencies?kt.positions:null})}}Et.length?q.send("getImages",{icons:Et,source:this.source,tileID:this.tileID,type:"patterns"},(kt,Lt)=>{Le||(Le=kt,ht=Lt,Vt.call(this))}):ht={},Vt.call(this)}}function Q(W,A,B){const G=new c.EvaluationParameters(A);for(const q of W)q.recalculate(G,B)}function ie(W,A){const B=c.getArrayBuffer(W.request,(G,q,ne,le)=>{G?A(G):q&&A(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(q)),rawData:q,cacheControl:ne,expires:le})});return()=>{B.cancel(),A()}}class ae{constructor(A,B,G,q){this.actor=A,this.layerIndex=B,this.availableImages=G,this.loadVectorData=q||ie,this.loading={},this.loaded={}}loadTile(A,B){const G=A.uid;this.loading||(this.loading={});const q=!!(A&&A.request&&A.request.collectResourceTiming)&&new c.RequestPerformance(A.request),ne=this.loading[G]=new R(A);ne.abort=this.loadVectorData(A,(le,oe)=>{if(delete this.loading[G],le||!oe)return ne.status="done",this.loaded[G]=ne,B(le);const re=oe.rawData,ue={};oe.expires&&(ue.expires=oe.expires),oe.cacheControl&&(ue.cacheControl=oe.cacheControl);const Se={};if(q){const Le=q.finish();Le&&(Se.resourceTiming=JSON.parse(JSON.stringify(Le)))}ne.vectorTile=oe.vectorTile,ne.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Le,be)=>{if(Le||!be)return B(Le);B(null,c.extend({rawTileData:re.slice(0)},be,ue,Se))}),this.loaded=this.loaded||{},this.loaded[G]=ne})}reloadTile(A,B){const G=this.loaded,q=A.uid,ne=this;if(G&&G[q]){const le=G[q];le.showCollisionBoxes=A.showCollisionBoxes;const oe=(re,ue)=>{const Se=le.reloadCallback;Se&&(delete le.reloadCallback,le.parse(le.vectorTile,ne.layerIndex,this.availableImages,ne.actor,Se)),B(re,ue)};le.status==="parsing"?le.reloadCallback=oe:le.status==="done"&&(le.vectorTile?le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,oe):oe())}}abortTile(A,B){const G=this.loading,q=A.uid;G&&G[q]&&G[q].abort&&(G[q].abort(),delete G[q]),B()}removeTile(A,B){const G=this.loaded,q=A.uid;G&&G[q]&&delete G[q],B()}}class ye{constructor(){this.loaded={}}loadTile(A,B){const{uid:G,encoding:q,rawImageData:ne}=A,le=c.isImageBitmap(ne)?this.getImageData(ne):ne,oe=new c.DEMData(G,le,q);this.loaded=this.loaded||{},this.loaded[G]=oe,B(null,oe)}getImageData(A){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(A.width,A.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=A.width,this.offscreenCanvas.height=A.height,this.offscreenCanvasContext.drawImage(A,0,0,A.width,A.height);const B=this.offscreenCanvasContext.getImageData(-1,-1,A.width+2,A.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:B.width,height:B.height},B.data)}removeTile(A){const B=this.loaded,G=A.uid;B&&B[G]&&delete B[G]}}var Y=function W(A,B){var G,q=A&&A.type;if(q==="FeatureCollection")for(G=0;G<A.features.length;G++)W(A.features[G],B);else if(q==="GeometryCollection")for(G=0;G<A.geometries.length;G++)W(A.geometries[G],B);else if(q==="Feature")W(A.geometry,B);else if(q==="Polygon")V(A.coordinates,B);else if(q==="MultiPolygon")for(G=0;G<A.coordinates.length;G++)V(A.coordinates[G],B);return A};function V(W,A){if(W.length!==0){H(W[0],A);for(var B=1;B<W.length;B++)H(W[B],!A)}}function H(W,A){for(var B=0,G=0,q=0,ne=W.length,le=ne-1;q<ne;le=q++){var oe=(W[q][0]-W[le][0])*(W[le][1]+W[q][1]),re=B+oe;G+=Math.abs(B)>=Math.abs(oe)?B-re+oe:oe-re+B,B=re}B+G>=0!=!!A&&W.reverse()}const ce=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;class xe{constructor(A){this._feature=A,this.extent=c.EXTENT,this.type=A.type,this.properties=A.tags,"id"in A&&!isNaN(A.id)&&(this.id=parseInt(A.id,10))}loadGeometry(){if(this._feature.type===1){const A=[];for(const B of this._feature.geometry)A.push([new c.pointGeometry(B[0],B[1])]);return A}{const A=[];for(const B of this._feature.geometry){const G=[];for(const q of B)G.push(new c.pointGeometry(q[0],q[1]));A.push(G)}return A}}toGeoJSON(A,B,G){return ce.call(this,A,B,G)}}class Ee{constructor(A){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=A.length,this._features=A}feature(A){return new xe(this._features[A])}}var ze={exports:{}},De=c.pointGeometry,ot=c.vectorTile.VectorTileFeature,Fe=St;function St(W,A){this.options=A||{},this.features=W,this.length=W.length}function Mt(W,A){this.id=typeof W.id=="number"?W.id:void 0,this.type=W.type,this.rawGeometry=W.type===1?[W.geometry]:W.geometry,this.properties=W.tags,this.extent=A||4096}St.prototype.feature=function(W){return new Mt(this.features[W],this.options.extent)},Mt.prototype.loadGeometry=function(){var W=this.rawGeometry;this.geometry=[];for(var A=0;A<W.length;A++){for(var B=W[A],G=[],q=0;q<B.length;q++)G.push(new De(B[q][0],B[q][1]));this.geometry.push(G)}return this.geometry},Mt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var W=this.geometry,A=1/0,B=-1/0,G=1/0,q=-1/0,ne=0;ne<W.length;ne++)for(var le=W[ne],oe=0;oe<le.length;oe++){var re=le[oe];A=Math.min(A,re.x),B=Math.max(B,re.x),G=Math.min(G,re.y),q=Math.max(q,re.y)}return[A,G,B,q]},Mt.prototype.toGeoJSON=ot.prototype.toGeoJSON;var Ct=c.pbf,Wt=Fe;function Tt(W){var A=new Ct;return function(B,G){for(var q in B.layers)G.writeMessage(3,$e,B.layers[q])}(W,A),A.finish()}function $e(W,A){var B;A.writeVarintField(15,W.version||1),A.writeStringField(1,W.name||""),A.writeVarintField(5,W.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<W.length;B++)G.feature=W.feature(B),A.writeMessage(2,vt,G);var q=G.keys;for(B=0;B<q.length;B++)A.writeStringField(3,q[B]);var ne=G.values;for(B=0;B<ne.length;B++)A.writeMessage(4,Jt,ne[B])}function vt(W,A){var B=W.feature;B.id!==void 0&&A.writeVarintField(1,B.id),A.writeMessage(2,Re,W),A.writeVarintField(3,B.type),A.writeMessage(4,Yt,B)}function Re(W,A){var B=W.feature,G=W.keys,q=W.values,ne=W.keycache,le=W.valuecache;for(var oe in B.properties){var re=B.properties[oe],ue=ne[oe];if(re!==null){ue===void 0&&(G.push(oe),ne[oe]=ue=G.length-1),A.writeVarint(ue);var Se=typeof re;Se!=="string"&&Se!=="boolean"&&Se!=="number"&&(re=JSON.stringify(re));var Le=Se+":"+re,be=le[Le];be===void 0&&(q.push(re),le[Le]=be=q.length-1),A.writeVarint(be)}}}function at(W,A){return(A<<3)+(7&W)}function ut(W){return W<<1^W>>31}function Yt(W,A){for(var B=W.loadGeometry(),G=W.type,q=0,ne=0,le=B.length,oe=0;oe<le;oe++){var re=B[oe],ue=1;G===1&&(ue=re.length),A.writeVarint(at(1,ue));for(var Se=G===3?re.length-1:re.length,Le=0;Le<Se;Le++){Le===1&&G!==1&&A.writeVarint(at(2,Se-1));var be=re[Le].x-q,lt=re[Le].y-ne;A.writeVarint(ut(be)),A.writeVarint(ut(lt)),q+=be,ne+=lt}G===3&&A.writeVarint(at(7,1))}}function Jt(W,A){var B=typeof W;B==="string"?A.writeStringField(1,W):B==="boolean"?A.writeBooleanField(7,W):B==="number"&&(W%1!=0?A.writeDoubleField(3,W):W<0?A.writeSVarintField(6,W):A.writeVarintField(5,W))}function _r(W,A,B,G,q,ne){if(q-G<=B)return;const le=G+q>>1;Hn(W,A,le,G,q,ne%2),_r(W,A,B,G,le-1,ne+1),_r(W,A,B,le+1,q,ne+1)}function Hn(W,A,B,G,q,ne){for(;q>G;){if(q-G>600){const ue=q-G+1,Se=B-G+1,Le=Math.log(ue),be=.5*Math.exp(2*Le/3),lt=.5*Math.sqrt(Le*be*(ue-be)/ue)*(Se-ue/2<0?-1:1);Hn(W,A,B,Math.max(G,Math.floor(B-Se*be/ue+lt)),Math.min(q,Math.floor(B+(ue-Se)*be/ue+lt)),ne)}const le=A[2*B+ne];let oe=G,re=q;for(rr(W,A,G,B),A[2*q+ne]>le&&rr(W,A,G,q);oe<re;){for(rr(W,A,oe,re),oe++,re--;A[2*oe+ne]<le;)oe++;for(;A[2*re+ne]>le;)re--}A[2*G+ne]===le?rr(W,A,G,re):(re++,rr(W,A,re,q)),re<=B&&(G=re+1),B<=re&&(q=re-1)}}function rr(W,A,B,G){Vn(W,B,G),Vn(A,2*B,2*G),Vn(A,2*B+1,2*G+1)}function Vn(W,A,B){const G=W[A];W[A]=W[B],W[B]=G}function hr(W,A,B,G){const q=W-B,ne=A-G;return q*q+ne*ne}ze.exports=Tt,ze.exports.fromVectorTileJs=Tt,ze.exports.fromGeojsonVt=function(W,A){A=A||{};var B={};for(var G in W)B[G]=new Wt(W[G].features,A),B[G].name=G,B[G].version=A.version,B[G].extent=A.extent;return Tt({layers:B})},ze.exports.GeoJSONWrapper=Wt;const gi=W=>W[0],Ar=W=>W[1];class wo{constructor(A,B=gi,G=Ar,q=64,ne=Float64Array){this.nodeSize=q,this.points=A;const le=A.length<65536?Uint16Array:Uint32Array,oe=this.ids=new le(A.length),re=this.coords=new ne(2*A.length);for(let ue=0;ue<A.length;ue++)oe[ue]=ue,re[2*ue]=B(A[ue]),re[2*ue+1]=G(A[ue]);_r(oe,re,q,0,oe.length-1,0)}range(A,B,G,q){return function(ne,le,oe,re,ue,Se,Le){const be=[0,ne.length-1,0],lt=[];let ht,Qe;for(;be.length;){const bt=be.pop(),Et=be.pop(),Vt=be.pop();if(Et-Vt<=Le){for(let Gt=Vt;Gt<=Et;Gt++)ht=le[2*Gt],Qe=le[2*Gt+1],ht>=oe&&ht<=ue&&Qe>=re&&Qe<=Se&&lt.push(ne[Gt]);continue}const kt=Math.floor((Vt+Et)/2);ht=le[2*kt],Qe=le[2*kt+1],ht>=oe&&ht<=ue&&Qe>=re&&Qe<=Se&&lt.push(ne[kt]);const Lt=(bt+1)%2;(bt===0?oe<=ht:re<=Qe)&&(be.push(Vt),be.push(kt-1),be.push(Lt)),(bt===0?ue>=ht:Se>=Qe)&&(be.push(kt+1),be.push(Et),be.push(Lt))}return lt}(this.ids,this.coords,A,B,G,q,this.nodeSize)}within(A,B,G){return function(q,ne,le,oe,re,ue){const Se=[0,q.length-1,0],Le=[],be=re*re;for(;Se.length;){const lt=Se.pop(),ht=Se.pop(),Qe=Se.pop();if(ht-Qe<=ue){for(let Lt=Qe;Lt<=ht;Lt++)hr(ne[2*Lt],ne[2*Lt+1],le,oe)<=be&&Le.push(q[Lt]);continue}const bt=Math.floor((Qe+ht)/2),Et=ne[2*bt],Vt=ne[2*bt+1];hr(Et,Vt,le,oe)<=be&&Le.push(q[bt]);const kt=(lt+1)%2;(lt===0?le-re<=Et:oe-re<=Vt)&&(Se.push(Qe),Se.push(bt-1),Se.push(kt)),(lt===0?le+re>=Et:oe+re>=Vt)&&(Se.push(bt+1),Se.push(ht),Se.push(kt))}return Le}(this.ids,this.coords,A,B,G,this.nodeSize)}}const Ts={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:W=>W},Hi=Math.fround||(Ur=new Float32Array(1),W=>(Ur[0]=+W,Ur[0]));var Ur;class ks{constructor(A){this.options=ba(Object.create(Ts),A),this.trees=new Array(this.options.maxZoom+1)}load(A){const{log:B,minZoom:G,maxZoom:q,nodeSize:ne}=this.options;B&&console.time("total time");const le=`prepare ${A.length} points`;B&&console.time(le),this.points=A;let oe=[];for(let re=0;re<A.length;re++)A[re].geometry&&oe.push(Eo(A[re],re));this.trees[q+1]=new wo(oe,Ps,Xi,ne,Float32Array),B&&console.timeEnd(le);for(let re=q;re>=G;re--){const ue=+Date.now();oe=this._cluster(oe,re),this.trees[re]=new wo(oe,Ps,Xi,ne,Float32Array),B&&console.log("z%d: %d clusters in %dms",re,oe.length,+Date.now()-ue)}return B&&console.timeEnd("total time"),this}getClusters(A,B){let G=((A[0]+180)%360+360)%360-180;const q=Math.max(-90,Math.min(90,A[1]));let ne=A[2]===180?180:((A[2]+180)%360+360)%360-180;const le=Math.max(-90,Math.min(90,A[3]));if(A[2]-A[0]>=360)G=-180,ne=180;else if(G>ne){const Se=this.getClusters([G,q,180,le],B),Le=this.getClusters([-180,q,ne,le],B);return Se.concat(Le)}const oe=this.trees[this._limitZoom(B)],re=oe.range(Ut(G),Di(le),Ut(ne),Di(q)),ue=[];for(const Se of re){const Le=oe.points[Se];ue.push(Le.numPoints?So(Le):this.points[Le.index])}return ue}getChildren(A){const B=this._getOriginId(A),G=this._getOriginZoom(A),q="No cluster with the specified id.",ne=this.trees[G];if(!ne)throw new Error(q);const le=ne.points[B];if(!le)throw new Error(q);const oe=this.options.radius/(this.options.extent*Math.pow(2,G-1)),re=ne.within(le.x,le.y,oe),ue=[];for(const Se of re){const Le=ne.points[Se];Le.parentId===A&&ue.push(Le.numPoints?So(Le):this.points[Le.index])}if(ue.length===0)throw new Error(q);return ue}getLeaves(A,B,G){const q=[];return this._appendLeaves(q,A,B=B||10,G=G||0,0),q}getTile(A,B,G){const q=this.trees[this._limitZoom(A)],ne=Math.pow(2,A),{extent:le,radius:oe}=this.options,re=oe/le,ue=(G-re)/ne,Se=(G+1+re)/ne,Le={features:[]};return this._addTileFeatures(q.range((B-re)/ne,ue,(B+1+re)/ne,Se),q.points,B,G,ne,Le),B===0&&this._addTileFeatures(q.range(1-re/ne,ue,1,Se),q.points,ne,G,ne,Le),B===ne-1&&this._addTileFeatures(q.range(0,ue,re/ne,Se),q.points,-1,G,ne,Le),Le.features.length?Le:null}getClusterExpansionZoom(A){let B=this._getOriginZoom(A)-1;for(;B<=this.options.maxZoom;){const G=this.getChildren(A);if(B++,G.length!==1)break;A=G[0].properties.cluster_id}return B}_appendLeaves(A,B,G,q,ne){const le=this.getChildren(B);for(const oe of le){const re=oe.properties;if(re&&re.cluster?ne+re.point_count<=q?ne+=re.point_count:ne=this._appendLeaves(A,re.cluster_id,G,q,ne):ne<q?ne++:A.push(oe),A.length===G)break}return ne}_addTileFeatures(A,B,G,q,ne,le){for(const oe of A){const re=B[oe],ue=re.numPoints;let Se,Le,be;if(ue)Se=Cs(re),Le=re.x,be=re.y;else{const Qe=this.points[re.index];Se=Qe.properties,Le=Ut(Qe.geometry.coordinates[0]),be=Di(Qe.geometry.coordinates[1])}const lt={type:1,geometry:[[Math.round(this.options.extent*(Le*ne-G)),Math.round(this.options.extent*(be*ne-q))]],tags:Se};let ht;ue?ht=re.id:this.options.generateId?ht=re.index:this.points[re.index].id&&(ht=this.points[re.index].id),ht!==void 0&&(lt.id=ht),le.features.push(lt)}}_limitZoom(A){return Math.max(this.options.minZoom,Math.min(Math.floor(+A),this.options.maxZoom+1))}_cluster(A,B){const G=[],{radius:q,extent:ne,reduce:le,minPoints:oe}=this.options,re=q/(ne*Math.pow(2,B));for(let ue=0;ue<A.length;ue++){const Se=A[ue];if(Se.zoom<=B)continue;Se.zoom=B;const Le=this.trees[B+1],be=Le.within(Se.x,Se.y,re),lt=Se.numPoints||1;let ht=lt;for(const Qe of be){const bt=Le.points[Qe];bt.zoom>B&&(ht+=bt.numPoints||1)}if(ht>lt&&ht>=oe){let Qe=Se.x*lt,bt=Se.y*lt,Et=le&&lt>1?this._map(Se,!0):null;const Vt=(ue<<5)+(B+1)+this.points.length;for(const kt of be){const Lt=Le.points[kt];if(Lt.zoom<=B)continue;Lt.zoom=B;const Gt=Lt.numPoints||1;Qe+=Lt.x*Gt,bt+=Lt.y*Gt,Lt.parentId=Vt,le&&(Et||(Et=this._map(Se,!0)),le(Et,this._map(Lt)))}Se.parentId=Vt,G.push(_a(Qe/ht,bt/ht,Vt,ht,Et))}else if(G.push(Se),ht>1)for(const Qe of be){const bt=Le.points[Qe];bt.zoom<=B||(bt.zoom=B,G.push(bt))}}return G}_getOriginId(A){return A-this.points.length>>5}_getOriginZoom(A){return(A-this.points.length)%32}_map(A,B){if(A.numPoints)return B?ba({},A.properties):A.properties;const G=this.points[A.index].properties,q=this.options.map(G);return B&&q===G?ba({},q):q}}function _a(W,A,B,G,q){return{x:Hi(W),y:Hi(A),zoom:1/0,id:B,parentId:-1,numPoints:G,properties:q}}function Eo(W,A){const[B,G]=W.geometry.coordinates;return{x:Hi(Ut(B)),y:Hi(Di(G)),zoom:1/0,index:A,parentId:-1}}function So(W){return{type:"Feature",id:W.id,properties:Cs(W),geometry:{type:"Point",coordinates:[(A=W.x,360*(A-.5)),xa(W.y)]}};var A}function Cs(W){const A=W.numPoints,B=A>=1e4?`${Math.round(A/1e3)}k`:A>=1e3?Math.round(A/100)/10+"k":A;return ba(ba({},W.properties),{cluster:!0,cluster_id:W.id,point_count:A,point_count_abbreviated:B})}function Ut(W){return W/360+.5}function Di(W){const A=Math.sin(W*Math.PI/180),B=.5-.25*Math.log((1+A)/(1-A))/Math.PI;return B<0?0:B>1?1:B}function xa(W){const A=(180-360*W)*Math.PI/180;return 360*Math.atan(Math.exp(A))/Math.PI-90}function ba(W,A){for(const B in A)W[B]=A[B];return W}function Ps(W){return W.x}function Xi(W){return W.y}function Yi(W,A,B,G){for(var q,ne=G,le=B-A>>1,oe=B-A,re=W[A],ue=W[A+1],Se=W[B],Le=W[B+1],be=A+3;be<B;be+=3){var lt=To(W[be],W[be+1],re,ue,Se,Le);if(lt>ne)q=be,ne=lt;else if(lt===ne){var ht=Math.abs(be-le);ht<oe&&(q=be,oe=ht)}}ne>G&&(q-A>3&&Yi(W,A,q,G),W[q+2]=ne,B-q>3&&Yi(W,q,B,G))}function To(W,A,B,G,q,ne){var le=q-B,oe=ne-G;if(le!==0||oe!==0){var re=((W-B)*le+(A-G)*oe)/(le*le+oe*oe);re>1?(B=q,G=ne):re>0&&(B+=le*re,G+=oe*re)}return(le=W-B)*le+(oe=A-G)*oe}function Ki(W,A,B,G){var q={id:W===void 0?null:W,type:A,geometry:B,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ne){var le=ne.geometry,oe=ne.type;if(oe==="Point"||oe==="MultiPoint"||oe==="LineString")Pe(ne,le);else if(oe==="Polygon"||oe==="MultiLineString")for(var re=0;re<le.length;re++)Pe(ne,le[re]);else if(oe==="MultiPolygon")for(re=0;re<le.length;re++)for(var ue=0;ue<le[re].length;ue++)Pe(ne,le[re][ue])}(q),q}function Pe(W,A){for(var B=0;B<A.length;B+=3)W.minX=Math.min(W.minX,A[B]),W.minY=Math.min(W.minY,A[B+1]),W.maxX=Math.max(W.maxX,A[B]),W.maxY=Math.max(W.maxY,A[B+1])}function He(W,A,B,G){if(A.geometry){var q=A.geometry.coordinates,ne=A.geometry.type,le=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),oe=[],re=A.id;if(B.promoteId?re=A.properties[B.promoteId]:B.generateId&&(re=G||0),ne==="Point")ja(q,oe);else if(ne==="MultiPoint")for(var ue=0;ue<q.length;ue++)ja(q[ue],oe);else if(ne==="LineString")yi(q,oe,le,!1);else if(ne==="MultiLineString"){if(B.lineMetrics){for(ue=0;ue<q.length;ue++)yi(q[ue],oe=[],le,!1),W.push(Ki(re,"LineString",oe,A.properties));return}jt(q,oe,le,!1)}else if(ne==="Polygon")jt(q,oe,le,!0);else{if(ne!=="MultiPolygon"){if(ne==="GeometryCollection"){for(ue=0;ue<A.geometry.geometries.length;ue++)He(W,{id:re,geometry:A.geometry.geometries[ue],properties:A.properties},B,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ue=0;ue<q.length;ue++){var Se=[];jt(q[ue],Se,le,!0),oe.push(Se)}}W.push(Ki(re,ne,oe,A.properties))}}function ja(W,A){A.push(ii(W[0])),A.push(jr(W[1])),A.push(0)}function yi(W,A,B,G){for(var q,ne,le=0,oe=0;oe<W.length;oe++){var re=ii(W[oe][0]),ue=jr(W[oe][1]);A.push(re),A.push(ue),A.push(0),oe>0&&(le+=G?(q*ue-re*ne)/2:Math.sqrt(Math.pow(re-q,2)+Math.pow(ue-ne,2))),q=re,ne=ue}var Se=A.length-3;A[2]=1,Yi(A,0,Se,B),A[Se+2]=1,A.size=Math.abs(le),A.start=0,A.end=A.size}function jt(W,A,B,G){for(var q=0;q<W.length;q++){var ne=[];yi(W[q],ne,B,G),A.push(ne)}}function ii(W){return W/360+.5}function jr(W){var A=Math.sin(W*Math.PI/180),B=.5-.25*Math.log((1+A)/(1-A))/Math.PI;return B<0?0:B>1?1:B}function Vr(W,A,B,G,q,ne,le,oe){if(G/=A,ne>=(B/=A)&&le<G)return W;if(le<B||ne>=G)return null;for(var re=[],ue=0;ue<W.length;ue++){var Se=W[ue],Le=Se.geometry,be=Se.type,lt=q===0?Se.minX:Se.minY,ht=q===0?Se.maxX:Se.maxY;if(lt>=B&&ht<G)re.push(Se);else if(!(ht<B||lt>=G)){var Qe=[];if(be==="Point"||be==="MultiPoint")wa(Le,Qe,B,G,q);else if(be==="LineString")qe(Le,Qe,B,G,q,!1,oe.lineMetrics);else if(be==="MultiLineString")It(Le,Qe,B,G,q,!1);else if(be==="Polygon")It(Le,Qe,B,G,q,!0);else if(be==="MultiPolygon")for(var bt=0;bt<Le.length;bt++){var Et=[];It(Le[bt],Et,B,G,q,!0),Et.length&&Qe.push(Et)}if(Qe.length){if(oe.lineMetrics&&be==="LineString"){for(bt=0;bt<Qe.length;bt++)re.push(Ki(Se.id,be,Qe[bt],Se.tags));continue}be!=="LineString"&&be!=="MultiLineString"||(Qe.length===1?(be="LineString",Qe=Qe[0]):be="MultiLineString"),be!=="Point"&&be!=="MultiPoint"||(be=Qe.length===3?"Point":"MultiPoint"),re.push(Ki(Se.id,be,Qe,Se.tags))}}}return re.length?re:null}function wa(W,A,B,G,q){for(var ne=0;ne<W.length;ne+=3){var le=W[ne+q];le>=B&&le<=G&&(A.push(W[ne]),A.push(W[ne+1]),A.push(W[ne+2]))}}function qe(W,A,B,G,q,ne,le){for(var oe,re,ue=Dt(W),Se=q===0?Ea:Pt,Le=W.start,be=0;be<W.length-3;be+=3){var lt=W[be],ht=W[be+1],Qe=W[be+2],bt=W[be+3],Et=W[be+4],Vt=q===0?lt:ht,kt=q===0?bt:Et,Lt=!1;le&&(oe=Math.sqrt(Math.pow(lt-bt,2)+Math.pow(ht-Et,2))),Vt<B?kt>B&&(re=Se(ue,lt,ht,bt,Et,B),le&&(ue.start=Le+oe*re)):Vt>G?kt<G&&(re=Se(ue,lt,ht,bt,Et,G),le&&(ue.start=Le+oe*re)):ir(ue,lt,ht,Qe),kt<B&&Vt>=B&&(re=Se(ue,lt,ht,bt,Et,B),Lt=!0),kt>G&&Vt<=G&&(re=Se(ue,lt,ht,bt,Et,G),Lt=!0),!ne&&Lt&&(le&&(ue.end=Le+oe*re),A.push(ue),ue=Dt(W)),le&&(Le+=oe)}var Gt=W.length-3;lt=W[Gt],ht=W[Gt+1],Qe=W[Gt+2],(Vt=q===0?lt:ht)>=B&&Vt<=G&&ir(ue,lt,ht,Qe),Gt=ue.length-3,ne&&Gt>=3&&(ue[Gt]!==ue[0]||ue[Gt+1]!==ue[1])&&ir(ue,ue[0],ue[1],ue[2]),ue.length&&A.push(ue)}function Dt(W){var A=[];return A.size=W.size,A.start=W.start,A.end=W.end,A}function It(W,A,B,G,q,ne){for(var le=0;le<W.length;le++)qe(W[le],A,B,G,q,ne,!1)}function ir(W,A,B,G){W.push(A),W.push(B),W.push(G)}function Ea(W,A,B,G,q,ne){var le=(ne-A)/(G-A);return W.push(ne),W.push(B+(q-B)*le),W.push(1),le}function Pt(W,A,B,G,q,ne){var le=(ne-B)/(q-B);return W.push(A+(G-A)*le),W.push(ne),W.push(1),le}function Ji(W,A){for(var B=[],G=0;G<W.length;G++){var q,ne=W[G],le=ne.type;if(le==="Point"||le==="MultiPoint"||le==="LineString")q=Xn(ne.geometry,A);else if(le==="MultiLineString"||le==="Polygon"){q=[];for(var oe=0;oe<ne.geometry.length;oe++)q.push(Xn(ne.geometry[oe],A))}else if(le==="MultiPolygon")for(q=[],oe=0;oe<ne.geometry.length;oe++){for(var re=[],ue=0;ue<ne.geometry[oe].length;ue++)re.push(Xn(ne.geometry[oe][ue],A));q.push(re)}B.push(Ki(ne.id,le,q,ne.tags))}return B}function Xn(W,A){var B=[];B.size=W.size,W.start!==void 0&&(B.start=W.start,B.end=W.end);for(var G=0;G<W.length;G+=3)B.push(W[G]+A,W[G+1],W[G+2]);return B}function ko(W,A){if(W.transformed)return W;var B,G,q,ne=1<<W.z,le=W.x,oe=W.y;for(B=0;B<W.features.length;B++){var re=W.features[B],ue=re.geometry,Se=re.type;if(re.geometry=[],Se===1)for(G=0;G<ue.length;G+=2)re.geometry.push(On(ue[G],ue[G+1],A,ne,le,oe));else for(G=0;G<ue.length;G++){var Le=[];for(q=0;q<ue[G].length;q+=2)Le.push(On(ue[G][q],ue[G][q+1],A,ne,le,oe));re.geometry.push(Le)}}return W.transformed=!0,W}function On(W,A,B,G,q,ne){return[Math.round(B*(W*G-q)),Math.round(B*(A*G-ne))]}function xr(W,A,B,G,q){for(var ne=A===q.maxZoom?0:q.tolerance/((1<<A)*q.extent),le={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:G,z:A,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},oe=0;oe<W.length;oe++){le.numFeatures++,nn(le,W[oe],ne,q);var re=W[oe].minX,ue=W[oe].minY,Se=W[oe].maxX,Le=W[oe].maxY;re<le.minX&&(le.minX=re),ue<le.minY&&(le.minY=ue),Se>le.maxX&&(le.maxX=Se),Le>le.maxY&&(le.maxY=Le)}return le}function nn(W,A,B,G){var q=A.geometry,ne=A.type,le=[];if(ne==="Point"||ne==="MultiPoint")for(var oe=0;oe<q.length;oe+=3)le.push(q[oe]),le.push(q[oe+1]),W.numPoints++,W.numSimplified++;else if(ne==="LineString")Co(le,q,W,B,!1,!1);else if(ne==="MultiLineString"||ne==="Polygon")for(oe=0;oe<q.length;oe++)Co(le,q[oe],W,B,ne==="Polygon",oe===0);else if(ne==="MultiPolygon")for(var re=0;re<q.length;re++){var ue=q[re];for(oe=0;oe<ue.length;oe++)Co(le,ue[oe],W,B,!0,oe===0)}if(le.length){var Se=A.tags||null;if(ne==="LineString"&&G.lineMetrics){for(var Le in Se={},A.tags)Se[Le]=A.tags[Le];Se.mapbox_clip_start=q.start/q.size,Se.mapbox_clip_end=q.end/q.size}var be={geometry:le,type:ne==="Polygon"||ne==="MultiPolygon"?3:ne==="LineString"||ne==="MultiLineString"?2:1,tags:Se};A.id!==null&&(be.id=A.id),W.features.push(be)}}function Co(W,A,B,G,q,ne){var le=G*G;if(G>0&&A.size<(q?le:G))B.numPoints+=A.length/3;else{for(var oe=[],re=0;re<A.length;re+=3)(G===0||A[re+2]>le)&&(B.numSimplified++,oe.push(A[re]),oe.push(A[re+1])),B.numPoints++;q&&function(ue,Se){for(var Le=0,be=0,lt=ue.length,ht=lt-2;be<lt;ht=be,be+=2)Le+=(ue[be]-ue[ht])*(ue[be+1]+ue[ht+1]);if(Le>0===Se)for(be=0,lt=ue.length;be<lt/2;be+=2){var Qe=ue[be],bt=ue[be+1];ue[be]=ue[lt-2-be],ue[be+1]=ue[lt-1-be],ue[lt-2-be]=Qe,ue[lt-1-be]=bt}}(oe,ne),W.push(oe)}}function Li(W,A){var B=(A=this.options=function(q,ne){for(var le in ne)q[le]=ne[le];return q}(Object.create(this.options),A)).debug;if(B&&console.time("preprocess data"),A.maxZoom<0||A.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(A.promoteId&&A.generateId)throw new Error("promoteId and generateId cannot be used together.");var G=function(q,ne){var le=[];if(q.type==="FeatureCollection")for(var oe=0;oe<q.features.length;oe++)He(le,q.features[oe],ne,oe);else He(le,q.type==="Feature"?q:{geometry:q},ne);return le}(W,A);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",A.indexMaxZoom,A.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),G=function(q,ne){var le=ne.buffer/ne.extent,oe=q,re=Vr(q,1,-1-le,le,0,-1,2,ne),ue=Vr(q,1,1-le,2+le,0,-1,2,ne);return(re||ue)&&(oe=Vr(q,1,-le,1+le,0,-1,2,ne)||[],re&&(oe=Ji(re,1).concat(oe)),ue&&(oe=oe.concat(Ji(ue,-1)))),oe}(G,A),G.length&&this.splitTile(G,0,0,0),B&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Va(W,A,B){return 32*((1<<W)*B+A)+W}function Ga(W,A){const B=W.tileID.canonical;if(!this._geoJSONIndex)return A(null,null);const G=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!G)return A(null,null);const q=new Ee(G.features);let ne=ze.exports(q);ne.byteOffset===0&&ne.byteLength===ne.buffer.byteLength||(ne=new Uint8Array(ne)),A(null,{vectorTile:q,rawData:ne.buffer})}Li.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Li.prototype.splitTile=function(W,A,B,G,q,ne,le){for(var oe=[W,A,B,G],re=this.options,ue=re.debug;oe.length;){G=oe.pop(),B=oe.pop(),A=oe.pop(),W=oe.pop();var Se=1<<A,Le=Va(A,B,G),be=this.tiles[Le];if(!be&&(ue>1&&console.time("creation"),be=this.tiles[Le]=xr(W,A,B,G,re),this.tileCoords.push({z:A,x:B,y:G}),ue)){ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",A,B,G,be.numFeatures,be.numPoints,be.numSimplified),console.timeEnd("creation"));var lt="z"+A;this.stats[lt]=(this.stats[lt]||0)+1,this.total++}if(be.source=W,q){if(A===re.maxZoom||A===q)continue;var ht=1<<q-A;if(B!==Math.floor(ne/ht)||G!==Math.floor(le/ht))continue}else if(A===re.indexMaxZoom||be.numPoints<=re.indexMaxPoints)continue;if(be.source=null,W.length!==0){ue>1&&console.time("clipping");var Qe,bt,Et,Vt,kt,Lt,Gt=.5*re.buffer/re.extent,an=.5-Gt,Yn=.5+Gt,fn=1+Gt;Qe=bt=Et=Vt=null,kt=Vr(W,Se,B-Gt,B+Yn,0,be.minX,be.maxX,re),Lt=Vr(W,Se,B+an,B+fn,0,be.minX,be.maxX,re),W=null,kt&&(Qe=Vr(kt,Se,G-Gt,G+Yn,1,be.minY,be.maxY,re),bt=Vr(kt,Se,G+an,G+fn,1,be.minY,be.maxY,re),kt=null),Lt&&(Et=Vr(Lt,Se,G-Gt,G+Yn,1,be.minY,be.maxY,re),Vt=Vr(Lt,Se,G+an,G+fn,1,be.minY,be.maxY,re),Lt=null),ue>1&&console.timeEnd("clipping"),oe.push(Qe||[],A+1,2*B,2*G),oe.push(bt||[],A+1,2*B,2*G+1),oe.push(Et||[],A+1,2*B+1,2*G),oe.push(Vt||[],A+1,2*B+1,2*G+1)}}},Li.prototype.getTile=function(W,A,B){var G=this.options,q=G.extent,ne=G.debug;if(W<0||W>24)return null;var le=1<<W,oe=Va(W,A=(A%le+le)%le,B);if(this.tiles[oe])return ko(this.tiles[oe],q);ne>1&&console.log("drilling down to z%d-%d-%d",W,A,B);for(var re,ue=W,Se=A,Le=B;!re&&ue>0;)ue--,Se=Math.floor(Se/2),Le=Math.floor(Le/2),re=this.tiles[Va(ue,Se,Le)];return re&&re.source?(ne>1&&console.log("found parent tile z%d-%d-%d",ue,Se,Le),ne>1&&console.time("drilling down"),this.splitTile(re.source,ue,Se,Le,W,A,B),ne>1&&console.timeEnd("drilling down"),this.tiles[oe]?ko(this.tiles[oe],q):null):null};class Po extends ae{constructor(A,B,G,q){super(A,B,G,Ga),q&&(this.loadGeoJSON=q)}loadData(A,B){var G;(G=this._pendingRequest)===null||G===void 0||G.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const q=!!(A&&A.request&&A.request.collectResourceTiming)&&new c.RequestPerformance(A.request);this._pendingCallback=B,this._pendingRequest=this.loadGeoJSON(A,(ne,le)=>{if(delete this._pendingCallback,delete this._pendingRequest,ne||!le)return B(ne);if(typeof le!="object")return B(new Error(`Input data given to '${A.source}' is not a valid GeoJSON object.`));{Y(le,!0);try{if(A.filter){const re=c.createExpression(A.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(re.result==="error")throw new Error(re.value.map(Se=>`${Se.key}: ${Se.message}`).join(", "));le={type:"FeatureCollection",features:le.features.filter(Se=>re.value.evaluate({zoom:0},Se))}}this._geoJSONIndex=A.cluster?new ks(function({superclusterOptions:re,clusterProperties:ue}){if(!ue||!re)return re;const Se={},Le={},be={accumulated:null,zoom:0},lt={properties:null},ht=Object.keys(ue);for(const Qe of ht){const[bt,Et]=ue[Qe],Vt=c.createExpression(Et),kt=c.createExpression(typeof bt=="string"?[bt,["accumulated"],["get",Qe]]:bt);Se[Qe]=Vt.value,Le[Qe]=kt.value}return re.map=Qe=>{lt.properties=Qe;const bt={};for(const Et of ht)bt[Et]=Se[Et].evaluate(be,lt);return bt},re.reduce=(Qe,bt)=>{lt.properties=bt;for(const Et of ht)be.accumulated=Qe[Et],Qe[Et]=Le[Et].evaluate(be,lt)},re}(A)).load(le.features):function(re,ue){return new Li(re,ue)}(le,A.geojsonVtOptions)}catch(re){return B(re)}this.loaded={};const oe={};if(q){const re=q.finish();re&&(oe.resourceTiming={},oe.resourceTiming[A.source]=JSON.parse(JSON.stringify(re)))}B(null,oe)}})}reloadTile(A,B){const G=this.loaded;return G&&G[A.uid]?super.reloadTile(A,B):this.loadTile(A,B)}loadGeoJSON(A,B){if(A.request)return c.getJSON(A.request,B);if(typeof A.data=="string")try{B(null,JSON.parse(A.data))}catch{B(new Error(`Input data given to '${A.source}' is not a valid GeoJSON object.`))}else B(new Error(`Input data given to '${A.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(A,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(A,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(A.clusterId))}catch(G){B(G)}}getClusterChildren(A,B){try{B(null,this._geoJSONIndex.getChildren(A.clusterId))}catch(G){B(G)}}getClusterLeaves(A,B){try{B(null,this._geoJSONIndex.getLeaves(A.clusterId,A.limit,A.offset))}catch(G){B(G)}}}class qa{constructor(A){this.self=A,this.actor=new c.Actor(A,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ae,geojson:Po},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,G)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=G},this.self.registerRTLTextPlugin=B=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=B.applyArabicShaping,c.plugin.processBidirectionalText=B.processBidirectionalText,c.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(A,B){this.referrer=B}setImages(A,B,G){this.availableImages[A]=B;for(const q in this.workerSources[A]){const ne=this.workerSources[A][q];for(const le in ne)ne[le].availableImages=B}G()}setLayers(A,B,G){this.getLayerIndex(A).replace(B),G()}updateLayers(A,B,G){this.getLayerIndex(A).update(B.layers,B.removedIds),G()}loadTile(A,B,G){this.getWorkerSource(A,B.type,B.source).loadTile(B,G)}loadDEMTile(A,B,G){this.getDEMWorkerSource(A,B.source).loadTile(B,G)}reloadTile(A,B,G){this.getWorkerSource(A,B.type,B.source).reloadTile(B,G)}abortTile(A,B,G){this.getWorkerSource(A,B.type,B.source).abortTile(B,G)}removeTile(A,B,G){this.getWorkerSource(A,B.type,B.source).removeTile(B,G)}removeDEMTile(A,B){this.getDEMWorkerSource(A,B.source).removeTile(B)}removeSource(A,B,G){if(!this.workerSources[A]||!this.workerSources[A][B.type]||!this.workerSources[A][B.type][B.source])return;const q=this.workerSources[A][B.type][B.source];delete this.workerSources[A][B.type][B.source],q.removeSource!==void 0?q.removeSource(B,G):G()}loadWorkerSource(A,B,G){try{this.self.importScripts(B.url),G()}catch(q){G(q.toString())}}syncRTLPluginState(A,B,G){try{c.plugin.setState(B);const q=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&q!=null){this.self.importScripts(q);const ne=c.plugin.isParsed();G(ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${q}`),ne)}}catch(q){G(q.toString())}}getAvailableImages(A){let B=this.availableImages[A];return B||(B=[]),B}getLayerIndex(A){let B=this.layerIndexes[A];return B||(B=this.layerIndexes[A]=new L),B}getWorkerSource(A,B,G){if(this.workerSources[A]||(this.workerSources[A]={}),this.workerSources[A][B]||(this.workerSources[A][B]={}),!this.workerSources[A][B][G]){const q={send:(ne,le,oe)=>{this.actor.send(ne,le,oe,A)}};this.workerSources[A][B][G]=new this.workerSourceTypes[B](q,this.getLayerIndex(A),this.getAvailableImages(A))}return this.workerSources[A][B][G]}getDEMWorkerSource(A,B){return this.demWorkerSources[A]||(this.demWorkerSources[A]={}),this.demWorkerSources[A][B]||(this.demWorkerSources[A][B]=new ye),this.demWorkerSources[A][B]}enforceCacheSizeLimit(A,B){c.enforceCacheSizeLimit(B)}}return c.isWorker()&&(self.worker=new qa(self)),qa}),p(["./shared"],function(c){var E=C;function C(f){return!function(r){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var d,g,v=new Blob([""],{type:"text/javascript"}),b=URL.createObjectURL(v);try{g=new Worker(b),d=!0}catch{d=!1}return g&&g.terminate(),URL.revokeObjectURL(b),d}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var d=document.createElement("canvas");d.width=d.height=1;var g=d.getContext("2d");if(!g)return!1;var v=g.getImageData(0,0,1,1);return v&&v.width===d.width}()?(L[l=r&&r.failIfMajorPerformanceCaveat]===void 0&&(L[l]=function(d){var g,v=function(b){var T=document.createElement("canvas"),k=Object.create(C.webGLContextAttributes);return k.failIfMajorPerformanceCaveat=b,T.getContext("webgl",k)||T.getContext("experimental-webgl",k)}(d);if(!v)return!1;try{g=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!g||v.isContextLost())&&(v.shaderSource(g,"void main() {}"),v.compileShader(g),v.getShaderParameter(g,v.COMPILE_STATUS)===!0)}(l)),L[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(f)}var L={};function O(f,r){if(Array.isArray(f)){if(!Array.isArray(r)||f.length!==r.length)return!1;for(let l=0;l<f.length;l++)if(!O(f[l],r[l]))return!1;return!0}if(typeof f=="object"&&f!==null&&r!==null){if(typeof r!="object"||Object.keys(f).length!==Object.keys(r).length)return!1;for(const l in f)if(!O(f[l],r[l]))return!1;return!0}return f===r}C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class R{static testProp(r){if(!R.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in R.docStyle)return r[l];return r[0]}static create(r,l,d){const g=window.document.createElement(r);return l!==void 0&&(g.className=l),d&&d.appendChild(g),g}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){R.docStyle&&R.selectProp&&(R.userSelect=R.docStyle[R.selectProp],R.docStyle[R.selectProp]="none")}static enableDrag(){R.docStyle&&R.selectProp&&(R.docStyle[R.selectProp]=R.userSelect)}static setTransform(r,l){r.style[R.transformProp]=l}static addEventListener(r,l,d,g={}){r.addEventListener(l,d,"passive"in g?g:g.capture)}static removeEventListener(r,l,d,g={}){r.removeEventListener(l,d,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",R.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",R.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",R.suppressClickInternal,!0)},0)}static mousePos(r,l){const d=r.getBoundingClientRect();return new c.pointGeometry(l.clientX-d.left-r.clientLeft,l.clientY-d.top-r.clientTop)}static touchPos(r,l){const d=r.getBoundingClientRect(),g=[];for(let v=0;v<l.length;v++)g.push(new c.pointGeometry(l[v].clientX-d.left-r.clientLeft,l[v].clientY-d.top-r.clientTop));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}R.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,R.selectProp=R.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),R.transformProp=R.testProp(["transform","WebkitTransform"]);class Q{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}normalizeSpriteURL(r,l,d){const g=function(v){const b=v.match(ie);if(!b)throw new Error(`Unable to parse URL "${v}"`);return{protocol:b[1],authority:b[2],path:b[3]||"/",params:b[4]?b[4].split("&"):[]}}(r);return g.path+=`${l}${d}`,function(v){const b=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${b}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const ie=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class ae{constructor(r,l,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,g)}update(r,l,d){const{width:g,height:v}=r,b=!(this.size&&this.size[0]===g&&this.size[1]===v||d),{context:T}=this,{gl:k}=T;if(this.useMipmap=Boolean(l&&l.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!l||l.premultiply!==!1)),b)this.size=[g,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||c.isImageBitmap(r)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,r):k.texImage2D(k.TEXTURE_2D,0,this.format,g,v,0,this.format,k.UNSIGNED_BYTE,r.data);else{const{x:I,y:z}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||c.isImageBitmap(r)?k.texSubImage2D(k.TEXTURE_2D,0,I,z,k.RGBA,k.UNSIGNED_BYTE,r):k.texSubImage2D(k.TEXTURE_2D,0,I,z,g,v,k.RGBA,k.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)}bind(r,l,d){const{context:g}=this,{gl:v}=g;v.bindTexture(v.TEXTURE_2D,this.texture),d!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,l),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ye(f){const{userImage:r}=f;return!!(r&&r.render&&r.render())&&(f.data.replace(new Uint8Array(r.data.buffer)),!0)}class Y extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,callback:d}of this.requestors)this._notify(l,d);this.requestors=[]}}getImage(r){return this.images[r]}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new c.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const g of r){if(g[0]<d||g[1]<g[0]||l<g[1])return!1;d=g[1]}return!0}_validateContent(r,l){return!(r&&(r.length!==4||r[0]<0||l.data.width<r[0]||r[1]<0||l.data.height<r[1]||r[2]<0||l.data.width<r[2]||r[3]<0||l.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,l){const d=this.images[r];if(d.data.width!==l.data.width||d.data.height!==l.data.height)throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=d.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,l){let d=!0;if(!this.isLoaded())for(const g of r)this.images[g]||(d=!1);this.isLoaded()||d?this._notify(r,l):this.requestors.push({ids:r,callback:l})}_notify(r,l){const d={};for(const g of r){this.images[g]||this.fire(new c.Event("styleimagemissing",{id:g}));const v=this.images[g];v?d[g]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:Boolean(v.userImage&&v.userImage.render)}:c.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,d)}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new c.ImagePosition(g,d);this.patterns[r]={bin:g,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ae(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:l,h:d}=c.potpack(r),g=this.atlasImage;g.resize({width:l||1,height:d||1});for(const v in this.patterns){const{bin:b}=this.patterns[v],T=b.x+1,k=b.y+1,I=this.images[v].data,z=I.width,N=I.height;c.RGBAImage.copy(I,g,{x:0,y:0},{x:T,y:k},{width:z,height:N}),c.RGBAImage.copy(I,g,{x:0,y:N-1},{x:T,y:k-1},{width:z,height:1}),c.RGBAImage.copy(I,g,{x:0,y:0},{x:T,y:k+N},{width:z,height:1}),c.RGBAImage.copy(I,g,{x:z-1,y:0},{x:T-1,y:k},{width:1,height:N}),c.RGBAImage.copy(I,g,{x:0,y:0},{x:T+z,y:k},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.images[l];d||c.warnOnce(`Image with ID: "${l}" was not found`),ye(d)&&this.updateImage(l,d)}}}const V=1e20;function H(f,r,l,d,g,v,b,T,k){for(let I=r;I<r+d;I++)ce(f,l*v+I,v,g,b,T,k);for(let I=l;I<l+g;I++)ce(f,I*v+r,1,d,b,T,k)}function ce(f,r,l,d,g,v,b){v[0]=0,b[0]=-V,b[1]=V,g[0]=f[r];for(let T=1,k=0,I=0;T<d;T++){g[T]=f[r+T*l];const z=T*T;do{const N=v[k];I=(g[T]-g[N]+z-N*N)/(T-N)/2}while(I<=b[k]&&--k>-1);k++,v[k]=T,b[k]=I,b[k+1]=V}for(let T=0,k=0;T<d;T++){for(;b[k+1]<T;)k++;const I=v[k],z=T-I;f[r+T*l]=g[I]+z*z}}class xe{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r,l){const d=[];for(const g in r)for(const v of r[g])d.push({stack:g,id:v});c.asyncAll(d,({stack:g,id:v},b)=>{let T=this.entries[g];T||(T=this.entries[g]={glyphs:{},requests:{},ranges:{}});let k=T.glyphs[v];if(k!==void 0)return void b(null,{stack:g,id:v,glyph:k});if(k=this._tinySDF(T,g,v),k)return T.glyphs[v]=k,void b(null,{stack:g,id:v,glyph:k});const I=Math.floor(v/256);if(256*I>65535)return void b(new Error("glyphs > 65535 not supported"));if(T.ranges[I])return void b(null,{stack:g,id:v,glyph:k});let z=T.requests[I];z||(z=T.requests[I]=[],xe.loadGlyphRange(g,I,this.url,this.requestManager,(N,$)=>{if($){for(const K in $)this._doesCharSupportLocalGlyph(+K)||(T.glyphs[+K]=$[+K]);T.ranges[I]=!0}for(const K of z)K(N,$);delete T.requests[I]})),z.push((N,$)=>{N?b(N):$&&b(null,{stack:g,id:v,glyph:$[v]||null})})},(g,v)=>{if(g)l(g);else if(v){const b={};for(const{stack:T,id:k,glyph:I}of v)(b[T]||(b[T]={}))[k]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};l(null,b)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(c.unicodeBlockLookup["CJK Unified Ideographs"](r)||c.unicodeBlockLookup["Hangul Syllables"](r)||c.unicodeBlockLookup.Hiragana(r)||c.unicodeBlockLookup.Katakana(r))}_tinySDF(r,l,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let v=r.tinySDF;if(!v){let T="400";/bold/i.test(l)?T="900":/medium/i.test(l)?T="500":/light/i.test(l)&&(T="200"),v=r.tinySDF=new xe.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:T})}const b=v.draw(String.fromCharCode(d));return{id:d,bitmap:new c.AlphaImage({width:b.width||30,height:b.height||30},b.data),metrics:{width:b.glyphWidth||24,height:b.glyphHeight||24,left:b.glyphLeft||0,top:b.glyphTop-27||-8,advance:b.glyphAdvance||24}}}}xe.loadGlyphRange=function(f,r,l,d,g){const v=256*r,b=v+255,T=d.transformRequest(l.replace("{fontstack}",f).replace("{range}",`${v}-${b}`),c.ResourceType.Glyphs);c.getArrayBuffer(T,(k,I)=>{if(k)g(k);else if(I){const z={};for(const N of c.parseGlyphPbf(I))z[N.id]=N;g(null,z)}})},xe.TinySDF=class{constructor({fontSize:f=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:v="normal",fontStyle:b="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const T=this.size=f+4*r,k=this._createCanvas(T),I=this.ctx=k.getContext("2d",{willReadFrequently:!0});I.font=`${b} ${v} ${f}px ${g}`,I.textBaseline="alphabetic",I.textAlign="left",I.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(f){const r=document.createElement("canvas");return r.width=r.height=f,r}draw(f){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:v}=this.ctx.measureText(f),b=Math.ceil(l),T=Math.min(this.size-this.buffer,Math.ceil(v-g)),k=Math.min(this.size-this.buffer,b+Math.ceil(d)),I=T+2*this.buffer,z=k+2*this.buffer,N=Math.max(I*z,0),$=new Uint8ClampedArray(N),K={data:$,width:I,height:z,glyphWidth:T,glyphHeight:k,glyphTop:b,glyphLeft:0,glyphAdvance:r};if(T===0||k===0)return K;const{ctx:Z,buffer:X,gridInner:se,gridOuter:he}=this;Z.clearRect(X,X,T,k),Z.fillText(f,X,X+b);const pe=Z.getImageData(X,X,T,k);he.fill(V,0,N),se.fill(0,0,N);for(let J=0;J<k;J++)for(let ve=0;ve<T;ve++){const me=pe.data[4*(J*T+ve)+3]/255;if(me===0)continue;const ke=(J+X)*I+ve+X;if(me===1)he[ke]=0,se[ke]=V;else{const Ce=.5-me;he[ke]=Ce>0?Ce*Ce:0,se[ke]=Ce<0?Ce*Ce:0}}H(he,0,0,I,z,I,this.f,this.v,this.z),H(se,X,X,T,k,I,this.f,this.v,this.z);for(let J=0;J<N;J++){const ve=Math.sqrt(he[J])-Math.sqrt(se[J]);$[J]=Math.round(255-255*(ve/this.radius+this.cutoff))}return K}};const Ee=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(f,r){return c.sphericalToCartesian(f.expression.evaluate(r))}interpolate(f,r,l){return{x:c.number(f.x,r.x,l),y:c.number(f.y,r.y,l),z:c.number(f.z,r.z,l)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)}),ze="-transition";class De extends c.Evented{constructor(r){super(),this._transitionable=new c.Transitionable(Ee),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(c.validateLight,r,l))for(const d in r){const g=r[d];d.endsWith(ze)?this._transitionable.setTransition(d.slice(0,-ze.length),g):this._transitionable.setValue(d,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&c.emitValidationErrors(this,r.call(c.validateStyle,c.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class ot{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const g=[];let v=r.length%2==1?-r[r.length-1]*d:0,b=r[0]*d,T=!0;g.push({left:v,right:b,isDash:T,zeroLength:r[0]===0});let k=r[0];for(let I=1;I<r.length;I++){T=!T;const z=r[I];v=k*d,k+=z,b=k*d,g.push({left:v,right:b,isDash:T,zeroLength:z===0})}return g}addRoundDash(r,l,d){const g=l/2;for(let v=-d;v<=d;v++){const b=this.width*(this.nextRow+d+v);let T=0,k=r[T];for(let I=0;I<this.width;I++){I/k.right>1&&(k=r[++T]);const z=Math.abs(I-k.left),N=Math.abs(I-k.right),$=Math.min(z,N);let K;const Z=v/d*(g+1);if(k.isDash){const X=g-Math.abs(Z);K=Math.sqrt($*$+X*X)}else K=g-Math.sqrt($*$+Z*Z);this.data[b+I]=Math.max(0,Math.min(255,K+128))}}}addRegularDash(r){for(let T=r.length-1;T>=0;--T){const k=r[T],I=r[T+1];k.zeroLength?r.splice(T,1):I&&I.isDash===k.isDash&&(I.left=k.left,r.splice(T,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const g=this.width*this.nextRow;let v=0,b=r[v];for(let T=0;T<this.width;T++){T/b.right>1&&(b=r[++v]);const k=Math.abs(T-b.left),I=Math.abs(T-b.right),z=Math.min(k,I);this.data[g+T]=Math.max(0,Math.min(255,(b.isDash?z:-z)+128))}}addDash(r,l){const d=l?7:0,g=2*d+1;if(this.nextRow+g>this.height)return c.warnOnce("LineAtlas out of space"),null;let v=0;for(let T=0;T<r.length;T++)v+=r[T];if(v!==0){const T=this.width/v,k=this.getDashRanges(r,this.width,T);l?this.addRoundDash(k,T,d):this.addRegularDash(k)}const b={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:v};return this.nextRow+=g,this.dirty=!0,b}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}class Fe{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const d=this.workerPool.acquire(this.id);for(let g=0;g<d.length;g++){const v=new Fe.Actor(d[g],l,this.id);v.name=`Worker ${g}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l,d){c.asyncAll(this.actors,(g,v)=>{g.send(r,l,v)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}function St(f,r,l){const d=function(g,v){if(g)return l(g);if(v){const b=c.pick(c.extend(v,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(b.vectorLayers=v.vector_layers,b.vectorLayerIds=b.vectorLayers.map(T=>T.id)),l(null,b)}};return f.url?c.getJSON(r.transformRequest(f.url,c.ResourceType.Source),d):c.exported.frame(()=>d(null,f))}Fe.Actor=c.Actor;class Mt{constructor(r,l,d){this.bounds=c.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*l),v=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*l),b=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*l);return r.x>=d&&r.x<v&&r.y>=g&&r.y<b}}class Ct extends c.Evented{constructor(r,l,d,g){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(l,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=St(this._options,this.map._requestManager,(r,l)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r?this.fire(new c.ErrorEvent(r)):l&&(c.extend(this,l),l.bounds&&(this.tileBounds=new Mt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(r,l){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(d,c.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(b,T){return delete r.request,r.aborted?l(null):b&&b.status!==404?l(b):(T&&T.resourceTiming&&(r.resourceTiming=T.resourceTiming),this.map._refreshExpiredTiles&&T&&r.setExpiryData(T),r.loadVectorData(T,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=l:r.request=r.actor.send("reloadTile",g,v.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,v.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Wt extends c.Evented{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},l),c.extend(this,c.pick(l,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=St(this._options,this.map._requestManager,(r,l)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new c.ErrorEvent(r)):l&&(c.extend(this,l),l.bounds&&(this.tileBounds=new Mt(l.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,l){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=c.getImage(this.map._requestManager.transformRequest(d,c.ResourceType.Tile),(g,v,b)=>{if(delete r.request,r.aborted)r.state="unloaded",l(null);else if(g)r.state="errored",l(g);else if(v){this.map._refreshExpiredTiles&&r.setExpiryData(b);const T=this.map.painter.context,k=T.gl;r.texture=this.map.painter.getTileTexture(v.width),r.texture?r.texture.update(v,{useMipmap:!0}):(r.texture=new ae(T,v,k.RGBA,{useMipmap:!0}),r.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),T.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax)),r.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),l(null)}})}abortTile(r,l){r.request&&(r.request.cancel(),delete r.request),l()}unloadTile(r,l){r.texture&&this.map.painter.saveTileTexture(r.texture),l()}hasTransition(){return!1}}let Tt;class $e extends Wt{constructor(r,l,d,g){super(r,l,d,g),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,l){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(v,b){v&&(r.state="errored",l(v)),b&&(r.dem=b,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",l(null))}r.request=c.getImage(this.map._requestManager.transformRequest(d,c.ResourceType.Tile),function(v,b){if(delete r.request,r.aborted)r.state="unloaded",l(null);else if(v)r.state="errored",l(v);else if(b){this.map._refreshExpiredTiles&&r.setExpiryData(b),delete b.cacheControl,delete b.expires;const T=c.isImageBitmap(b)&&(Tt==null&&(Tt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Tt)?b:c.exported.getImageData(b,1),k={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:T,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",k,g.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),g=(l.x-1+d)%d,v=l.x===0?r.wrap-1:r.wrap,b=(l.x+1+d)%d,T=l.x+1===d?r.wrap+1:r.wrap,k={};return k[new c.OverscaledTileID(r.overscaledZ,v,l.z,g,l.y).key]={backfilled:!1},k[new c.OverscaledTileID(r.overscaledZ,T,l.z,b,l.y).key]={backfilled:!1},l.y>0&&(k[new c.OverscaledTileID(r.overscaledZ,v,l.z,g,l.y-1).key]={backfilled:!1},k[new c.OverscaledTileID(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},k[new c.OverscaledTileID(r.overscaledZ,T,l.z,b,l.y-1).key]={backfilled:!1}),l.y+1<d&&(k[new c.OverscaledTileID(r.overscaledZ,v,l.z,g,l.y+1).key]={backfilled:!1},k[new c.OverscaledTileID(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},k[new c.OverscaledTileID(r.overscaledZ,T,l.z,b,l.y+1).key]={backfilled:!1}),k}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class vt extends c.Evented{constructor(r,l,d,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=l.data,this._options=c.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const v=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*v,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*v,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:c.EXTENT,radius:(l.clusterRadius||50)*v,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData("content"),this}getClusterExpansionZoom(r,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},l),this}getClusterChildren(r,l){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},l),this}getClusterLeaves(r,l,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:l,offset:d},g),this}_updateWorkerData(r){const l=c.extend({},this.workerOptions),d=this._data;typeof d=="string"?(l.request=this.map._requestManager.transformRequest(c.exported.resolveURL(d),c.ResourceType.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(d),this._pendingLoads++,this.fire(new c.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,l,(g,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return void this.fire(new c.Event("dataabort",{dataType:"source",sourceDataType:r}));let b=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b=v.resourceTiming[this.id].slice(0)),g)return void this.fire(new c.ErrorEvent(g));const T={dataType:"source",sourceDataType:r};this._collectResourceTiming&&b&&b.length>0&&c.extend(T,{resourceTiming:b}),this.fire(new c.Event("data",T))})}loaded(){return this._pendingLoads===0}loadTile(r,l){const d=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(d,g,(v,b)=>(delete r.request,r.unloadVectorData(),r.aborted?l(null):v?l(v):(r.loadVectorData(b,this.map.painter,d==="reloadTile"),l(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Re=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class at extends c.Evented{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(r,l){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(d,g)=>{this._loaded=!0,d?this.fire(new c.ErrorEvent(d)):g&&(this.image=g,r&&(this.coordinates=r),l&&l(),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return this.image&&r.url?(this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}setCoordinates(r){this.coordinates=r;const l=r.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(g){let v=1/0,b=1/0,T=-1/0,k=-1/0;for(const $ of g)v=Math.min(v,$.x),b=Math.min(b,$.y),T=Math.max(T,$.x),k=Math.max(k,$.y);const I=Math.max(T-v,k-b),z=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),N=Math.pow(2,z);return new c.CanonicalTileID(z,Math.floor((v+T)/2*N),Math.floor((b+k)/2*N))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ae(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}loadTile(r,l){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},l(null)):(r.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ut extends at{constructor(r,l,d,g){super(r,l,d,g),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,c.ResourceType.Source).url);c.getVideo(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new c.ErrorEvent(l)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new ae(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Yt extends at{constructor(r,l,d,g){super(r,l,d,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ae(l,this.canvas,d.RGBA,{premultiply:!0});for(const g in this.tiles){const v=this.tiles[g];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Jt={vector:Ct,raster:Wt,"raster-dem":$e,geojson:vt,video:ut,image:at,canvas:Yt};function _r(f,r){const l=c.create();return c.translate(l,l,[1,1,0]),c.scale(l,l,[.5*f.width,.5*f.height,1]),c.multiply(l,l,f.calculatePosMatrix(r.toUnwrapped()))}function Hn(f,r,l,d,g,v){const b=function(N,$,K){if(N)for(const Z of N){const X=$[Z];if(X&&X.source===K&&X.type==="fill-extrusion")return!0}else for(const Z in $){const X=$[Z];if(X.source===K&&X.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,f.id),T=v.maxPitchScaleFactor(),k=f.tilesIn(d,T,b);k.sort(rr);const I=[];for(const N of k)I.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(r,l,f._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,g,v,T,_r(f.transform,N.tileID))});const z=function(N){const $={},K={};for(const Z of N){const X=Z.queryResults,se=Z.wrappedTileID,he=K[se]=K[se]||{};for(const pe in X){const J=X[pe],ve=he[pe]=he[pe]||{},me=$[pe]=$[pe]||[];for(const ke of J)ve[ke.featureIndex]||(ve[ke.featureIndex]=!0,me.push(ke))}}return $}(I);for(const N in z)z[N].forEach($=>{const K=$.feature,Z=f.getFeatureState(K.layer["source-layer"],K.id);K.source=K.layer.source,K.layer["source-layer"]&&(K.sourceLayer=K.layer["source-layer"]),K.state=Z});return z}function rr(f,r){const l=f.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}class Vn{constructor(r,l){this.tileID=r,this.uid=c.uniqueId(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<c.exported.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.textures.forEach(l=>r.saveTileTexture(l)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,v){const b={};if(!v)return b;for(const T of g){const k=T.layerIds.map(I=>v.getLayer(I)).filter(Boolean);if(k.length!==0){T.layers=k,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(I=>k.filter(z=>z.id===I)[0]));for(const I of k)b[I.id]=T}}return b}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const v=this.buckets[g];if(v instanceof c.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const v=this.buckets[g];if(v instanceof c.SymbolBucket&&v.hasRTLText){this.hasRTLText=!0,c.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const v=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new c.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ae(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ae(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,g,v,b,T,k,I,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:v,scale:b,tileSize:this.tileSize,pixelPosMatrix:z,transform:k,params:T,queryPadding:this.queryPadding*I},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),v=l?l.sourceLayer:"",b=g._geojsonTileLayer||g[v];if(!b)return;const T=c.createFilter(l&&l.filter),{z:k,x:I,y:z}=this.tileID.canonical,N={z:k,x:I,y:z};for(let $=0;$<b.length;$++){const K=b.feature($);if(T.needGeometry){const se=c.toEvaluationFeature(K,!0);if(!T.filter(new c.EvaluationParameters(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!T.filter(new c.EvaluationParameters(this.tileID.overscaledZ),K))continue;const Z=d.getId(K,v),X=new c.GeoJSONFeature(K,k,I,z,Z);X.tile=N,r.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=c.parseCacheControl(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const v=this.expirationTime-l;v?this.expirationTime=d+Math.max(v,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const v=this.buckets[g],b=v.layers[0].sourceLayer||"_geojsonTileLayer",T=d[b],k=r[b];if(!T||!k||Object.keys(k).length===0)continue;v.update(k,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const I=l&&l.style&&l.style.getLayer(g);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=c.exported.now()+r}setDependencies(r,l){const d={};for(const g of l)d[g]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const g=this.dependencies[d];if(g){for(const v of l)if(g[v])return!0}}return!1}}class hr{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const v={value:l,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},d)),this.data[g].push(v),this.order.push(g),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,g=l===void 0?0:this.data[d].indexOf(l),v=this.data[d][g];return this.data[d].splice(g,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const g of this.data[d])r(g.value)||l.push(g);for(const d of l)this.remove(d.value.tileID,d)}}class gi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const g=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},c.extend(this.stateChanges[r][g],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==g&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const v in this.state[r][g])d[v]||(this.deletedStates[r][g][v]=null)}else for(const v in d)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][v]===null&&delete this.deletedStates[r][g][v]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const g=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(d in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][d]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),g=c.extend({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][l];if(v===null)return{};for(const b in v)delete g[b]}return g}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const v={};for(const b in this.stateChanges[g])this.state[g][b]||(this.state[g][b]={}),c.extend(this.state[g][b],this.stateChanges[g][b]),v[b]=this.state[g][b];d[g]=v}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const v={};if(this.deletedStates[g]===null)for(const b in this.state[g])v[b]={},this.state[g][b]={};else for(const b in this.deletedStates[g]){if(this.deletedStates[g][b]===null)this.state[g][b]={};else for(const T of Object.keys(this.deletedStates[g][b]))delete this.state[g][b][T];v[b]=this.state[g][b]}d[g]=d[g]||{},c.extend(d[g],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in r)r[g].setFeatureState(d,l)}}class Ar extends c.Evented{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(g,v,b,T){const k=new Jt[v.type](g,v,b,T);if(k.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${k.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],k),k}(r,l,d,this),this._tiles={},this._cache=new hr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new gi}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l){return this._source.loadTile(r,l)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new c.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(wo).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,g)=>{const v=d.tileID,b=g.tileID,T=new c.pointGeometry(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),k=new c.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-b.overscaledZ||k.y-T.y||k.x-T.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(wo).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,r,l)))}_tileLoaded(r,l,d,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new c.ErrorEvent(g,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=c.exported.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new c.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const v=l[g];if(r.neighboringTiles&&r.neighboringTiles[v]){const b=this.getTileByID(v);d(r,b),d(b,r)}}function d(g,v){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let b=v.tileID.canonical.x-g.tileID.canonical.x;const T=v.tileID.canonical.y-g.tileID.canonical.y,k=Math.pow(2,g.tileID.canonical.z),I=v.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+k)===1?b+=k:Math.abs(b-k)===1&&(b-=k)),v.dem&&g.dem&&(g.dem.backfillBorder(v.dem,b,T),g.neighboringTiles&&g.neighboringTiles[I]&&(g.neighboringTiles[I].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,g){for(const v in this._tiles){let b=this._tiles[v];if(g[v]||!b.hasData()||b.tileID.overscaledZ<=l||b.tileID.overscaledZ>d)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>l+1;){const I=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[I.key],b&&b.hasData()&&(T=I)}let k=T;for(;k.overscaledZ>l;)if(k=k.scaledTo(k.overscaledZ-1),r[k.key]){g[T.key]=T;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const g=r.scaledTo(d),v=this._getLoadedTile(g);if(v)return v}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*d*5),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(v)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const g in this._tiles){const v=this._tiles[g];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),d[v.tileID.key]=v}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,l){if(this.transform=r,this.terrain=l,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(I=>new c.OverscaledTileID(I.canonical.z,I.wrap,I.canonical.z,I.canonical.x,I.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(I=>this._source.hasTile(I)))):d=[];const g=r.coveringZoomLevel(this._source),v=Math.max(g-Ar.maxOverzooming,this._source.minzoom),b=Math.max(g+Ar.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const I={};for(const z of d)if(z.canonical.z>this._source.minzoom){const N=z.scaledTo(z.canonical.z-1);I[N.key]=N;const $=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));I[$.key]=$}d=d.concat(Object.values(I))}const T=this._updateRetainedTiles(d,g);if(Ts(this._source.type)){const I={},z={},N=Object.keys(T);for(const $ of N){const K=T[$],Z=this._tiles[$];if(!Z||Z.fadeEndTime&&Z.fadeEndTime<=c.exported.now())continue;const X=this.findLoadedParent(K,v);X&&(this._addTile(X.tileID),I[X.tileID.key]=X.tileID),z[$]=K}this._retainLoadedChildren(z,g,b,T);for(const $ in I)T[$]||(this._coveredTiles[$]=!0,T[$]=I[$]);if(l){const $={},K={};for(const Z of d)this._tiles[Z.key].hasData()?$[Z.key]=Z:K[Z.key]=Z;for(const Z in K){const X=K[Z].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&($[X[0].key]=T[X[0].key]=X[0],$[X[1].key]=T[X[1].key]=X[1],$[X[2].key]=T[X[2].key]=X[2],$[X[3].key]=T[X[3].key]=X[3],delete K[Z])}for(const Z in K){const X=this.findLoadedParent(K[Z],this._source.minzoom);if(X){$[X.tileID.key]=T[X.tileID.key]=X.tileID;for(const se in $)$[se].isChildOf(X.tileID)&&delete $[se]}}for(const Z in this._tiles)$[Z]||(this._coveredTiles[Z]=!0)}}for(const I in T)this._tiles[I].clearFadeHold();const k=c.keysDifference(this._tiles,T);for(const I of k){const z=this._tiles[I];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(I)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){const d={},g={},v=Math.max(l-Ar.maxOverzooming,this._source.minzoom),b=Math.max(l+Ar.maxUnderzooming,this._source.minzoom),T={};for(const k of r){const I=this._addTile(k);d[k.key]=k,I.hasData()||l<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,l,b,d);for(const k of r){let I=this._tiles[k.key];if(I.hasData())continue;if(l+1>this._source.maxzoom){const N=k.children(this._source.maxzoom)[0],$=this.getTile(N);if($&&$.hasData()){d[N.key]=N;continue}}else{const N=k.children(this._source.maxzoom);if(d[N[0].key]&&d[N[1].key]&&d[N[2].key]&&d[N[3].key])continue}let z=I.wasRequested();for(let N=k.overscaledZ-1;N>=v;--N){const $=k.scaledTo(N);if(g[$.key]||(g[$.key]=!0,I=this.getTile($),!I&&z&&(I=this._addTile($)),I&&(d[$.key]=$,z=I.wasRequested(),I.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}l.push(g.key);const v=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;g=v}for(const v of l)this._loadedParentTiles[v]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new Vn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,r.key,l.state))),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new c.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const g=[],v=this.transform;if(!v)return g;const b=d?v.getCameraQueryGeometry(r):r,T=r.map(Z=>v.pointCoordinate(Z,this.terrain)),k=b.map(Z=>v.pointCoordinate(Z,this.terrain)),I=this.getIds();let z=1/0,N=1/0,$=-1/0,K=-1/0;for(const Z of k)z=Math.min(z,Z.x),N=Math.min(N,Z.y),$=Math.max($,Z.x),K=Math.max(K,Z.y);for(let Z=0;Z<I.length;Z++){const X=this._tiles[I[Z]];if(X.holdingForFade())continue;const se=X.tileID,he=Math.pow(2,v.zoom-X.tileID.overscaledZ),pe=l*X.queryPadding*c.EXTENT/X.tileSize/he,J=[se.getTilePoint(new c.MercatorCoordinate(z,N)),se.getTilePoint(new c.MercatorCoordinate($,K))];if(J[0].x-pe<c.EXTENT&&J[0].y-pe<c.EXTENT&&J[1].x+pe>=0&&J[1].y+pe>=0){const ve=T.map(ke=>se.getTilePoint(ke)),me=k.map(ke=>se.getTilePoint(ke));g.push({tile:X,tileID:se,queryGeometry:ve,cameraQueryGeometry:me,scale:he})}}return g}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Ts(this._source.type))for(const r in this._tiles){const l=this._tiles[r];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=c.exported.now())return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const g=this._tiles[r];g&&g.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function wo(f,r){const l=Math.abs(2*f.wrap)-+(f.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return f.overscaledZ-r.overscaledZ||d-l||r.canonical.y-f.canonical.y||r.canonical.x-f.canonical.x}function Ts(f){return f==="raster"||f==="image"||f==="video"}Ar.maxOverzooming=10,Ar.maxUnderzooming=3;const Hi="mapboxgl_preloaded_worker_pool";class Ur{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ur.workerCount;)this.workers.push(new Worker(Ya.workerUrl));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Hi]}numActive(){return Object.keys(this.active).length}}const ks=Math.floor(c.exported.hardwareConcurrency/2);let _a;function Eo(){return _a||(_a=new Ur),_a}function So(f,r){const l={};for(const d in f)d!=="ref"&&(l[d]=f[d]);return c.refProperties.forEach(d=>{d in r&&(l[d]=r[d])}),l}function Cs(f){f=f.slice();const r=Object.create(null);for(let l=0;l<f.length;l++)r[f[l].id]=f[l];for(let l=0;l<f.length;l++)"ref"in f[l]&&(f[l]=So(f[l],r[f[l].ref]));return f}Ur.workerCount=Math.max(Math.min(ks,6),1);const Ut={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Di(f,r,l){l.push({command:Ut.addSource,args:[f,r[f]]})}function xa(f,r,l){r.push({command:Ut.removeSource,args:[f]}),l[f]=!0}function ba(f,r,l,d){xa(f,l,d),Di(f,r,l)}function Ps(f,r,l){let d;for(d in f[l])if(Object.prototype.hasOwnProperty.call(f[l],d)&&d!=="data"&&!O(f[l][d],r[l][d]))return!1;for(d in r[l])if(Object.prototype.hasOwnProperty.call(r[l],d)&&d!=="data"&&!O(f[l][d],r[l][d]))return!1;return!0}function Xi(f,r,l,d,g,v){let b;for(b in r=r||{},f=f||{})Object.prototype.hasOwnProperty.call(f,b)&&(O(f[b],r[b])||l.push({command:v,args:[d,b,r[b],g]}));for(b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(f,b)&&(O(f[b],r[b])||l.push({command:v,args:[d,b,r[b],g]}))}function Yi(f){return f.id}function To(f,r){return f[r.id]=r,f}class Ki{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=c.clamp(r,0,1);let l=1,d=this._distances[l];const g=r*this.paddedLength+this.padding;for(;d<g&&l<this._distances.length;)d=this._distances[++l];const v=l-1,b=this._distances[v],T=d-b,k=T>0?(g-b)/T:0;return this.points[v].mult(1-k).add(this.points[l].mult(k))}}function Pe(f,r){let l=!0;return f==="always"||f!=="never"&&r!=="never"||(l=!1),l}class He{constructor(r,l,d){const g=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let b=0;b<this.xCellCount*this.yCellCount;b++)g.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,g,v){this._forEachCell(l,d,g,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(v)}insertCircle(r,l,d,g){this._forEachCell(l-g,d-g,l+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(g)}_insertBoxCell(r,l,d,g,v,b){this.boxCells[v].push(b)}_insertCircleCell(r,l,d,g,v,b){this.circleCells[v].push(b)}_query(r,l,d,g,v,b,T){if(d<0||r>this.width||g<0||l>this.height)return[];const k=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=g){if(v)return[{key:null,x1:r,y1:l,x2:d,y2:g}];for(let I=0;I<this.boxKeys.length;I++)k.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const z=this.circles[3*I],N=this.circles[3*I+1],$=this.circles[3*I+2];k.push({key:this.circleKeys[I],x1:z-$,y1:N-$,x2:z+$,y2:N+$})}}else this._forEachCell(r,l,d,g,this._queryCell,k,{hitTest:v,overlapMode:b,seenUids:{box:{},circle:{}}},T);return k}query(r,l,d,g){return this._query(r,l,d,g,!1,null)}hitTest(r,l,d,g,v,b){return this._query(r,l,d,g,!0,v,b).length>0}hitTestCircle(r,l,d,g,v){const b=r-d,T=r+d,k=l-d,I=l+d;if(T<0||b>this.width||I<0||k>this.height)return!1;const z=[];return this._forEachCell(b,k,T,I,this._queryCellCircle,z,{hitTest:!0,overlapMode:g,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},v),z.length>0}_queryCell(r,l,d,g,v,b,T,k){const{seenUids:I,hitTest:z,overlapMode:N}=T,$=this.boxCells[v];if($!==null){const Z=this.bboxes;for(const X of $)if(!I.box[X]){I.box[X]=!0;const se=4*X,he=this.boxKeys[X];if(r<=Z[se+2]&&l<=Z[se+3]&&d>=Z[se+0]&&g>=Z[se+1]&&(!k||k(he))&&(!z||!Pe(N,he.overlapMode))&&(b.push({key:he,x1:Z[se],y1:Z[se+1],x2:Z[se+2],y2:Z[se+3]}),z))return!0}}const K=this.circleCells[v];if(K!==null){const Z=this.circles;for(const X of K)if(!I.circle[X]){I.circle[X]=!0;const se=3*X,he=this.circleKeys[X];if(this._circleAndRectCollide(Z[se],Z[se+1],Z[se+2],r,l,d,g)&&(!k||k(he))&&(!z||!Pe(N,he.overlapMode))){const pe=Z[se],J=Z[se+1],ve=Z[se+2];if(b.push({key:he,x1:pe-ve,y1:J-ve,x2:pe+ve,y2:J+ve}),z)return!0}}}return!1}_queryCellCircle(r,l,d,g,v,b,T,k){const{circle:I,seenUids:z,overlapMode:N}=T,$=this.boxCells[v];if($!==null){const Z=this.bboxes;for(const X of $)if(!z.box[X]){z.box[X]=!0;const se=4*X,he=this.boxKeys[X];if(this._circleAndRectCollide(I.x,I.y,I.radius,Z[se+0],Z[se+1],Z[se+2],Z[se+3])&&(!k||k(he))&&!Pe(N,he.overlapMode))return b.push(!0),!0}}const K=this.circleCells[v];if(K!==null){const Z=this.circles;for(const X of K)if(!z.circle[X]){z.circle[X]=!0;const se=3*X,he=this.circleKeys[X];if(this._circlesCollide(Z[se],Z[se+1],Z[se+2],I.x,I.y,I.radius)&&(!k||k(he))&&!Pe(N,he.overlapMode))return b.push(!0),!0}}}_forEachCell(r,l,d,g,v,b,T,k){const I=this._convertToXCellCoord(r),z=this._convertToYCellCoord(l),N=this._convertToXCellCoord(d),$=this._convertToYCellCoord(g);for(let K=I;K<=N;K++)for(let Z=z;Z<=$;Z++)if(v.call(this,r,l,d,g,this.xCellCount*Z+K,b,T,k))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,g,v,b){const T=g-r,k=v-l,I=d+b;return I*I>T*T+k*k}_circleAndRectCollide(r,l,d,g,v,b,T){const k=(b-g)/2,I=Math.abs(r-(g+k));if(I>k+d)return!1;const z=(T-v)/2,N=Math.abs(l-(v+z));if(N>z+d)return!1;if(I<=k||N<=z)return!0;const $=I-k,K=N-z;return $*$+K*K<=d*d}}function ja(f,r,l,d,g){const v=c.create();return r?(c.scale(v,v,[1/g,1/g,1]),l||c.rotateZ(v,v,d.angle)):c.multiply(v,d.labelPlaneMatrix,f),v}function yi(f,r,l,d,g){if(r){const v=c.clone(f);return c.scale(v,v,[g,g,1]),l||c.rotateZ(v,v,-d.angle),v}return d.glCoordMatrix}function jt(f,r,l){let d;l?(d=[f.x,f.y,l(f.x,f.y),1],c.transformMat4(d,d,r)):(d=[f.x,f.y,0,1],Ji(d,d,r));const g=d[3];return{point:new c.pointGeometry(d[0]/g,d[1]/g),signedDistanceFromCamera:g}}function ii(f,r){return .5+f/r*.5}function jr(f,r){const l=f[0]/f[3],d=f[1]/f[3];return l>=-r[0]&&l<=r[0]&&d>=-r[1]&&d<=r[1]}function Vr(f,r,l,d,g,v,b,T,k,I){const z=d?f.textSizeData:f.iconSizeData,N=c.evaluateSizeForZoom(z,l.transform.zoom),$=[256/l.width*2+1,256/l.height*2+1],K=d?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;K.clear();const Z=f.lineVertexArray,X=d?f.text.placedSymbolArray:f.icon.placedSymbolArray,se=l.transform.width/l.transform.height;let he=!1;for(let pe=0;pe<X.length;pe++){const J=X.get(pe);if(J.hidden||J.writingMode===c.WritingMode.vertical&&!he){Pt(J.numGlyphs,K);continue}let ve;if(he=!1,I?(ve=[J.anchorX,J.anchorY,I(J.anchorX,J.anchorY),1],c.transformMat4(ve,ve,r)):(ve=[J.anchorX,J.anchorY,0,1],Ji(ve,ve,r)),!jr(ve,$)){Pt(J.numGlyphs,K);continue}const me=ii(l.transform.cameraToCenterDistance,ve[3]),ke=c.evaluateSizeForFeature(z,N,J),Ce=b?ke/me:ke*me,Be=new c.pointGeometry(J.anchorX,J.anchorY),Te=jt(Be,g,I).point,et={},We=Dt(J,Ce,!1,T,r,g,v,f.glyphOffsetArray,Z,K,Te,Be,et,se,k,I);he=We.useVertical,(We.notEnoughRoom||he||We.needsFlipping&&Dt(J,Ce,!0,T,r,g,v,f.glyphOffsetArray,Z,K,Te,Be,et,se,k,I).notEnoughRoom)&&Pt(J.numGlyphs,K)}d?f.text.dynamicLayoutVertexBuffer.updateData(K):f.icon.dynamicLayoutVertexBuffer.updateData(K)}function wa(f,r,l,d,g,v,b,T,k,I,z,N,$){const K=T.glyphStartIndex+T.numGlyphs,Z=T.lineStartIndex,X=T.lineStartIndex+T.lineLength,se=r.getoffsetX(T.glyphStartIndex),he=r.getoffsetX(K-1),pe=ir(f*se,l,d,g,v,b,T.segment,Z,X,k,I,z,N,$);if(!pe)return null;const J=ir(f*he,l,d,g,v,b,T.segment,Z,X,k,I,z,N,$);return J?{first:pe,last:J}:null}function qe(f,r,l,d){return f===c.WritingMode.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(f===c.WritingMode.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Dt(f,r,l,d,g,v,b,T,k,I,z,N,$,K,Z,X){const se=r/24,he=f.lineOffsetX*se,pe=f.lineOffsetY*se;let J;if(f.numGlyphs>1){const ve=f.glyphStartIndex+f.numGlyphs,me=f.lineStartIndex,ke=f.lineStartIndex+f.lineLength,Ce=wa(se,T,he,pe,l,z,N,f,k,v,$,Z,X);if(!Ce)return{notEnoughRoom:!0};const Be=jt(Ce.first.point,b,X).point,Te=jt(Ce.last.point,b,X).point;if(d&&!l){const et=qe(f.writingMode,Be,Te,K);if(et)return et}J=[Ce.first];for(let et=f.glyphStartIndex+1;et<ve-1;et++)J.push(ir(se*T.getoffsetX(et),he,pe,l,z,N,f.segment,me,ke,k,v,$,Z,X));J.push(Ce.last)}else{if(d&&!l){const me=jt(N,g,X).point,ke=f.lineStartIndex+f.segment+1,Ce=new c.pointGeometry(k.getx(ke),k.gety(ke)),Be=jt(Ce,g,X),Te=Be.signedDistanceFromCamera>0?Be.point:It(N,Ce,me,1,g,X),et=qe(f.writingMode,me,Te,K);if(et)return et}const ve=ir(se*T.getoffsetX(f.glyphStartIndex),he,pe,l,z,N,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,k,v,$,Z,X);if(!ve)return{notEnoughRoom:!0};J=[ve]}for(const ve of J)c.addDynamicAttributes(I,ve.point,ve.angle);return{}}function It(f,r,l,d,g,v){const b=jt(f.add(f.sub(r)._unit()),g,v).point,T=l.sub(b);return l.add(T._mult(d/T.mag()))}function ir(f,r,l,d,g,v,b,T,k,I,z,N,$,K){const Z=d?f-r:f+r;let X=Z>0?1:-1,se=0;d&&(X*=-1,se=Math.PI),X<0&&(se+=Math.PI);let he=X>0?T+b:T+b+1,pe=g,J=g,ve=0,me=0;const ke=Math.abs(Z),Ce=[];for(;ve+me<=ke;){if(he+=X,he<T||he>=k)return null;if(J=pe,Ce.push(pe),pe=N[he],pe===void 0){const tt=new c.pointGeometry(I.getx(he),I.gety(he)),At=jt(tt,z,K);if(At.signedDistanceFromCamera>0)pe=N[he]=At.point;else{const Rt=he-X;pe=It(ve===0?v:new c.pointGeometry(I.getx(Rt),I.gety(Rt)),tt,J,ke-ve+1,z,K)}}ve+=me,me=J.dist(pe)}const Be=(ke-ve)/me,Te=pe.sub(J),et=Te.mult(Be)._add(J);et._add(Te._unit()._perp()._mult(l*X));const We=se+Math.atan2(pe.y-J.y,pe.x-J.x);return Ce.push(et),{point:et,angle:$?We:0,path:Ce}}const Ea=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Pt(f,r){for(let l=0;l<f;l++){const d=r.length;r.resize(d+4),r.float32.set(Ea,3*d)}}function Ji(f,r,l){const d=r[0],g=r[1];return f[0]=l[0]*d+l[4]*g+l[12],f[1]=l[1]*d+l[5]*g+l[13],f[3]=l[3]*d+l[7]*g+l[15],f}const Xn=100;class ko{constructor(r,l=new He(r.width+200,r.height+200,25),d=new He(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Xn,this.screenBottomBoundary=r.height+Xn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,g,v,b){const T=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,b),k=d*T.perspectiveRatio,I=r.x1*k+T.point.x,z=r.y1*k+T.point.y,N=r.x2*k+T.point.x,$=r.y2*k+T.point.y;return!this.isInsideGrid(I,z,N,$)||l!=="always"&&this.grid.hitTest(I,z,N,$,l,v)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[I,z,N,$],offscreen:this.isOffscreen(I,z,N,$)}}placeCollisionCircles(r,l,d,g,v,b,T,k,I,z,N,$,K,Z){const X=[],se=new c.pointGeometry(l.anchorX,l.anchorY),he=jt(se,b,Z),pe=ii(this.transform.cameraToCenterDistance,he.signedDistanceFromCamera),J=(z?v/pe:v*pe)/c.ONE_EM,ve=jt(se,T,Z).point,me=wa(J,g,l.lineOffsetX*J,l.lineOffsetY*J,!1,ve,se,l,d,T,{},!1,Z);let ke=!1,Ce=!1,Be=!0;if(me){const Te=.5*$*pe+K,et=new c.pointGeometry(-100,-100),We=new c.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),tt=new Ki,At=me.first,Rt=me.last;let gt=[];for(let $t=At.path.length-1;$t>=1;$t--)gt.push(At.path[$t]);for(let $t=1;$t<Rt.path.length;$t++)gt.push(Rt.path[$t]);const Qt=2.5*Te;if(k){const $t=gt.map(qt=>jt(qt,k,Z));gt=$t.some(qt=>qt.signedDistanceFromCamera<=0)?[]:$t.map(qt=>qt.point)}let en=[];if(gt.length>0){const $t=gt[0].clone(),qt=gt[0].clone();for(let rn=1;rn<gt.length;rn++)$t.x=Math.min($t.x,gt[rn].x),$t.y=Math.min($t.y,gt[rn].y),qt.x=Math.max(qt.x,gt[rn].x),qt.y=Math.max(qt.y,gt[rn].y);en=$t.x>=et.x&&qt.x<=We.x&&$t.y>=et.y&&qt.y<=We.y?[gt]:qt.x<et.x||$t.x>We.x||qt.y<et.y||$t.y>We.y?[]:c.clipLine([gt],et.x,et.y,We.x,We.y)}for(const $t of en){tt.reset($t,.25*Te);let qt=0;qt=tt.length<=.5*Te?1:Math.ceil(tt.paddedLength/Qt)+1;for(let rn=0;rn<qt;rn++){const Kn=rn/Math.max(qt-1,1),Bi=tt.lerp(Kn),_i=Bi.x+Xn,Ni=Bi.y+Xn;X.push(_i,Ni,Te,0);const Aa=_i-Te,oi=Ni-Te,zr=_i+Te,ta=Ni+Te;if(Be=Be&&this.isOffscreen(Aa,oi,zr,ta),Ce=Ce||this.isInsideGrid(Aa,oi,zr,ta),r!=="always"&&this.grid.hitTestCircle(_i,Ni,Te,r,N)&&(ke=!0,!I))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!I&&ke||!Ce||pe<this.perspectiveRatioCutoff?[]:X,offscreen:Be,collisionDetected:ke}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,g=1/0,v=-1/0,b=-1/0;for(const z of r){const N=new c.pointGeometry(z.x+Xn,z.y+Xn);d=Math.min(d,N.x),g=Math.min(g,N.y),v=Math.max(v,N.x),b=Math.max(b,N.y),l.push(N)}const T=this.grid.query(d,g,v,b).concat(this.ignoredGrid.query(d,g,v,b)),k={},I={};for(const z of T){const N=z.key;if(k[N.bucketInstanceId]===void 0&&(k[N.bucketInstanceId]={}),k[N.bucketInstanceId][N.featureIndex])continue;const $=[new c.pointGeometry(z.x1,z.y1),new c.pointGeometry(z.x2,z.y1),new c.pointGeometry(z.x2,z.y2),new c.pointGeometry(z.x1,z.y2)];c.polygonIntersectsPolygon(l,$)&&(k[N.bucketInstanceId][N.featureIndex]=!0,I[N.bucketInstanceId]===void 0&&(I[N.bucketInstanceId]=[]),I[N.bucketInstanceId].push(N.featureIndex))}return I}insertCollisionBox(r,l,d,g,v,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:v,collisionGroupID:b,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,g,v,b){const T=d?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:v,collisionGroupID:b,overlapMode:l};for(let I=0;I<r.length;I+=4)T.insertCircle(k,r[I],r[I+1],r[I+2])}projectAndGetPerspectiveRatio(r,l,d,g){let v;return g?(v=[l,d,g(l,d),1],c.transformMat4(v,v,r)):(v=[l,d,0,1],Ji(v,v,r)),{point:new c.pointGeometry((v[0]/v[3]+1)/2*this.transform.width+Xn,(-v[1]/v[3]+1)/2*this.transform.height+Xn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(r,l,d,g){return d<Xn||r>=this.screenRightBoundary||g<Xn||l>this.screenBottomBoundary}isInsideGrid(r,l,d,g){return d>=0&&r<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=c.identity([]);return c.translate(r,r,[-100,-100,0]),r}}function On(f,r,l){return r*(c.EXTENT/(f.tileSize*Math.pow(2,l-f.tileID.overscaledZ)))}class xr{constructor(r,l,d,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class nn{constructor(r,l,d,g,v){this.text=new xr(r?r.text:null,l,d,v),this.icon=new xr(r?r.icon:null,l,g,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Co{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class Li{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class Va{constructor(r,l,d,g,v){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=v}}class Ga{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function Po(f,r,l,d,g){const{horizontalAlign:v,verticalAlign:b}=c.getAnchorAlignment(f),T=-(v-.5)*r,k=-(b-.5)*l,I=c.evaluateVariableOffset(f,d);return new c.pointGeometry(T+I[0]*g,k+I[1]*g)}function qa(f,r,l,d,g,v){const{x1:b,x2:T,y1:k,y2:I,anchorPointX:z,anchorPointY:N}=f,$=new c.pointGeometry(r,l);return d&&$._rotate(g?v:-v),{x1:b+$.x,y1:k+$.y,x2:T+$.x,y2:I+$.y,anchorPointX:z,anchorPointY:N}}class W{constructor(r,l,d,g,v){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new ko(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Ga(g),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,l,d,g){const v=d.getBucket(l),b=d.latestFeatureIndex;if(!v||!b||l.id!==v.layerIds[0])return;const T=d.collisionBoxArray,k=v.layers[0].layout,I=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),z=d.tileSize/c.EXTENT,N=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),$=k.get("text-pitch-alignment")==="map",K=k.get("text-rotation-alignment")==="map",Z=On(d,1,this.transform.zoom),X=ja(N,$,K,this.transform,Z);let se=null;if($){const pe=yi(N,$,K,this.transform,Z);se=c.multiply([],this.transform.labelPlaneMatrix,pe)}this.retainedQueryData[v.bucketInstanceId]=new Va(v.bucketInstanceId,b,v.sourceLayerIndex,v.index,d.tileID);const he={bucket:v,layout:k,posMatrix:N,textLabelPlaneMatrix:X,labelToScreenMatrix:se,scale:I,textPixelRatio:z,holdingForFade:d.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(g)for(const pe of v.sortKeyRanges){const{sortKey:J,symbolInstanceStart:ve,symbolInstanceEnd:me}=pe;r.push({sortKey:J,symbolInstanceStart:ve,symbolInstanceEnd:me,parameters:he})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:he})}attemptAnchorPlacement(r,l,d,g,v,b,T,k,I,z,N,$,K,Z,X,se){const he=[$.textOffset0,$.textOffset1],pe=Po(r,d,g,he,v),J=this.collisionIndex.placeCollisionBox(qa(l,pe.x,pe.y,b,T,this.transform.angle),N,k,I,z.predicate,se);if((!X||this.collisionIndex.placeCollisionBox(qa(X,pe.x,pe.y,b,T,this.transform.angle),N,k,I,z.predicate,se).box.length!==0)&&J.box.length>0){let ve;if(this.prevPlacement&&this.prevPlacement.variableOffsets[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID]&&this.prevPlacement.placements[$.crossTileID].text&&(ve=this.prevPlacement.variableOffsets[$.crossTileID].anchor),$.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[$.crossTileID]={textOffset:he,width:d,height:g,anchor:r,textBoxScale:v,prevAnchor:ve},this.markUsedJustification(K,r,$,Z),K.allowVerticalPlacement&&(this.markUsedOrientation(K,Z,$),this.placedOrientations[$.crossTileID]=Z),{shift:pe,placedGlyphBoxes:J}}}placeLayerBucketPart(r,l,d){const{bucket:g,layout:v,posMatrix:b,textLabelPlaneMatrix:T,labelToScreenMatrix:k,textPixelRatio:I,holdingForFade:z,collisionBoxArray:N,partiallyEvaluatedTextSize:$,collisionGroup:K}=r.parameters,Z=v.get("text-optional"),X=v.get("icon-optional"),se=c.getOverlapMode(v,"text-overlap","text-allow-overlap"),he=se==="always",pe=c.getOverlapMode(v,"icon-overlap","icon-allow-overlap"),J=pe==="always",ve=v.get("text-rotation-alignment")==="map",me=v.get("text-pitch-alignment")==="map",ke=v.get("icon-text-fit")!=="none",Ce=v.get("symbol-z-order")==="viewport-y",Be=he&&(J||!g.hasIconData()||X),Te=J&&(he||!g.hasTextData()||Z);!g.collisionArrays&&N&&g.deserializeCollisionBoxes(N);const et=(We,tt)=>{if(l[We.crossTileID])return;if(z)return void(this.placements[We.crossTileID]=new Co(!1,!1,!1));let At=!1,Rt=!1,gt=!0,Qt=null,en={box:null,offscreen:null},$t={box:null,offscreen:null},qt=null,rn=null,Kn=null,Bi=0,_i=0,Ni=0;tt.textFeatureIndex?Bi=tt.textFeatureIndex:We.useRuntimeCollisionCircles&&(Bi=We.featureIndex),tt.verticalTextFeatureIndex&&(_i=tt.verticalTextFeatureIndex);const Aa=this.retainedQueryData[g.bucketInstanceId].tileID,oi=this.terrain?(Gn,Bt)=>this.terrain.getElevation(Aa,Gn,Bt):null;for(const Gn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Bt=tt[Gn];Bt&&(Bt.elevation=oi?oi(Bt.anchorPointX,Bt.anchorPointY):0)}const zr=tt.textBox;if(zr){const Gn=Kt=>{let Jn=c.WritingMode.horizontal;if(g.allowVerticalPlacement&&!Kt&&this.prevPlacement){const Qn=this.prevPlacement.placedOrientations[We.crossTileID];Qn&&(this.placedOrientations[We.crossTileID]=Qn,Jn=Qn,this.markUsedOrientation(g,Jn,We))}return Jn},Bt=(Kt,Jn)=>{if(g.allowVerticalPlacement&&We.numVerticalGlyphVertices>0&&tt.verticalTextBox){for(const Qn of g.writingModes)if(Qn===c.WritingMode.vertical?(en=Jn(),$t=en):en=Kt(),en&&en.box&&en.box.length)break}else en=Kt()};if(v.get("text-variable-anchor")){let Kt=v.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[We.crossTileID]){const yn=this.prevPlacement.variableOffsets[We.crossTileID];Kt.indexOf(yn.anchor)>0&&(Kt=Kt.filter(si=>si!==yn.anchor),Kt.unshift(yn.anchor))}const Jn=(yn,si,Ka)=>{const Tu=yn.x2-yn.x1,Uo=yn.y2-yn.y1,Qd=We.textBoxScale,ku=ke&&pe==="never"?si:null;let Ma={box:[],offscreen:!1};const Ja=se!=="never"?2*Kt.length:Kt.length;for(let Qa=0;Qa<Ja;++Qa){const Zl=this.attemptAnchorPlacement(Kt[Qa%Kt.length],yn,Tu,Uo,Qd,ve,me,I,b,K,Qa>=Kt.length?se:"never",We,g,Ka,ku,oi);if(Zl&&(Ma=Zl.placedGlyphBoxes,Ma&&Ma.box&&Ma.box.length)){At=!0,Qt=Zl.shift;break}}return Ma};Bt(()=>Jn(zr,tt.iconBox,c.WritingMode.horizontal),()=>{const yn=tt.verticalTextBox;return g.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&We.numVerticalGlyphVertices>0&&yn?Jn(yn,tt.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),en&&(At=en.box,gt=en.offscreen);const Qn=Gn(en&&en.box);if(!At&&this.prevPlacement){const yn=this.prevPlacement.variableOffsets[We.crossTileID];yn&&(this.variableOffsets[We.crossTileID]=yn,this.markUsedJustification(g,yn.anchor,We,Qn))}}else{const Kt=(Jn,Qn)=>{const yn=this.collisionIndex.placeCollisionBox(Jn,se,I,b,K.predicate,oi);return yn&&yn.box&&yn.box.length&&(this.markUsedOrientation(g,Qn,We),this.placedOrientations[We.crossTileID]=Qn),yn};Bt(()=>Kt(zr,c.WritingMode.horizontal),()=>{const Jn=tt.verticalTextBox;return g.allowVerticalPlacement&&We.numVerticalGlyphVertices>0&&Jn?Kt(Jn,c.WritingMode.vertical):{box:null,offscreen:null}}),Gn(en&&en.box&&en.box.length)}}if(qt=en,At=qt&&qt.box&&qt.box.length>0,gt=qt&&qt.offscreen,We.useRuntimeCollisionCircles){const Gn=g.text.placedSymbolArray.get(We.centerJustifiedTextSymbolIndex),Bt=c.evaluateSizeForFeature(g.textSizeData,$,Gn),Kt=v.get("text-padding");rn=this.collisionIndex.placeCollisionCircles(se,Gn,g.lineVertexArray,g.glyphOffsetArray,Bt,b,T,k,d,me,K.predicate,We.collisionCircleDiameter,Kt,oi),rn.circles.length&&rn.collisionDetected&&!d&&c.warnOnce("Collisions detected, but collision boxes are not shown"),At=he||rn.circles.length>0&&!rn.collisionDetected,gt=gt&&rn.offscreen}if(tt.iconFeatureIndex&&(Ni=tt.iconFeatureIndex),tt.iconBox){const Gn=Bt=>{const Kt=ke&&Qt?qa(Bt,Qt.x,Qt.y,ve,me,this.transform.angle):Bt;return this.collisionIndex.placeCollisionBox(Kt,pe,I,b,K.predicate,oi)};$t&&$t.box&&$t.box.length&&tt.verticalIconBox?(Kn=Gn(tt.verticalIconBox),Rt=Kn.box.length>0):(Kn=Gn(tt.iconBox),Rt=Kn.box.length>0),gt=gt&&Kn.offscreen}const ta=Z||We.numHorizontalGlyphVertices===0&&We.numVerticalGlyphVertices===0,Wl=X||We.numIconVertices===0;if(ta||Wl?Wl?ta||(Rt=Rt&&At):At=Rt&&At:Rt=At=Rt&&At,At&&qt&&qt.box&&this.collisionIndex.insertCollisionBox(qt.box,se,v.get("text-ignore-placement"),g.bucketInstanceId,$t&&$t.box&&_i?_i:Bi,K.ID),Rt&&Kn&&this.collisionIndex.insertCollisionBox(Kn.box,pe,v.get("icon-ignore-placement"),g.bucketInstanceId,Ni,K.ID),rn&&(At&&this.collisionIndex.insertCollisionCircles(rn.circles,se,v.get("text-ignore-placement"),g.bucketInstanceId,Bi,K.ID),d)){const Gn=g.bucketInstanceId;let Bt=this.collisionCircleArrays[Gn];Bt===void 0&&(Bt=this.collisionCircleArrays[Gn]=new Li);for(let Kt=0;Kt<rn.circles.length;Kt+=4)Bt.circles.push(rn.circles[Kt+0]),Bt.circles.push(rn.circles[Kt+1]),Bt.circles.push(rn.circles[Kt+2]),Bt.circles.push(rn.collisionDetected?1:0)}if(We.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[We.crossTileID]=new Co(At||Be,Rt||Te,gt||g.justReloaded),l[We.crossTileID]=!0};if(Ce){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const We=g.getSortedSymbolIndexes(this.transform.angle);for(let tt=We.length-1;tt>=0;--tt){const At=We[tt];et(g.symbolInstances.get(At),g.collisionArrays[At])}}else for(let We=r.symbolInstanceStart;We<r.symbolInstanceEnd;We++)et(g.symbolInstances.get(We),g.collisionArrays[We]);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const We=this.collisionCircleArrays[g.bucketInstanceId];c.invert(We.invProjMatrix,b),We.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,l,d,g){let v;v=g===c.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(l)];const b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(r.text.placedSymbolArray.get(T).crossTileID=v>=0&&T!==v?0:d.crossTileID)}markUsedOrientation(r,l,d){const g=l===c.WritingMode.horizontal||l===c.WritingMode.horizontalOnly?l:0,v=l===c.WritingMode.vertical?l:0,b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const T of b)r.text.placedSymbolArray.get(T).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(r):1,v=l?l.opacities:{},b=l?l.variableOffsets:{},T=l?l.placedOrientations:{};for(const k in this.placements){const I=this.placements[k],z=v[k];z?(this.opacities[k]=new nn(z,g,I.text,I.icon),d=d||I.text!==z.text.placed||I.icon!==z.icon.placed):(this.opacities[k]=new nn(null,g,I.text,I.icon,I.skipFade),d=d||I.text||I.icon)}for(const k in v){const I=v[k];if(!this.opacities[k]){const z=new nn(I,g,!1,!1);z.isHidden()||(this.opacities[k]=z,d=d||I.text.placed||I.icon.placed)}}for(const k in b)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=b[k]);for(const k in T)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=T[k]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const g of l){const v=g.getBucket(r);v&&g.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,d,g.collisionBoxArray)}}updateBucketOpacities(r,l,d){r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0].layout,v=new nn(null,0,!1,!1,!0),b=g.get("text-allow-overlap"),T=g.get("icon-allow-overlap"),k=g.get("text-variable-anchor"),I=g.get("text-rotation-alignment")==="map",z=g.get("text-pitch-alignment")==="map",N=g.get("icon-text-fit")!=="none",$=new nn(null,0,b&&(T||!r.hasIconData()||g.get("icon-optional")),T&&(b||!r.hasTextData()||g.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const K=(Z,X,se)=>{for(let he=0;he<X/4;he++)Z.opacityVertexArray.emplaceBack(se)};for(let Z=0;Z<r.symbolInstances.length;Z++){const X=r.symbolInstances.get(Z),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:he,crossTileID:pe}=X;let J=this.opacities[pe];l[pe]?J=v:J||(J=$,this.opacities[pe]=J),l[pe]=!0;const ve=X.numIconVertices>0,me=this.placedOrientations[X.crossTileID],ke=me===c.WritingMode.vertical,Ce=me===c.WritingMode.horizontal||me===c.WritingMode.horizontalOnly;if(se>0||he>0){const Be=ue(J.text);K(r.text,se,ke?Se:Be),K(r.text,he,Ce?Se:Be);const Te=J.text.isHidden();[X.rightJustifiedTextSymbolIndex,X.centerJustifiedTextSymbolIndex,X.leftJustifiedTextSymbolIndex].forEach(tt=>{tt>=0&&(r.text.placedSymbolArray.get(tt).hidden=Te||ke?1:0)}),X.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(X.verticalPlacedTextSymbolIndex).hidden=Te||Ce?1:0);const et=this.variableOffsets[X.crossTileID];et&&this.markUsedJustification(r,et.anchor,X,me);const We=this.placedOrientations[X.crossTileID];We&&(this.markUsedJustification(r,"left",X,We),this.markUsedOrientation(r,We,X))}if(ve){const Be=ue(J.icon),Te=!(N&&X.verticalPlacedIconSymbolIndex&&ke);X.placedIconSymbolIndex>=0&&(K(r.icon,X.numIconVertices,Te?Be:Se),r.icon.placedSymbolArray.get(X.placedIconSymbolIndex).hidden=J.icon.isHidden()),X.verticalPlacedIconSymbolIndex>=0&&(K(r.icon,X.numVerticalIconVertices,Te?Se:Be),r.icon.placedSymbolArray.get(X.verticalPlacedIconSymbolIndex).hidden=J.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Be=r.collisionArrays[Z];if(Be){let Te=new c.pointGeometry(0,0);if(Be.textBox||Be.verticalTextBox){let We=!0;if(k){const tt=this.variableOffsets[pe];tt?(Te=Po(tt.anchor,tt.width,tt.height,tt.textOffset,tt.textBoxScale),I&&Te._rotate(z?this.transform.angle:-this.transform.angle)):We=!1}Be.textBox&&A(r.textCollisionBox.collisionVertexArray,J.text.placed,!We||ke,Te.x,Te.y),Be.verticalTextBox&&A(r.textCollisionBox.collisionVertexArray,J.text.placed,!We||Ce,Te.x,Te.y)}const et=Boolean(!Ce&&Be.verticalIconBox);Be.iconBox&&A(r.iconCollisionBox.collisionVertexArray,J.icon.placed,et,N?Te.x:0,N?Te.y:0),Be.verticalIconBox&&A(r.iconCollisionBox.collisionVertexArray,J.icon.placed,!et,N?Te.x:0,N?Te.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Z=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Z.invProjMatrix,r.placementViewportMatrix=Z.viewportMatrix,r.collisionCircleArray=Z.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function A(f,r,l,d,g){f.emplaceBack(r?1:0,l?1:0,d||0,g||0),f.emplaceBack(r?1:0,l?1:0,d||0,g||0),f.emplaceBack(r?1:0,l?1:0,d||0,g||0),f.emplaceBack(r?1:0,l?1:0,d||0,g||0)}const B=Math.pow(2,25),G=Math.pow(2,24),q=Math.pow(2,17),ne=Math.pow(2,16),le=Math.pow(2,9),oe=Math.pow(2,8),re=Math.pow(2,1);function ue(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const r=f.placed?1:0,l=Math.floor(127*f.opacity);return l*B+r*G+l*q+r*ne+l*le+r*oe+l*re+r}const Se=0;class Le{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,g,v){const b=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(b,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,k)=>T.sortKey-k.sortKey));this._currentPartIndex<b.length;)if(l.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,v())return!0;return!1}}class be{constructor(r,l,d,g,v,b,T,k){this.placement=new W(r,l,b,T,k),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const g=c.exported.now(),v=()=>{const b=c.exported.now()-g;return!this._forceFullPlacement&&b>2};for(;this._currentPlacementIndex>=0;){const b=l[r[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Le(b)),this._inProgressLayer.continuePlacement(d[b.source],this.placement,this._showCollisionBoxes,b,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const lt=512/c.EXTENT/2;class ht{constructor(r,l,d){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(let g=0;g<l.length;g++){const v=l.get(g),b=v.key;this.indexedSymbolInstances[b]||(this.indexedSymbolInstances[b]=[]),this.indexedSymbolInstances[b].push({crossTileID:v.crossTileID,coord:this.getScaledCoordinates(v,r)})}}getScaledCoordinates(r,l){const d=lt/Math.pow(2,l.canonical.z-this.tileID.canonical.z);return{x:Math.floor((l.canonical.x*c.EXTENT+r.anchorX)*d),y:Math.floor((l.canonical.y*c.EXTENT+r.anchorY)*d)}}findMatches(r,l,d){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let v=0;v<r.length;v++){const b=r.get(v);if(b.crossTileID)continue;const T=this.indexedSymbolInstances[b.key];if(!T)continue;const k=this.getScaledCoordinates(b,l);for(const I of T)if(Math.abs(I.coord.x-k.x)<=g&&Math.abs(I.coord.y-k.y)<=g&&!d[I.crossTileID]){d[I.crossTileID]=!0,b.crossTileID=I.crossTileID;break}}}}class Qe{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class bt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const g=this.indexes[d],v={};for(const b in g){const T=g[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+l),v[T.tileID.key]=T}this.indexes[d]=v}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const b=this.indexes[v];if(Number(v)>r.overscaledZ)for(const T in b){const k=b[T];k.tileID.isChildOf(r)&&k.findMatches(l.symbolInstances,r,g)}else{const T=b[r.scaledTo(Number(v)).key];T&&T.findMatches(l.symbolInstances,r,g)}}for(let v=0;v<l.symbolInstances.length;v++){const b=l.symbolInstances.get(v);b.crossTileID||(b.crossTileID=d.generate(),g[b.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ht(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d in l.indexedSymbolInstances)for(const g of l.indexedSymbolInstances[d])delete this.usedCrossTileIDs[r][g.crossTileID]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const g=this.indexes[d];for(const v in g)r[g[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[v]),delete g[v],l=!0)}return l}}class Et{constructor(){this.layerIndexes={},this.crossTileIDs=new Qe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new bt);let v=!1;const b={};g.handleWrapJump(d);for(const T of l){const k=T.getBucket(r);k&&r.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,k,this.crossTileIDs)&&(v=!0),b[k.bucketInstanceId]=!0)}return g.removeStaleBuckets(b)&&(v=!0),v}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}var Vt=c.createLayout([{name:"a_pos",type:"Int16",components:2}]);class kt extends c.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=r._cache.max,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const r in this._tiles){const l=this._tiles[r];l.textures.forEach(d=>d.destroy()),l.textures=[]}}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];for(const d of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),c.ortho(d.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),this._tiles[d.key]=new Vn(d,this.tileSize))}removeOutdated(r){const l={};this.renderHistory=this.renderHistory.filter((d,g)=>this.renderHistory.indexOf(d)===g).slice(0,this.renderHistorySize);for(const d of this._renderableTilesKeys)l[d]=!0;for(const d of this.renderHistory)l[d]=!0;for(const d in this._tiles)l[d]||(this._tiles[d].clearTextures(r),delete this._tiles[d])}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16),c.ortho(v.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),l[d]=v}else if(g.canonical.isChildOf(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const b=g.canonical.z-r.canonical.z,T=g.canonical.x-(g.canonical.x>>b<<b),k=g.canonical.y-(g.canonical.y>>b<<b),I=c.EXTENT>>b;c.ortho(v.posMatrix,0,I,0,I,0,1),c.translate(v.posMatrix,v.posMatrix,[-T*I,-k*I,0]),l[d]=v}else if(r.canonical.isChildOf(g.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const b=r.canonical.z-g.canonical.z,T=r.canonical.x-(r.canonical.x>>b<<b),k=r.canonical.y-(r.canonical.y>>b<<b),I=c.EXTENT>>b;c.ortho(v.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),c.translate(v.posMatrix,v.posMatrix,[T*I,k*I,0]),c.scale(v.posMatrix,v.posMatrix,[1/2**b,1/2**b,0]),l[d]=v}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&l)for(;g>=d.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(g--).key);return v}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeLoaded>=r)}}class Lt{constructor(r,l,d){this.style=r,this.sourceCache=new kt(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.elevationOffset=typeof d.elevationOffset=="number"?d.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(r,l,d,g=c.EXTENT){if(!(l>=0&&l<g&&d>=0&&d<g))return this.elevationOffset;let v=0;const b=this.getTerrainData(r);if(b.tile&&b.tile.dem){const T=c.transformMat4$1([],[l/g*c.EXTENT,d/g*c.EXTENT],b.u_terrain_matrix),k=[T[0]*b.tile.dem.dim,T[1]*b.tile.dem.dim],I=[Math.floor(k[0]),Math.floor(k[1])],z=b.tile.dem.get(I[0],I[1]),N=b.tile.dem.get(I[0],I[1]+1),$=b.tile.dem.get(I[0]+1,I[1]),K=b.tile.dem.get(I[0]+1,I[1]+1);v=c.number(c.number(z,N,k[0]-I[0]),c.number($,K,k[0]-I[0]),k[1]-I[1])}return v}rememberForRerender(r,l){for(const d in this.sourceCache._tiles){const g=this.sourceCache._tiles[d];(g.tileID.equals(l)||g.tileID.isChildOf(l))&&(r===this.sourceCache.sourceCache.id&&(g.timeLoaded=Date.now()),this._rerender[r]=this._rerender[r]||{},this._rerender[r][g.tileID.key]=!0)}}needsRerender(r,l){return this._rerender[r]&&this._rerender[r][l.key]}clearRerenderCache(){this._rerender={}}getElevation(r,l,d,g=c.EXTENT){return(this.getDEMElevation(r,l,d,g)+this.elevationOffset)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.style.map.painter.context,v=new c.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ae(g,v,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ae(g,new c.RGBAImage({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.identity([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.style.map.painter.context;l.demTexture=this.style.map.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new ae(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let v=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?v=r.canonical.z-g:c.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=r.canonical.x-(r.canonical.x>>v<<v),T=r.canonical.y-(r.canonical.y>>v<<v),k=c.fromScaling(new Float64Array(16),[1/(c.EXTENT<<v),1/(c.EXTENT<<v),0]);c.translate(k,k,[b*c.EXTENT,T*c.EXTENT,0]),this._demMatrixCache[r.key]={matrix:k,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getRTTFramebuffer(){const r=this.style.map.painter;if(!this._rttFramebuffer){const l=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=r.context.createFramebuffer(l,l,!0),this._rttFramebuffer.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,l,l))}return this._rttFramebuffer}getFramebuffer(r){const l=this.style.map.painter,d=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ae(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ae(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,g,!0),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,b=0;v<this._coordsTextureSize;v++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)l[b+0]=255&T,l[b+1]=255&v,l[b+2]=T>>8<<4|v>>8,l[b+3]=0;const d=new c.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new ae(r,d,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){const l=new Uint8Array(4),d=this.style.map.painter,g=d.context,v=g.gl;g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(r.x,d.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,l),g.bindFramebuffer.set(null);const b=l[0]+(l[2]>>4<<8),T=l[1]+((15&l[2])<<8),k=this.coordsIndex[255-l[3]],I=k&&this.sourceCache.getTileByID(k);if(!I)return null;const z=this._coordsTextureSize,N=(1<<I.tileID.canonical.z)*z;return new c.MercatorCoordinate((I.tileID.canonical.x*z+b)/N,(I.tileID.canonical.y*z+T)/N,this.getElevation(I.tileID,b,T,z))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.style.map.painter.context,l=new c.PosArray,d=new c.TriangleIndexArray,g=this.meshSize,v=c.EXTENT/g,b=g*g;for(let T=0;T<=g;T++)for(let k=0;k<=g;k++)l.emplaceBack(k*v,T*v);for(let T=0;T<b;T+=g+1)for(let k=0;k<g;k++)d.emplaceBack(k+T,g+k+T+1,g+k+T+2),d.emplaceBack(k+T,g+k+T+2,k+T+1);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(l,Vt.members),segments:c.SegmentVector.simpleSegment(0,0,l.length,d.length)},this._mesh}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=(l.dem.min+this.elevationOffset)*this.exaggeration,d.maxElevation=(l.dem.max+this.elevationOffset)*this.exaggeration),d}}const Gt=(f,r)=>c.emitValidationErrors(f,r&&r.filter(l=>l.identifier!=="source.canvas")),an=c.pick(Ut,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yn=c.pick(Ut,["setCenter","setZoom","setBearing","setPitch"]),fn=function(){const f={},r=c.spec.$version;for(const l in c.spec.$root){const d=c.spec.$root[l];if(d.required){let g=null;g=l==="version"?r:d.type==="array"?[]:{},g!=null&&(f[l]=g)}}return f}();class dr extends c.Evented{constructor(r,l={}){super(),this.map=r,this.dispatcher=new Fe(Eo(),this),this.imageManager=new Y,this.imageManager.setEventedParent(this),this.glyphManager=new xe(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new ot(256,512),this.crossTileSymbolIndex=new Et,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const d=this;this._rtlTextPluginCallback=dr.registerForPluginStateChange(g=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(v,b)=>{if(c.triggerPluginCompletionEvent(v),b&&b.every(T=>T))for(const T in d.sourceCaches)d.sourceCaches[T].reload()})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const v=this.sourceCaches[g.sourceId];if(!v)return;const b=v.getSource();if(b&&b.vectorLayerIds)for(const T in this._layers){const k=this._layers[T];k.source===b.id&&this._validateLayer(k)}})}loadURL(r,l={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const d=typeof l.validate!="boolean"||l.validate,g=this.map._requestManager.transformRequest(r,c.ResourceType.Style);this._request=c.getJSON(g,(v,b)=>{this._request=null,v?this.fire(new c.ErrorEvent(v)):b&&this._load(b,d)})}loadJSON(r,l={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(r,l.validate!==!1)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(fn,!1)}_load(r,l){if(l&&Gt(this,c.validateStyle(r)))return;this._loaded=!0,this.stylesheet=r;for(const g in r.sources)this.addSource(g,r.sources[g],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);const d=Cs(this.stylesheet.layers);this._order=d.map(g=>g.id),this._layers={},this._serializedLayers={};for(let g of d)g=c.createStyleLayer(g),g.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=g,this._serializedLayers[g.id]=g.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new De(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}_loadSprite(r){this._spriteRequest=function(l,d,g,v){let b,T,k;const I=g>1?"@2x":"";let z=c.getJSON(d.transformRequest(d.normalizeSpriteURL(l,I,".json"),c.ResourceType.SpriteJSON),(K,Z)=>{z=null,k||(k=K,b=Z,$())}),N=c.getImage(d.transformRequest(d.normalizeSpriteURL(l,I,".png"),c.ResourceType.SpriteImage),(K,Z)=>{N=null,k||(k=K,T=Z,$())});function $(){if(k)v(k);else if(b&&T){const K=c.exported.getImageData(T),Z={};for(const X in b){const{width:se,height:he,x:pe,y:J,sdf:ve,pixelRatio:me,stretchX:ke,stretchY:Ce,content:Be}=b[X],Te=new c.RGBAImage({width:se,height:he});c.RGBAImage.copy(K,Te,{x:pe,y:J},{x:0,y:0},{width:se,height:he}),Z[X]={data:Te,pixelRatio:me,sdf:ve,stretchX:ke,stretchY:Ce,content:Be}}v(null,Z)}}return{cancel(){z&&(z.cancel(),z=null),N&&(N.cancel(),N=null)}}}(r,this.map._requestManager,this.map.getPixelRatio(),(l,d)=>{if(this._spriteRequest=null,l)this.fire(new c.ErrorEvent(l));else if(d)for(const g in d)this.imageManager.addImage(g,d[g]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(r){const l=[];for(const d of r){const g=this._layers[d];g.type!=="custom"&&l.push(g.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(g.length||v.length)&&this._updateWorkerLayers(g,v);for(const b in this._updatedSources){const T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const v=this.sourceCaches[g];d[g]=v.used,v.used=!1}for(const g of this._order){const v=this._layers[g];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const g in d){const v=this.sourceCaches[g];d[g]!==v.used&&v.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(r){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),r){const l=this.sourceCaches[r.source];if(!l)throw new Error(`cannot load terrain, because there exists no source with ID: ${r.source}`);this.terrain=new Lt(this,l,r),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=d=>{d.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=d=>{d.tile&&(d.sourceId===r.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(d.sourceId,d.tile.tileID)):d.source.type==="geojson"&&this.terrain.rememberForRerender(d.sourceId,d.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new c.Event("terrain",{terrain:r}))}setState(r){if(this._checkLoaded(),Gt(this,c.validateStyle(r)))return!1;(r=c.clone$1(r)).layers=Cs(r.layers);const l=function(g,v){if(!g)return[{command:Ut.setStyle,args:[v]}];let b=[];try{if(!O(g.version,v.version))return[{command:Ut.setStyle,args:[v]}];O(g.center,v.center)||b.push({command:Ut.setCenter,args:[v.center]}),O(g.zoom,v.zoom)||b.push({command:Ut.setZoom,args:[v.zoom]}),O(g.bearing,v.bearing)||b.push({command:Ut.setBearing,args:[v.bearing]}),O(g.pitch,v.pitch)||b.push({command:Ut.setPitch,args:[v.pitch]}),O(g.sprite,v.sprite)||b.push({command:Ut.setSprite,args:[v.sprite]}),O(g.glyphs,v.glyphs)||b.push({command:Ut.setGlyphs,args:[v.glyphs]}),O(g.transition,v.transition)||b.push({command:Ut.setTransition,args:[v.transition]}),O(g.light,v.light)||b.push({command:Ut.setLight,args:[v.light]});const T={},k=[];(function(z,N,$,K){let Z;for(Z in N=N||{},z=z||{})Object.prototype.hasOwnProperty.call(z,Z)&&(Object.prototype.hasOwnProperty.call(N,Z)||xa(Z,$,K));for(Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&(Object.prototype.hasOwnProperty.call(z,Z)?O(z[Z],N[Z])||(z[Z].type==="geojson"&&N[Z].type==="geojson"&&Ps(z,N,Z)?$.push({command:Ut.setGeoJSONSourceData,args:[Z,N[Z].data]}):ba(Z,N,$,K)):Di(Z,N,$))})(g.sources,v.sources,k,T);const I=[];g.layers&&g.layers.forEach(z=>{T[z.source]?b.push({command:Ut.removeLayer,args:[z.id]}):I.push(z)}),b=b.concat(k),function(z,N,$){N=N||[];const K=(z=z||[]).map(Yi),Z=N.map(Yi),X=z.reduce(To,{}),se=N.reduce(To,{}),he=K.slice(),pe=Object.create(null);let J,ve,me,ke,Ce,Be,Te;for(J=0,ve=0;J<K.length;J++)me=K[J],Object.prototype.hasOwnProperty.call(se,me)?ve++:($.push({command:Ut.removeLayer,args:[me]}),he.splice(he.indexOf(me,ve),1));for(J=0,ve=0;J<Z.length;J++)me=Z[Z.length-1-J],he[he.length-1-J]!==me&&(Object.prototype.hasOwnProperty.call(X,me)?($.push({command:Ut.removeLayer,args:[me]}),he.splice(he.lastIndexOf(me,he.length-ve),1)):ve++,Be=he[he.length-J],$.push({command:Ut.addLayer,args:[se[me],Be]}),he.splice(he.length-J,0,me),pe[me]=!0);for(J=0;J<Z.length;J++)if(me=Z[J],ke=X[me],Ce=se[me],!pe[me]&&!O(ke,Ce))if(O(ke.source,Ce.source)&&O(ke["source-layer"],Ce["source-layer"])&&O(ke.type,Ce.type)){for(Te in Xi(ke.layout,Ce.layout,$,me,null,Ut.setLayoutProperty),Xi(ke.paint,Ce.paint,$,me,null,Ut.setPaintProperty),O(ke.filter,Ce.filter)||$.push({command:Ut.setFilter,args:[me,Ce.filter]}),O(ke.minzoom,Ce.minzoom)&&O(ke.maxzoom,Ce.maxzoom)||$.push({command:Ut.setLayerZoomRange,args:[me,Ce.minzoom,Ce.maxzoom]}),ke)Object.prototype.hasOwnProperty.call(ke,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?Xi(ke[Te],Ce[Te],$,me,Te.slice(6),Ut.setPaintProperty):O(ke[Te],Ce[Te])||$.push({command:Ut.setLayerProperty,args:[me,Te,Ce[Te]]}));for(Te in Ce)Object.prototype.hasOwnProperty.call(Ce,Te)&&!Object.prototype.hasOwnProperty.call(ke,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?Xi(ke[Te],Ce[Te],$,me,Te.slice(6),Ut.setPaintProperty):O(ke[Te],Ce[Te])||$.push({command:Ut.setLayerProperty,args:[me,Te,Ce[Te]]}))}else $.push({command:Ut.removeLayer,args:[me]}),Be=he[he.lastIndexOf(me)+1],$.push({command:Ut.addLayer,args:[Ce,Be]})}(I,v.layers,b)}catch(T){console.warn("Unable to compute style diff:",T),b=[{command:Ut.setStyle,args:[v]}]}return b}(this.serialize(),r).filter(g=>!(g.command in Yn));if(l.length===0)return!1;const d=l.filter(g=>!(g.command in an));if(d.length>0)throw new Error(`Unimplemented: ${d.map(g=>g.command).join(", ")}.`);return l.forEach(g=>{g.command!=="setTransition"&&this[g.command].apply(this,g.args)}),this.stylesheet=r,!0}addImage(r,l){if(this.getImage(r))return this.fire(new c.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new c.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(c.validateStyle.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.sourceCaches[r]=new Ar(r,l,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new c.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new c.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let v;if(r.type==="custom"){if(Gt(this,c.validateCustomStyleLayer(r)))return;v=c.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(g,r.source),r=c.clone$1(r),r=c.extend(r,{source:g})),this._validate(c.validateStyle.layer,`layers.${g}`,r,{arrayIndex:-1},d))return;v=c.createStyleLayer(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[v.id]=v.serialize()}const b=l?this._order.indexOf(l):this._order.length;if(l&&b===-1)this.fire(new c.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(b,0,g),this._layerOrderChanged=!0,this._layers[g]=v,this._removedLayers[g]&&v.source&&v.type!=="custom"){const T=this._removedLayers[g];delete this._removedLayers[g],T.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new c.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new c.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new c.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===d||(l!=null&&(g.minzoom=l),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new c.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!O(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.validateStyle.filter,`layers.${g.id}.filter`,l,null,d)||(g.filter=c.clone$1(l),this._updateLayer(g)))}else this.fire(new c.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return c.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,l,d,g={}){this._checkLoaded();const v=this.getLayer(r);v?O(v.getLayoutProperty(l),d)||(v.setLayoutProperty(l,d,g),this._updateLayer(v)):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new c.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,g={}){this._checkLoaded();const v=this.getLayer(r);v?O(v.getPaintProperty(l),d)||(v.setPaintProperty(l,d,g)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,g=r.sourceLayer,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const b=v.getSource().type;b==="geojson"&&g?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||g?(r.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(g,r.id,l)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const v=g.getSource().type,b=v==="vector"?r.sourceLayer:void 0;v!=="vector"||b?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(b,r.id,l):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0)return g.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,r.id)):void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,r=>r.serialize()),layers:this._serializeLayers(this._order)},r=>r!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=b=>this._layers[b].type==="fill-extrusion",d={},g=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(l(T)){d[T]=b;for(const k of r){const I=k[T];if(I)for(const z of I)g.push(z)}}}g.sort((b,T)=>T.intersectionZ-b.intersectionZ);const v=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(l(T))for(let k=g.length-1;k>=0;k--){const I=g[k].feature;if(d[I.layer.id]<b)break;v.push(I),g.pop()}else for(const k of r){const I=k[T];if(I)for(const z of I)v.push(z.feature)}}return v}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const b of l.layers){const T=this._layers[b];if(!T)return this.fire(new c.ErrorEvent(new Error(`The layer '${b}' does not exist in the map's style and cannot be queried for features.`))),[];g[T.source]=!0}}const v=[];l.availableImages=this._availableImages;for(const b in this.sourceCaches)l.layers&&!g[b]||v.push(Hn(this.sourceCaches[b],this._layers,this._serializedLayers,r,l,d));return this.placement&&v.push(function(b,T,k,I,z,N,$){const K={},Z=N.queryRenderedSymbols(I),X=[];for(const se of Object.keys(Z).map(Number))X.push($[se]);X.sort(rr);for(const se of X){const he=se.featureIndex.lookupSymbolFeatures(Z[se.bucketInstanceId],T,se.bucketIndex,se.sourceLayerIndex,z.filter,z.layers,z.availableImages,b);for(const pe in he){const J=K[pe]=K[pe]||[],ve=he[pe];ve.sort((me,ke)=>{const Ce=se.featureSortOrder;if(Ce){const Be=Ce.indexOf(me.featureIndex);return Ce.indexOf(ke.featureIndex)-Be}return ke.featureIndex-me.featureIndex});for(const me of ve)J.push(me)}}for(const se in K)K[se].forEach(he=>{const pe=he.feature,J=k[b[se].source].getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=J});return K}(this._layers,this._serializedLayers,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,l){l&&l.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(g,v){const b=g.getRenderableIds().map(I=>g.getTileByID(I)),T=[],k={};for(let I=0;I<b.length;I++){const z=b[I],N=z.tileID.canonical.key;k[N]||(k[N]=!0,z.querySourceFeatures(T,v))}return T}(d,l):[]}addSourceType(r,l,d){return dr.getSourceType(r)?d(new Error(`A source type called "${r}" already exists.`)):(dr.setSourceType(r,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:l.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const b in r)if(!O(r[b],d[b])){g=!0;break}if(!g)return;const v={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(v)}_validate(r,l,d,g,v={}){return(!v||v.validate!==!1)&&Gt(this,r.call(c.validateStyle,c.extend({key:l,style:this.serialize(),value:d,styleSpec:c.spec},g)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const l=this.sourceCaches[r];l.setEventedParent(null),l.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,g,v=!1){let b=!1,T=!1;const k={};for(const I of this._order){const z=this._layers[I];if(z.type!=="symbol")continue;if(!k[z.source]){const $=this.sourceCaches[z.source];k[z.source]=$.getRenderableIds(!0).map(K=>$.getTileByID(K)).sort((K,Z)=>Z.tileID.overscaledZ-K.tileID.overscaledZ||(K.tileID.isLessThan(Z.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(z,k[z.source],r.center.lng);b=b||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),r.zoom))&&(this.pauseablePlacement=new be(r,this.terrain,this._order,v,l,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const I of this._order){const z=this._layers[I];z.type==="symbol"&&this.placement.updateLayerOpacities(z,k[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l,d){this.imageManager.getImages(l.icons,d),this._updateTilesForChangedImages();const g=this.sourceCaches[l.source];g&&g.setDependencies(l.tileID.key,l.type,l.icons)}getGlyphs(r,l,d){this.glyphManager.getGlyphs(l.stacks,d)}getResource(r,l,d){return c.makeRequest(l,d)}}dr.getSourceType=function(f){return Jt[f]},dr.setSourceType=function(f,r){Jt[f]=r},dr.registerForPluginStateChange=c.registerForPluginStateChange;var Io="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Is={prelude:on(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:on(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:on(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:on(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:on("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:on(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:on(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:on("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:on("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:on("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:on(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:on(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:on(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:on(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:on(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:on(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:on(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:on(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:on(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:on(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:on(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:on(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:on("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Io),terrainDepth:on("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Io),terrainCoords:on("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Io)};function on(f,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),g=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=v?v.concat(g):g,T={};return{fragmentSource:f=f.replace(l,(k,I,z,N,$)=>(T[$]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${$}
varying ${z} ${N} ${$};
#else
uniform ${z} ${N} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${z} ${N} ${$} = u_${$};
#endif
`)),vertexSource:r=r.replace(l,(k,I,z,N,$)=>{const K=N==="float"?"vec2":"vec4",Z=$.match(/color/)?"color":K;return T[$]?I==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${z} ${K} a_${$};
varying ${z} ${N} ${$};
#else
uniform ${z} ${N} u_${$};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${z} ${N} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${Z}(a_${$}, u_${$}_t);
#else
    ${z} ${N} ${$} = u_${$};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${z} ${K} a_${$};
#else
uniform ${z} ${N} u_${$};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${z} ${N} ${$} = a_${$};
#else
    ${z} ${N} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${z} ${N} ${$} = unpack_mix_${Z}(a_${$}, u_${$}_t);
#else
    ${z} ${N} ${$} = u_${$};
#endif
`}),staticAttributes:d,staticUniforms:b}}class Zc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,g,v,b,T,k,I){this.context=r;let z=this.boundPaintVertexBuffers.length!==g.length;for(let N=0;!z&&N<g.length;N++)this.boundPaintVertexBuffers[N]!==g[N]&&(z=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===l&&this.boundLayoutVertexBuffer===d&&!z&&this.boundIndexBuffer===v&&this.boundVertexOffset===b&&this.boundDynamicVertexBuffer===T&&this.boundDynamicVertexBuffer2===k&&this.boundDynamicVertexBuffer3===I?(r.bindVertexArrayOES.set(this.vao),T&&T.bind(),v&&v.dynamicDraw&&v.bind(),k&&k.bind(),I&&I.bind()):this.freshBind(l,d,g,v,b,T,k,I)}freshBind(r,l,d,g,v,b,T,k){let I;const z=r.numAttributes,N=this.context,$=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=k;else{I=N.currentNumAttributes||0;for(let K=z;K<I;K++)$.disableVertexAttribArray(K)}l.enableAttributes($,r);for(const K of d)K.enableAttributes($,r);b&&b.enableAttributes($,r),T&&T.enableAttributes($,r),k&&k.enableAttributes($,r),l.bind(),l.setVertexAttribPointers($,r,v);for(const K of d)K.bind(),K.setVertexAttribPointers($,r,v);b&&(b.bind(),b.setVertexAttribPointers($,r,v)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers($,r,v)),k&&(k.bind(),k.setVertexAttribPointers($,r,v)),N.currentNumAttributes=z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Hc(f){const r=[];for(let l=0;l<f.length;l++){if(f[l]===null)continue;const d=f[l].split(" ");r.push(d.pop())}return r}class md{constructor(r,l,d,g,v,b,T){const k=r.gl;this.program=k.createProgram();const I=Hc(d.staticAttributes),z=g?g.getBinderAttributes():[],N=I.concat(z),$=Is.prelude.staticUniforms?Hc(Is.prelude.staticUniforms):[],K=d.staticUniforms?Hc(d.staticUniforms):[],Z=g?g.getBinderUniforms():[],X=$.concat(K).concat(Z),se=[];for(const Ce of X)se.indexOf(Ce)<0&&se.push(Ce);const he=g?g.defines():[];b&&he.push("#define OVERDRAW_INSPECTOR;"),T&&he.push("#define TERRAIN3D;");const pe=he.concat(Is.prelude.fragmentSource,d.fragmentSource).join(`
`),J=he.concat(Is.prelude.vertexSource,d.vertexSource).join(`
`),ve=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ve,pe),k.compileShader(ve),k.attachShader(this.program,ve);const me=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(me,J),k.compileShader(me),k.attachShader(this.program,me),this.attributes={};const ke={};this.numAttributes=N.length;for(let Ce=0;Ce<this.numAttributes;Ce++)N[Ce]&&(k.bindAttribLocation(this.program,Ce,N[Ce]),this.attributes[N[Ce]]=Ce);k.linkProgram(this.program),k.deleteShader(me),k.deleteShader(ve);for(let Ce=0;Ce<se.length;Ce++){const Be=se[Ce];if(Be&&!ke[Be]){const Te=k.getUniformLocation(this.program,Be);Te&&(ke[Be]=Te)}}this.fixedUniforms=v(r,ke),this.terrainUniforms=((Ce,Be)=>({u_depth:new c.Uniform1i(Ce,Be.u_depth),u_terrain:new c.Uniform1i(Ce,Be.u_terrain),u_terrain_dim:new c.Uniform1f(Ce,Be.u_terrain_dim),u_terrain_matrix:new c.UniformMatrix4f(Ce,Be.u_terrain_matrix),u_terrain_unpack:new c.Uniform4f(Ce,Be.u_terrain_unpack),u_terrain_offset:new c.Uniform1f(Ce,Be.u_terrain_offset),u_terrain_exaggeration:new c.Uniform1f(Ce,Be.u_terrain_exaggeration)}))(r,ke),this.binderUniforms=g?g.getUniforms(r,ke):[]}draw(r,l,d,g,v,b,T,k,I,z,N,$,K,Z,X,se,he,pe){const J=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(g),r.setColorMode(v),r.setCullFace(b),k){r.activeTexture.set(J.TEXTURE2),J.bindTexture(J.TEXTURE_2D,k.depthTexture),r.activeTexture.set(J.TEXTURE3),J.bindTexture(J.TEXTURE_2D,k.texture);for(const me in this.terrainUniforms)this.terrainUniforms[me].set(k[me])}for(const me in this.fixedUniforms)this.fixedUniforms[me].set(T[me]);X&&X.setUniforms(r,this.binderUniforms,K,{zoom:Z});let ve=0;switch(l){case J.LINES:ve=2;break;case J.TRIANGLES:ve=3;break;case J.LINE_STRIP:ve=1}for(const me of $.get()){const ke=me.vaos||(me.vaos={});(ke[I]||(ke[I]=new Zc)).bind(r,this,z,X?X.getPaintVertexBuffers():[],N,me.vertexOffset,se,he,pe),J.drawElements(l,me.primitiveLength*ve,J.UNSIGNED_SHORT,me.primitiveOffset*ve*2)}}}function gd(f,r,l){const d=1/On(l,1,r.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,r.transform.tileZoom)/g,b=v*(l.tileID.canonical.x+l.tileID.wrap*g),T=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const Xc=(f,r,l,d)=>{const g=r.style.light,v=g.properties.get("position"),b=[v.x,v.y,v.z],T=c.create$1();g.properties.get("anchor")==="viewport"&&c.fromRotation(T,-r.transform.angle),c.transformMat3(b,b,T);const k=g.properties.get("color");return{u_matrix:f,u_lightpos:b,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+l,u_opacity:d}},Zm=(f,r,l,d,g,v,b)=>c.extend(Xc(f,r,l,d),gd(v,r,b),{u_height_factor:-Math.pow(2,g.overscaledZ)/b.tileSize/8}),Cl=f=>({u_matrix:f}),Yc=(f,r,l,d)=>c.extend(Cl(f),gd(l,r,d)),yd=(f,r)=>({u_matrix:f,u_world:r}),vd=(f,r,l,d,g)=>c.extend(Yc(f,r,l,d),{u_world:g}),_d=(f,r,l,d)=>{const g=f.transform;let v,b;if(d.paint.get("circle-pitch-alignment")==="map"){const T=On(l,1,g.zoom);v=!0,b=[T,T]}else v=!1,b=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:b}},Wa=(f,r,l)=>{const d=On(l,1,r.zoom),g=Math.pow(2,r.zoom-l.tileID.overscaledZ),v=l.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*g),r.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:v}},As=(f,r,l=1)=>({u_matrix:f,u_color:r,u_overlay:0,u_overlay_scale:l}),Ao=f=>({u_matrix:f}),Pl=(f,r,l,d)=>({u_matrix:f,u_extrude_scale:On(r,1,l),u_intensity:d});function Il(f,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new c.MercatorCoordinate(0,d/l).toLngLat().lat,new c.MercatorCoordinate(0,(d+1)/l).toLngLat().lat]}const Mo=(f,r,l,d)=>{const g=f.transform;return{u_matrix:zs(f,r,l,d),u_ratio:1/On(r,1,g.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Kc=(f,r,l,d,g)=>c.extend(Mo(f,r,l,g),{u_image:0,u_image_height:d}),Al=(f,r,l,d,g)=>{const v=f.transform,b=pn(r,v);return{u_matrix:zs(f,r,l,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/On(r,1,v.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Ms=(f,r,l,d,g,v)=>{const b=f.lineAtlas,T=pn(r,f.transform),k=l.layout.get("line-cap")==="round",I=b.getDash(d.from,k),z=b.getDash(d.to,k),N=I.width*g.fromScale,$=z.width*g.toScale;return c.extend(Mo(f,r,l,v),{u_patternscale_a:[T/N,-I.height/2],u_patternscale_b:[T/$,-z.height/2],u_sdfgamma:b.width/(256*Math.min(N,$)*f.pixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:z.y,u_mix:g.t})};function pn(f,r){return 1/On(f,1,r.tileZoom)}function zs(f,r,l,d){return f.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const xd=(f,r,l,d,g)=>{return{u_matrix:f,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(b=g.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(v=g.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:bd(g.paint.get("raster-hue-rotate"))};var v,b};function bd(f){f*=Math.PI/180;const r=Math.sin(f),l=Math.cos(f);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const Jc=(f,r,l,d,g,v,b,T,k,I)=>{const z=g.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:z.width/z.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:b,u_coord_matrix:T,u_is_text:+k,u_pitch_with_map:+d,u_texsize:I,u_texture:0}},Ml=(f,r,l,d,g,v,b,T,k,I,z)=>{const N=g.transform;return c.extend(Jc(f,r,l,d,g,v,b,T,k,I),{u_gamma_scale:d?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+z})},wd=(f,r,l,d,g,v,b,T,k,I)=>c.extend(Ml(f,r,l,d,g,v,b,T,!0,k,!0),{u_texsize_icon:I,u_texture_icon:1}),Hm=(f,r,l)=>({u_matrix:f,u_opacity:r,u_color:l}),Xm=(f,r,l,d,g,v)=>c.extend(function(b,T,k,I){const z=k.imageManager.getPattern(b.from.toString()),N=k.imageManager.getPattern(b.to.toString()),{width:$,height:K}=k.imageManager.getPixelSize(),Z=Math.pow(2,I.tileID.overscaledZ),X=I.tileSize*Math.pow(2,k.transform.tileZoom)/Z,se=X*(I.tileID.canonical.x+I.tileID.wrap*Z),he=X*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[$,K],u_mix:T.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/On(I,1,k.transform.tileZoom),u_pixel_coord_upper:[se>>16,he>>16],u_pixel_coord_lower:[65535&se,65535&he]}}(d,v,l,g),{u_matrix:f,u_opacity:r}),Qc={fillExtrusion:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_lightpos:new c.Uniform3f(f,r.u_lightpos),u_lightintensity:new c.Uniform1f(f,r.u_lightintensity),u_lightcolor:new c.Uniform3f(f,r.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,r.u_vertical_gradient),u_opacity:new c.Uniform1f(f,r.u_opacity)}),fillExtrusionPattern:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_lightpos:new c.Uniform3f(f,r.u_lightpos),u_lightintensity:new c.Uniform1f(f,r.u_lightintensity),u_lightcolor:new c.Uniform3f(f,r.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,r.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,r.u_height_factor),u_image:new c.Uniform1i(f,r.u_image),u_texsize:new c.Uniform2f(f,r.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,r.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,r.u_scale),u_fade:new c.Uniform1f(f,r.u_fade),u_opacity:new c.Uniform1f(f,r.u_opacity)}),fill:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix)}),fillPattern:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_image:new c.Uniform1i(f,r.u_image),u_texsize:new c.Uniform2f(f,r.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,r.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,r.u_scale),u_fade:new c.Uniform1f(f,r.u_fade)}),fillOutline:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_world:new c.Uniform2f(f,r.u_world)}),fillOutlinePattern:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_world:new c.Uniform2f(f,r.u_world),u_image:new c.Uniform1i(f,r.u_image),u_texsize:new c.Uniform2f(f,r.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,r.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,r.u_scale),u_fade:new c.Uniform1f(f,r.u_fade)}),circle:(f,r)=>({u_camera_to_center_distance:new c.Uniform1f(f,r.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(f,r.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(f,r.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(f,r.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,r.u_matrix)}),collisionBox:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,r.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(f,r.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(f,r.u_extrude_scale),u_overscale_factor:new c.Uniform1f(f,r.u_overscale_factor)}),collisionCircle:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,r.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,r.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,r.u_viewport_size)}),debug:(f,r)=>({u_color:new c.UniformColor(f,r.u_color),u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_overlay:new c.Uniform1i(f,r.u_overlay),u_overlay_scale:new c.Uniform1f(f,r.u_overlay_scale)}),clippingMask:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix)}),heatmap:(f,r)=>({u_extrude_scale:new c.Uniform1f(f,r.u_extrude_scale),u_intensity:new c.Uniform1f(f,r.u_intensity),u_matrix:new c.UniformMatrix4f(f,r.u_matrix)}),heatmapTexture:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_world:new c.Uniform2f(f,r.u_world),u_image:new c.Uniform1i(f,r.u_image),u_color_ramp:new c.Uniform1i(f,r.u_color_ramp),u_opacity:new c.Uniform1f(f,r.u_opacity)}),hillshade:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_image:new c.Uniform1i(f,r.u_image),u_latrange:new c.Uniform2f(f,r.u_latrange),u_light:new c.Uniform2f(f,r.u_light),u_shadow:new c.UniformColor(f,r.u_shadow),u_highlight:new c.UniformColor(f,r.u_highlight),u_accent:new c.UniformColor(f,r.u_accent)}),hillshadePrepare:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_image:new c.Uniform1i(f,r.u_image),u_dimension:new c.Uniform2f(f,r.u_dimension),u_zoom:new c.Uniform1f(f,r.u_zoom),u_unpack:new c.Uniform4f(f,r.u_unpack)}),line:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_ratio:new c.Uniform1f(f,r.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,r.u_units_to_pixels)}),lineGradient:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_ratio:new c.Uniform1f(f,r.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,r.u_units_to_pixels),u_image:new c.Uniform1i(f,r.u_image),u_image_height:new c.Uniform1f(f,r.u_image_height)}),linePattern:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_texsize:new c.Uniform2f(f,r.u_texsize),u_ratio:new c.Uniform1f(f,r.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_image:new c.Uniform1i(f,r.u_image),u_units_to_pixels:new c.Uniform2f(f,r.u_units_to_pixels),u_scale:new c.Uniform3f(f,r.u_scale),u_fade:new c.Uniform1f(f,r.u_fade)}),lineSDF:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_ratio:new c.Uniform1f(f,r.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,r.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(f,r.u_patternscale_a),u_patternscale_b:new c.Uniform2f(f,r.u_patternscale_b),u_sdfgamma:new c.Uniform1f(f,r.u_sdfgamma),u_image:new c.Uniform1i(f,r.u_image),u_tex_y_a:new c.Uniform1f(f,r.u_tex_y_a),u_tex_y_b:new c.Uniform1f(f,r.u_tex_y_b),u_mix:new c.Uniform1f(f,r.u_mix)}),raster:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_tl_parent:new c.Uniform2f(f,r.u_tl_parent),u_scale_parent:new c.Uniform1f(f,r.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,r.u_buffer_scale),u_fade_t:new c.Uniform1f(f,r.u_fade_t),u_opacity:new c.Uniform1f(f,r.u_opacity),u_image0:new c.Uniform1i(f,r.u_image0),u_image1:new c.Uniform1i(f,r.u_image1),u_brightness_low:new c.Uniform1f(f,r.u_brightness_low),u_brightness_high:new c.Uniform1f(f,r.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,r.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,r.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,r.u_spin_weights)}),symbolIcon:(f,r)=>({u_is_size_zoom_constant:new c.Uniform1i(f,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,r.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,r.u_size_t),u_size:new c.Uniform1f(f,r.u_size),u_camera_to_center_distance:new c.Uniform1f(f,r.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,r.u_pitch),u_rotate_symbol:new c.Uniform1i(f,r.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,r.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,r.u_fade_change),u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,r.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,r.u_coord_matrix),u_is_text:new c.Uniform1i(f,r.u_is_text),u_pitch_with_map:new c.Uniform1i(f,r.u_pitch_with_map),u_texsize:new c.Uniform2f(f,r.u_texsize),u_texture:new c.Uniform1i(f,r.u_texture)}),symbolSDF:(f,r)=>({u_is_size_zoom_constant:new c.Uniform1i(f,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,r.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,r.u_size_t),u_size:new c.Uniform1f(f,r.u_size),u_camera_to_center_distance:new c.Uniform1f(f,r.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,r.u_pitch),u_rotate_symbol:new c.Uniform1i(f,r.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,r.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,r.u_fade_change),u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,r.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,r.u_coord_matrix),u_is_text:new c.Uniform1i(f,r.u_is_text),u_pitch_with_map:new c.Uniform1i(f,r.u_pitch_with_map),u_texsize:new c.Uniform2f(f,r.u_texsize),u_texture:new c.Uniform1i(f,r.u_texture),u_gamma_scale:new c.Uniform1f(f,r.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,r.u_is_halo)}),symbolTextAndIcon:(f,r)=>({u_is_size_zoom_constant:new c.Uniform1i(f,r.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,r.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,r.u_size_t),u_size:new c.Uniform1f(f,r.u_size),u_camera_to_center_distance:new c.Uniform1f(f,r.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,r.u_pitch),u_rotate_symbol:new c.Uniform1i(f,r.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,r.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,r.u_fade_change),u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,r.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,r.u_coord_matrix),u_is_text:new c.Uniform1i(f,r.u_is_text),u_pitch_with_map:new c.Uniform1i(f,r.u_pitch_with_map),u_texsize:new c.Uniform2f(f,r.u_texsize),u_texsize_icon:new c.Uniform2f(f,r.u_texsize_icon),u_texture:new c.Uniform1i(f,r.u_texture),u_texture_icon:new c.Uniform1i(f,r.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,r.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,r.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,r.u_is_halo)}),background:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_opacity:new c.Uniform1f(f,r.u_opacity),u_color:new c.UniformColor(f,r.u_color)}),backgroundPattern:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_opacity:new c.Uniform1f(f,r.u_opacity),u_image:new c.Uniform1i(f,r.u_image),u_pattern_tl_a:new c.Uniform2f(f,r.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,r.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,r.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,r.u_pattern_br_b),u_texsize:new c.Uniform2f(f,r.u_texsize),u_mix:new c.Uniform1f(f,r.u_mix),u_pattern_size_a:new c.Uniform2f(f,r.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,r.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,r.u_scale_a),u_scale_b:new c.Uniform1f(f,r.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,r.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,r.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,r.u_tile_units_to_pixels)}),terrain:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_texture:new c.Uniform1i(f,r.u_texture)}),terrainDepth:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix)}),terrainCoords:(f,r)=>({u_matrix:new c.UniformMatrix4f(f,r.u_matrix),u_texture:new c.Uniform1i(f,r.u_texture),u_terrain_coords_id:new c.Uniform1f(f,r.u_terrain_coords_id)})};class eu{constructor(r,l,d){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=Boolean(d),this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const tu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nu{constructor(r,l,d,g){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const g=l.attributes[this.attributes[d].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,l,d){for(let g=0;g<this.attributes.length;g++){const v=this.attributes[g],b=l.attributes[v.name];b!==void 0&&r.vertexAttribPointer(b,v.components,r[tu[v.type]],!1,this.itemSize,v.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ht{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ed extends Ht{getDefault(){return c.Color.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ym extends Ht{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Ds extends Ht{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Ls extends Ht{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Sd extends Ht{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Gr extends Ht{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class ru extends Ht{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class zl extends Ht{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Dl extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class iu extends Ht{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class au extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ll extends Ht{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class ou extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class su extends Ht{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Rl extends Ht{getDefault(){return c.Color.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Td extends Ht{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class kd extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class zo extends Ht{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Km extends Ht{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Jm extends Ht{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Qm extends Ht{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class eg extends Ht{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class tg extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ng extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class lu extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ol extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class cu extends Ht{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class uu extends Ht{constructor(r){super(r),this.vao=r.extVertexArrayObject}getDefault(){return null}set(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)}}class Do extends Ht{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Cd extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Pd extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Bl extends Ht{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class Za extends Bl{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Id extends Bl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Lo{constructor(r,l,d,g){this.context=r,this.width=l,this.height=d;const v=r.gl,b=this.framebuffer=v.createFramebuffer();if(this.colorAttachment=new Za(r,b),g&&(this.depthAttachment=new Id(r,b)),v.checkFramebufferStatus(v.FRAMEBUFFER)!==v.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class hn{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}hn.Replace=[1,0],hn.disabled=new hn(hn.Replace,c.Color.transparent,[!1,!1,!1,!1]),hn.unblended=new hn(hn.Replace,c.Color.transparent,[!0,!0,!0,!0]),hn.alphaBlended=new hn([1,771],c.Color.transparent,[!0,!0,!0,!0]);class Ad{constructor(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ed(this),this.clearDepth=new Ym(this),this.clearStencil=new Ds(this),this.colorMask=new Ls(this),this.depthMask=new Sd(this),this.stencilMask=new Gr(this),this.stencilFunc=new ru(this),this.stencilOp=new zl(this),this.stencilTest=new Dl(this),this.depthRange=new iu(this),this.depthTest=new au(this),this.depthFunc=new Ll(this),this.blend=new ou(this),this.blendFunc=new su(this),this.blendColor=new Rl(this),this.blendEquation=new Td(this),this.cullFace=new kd(this),this.cullFaceSide=new zo(this),this.frontFace=new Km(this),this.program=new Jm(this),this.activeTexture=new Qm(this),this.viewport=new eg(this),this.bindFramebuffer=new tg(this),this.bindRenderbuffer=new ng(this),this.bindTexture=new lu(this),this.bindVertexBuffer=new Ol(this),this.bindElementBuffer=new cu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new uu(this),this.pixelStoreUnpack=new Do(this),this.pixelStoreUnpackPremultiplyAlpha=new Cd(this),this.pixelStoreUnpackFlipY=new Pd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new eu(this,r,l)}createVertexBuffer(r,l,d){return new nu(this,r,l,d)}createRenderbuffer(r,l,d){const g=this.gl,v=g.createRenderbuffer();return this.bindRenderbuffer.set(v),g.renderbufferStorage(g.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),v}createFramebuffer(r,l,d){return new Lo(this,r,l,d)}clear({color:r,depth:l}){const d=this.gl;let g=0;r&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d.clear(g)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){O(r.blendFunction,hn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ft{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);const Xt=7680;class cn{constructor(r,l,d,g,v,b){this.test=r,this.ref=l,this.mask=d,this.fail=g,this.depthFail=v,this.pass=b}}cn.disabled=new cn({func:519,mask:0},0,0,Xt,Xt,Xt);class mn{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let Rs;function Ro(f,r,l,d,g,v,b){const T=f.context,k=T.gl,I=f.useProgram("collisionBox"),z=[];let N=0,$=0;for(let J=0;J<d.length;J++){const ve=d[J],me=r.getTile(ve),ke=me.getBucket(l);if(!ke)continue;let Ce=ve.posMatrix;g[0]===0&&g[1]===0||(Ce=f.translatePosMatrix(ve.posMatrix,me,g,v));const Be=b?ke.textCollisionBox:ke.iconCollisionBox,Te=ke.collisionCircleArray;if(Te.length>0){const et=c.create(),We=Ce;c.mul(et,ke.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul(et,et,ke.placementViewportMatrix),z.push({circleArray:Te,circleOffset:$,transform:We,invTransform:et,coord:ve}),N+=Te.length/4,$=N}Be&&I.draw(T,k.LINES,Ft.disabled,cn.disabled,f.colorModeForRenderPass(),mn.disabled,Wa(Ce,f.transform,me),f.style.terrain&&f.style.terrain.getTerrainData(ve),l.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,null,f.transform.zoom,null,null,Be.collisionVertexBuffer)}if(!b||!z.length)return;const K=f.useProgram("collisionCircle"),Z=new c.CollisionCircleLayoutArray;Z.resize(4*N),Z._trim();let X=0;for(const J of z)for(let ve=0;ve<J.circleArray.length/4;ve++){const me=4*ve,ke=J.circleArray[me+0],Ce=J.circleArray[me+1],Be=J.circleArray[me+2],Te=J.circleArray[me+3];Z.emplace(X++,ke,Ce,Be,Te,0),Z.emplace(X++,ke,Ce,Be,Te,1),Z.emplace(X++,ke,Ce,Be,Te,2),Z.emplace(X++,ke,Ce,Be,Te,3)}(!Rs||Rs.length<2*N)&&(Rs=function(J){const ve=2*J,me=new c.QuadTriangleArray;me.resize(ve),me._trim();for(let ke=0;ke<ve;ke++){const Ce=6*ke;me.uint16[Ce+0]=4*ke+0,me.uint16[Ce+1]=4*ke+1,me.uint16[Ce+2]=4*ke+2,me.uint16[Ce+3]=4*ke+2,me.uint16[Ce+4]=4*ke+3,me.uint16[Ce+5]=4*ke+0}return me}(N));const se=T.createIndexBuffer(Rs,!0),he=T.createVertexBuffer(Z,c.collisionCircleLayout.members,!0);for(const J of z){const ve={u_matrix:J.transform,u_inv_matrix:J.invTransform,u_camera_to_center_distance:(pe=f.transform).cameraToCenterDistance,u_viewport_size:[pe.width,pe.height]};K.draw(T,k.TRIANGLES,Ft.disabled,cn.disabled,f.colorModeForRenderPass(),mn.disabled,ve,f.style.terrain&&f.style.terrain.getTerrainData(J.coord),l.id,he,se,c.SegmentVector.simpleSegment(0,2*J.circleOffset,J.circleArray.length,J.circleArray.length/2),null,f.transform.zoom,null,null,null)}var pe;he.destroy(),se.destroy()}mn.disabled=new mn(!1,1029,2305),mn.backCCW=new mn(!0,1029,2305);const rg=c.identity(new Float32Array(16));function ig(f,r,l,d,g,v){const{horizontalAlign:b,verticalAlign:T}=c.getAnchorAlignment(f),k=-(b-.5)*r,I=-(T-.5)*l,z=c.evaluateVariableOffset(f,d);return new c.pointGeometry((k/g+z[0])*v,(I/g+z[1])*v)}function Md(f,r,l,d,g,v,b,T,k,I,z){const N=f.text.placedSymbolArray,$=f.text.dynamicLayoutVertexArray,K=f.icon.dynamicLayoutVertexArray,Z={};$.clear();for(let X=0;X<N.length;X++){const se=N.get(X),he=f.allowVerticalPlacement&&!se.placedOrientation,pe=se.hidden||!se.crossTileID||he?null:d[se.crossTileID];if(pe){const J=new c.pointGeometry(se.anchorX,se.anchorY),ve=jt(J,l?b:v,z),me=ii(g.cameraToCenterDistance,ve.signedDistanceFromCamera);let ke=c.evaluateSizeForFeature(f.textSizeData,k,se)*me/c.ONE_EM;l&&(ke*=f.tilePixelRatio/T);const{width:Ce,height:Be,anchor:Te,textOffset:et,textBoxScale:We}=pe,tt=ig(Te,Ce,Be,et,We,ke),At=l?jt(J.add(tt),v,z).point:ve.point.add(r?tt.rotate(-g.angle):tt),Rt=f.allowVerticalPlacement&&se.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let gt=0;gt<se.numGlyphs;gt++)c.addDynamicAttributes($,At,Rt);I&&se.associatedIconIndex>=0&&(Z[se.associatedIconIndex]={shiftedAnchor:At,angle:Rt})}else Pt(se.numGlyphs,$)}if(I){K.clear();const X=f.icon.placedSymbolArray;for(let se=0;se<X.length;se++){const he=X.get(se);if(he.hidden)Pt(he.numGlyphs,K);else{const pe=Z[se];if(pe)for(let J=0;J<he.numGlyphs;J++)c.addDynamicAttributes(K,pe.shiftedAnchor,pe.angle);else Pt(he.numGlyphs,K)}}f.icon.dynamicLayoutVertexBuffer.updateData(K)}f.text.dynamicLayoutVertexBuffer.updateData($)}function ag(f,r,l){return l.iconsInText&&r?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Nl(f,r,l,d,g,v,b,T,k,I,z,N){const $=f.context,K=$.gl,Z=f.transform,X=T==="map",se=k==="map",he=T!=="viewport"&&l.layout.get("symbol-placement")!=="point",pe=X&&!se&&!he,J=!l.layout.get("symbol-sort-key").isConstant();let ve=!1;const me=f.depthModeForSublayer(0,Ft.ReadOnly),ke=l.layout.get("text-variable-anchor"),Ce=[];for(const Be of d){const Te=r.getTile(Be),et=Te.getBucket(l);if(!et)continue;const We=g?et.text:et.icon;if(!We||!We.segments.get().length)continue;const tt=We.programConfigurations.get(l.id),At=g||et.sdfIcons,Rt=g?et.textSizeData:et.iconSizeData,gt=se||Z.pitch!==0,Qt=f.useProgram(ag(At,g,et),tt),en=c.evaluateSizeForZoom(Rt,Z.zoom),$t=f.style.terrain&&f.style.terrain.getTerrainData(Be);let qt,rn,Kn,Bi,_i=[0,0],Ni=null;if(g){if(rn=Te.glyphAtlasTexture,Kn=K.LINEAR,qt=Te.glyphAtlasTexture.size,et.iconsInText){_i=Te.imageAtlasTexture.size,Ni=Te.imageAtlasTexture;const si=Rt.kind==="composite"||Rt.kind==="camera";Bi=gt||f.options.rotating||f.options.zooming||si?K.LINEAR:K.NEAREST}}else{const si=l.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;rn=Te.imageAtlasTexture,Kn=At||f.options.rotating||f.options.zooming||si||gt?K.LINEAR:K.NEAREST,qt=Te.imageAtlasTexture.size}const Aa=On(Te,1,f.transform.zoom),oi=ja(Be.posMatrix,se,X,f.transform,Aa),zr=yi(Be.posMatrix,se,X,f.transform,Aa),ta=ke&&et.hasTextData(),Wl=l.layout.get("icon-text-fit")!=="none"&&ta&&et.hasIconData();if(he){const si=f.style.terrain?(Tu,Uo)=>f.style.terrain.getElevation(Be,Tu,Uo):null,Ka=l.layout.get("text-rotation-alignment")==="map";Vr(et,Be.posMatrix,f,g,oi,zr,se,I,Ka,si)}const Gn=f.translatePosMatrix(Be.posMatrix,Te,v,b),Bt=he||g&&ke||Wl?rg:oi,Kt=f.translatePosMatrix(zr,Te,v,b,!0),Jn=At&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Qn;Qn=At?et.iconsInText?wd(Rt.kind,en,pe,se,f,Gn,Bt,Kt,qt,_i):Ml(Rt.kind,en,pe,se,f,Gn,Bt,Kt,g,qt,!0):Jc(Rt.kind,en,pe,se,f,Gn,Bt,Kt,g,qt);const yn={program:Qt,buffers:We,uniformValues:Qn,atlasTexture:rn,atlasTextureIcon:Ni,atlasInterpolation:Kn,atlasInterpolationIcon:Bi,isSDF:At,hasHalo:Jn};if(J&&et.canOverlap){ve=!0;const si=We.segments.get();for(const Ka of si)Ce.push({segments:new c.SegmentVector([Ka]),sortKey:Ka.sortKey,state:yn,terrainData:$t})}else Ce.push({segments:We.segments,sortKey:0,state:yn,terrainData:$t})}ve&&Ce.sort((Be,Te)=>Be.sortKey-Te.sortKey);for(const Be of Ce){const Te=Be.state;if($.activeTexture.set(K.TEXTURE0),Te.atlasTexture.bind(Te.atlasInterpolation,K.CLAMP_TO_EDGE),Te.atlasTextureIcon&&($.activeTexture.set(K.TEXTURE1),Te.atlasTextureIcon&&Te.atlasTextureIcon.bind(Te.atlasInterpolationIcon,K.CLAMP_TO_EDGE)),Te.isSDF){const et=Te.uniformValues;Te.hasHalo&&(et.u_is_halo=1,Os(Te.buffers,Be.segments,l,f,Te.program,me,z,N,et,Be.terrainData)),et.u_is_halo=0}Os(Te.buffers,Be.segments,l,f,Te.program,me,z,N,Te.uniformValues,Be.terrainData)}}function Os(f,r,l,d,g,v,b,T,k,I){const z=d.context;g.draw(z,z.gl.TRIANGLES,v,b,T,mn.disabled,k,I,l.id,f.layoutVertexBuffer,f.indexBuffer,r,l.paint,d.transform.zoom,f.programConfigurations.get(l.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Bs(f,r,l,d,g,v,b){const T=f.context.gl,k=l.paint.get("fill-pattern"),I=k&&k.constantOr(1),z=l.getCrossfadeParameters();let N,$,K,Z,X;b?($=I&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",N=T.LINES):($=I?"fillPattern":"fill",N=T.TRIANGLES);for(const se of d){const he=r.getTile(se);if(I&&!he.patternsLoaded())continue;const pe=he.getBucket(l);if(!pe)continue;const J=pe.programConfigurations.get(l.id),ve=f.useProgram($,J),me=f.style.terrain&&f.style.terrain.getTerrainData(se);I&&(f.context.activeTexture.set(T.TEXTURE0),he.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),J.updatePaintBuffers(z));const ke=k.constantOr(null);if(ke&&he.imageAtlas){const Te=he.imageAtlas,et=Te.patternPositions[ke.to.toString()],We=Te.patternPositions[ke.from.toString()];et&&We&&J.setConstantPatternPositions(et,We)}const Ce=me?se:null,Be=f.translatePosMatrix(Ce?Ce.posMatrix:se.posMatrix,he,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(b){Z=pe.indexBuffer2,X=pe.segments2;const Te=[T.drawingBufferWidth,T.drawingBufferHeight];K=$==="fillOutlinePattern"&&I?vd(Be,f,z,he,Te):yd(Be,Te)}else Z=pe.indexBuffer,X=pe.segments,K=I?Yc(Be,f,z,he):Cl(Be);ve.draw(f.context,N,g,f.stencilModeForClipping(se),v,mn.disabled,K,me,l.id,pe.layoutVertexBuffer,Z,X,l.paint,f.transform.zoom,J)}}function Ns(f,r,l,d,g,v,b){const T=f.context,k=T.gl,I=l.paint.get("fill-extrusion-pattern"),z=I.constantOr(1),N=l.getCrossfadeParameters(),$=l.paint.get("fill-extrusion-opacity");for(const K of d){const Z=r.getTile(K),X=Z.getBucket(l);if(!X)continue;const se=f.style.terrain&&f.style.terrain.getTerrainData(K),he=X.programConfigurations.get(l.id),pe=f.useProgram(z?"fillExtrusionPattern":"fillExtrusion",he);z&&(f.context.activeTexture.set(k.TEXTURE0),Z.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),he.updatePaintBuffers(N));const J=I.constantOr(null);if(J&&Z.imageAtlas){const Ce=Z.imageAtlas,Be=Ce.patternPositions[J.to.toString()],Te=Ce.patternPositions[J.from.toString()];Be&&Te&&he.setConstantPatternPositions(Be,Te)}const ve=f.translatePosMatrix(K.posMatrix,Z,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),me=l.paint.get("fill-extrusion-vertical-gradient"),ke=z?Zm(ve,f,me,$,K,N,Z):Xc(ve,f,me,$);pe.draw(T,T.gl.TRIANGLES,g,v,b,mn.backCCW,ke,se,l.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,l.paint,f.transform.zoom,he,f.style.terrain&&X.centroidVertexBuffer)}}function hu(f,r,l,d,g,v,b){const T=f.context,k=T.gl,I=l.fbo;if(!I)return;const z=f.useProgram("hillshade"),N=f.style.terrain&&f.style.terrain.getTerrainData(r);T.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,I.colorAttachment.get()),z.draw(T,k.TRIANGLES,g,v,b,mn.disabled,(($,K,Z,X)=>{const se=Z.paint.get("hillshade-shadow-color"),he=Z.paint.get("hillshade-highlight-color"),pe=Z.paint.get("hillshade-accent-color");let J=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(J-=$.transform.angle);const ve=!$.options.moving;return{u_matrix:X?X.posMatrix:$.transform.calculatePosMatrix(K.tileID.toUnwrapped(),ve),u_image:0,u_latrange:Il(0,K.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),J],u_shadow:se,u_highlight:he,u_accent:pe}})(f,l,d,N?r:null),N,d.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function zd(f,r,l,d,g,v){const b=f.context,T=b.gl,k=r.dem;if(k&&k.data){const I=k.dim,z=k.stride,N=k.getPixels();if(b.activeTexture.set(T.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||f.getTileTexture(z),r.demTexture){const K=r.demTexture;K.update(N,{premultiply:!1}),K.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else r.demTexture=new ae(b,N,T.RGBA,{premultiply:!1}),r.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);b.activeTexture.set(T.TEXTURE0);let $=r.fbo;if(!$){const K=new ae(b,{width:I,height:I,data:null},T.RGBA);K.bind(T.LINEAR,T.CLAMP_TO_EDGE),$=r.fbo=b.createFramebuffer(I,I,!0),$.colorAttachment.set(K.texture)}b.bindFramebuffer.set($.framebuffer),b.viewport.set([0,0,I,I]),f.useProgram("hillshadePrepare").draw(b,T.TRIANGLES,d,g,v,mn.disabled,((K,Z)=>{const X=Z.stride,se=c.create();return c.ortho(se,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(se,se,[0,-c.EXTENT,0]),{u_matrix:se,u_image:1,u_dimension:[X,X],u_zoom:K.overscaledZ,u_unpack:Z.getUnpackVector()}})(r.tileID,k),null,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Fl(f,r,l,d,g,v){const b=d.paint.get("raster-fade-duration");if(!v&&b>0){const T=c.exported.now(),k=(T-f.timeAdded)/b,I=r?(T-r.timeAdded)/b:-1,z=l.getSource(),N=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),$=!r||Math.abs(r.tileID.overscaledZ-N)>Math.abs(f.tileID.overscaledZ-N),K=$&&f.refreshedUponExpiration?1:c.clamp($?k:1-I,0,1);return f.refreshedUponExpiration&&k>=1&&(f.refreshedUponExpiration=!1),r?{opacity:1,mix:1-K}:{opacity:K,mix:0}}return{opacity:1,mix:0}}const $l=new c.Color(1,0,0,1),vi=new c.Color(0,1,0,1),Dd=new c.Color(0,0,1,1),du=new c.Color(1,0,1,1),Ld=new c.Color(0,1,1,1);function Ha(f,r,l,d){Oo(f,0,r+l/2,f.transform.width,l,d)}function Fs(f,r,l,d){Oo(f,r-l/2,0,l,f.transform.height,d)}function Oo(f,r,l,d,g,v){const b=f.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(r*f.pixelRatio,l*f.pixelRatio,d*f.pixelRatio,g*f.pixelRatio),b.clear({color:v}),T.disable(T.SCISSOR_TEST)}function og(f,r,l){const d=f.context,g=d.gl,v=l.posMatrix,b=f.useProgram("debug"),T=Ft.disabled,k=cn.disabled,I=f.colorModeForRenderPass(),z="$debug",N=f.style.terrain&&f.style.terrain.getTerrainData(l);d.activeTexture.set(g.TEXTURE0),f.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE);const $=r.getTileByID(l.key).latestRawTileData,K=Math.floor(($&&$.byteLength||0)/1024),Z=r.getTile(l).tileSize,X=512/Math.min(Z,512)*(l.overscaledZ/f.transform.zoom)*.5;let se=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(se+=` => ${l.overscaledZ}`),function(he,pe){he.initDebugOverlayCanvas();const J=he.debugOverlayCanvas,ve=he.context.gl,me=he.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,J.width,J.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(pe,5,5),me.strokeText(pe,5,5),he.debugOverlayTexture.update(J),he.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(f,`${se} ${K}kB`),b.draw(d,g.TRIANGLES,T,k,hn.alphaBlended,mn.disabled,As(v,c.Color.transparent,X),null,z,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),b.draw(d,g.LINE_STRIP,T,k,I,mn.disabled,As(v,c.Color.red),N,z,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function Ul(f,r,l){const d=f.context,g=d.gl,v=f.colorModeForRenderPass(),b=new Ft(g.LEQUAL,Ft.ReadWrite,f.depthRangeFor3D),T=f.useProgram("terrain"),k=r.getTerrainMesh(),I=r.getTerrainData(l.tileID);d.bindFramebuffer.set(null),d.viewport.set([0,0,f.width,f.height]),d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,r.getRTTFramebuffer().colorAttachment.get());const z=f.transform.calculatePosMatrix(l.tileID.toUnwrapped());T.draw(d,g.TRIANGLES,b,cn.disabled,v,mn.backCCW,{u_matrix:z,u_texture:0},I,"terrain",k.vertexBuffer,k.indexBuffer,k.segments)}function Rd(f,r,l,d){const g=f.context,v=l.tileSize*r.qualityFactor;l.textures[d]||(l.textures[d]=f.getTileTexture(v)||new ae(g,{width:v,height:v,data:null},g.gl.RGBA),l.textures[d].bind(g.gl.LINEAR,g.gl.CLAMP_TO_EDGE),d===0&&r.sourceCache.renderHistory.unshift(l.tileID.key));const b=r.getRTTFramebuffer();b.colorAttachment.set(l.textures[d].texture),g.bindFramebuffer.set(b.framebuffer),g.viewport.set([0,0,v,v])}class Od{constructor(r){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=r,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=r.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const r=this.painter.style,l=r.terrain;for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const g=r.sourceCaches[d].getVisibleCoordinates();for(const v of g){const b=l.sourceCache.getTerrainCoords(v);for(const T in b)this._coordsDescendingInv[d][T]||(this._coordsDescendingInv[d][T]=[]),this._coordsDescendingInv[d][T].push(b[T])}}for(const d of r._order){const g=r._layers[d],v=g.source;if(this._renderToTexture[g.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const b in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][b]=this._coordsDescendingInv[v][b].map(T=>T.key).sort().join()}}return this._renderableTiles.forEach(d=>{for(const g in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[g][d.tileID.key];v&&v!==d.textureCoords[g]&&d.clearTextures(this.painter),l.needsRerender(g,d.tileID)&&d.clearTextures(this.painter)}this._rerender[d.tileID.key]=!d.textures.length}),l.clearRerenderCache(),l.sourceCache.removeOutdated(this.painter),this}renderLayer(r){const l=r.type,d=this.painter,g=d.style._order,v=d.currentLayer,b=v+1===g.length;if(this._renderToTexture[l]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(g[v]),!b))return!0;if(this._renderToTexture[this._prevType]||l==="hillshade"||this._renderToTexture[l]&&b){this._prevType=l;const T=this._stacks.length-1,k=this._stacks[T]||[];for(const I of this._renderableTiles){if(Rd(d,d.style.terrain,I,T),this._rerender[I.tileID.key]){d.context.clear({color:c.Color.transparent});for(let z=0;z<k.length;z++){const N=d.style._layers[k[z]],$=N.source?this._coordsDescendingInv[N.source][I.tileID.key]:[I.tileID];d._renderTileClippingMasks(N,$),d.renderLayer(d,d.style.sourceCaches[N.source],N,$),N.source&&(I.textureCoords[N.source]=this._coordsDescendingInvStr[N.source][I.tileID.key])}}Ul(d,d.style.terrain,I)}if(l==="hillshade"){this._stacks.push([g[v]]);for(const I of this._renderableTiles){const z=this._coordsDescendingInv[r.source][I.tileID.key];Rd(d,d.style.terrain,I,this._stacks.length-1),d.context.clear({color:c.Color.transparent}),d._renderTileClippingMasks(r,z),d.renderLayer(d,d.style.sourceCaches[r.source],r,z),Ul(d,d.style.terrain,I)}return!0}return this._renderToTexture[l]}return!1}}const $s={symbol:function(f,r,l,d,g){if(f.renderPass!=="translucent")return;const v=cn.disabled,b=f.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(T,k,I,z,N,$,K){const Z=k.transform,X=N==="map",se=$==="map";for(const he of T){const pe=z.getTile(he),J=pe.getBucket(I);if(!J||!J.text||!J.text.segments.get().length)continue;const ve=c.evaluateSizeForZoom(J.textSizeData,Z.zoom),me=On(pe,1,k.transform.zoom),ke=ja(he.posMatrix,se,X,k.transform,me),Ce=I.layout.get("icon-text-fit")!=="none"&&J.hasIconData();if(ve){const Be=Math.pow(2,Z.zoom-pe.tileID.overscaledZ);Md(J,X,se,K,Z,ke,he.posMatrix,Be,ve,Ce,k.style.terrain?(Te,et)=>k.style.terrain.getElevation(he,Te,et):null)}}}(d,f,l,r,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),g),l.paint.get("icon-opacity").constantOr(1)!==0&&Nl(f,r,l,d,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),v,b),l.paint.get("text-opacity").constantOr(1)!==0&&Nl(f,r,l,d,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),v,b),r.map.showCollisionBoxes&&(Ro(f,r,l,d,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),Ro(f,r,l,d,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(f,r,l,d){if(f.renderPass!=="translucent")return;const g=l.paint.get("circle-opacity"),v=l.paint.get("circle-stroke-width"),b=l.paint.get("circle-stroke-opacity"),T=!l.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(v.constantOr(1)===0||b.constantOr(1)===0))return;const k=f.context,I=k.gl,z=f.depthModeForSublayer(0,Ft.ReadOnly),N=cn.disabled,$=f.colorModeForRenderPass(),K=[];for(let Z=0;Z<d.length;Z++){const X=d[Z],se=r.getTile(X),he=se.getBucket(l);if(!he)continue;const pe=he.programConfigurations.get(l.id),J=f.useProgram("circle",pe),ve=he.layoutVertexBuffer,me=he.indexBuffer,ke=f.style.terrain&&f.style.terrain.getTerrainData(X),Ce={programConfiguration:pe,program:J,layoutVertexBuffer:ve,indexBuffer:me,uniformValues:_d(f,X,se,l),terrainData:ke};if(T){const Be=he.segments.get();for(const Te of Be)K.push({segments:new c.SegmentVector([Te]),sortKey:Te.sortKey,state:Ce})}else K.push({segments:he.segments,sortKey:0,state:Ce})}T&&K.sort((Z,X)=>Z.sortKey-X.sortKey);for(const Z of K){const{programConfiguration:X,program:se,layoutVertexBuffer:he,indexBuffer:pe,uniformValues:J,terrainData:ve}=Z.state;se.draw(k,I.TRIANGLES,z,N,$,mn.disabled,J,ve,l.id,he,pe,Z.segments,l.paint,f.transform.zoom,X)}},heatmap:function(f,r,l,d){if(l.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const g=f.context,v=g.gl,b=cn.disabled,T=new hn([v.ONE,v.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(k,I,z){const N=k.gl;k.activeTexture.set(N.TEXTURE1),k.viewport.set([0,0,I.width/4,I.height/4]);let $=z.heatmapFbo;if($)N.bindTexture(N.TEXTURE_2D,$.colorAttachment.get()),k.bindFramebuffer.set($.framebuffer);else{const K=N.createTexture();N.bindTexture(N.TEXTURE_2D,K),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.CLAMP_TO_EDGE),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),$=z.heatmapFbo=k.createFramebuffer(I.width/4,I.height/4,!1),function(Z,X,se,he){const pe=Z.gl;pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,X.width/4,X.height/4,0,pe.RGBA,Z.extRenderToTextureHalfFloat?Z.extTextureHalfFloat.HALF_FLOAT_OES:pe.UNSIGNED_BYTE,null),he.colorAttachment.set(se)}(k,I,K,$)}})(g,f,l),g.clear({color:c.Color.transparent});for(let k=0;k<d.length;k++){const I=d[k];if(r.hasRenderableParent(I))continue;const z=r.getTile(I),N=z.getBucket(l);if(!N)continue;const $=N.programConfigurations.get(l.id),K=f.useProgram("heatmap",$),{zoom:Z}=f.transform;K.draw(g,v.TRIANGLES,Ft.disabled,b,T,mn.disabled,Pl(I.posMatrix,z,Z,l.paint.get("heatmap-intensity")),null,l.id,N.layoutVertexBuffer,N.indexBuffer,N.segments,l.paint,f.transform.zoom,$)}g.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(g,v){const b=g.context,T=b.gl,k=v.heatmapFbo;if(!k)return;b.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,k.colorAttachment.get()),b.activeTexture.set(T.TEXTURE1);let I=v.colorRampTexture;I||(I=v.colorRampTexture=new ae(b,v.colorRamp,T.RGBA)),I.bind(T.LINEAR,T.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(b,T.TRIANGLES,Ft.disabled,cn.disabled,g.colorModeForRenderPass(),mn.disabled,((z,N,$,K)=>{const Z=c.create();c.ortho(Z,0,z.width,z.height,0,0,1);const X=z.context.gl;return{u_matrix:Z,u_world:[X.drawingBufferWidth,X.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:N.paint.get("heatmap-opacity")}})(g,v),null,v.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,v.paint,g.transform.zoom)}(f,l))},line:function(f,r,l,d){if(f.renderPass!=="translucent")return;const g=l.paint.get("line-opacity"),v=l.paint.get("line-width");if(g.constantOr(1)===0||v.constantOr(1)===0)return;const b=f.depthModeForSublayer(0,Ft.ReadOnly),T=f.colorModeForRenderPass(),k=l.paint.get("line-dasharray"),I=l.paint.get("line-pattern"),z=I.constantOr(1),N=l.paint.get("line-gradient"),$=l.getCrossfadeParameters(),K=z?"linePattern":k?"lineSDF":N?"lineGradient":"line",Z=f.context,X=Z.gl;let se=!0;for(const he of d){const pe=r.getTile(he);if(z&&!pe.patternsLoaded())continue;const J=pe.getBucket(l);if(!J)continue;const ve=J.programConfigurations.get(l.id),me=f.context.program.get(),ke=f.useProgram(K,ve),Ce=se||ke.program!==me,Be=f.style.terrain&&f.style.terrain.getTerrainData(he),Te=I.constantOr(null);if(Te&&pe.imageAtlas){const tt=pe.imageAtlas,At=tt.patternPositions[Te.to.toString()],Rt=tt.patternPositions[Te.from.toString()];At&&Rt&&ve.setConstantPatternPositions(At,Rt)}const et=Be?he:null,We=z?Al(f,pe,l,$,et):k?Ms(f,pe,l,k,$,et):N?Kc(f,pe,l,J.lineClipsArray.length,et):Mo(f,pe,l,et);if(z)Z.activeTexture.set(X.TEXTURE0),pe.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),ve.updatePaintBuffers($);else if(k&&(Ce||f.lineAtlas.dirty))Z.activeTexture.set(X.TEXTURE0),f.lineAtlas.bind(Z);else if(N){const tt=J.gradients[l.id];let At=tt.texture;if(l.gradientVersion!==tt.version){let Rt=256;if(l.stepInterpolant){const gt=r.getSource().maxzoom,Qt=he.canonical.z===gt?Math.ceil(1<<f.transform.maxZoom-he.canonical.z):1;Rt=c.clamp(c.nextPowerOfTwo(J.maxLineLength/c.EXTENT*1024*Qt),256,Z.maxTextureSize)}tt.gradient=c.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Rt,image:tt.gradient||void 0,clips:J.lineClipsArray}),tt.texture?tt.texture.update(tt.gradient):tt.texture=new ae(Z,tt.gradient,X.RGBA),tt.version=l.gradientVersion,At=tt.texture}Z.activeTexture.set(X.TEXTURE0),At.bind(l.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}ke.draw(Z,X.TRIANGLES,b,f.stencilModeForClipping(he),T,mn.disabled,We,Be,l.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,l.paint,f.transform.zoom,ve,J.layoutVertexBuffer2),se=!1}},fill:function(f,r,l,d){const g=l.paint.get("fill-color"),v=l.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const b=f.colorModeForRenderPass(),T=l.paint.get("fill-pattern"),k=f.opaquePassEnabledForLayer()&&!T.constantOr(1)&&g.constantOr(c.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===k){const I=f.depthModeForSublayer(1,f.renderPass==="opaque"?Ft.ReadWrite:Ft.ReadOnly);Bs(f,r,l,d,I,b,!1)}if(f.renderPass==="translucent"&&l.paint.get("fill-antialias")){const I=f.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);Bs(f,r,l,d,I,b,!0)}},"fill-extrusion":function(f,r,l,d){const g=l.paint.get("fill-extrusion-opacity");if(g!==0&&f.renderPass==="translucent"){const v=new Ft(f.context.gl.LEQUAL,Ft.ReadWrite,f.depthRangeFor3D);if(g!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))Ns(f,r,l,d,v,cn.disabled,hn.disabled),Ns(f,r,l,d,v,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const b=f.colorModeForRenderPass();Ns(f,r,l,d,v,cn.disabled,b)}}},hillshade:function(f,r,l,d){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const g=f.context,v=f.depthModeForSublayer(0,Ft.ReadOnly),b=f.colorModeForRenderPass(),[T,k]=f.renderPass==="translucent"?f.stencilConfigForOverlap(d):[{},d];for(const I of k){const z=r.getTile(I);z.needsHillshadePrepare!==void 0&&z.needsHillshadePrepare&&f.renderPass==="offscreen"?zd(f,z,l,v,cn.disabled,b):f.renderPass==="translucent"&&hu(f,I,z,l,v,T[I.overscaledZ],b)}g.viewport.set([0,0,f.width,f.height])},raster:function(f,r,l,d){if(f.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!d.length)return;const g=f.context,v=g.gl,b=r.getSource(),T=f.useProgram("raster"),k=f.colorModeForRenderPass(),[I,z]=b instanceof at?[{},d]:f.stencilConfigForOverlap(d),N=z[z.length-1].overscaledZ,$=!f.options.moving;for(const K of z){const Z=f.depthModeForSublayer(K.overscaledZ-N,l.paint.get("raster-opacity")===1?Ft.ReadWrite:Ft.ReadOnly,v.LESS),X=r.getTile(K);X.registerFadeDuration(l.paint.get("raster-fade-duration"));const se=r.findLoadedParent(K,0),he=Fl(X,se,r,l,f.transform,f.style.terrain);let pe,J;const ve=l.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;g.activeTexture.set(v.TEXTURE0),X.texture.bind(ve,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(v.TEXTURE1),se?(se.texture.bind(ve,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),pe=Math.pow(2,se.tileID.overscaledZ-X.tileID.overscaledZ),J=[X.tileID.canonical.x*pe%1,X.tileID.canonical.y*pe%1]):X.texture.bind(ve,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);const me=f.style.terrain&&f.style.terrain.getTerrainData(K),ke=me?K:null,Ce=ke?ke.posMatrix:f.transform.calculatePosMatrix(K.toUnwrapped(),$),Be=xd(Ce,J||[0,0],pe||1,he,l);b instanceof at?T.draw(g,v.TRIANGLES,Z,cn.disabled,k,mn.disabled,Be,me,l.id,b.boundsBuffer,f.quadTriangleIndexBuffer,b.boundsSegments):T.draw(g,v.TRIANGLES,Z,I[K.overscaledZ],k,mn.disabled,Be,me,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,r,l,d){const g=l.paint.get("background-color"),v=l.paint.get("background-opacity");if(v===0)return;const b=f.context,T=b.gl,k=f.transform,I=k.tileSize,z=l.paint.get("background-pattern");if(f.isPatternMissing(z))return;const N=!z&&g.a===1&&v===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==N)return;const $=cn.disabled,K=f.depthModeForSublayer(0,N==="opaque"?Ft.ReadWrite:Ft.ReadOnly),Z=f.colorModeForRenderPass(),X=f.useProgram(z?"backgroundPattern":"background"),se=d||k.coveringTiles({tileSize:I,terrain:f.style.terrain});z&&(b.activeTexture.set(T.TEXTURE0),f.imageManager.bind(f.context));const he=l.getCrossfadeParameters();for(const pe of se){const J=d?pe.posMatrix:f.transform.calculatePosMatrix(pe.toUnwrapped()),ve=z?Xm(J,v,f,z,{tileID:pe,tileSize:I},he):Hm(J,v,g),me=f.style.terrain&&f.style.terrain.getTerrainData(pe);X.draw(b,T.TRIANGLES,K,$,Z,mn.disabled,ve,me,l.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,r,l){for(let d=0;d<l.length;d++)og(f,r,l[d])},custom:function(f,r,l){const d=f.context,g=l.implementation;if(f.renderPass==="offscreen"){const v=g.prerender;v&&(f.setCustomLayerDefaults(),d.setColorMode(f.colorModeForRenderPass()),v.call(g,d.gl,f.transform.customLayerMatrix()),d.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),d.setColorMode(f.colorModeForRenderPass()),d.setStencilMode(cn.disabled);const v=g.renderingMode==="3d"?new Ft(f.context.gl.LEQUAL,Ft.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,Ft.ReadOnly);d.setDepthMode(v),g.render(d.gl,f.transform.customLayerMatrix()),d.setDirty(),f.setBaseState(),d.bindFramebuffer.set(null)}}};class fu{constructor(r,l){this.context=new Ad(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.create(),renderTime:0},this.setup(),this.numSublayers=Ar.maxUnderzooming+Ar.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Et,this.gpuTimers={}}resize(r,l,d){if(this.width=r*d,this.height=l*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,l=new c.PosArray;l.emplaceBack(0,0),l.emplaceBack(c.EXTENT,0),l.emplaceBack(0,c.EXTENT),l.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(l,Vt.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const d=new c.PosArray;d.emplaceBack(0,0),d.emplaceBack(c.EXTENT,0),d.emplaceBack(0,c.EXTENT),d.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=r.createVertexBuffer(d,Vt.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const g=new c.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(c.EXTENT,0,c.EXTENT,0),g.emplaceBack(0,c.EXTENT,0,c.EXTENT),g.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(g,Re.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const v=new c.PosArray;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(v,Vt.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const b=new c.LineStripIndexArray;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(b);const T=new c.TriangleIndexArray;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(T),this.emptyTexture=new ae(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);const k=this.context.gl;this.stencilClearMode=new cn({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.create();c.ortho(d,0,this.width,this.height,0,0,1),c.scale(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,Ft.disabled,this.stencilClearMode,hn.disabled,mn.disabled,Ao(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,g=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(hn.disabled),d.setDepthMode(Ft.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const b of l){const T=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,k=this.style.terrain&&this.style.terrain.getTerrainData(b);v.draw(d,g.TRIANGLES,Ft.disabled,new cn({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),hn.disabled,mn.disabled,Ao(b.posMatrix),k,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new cn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new cn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((b,T)=>T.overscaledZ-b.overscaledZ),g=d[d.length-1].overscaledZ,v=d[0].overscaledZ-g+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const b={};for(let T=0;T<v;T++)b[T+g]=new cn({func:l.GEQUAL,mask:255},T+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[b,d]}return[{[g]:cn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new hn([r.CONSTANT_COLOR,r.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hn.unblended:hn.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return Ft.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Ft(d||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,v=this.style.terrain&&new Od(this);for(const I in g){const z=g[I];z.used&&z.prepare(this.context)}const b={},T={},k={};for(const I in g){const z=g[I];b[I]=z.getVisibleCoordinates(),T[I]=b[I].slice().reverse(),k[I]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<d.length;I++)if(this.style._layers[d[I]].is3D()){this.opaquePassCutoff=I;break}if(v){this.opaquePassCutoff=0;const I=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||I.length)&&(c.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(z,N){const $=z.context,K=$.gl,Z=hn.unblended,X=new Ft(K.LEQUAL,Ft.ReadWrite,[0,1]),se=N.getTerrainMesh(),he=N.sourceCache.getRenderableTiles(),pe=z.useProgram("terrainDepth");$.bindFramebuffer.set(N.getFramebuffer("depth").framebuffer),$.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),$.clear({color:c.Color.transparent,depth:1});for(const J of he){const ve=N.getTerrainData(J.tileID),me=z.transform.calculatePosMatrix(J.tileID.toUnwrapped());pe.draw($,K.TRIANGLES,X,cn.disabled,Z,mn.backCCW,{u_matrix:me},ve,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}$.bindFramebuffer.set(null),$.viewport.set([0,0,z.width,z.height])}(this,this.style.terrain),function(z,N){const $=z.context,K=$.gl,Z=hn.unblended,X=new Ft(K.LEQUAL,Ft.ReadWrite,[0,1]),se=N.getTerrainMesh(),he=N.getCoordsTexture(),pe=N.sourceCache.getRenderableTiles(),J=z.useProgram("terrainCoords");$.bindFramebuffer.set(N.getFramebuffer("coords").framebuffer),$.viewport.set([0,0,z.width/devicePixelRatio,z.height/devicePixelRatio]),$.clear({color:c.Color.transparent,depth:1}),N.coordsIndex=[];for(const ve of pe){const me=N.getTerrainData(ve.tileID);$.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,he.texture);const ke=z.transform.calculatePosMatrix(ve.tileID.toUnwrapped());J.draw($,K.TRIANGLES,X,cn.disabled,Z,mn.backCCW,{u_matrix:ke,u_terrain_coords_id:(255-N.coordsIndex.length)/255,u_texture:0},me,"terrain",se.vertexBuffer,se.indexBuffer,se.segments),N.coordsIndex.push(ve.tileID.key)}$.bindFramebuffer.set(null),$.viewport.set([0,0,z.width,z.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const I of d){const z=this.style._layers[I];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const N=T[z.source];(z.type==="custom"||N.length)&&this.renderLayer(this,g[z.source],z,N)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!v)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[d[this.currentLayer]],z=g[I.source],N=b[I.source];this._renderTileClippingMasks(I,N),this.renderLayer(this,z,I,N)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const I=this.style._layers[d[this.currentLayer]],z=g[I.source];if(v&&v.renderLayer(I))continue;const N=(I.type==="symbol"?k:T)[I.source];this._renderTileClippingMasks(I,b[I.source]),this.renderLayer(this,z,I,N)}if(this.options.showTileBoundaries){let I,z;Object.values(this.style._layers).forEach(N=>{N.source&&!N.isHidden(this.transform.zoom)&&(N.source!==(z&&z.id)&&(z=this.style.sourceCaches[N.source]),(!I||I.getSource().maxzoom<z.getSource().maxzoom)&&(I=z))}),I&&$s.debug(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const z=I.transform.padding;Ha(I,I.transform.height-(z.top||0),3,$l),Ha(I,z.bottom||0,3,vi),Fs(I,z.left||0,3,Dd),Fs(I,I.transform.width-(z.right||0),3,du);const N=I.transform.centerPoint;(function($,K,Z,X){Oo($,K-1,Z-10,2,20,X),Oo($,K-10,Z-1,20,2,X)})(I,N.x,I.transform.height-N.y,Ld)}(this),this.context.setDefault()}renderLayer(r,l,d,g){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(g||[]).length)&&(this.id=d.id,this.gpuTimingStart(d),$s[d.type](r,l,d,g,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let d=this.gpuTimers[r.id];d||(d=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),d.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,d.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}collectGpuTimers(){const r=this.gpuTimers;return this.gpuTimers={},r}queryGpuTimers(r){const l={};for(const d in r){const g=r[d],v=this.context.extTimerQuery,b=v.getQueryObjectEXT(g.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(g.query),l[d]=b}return l}translatePosMatrix(r,l,d,g,v){if(!d[0]&&!d[1])return r;const b=v?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(b){const I=Math.sin(b),z=Math.cos(b);d=[d[0]*z-d[1]*I,d[0]*I+d[1]*z]}const T=[v?d[0]:On(l,d[0],this.transform.zoom),v?d[1]:On(l,d[1],this.transform.zoom),0],k=new Float32Array(16);return c.translate(k,r,T),k}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new md(this.context,r,Is[r],l,Qc[r],this._showOverdrawInspector,this.style.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class jl{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const g=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const k=1/(T=c.transformMat4([],T,r))[3]/l*g;return c.mul$1(T,T,[k,k,1/T[3],k])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const k=c.sub([],v[T[0]],v[T[1]]),I=c.sub([],v[T[2]],v[T[1]]),z=c.normalize([],c.cross([],k,I)),N=-c.dot(z,v[T[1]]);return z.concat(N)});return new jl(v,b)}}class Us{constructor(r,l){this.min=r,this.max=l,this.center=c.scale$1([],c.add([],this.min,this.max),.5)}quadrant(r){const l=[r%2==0,r<2],d=c.clone$2(this.min),g=c.clone$2(this.max);for(let v=0;v<l.length;v++)d[v]=l[v]?this.min[v]:this.center[v],g[v]=l[v]?this.center[v]:this.max[v];return g[2]=this.max[2],new Us(d,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<r.planes.length;g++){const v=r.planes[g];let b=0;for(let T=0;T<l.length;T++)c.dot$1(v,l[T])>=0&&b++;if(b===0)return 0;b!==l.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let v=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let T=0;T<r.points.length;T++){const k=r.points[T][g]-this.min[g];v=Math.min(v,k),b=Math.max(b,k)}if(b<0||v>this.max[g]-this.min[g])return 0}return 1}}class Bo{constructor(r=0,l=0,d=0,g=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=g}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=c.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=c.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=c.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=c.number(r.right,l.right,d)),this}getCenter(r,l){const d=c.clamp((this.left+r-this.right)/2,0,r),g=c.clamp((this.top+l-this.bottom)/2,0,l);return new c.pointGeometry(d,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Bo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class js{constructor(r,l,d,g,v){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=v===void 0||!!v,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Bo,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new js(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r._elevation=this._elevation,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-c.wrap(r,-180,180)*Math.PI/180;var d;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=(d=new c.ARRAY_TYPE(4),c.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d),function(g,v,b){var T=v[0],k=v[1],I=v[2],z=v[3],N=Math.sin(b),$=Math.cos(b);g[0]=T*$+I*N,g[1]=k*$+z*N,g[2]=T*-N+I*$,g[3]=k*-N+z*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=c.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new c.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new c.pointGeometry(0,0)),g=this.pointCoordinate(new c.pointGeometry(this.width,0)),v=this.pointCoordinate(new c.pointGeometry(this.width,this.height)),b=this.pointCoordinate(new c.pointGeometry(0,this.height)),T=Math.floor(Math.min(d.x,g.x,v.x,b.x)),k=Math.floor(Math.max(d.x,g.x,v.x,b.x)),I=1;for(let z=T-I;z<=k+I;z++)z!==0&&l.push(new c.UnwrappedTileID(z,r))}return l}coveringTiles(r){var l,d;let g=this.coveringZoomLevel(r);const v=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const b=this.pointCoordinate(this.getCameraPoint()),T=c.MercatorCoordinate.fromLngLat(this.center),k=Math.pow(2,g),I=[k*b.x,k*b.y,0],z=[k*T.x,k*T.y,0],N=jl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let $=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&($=g);const K=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Z=J=>({aabb:new Us([J*k,0,0],[(J+1)*k,k,0]),zoom:0,x:0,y:0,wrap:J,fullyVisible:!1}),X=[],se=[],he=g,pe=r.reparseOverscaled?v:g;if(this._renderWorldCopies)for(let J=1;J<=3;J++)X.push(Z(-J)),X.push(Z(J));for(X.push(Z(0));X.length>0;){const J=X.pop(),ve=J.x,me=J.y;let ke=J.fullyVisible;if(!ke){const tt=J.aabb.intersects(N);if(tt===0)continue;ke=tt===2}const Ce=r.terrain?I:z,Be=J.aabb.distanceX(Ce),Te=J.aabb.distanceY(Ce),et=Math.max(Math.abs(Be),Math.abs(Te)),We=K+(1<<he-J.zoom)-2;if(J.zoom===he||et>We&&J.zoom>=$){const tt=he-J.zoom,At=I[0]-.5-(ve<<tt),Rt=I[1]-.5-(me<<tt);se.push({tileID:new c.OverscaledTileID(J.zoom===he?pe:J.zoom,J.wrap,J.zoom,ve,me),distanceSq:c.sqrLen([z[0]-.5-ve,z[1]-.5-me]),tileDistanceToCamera:Math.sqrt(At*At+Rt*Rt)})}else for(let tt=0;tt<4;tt++){const At=(ve<<1)+tt%2,Rt=(me<<1)+(tt>>1),gt=J.zoom+1;let Qt=J.aabb.quadrant(tt);if(r.terrain){const en=new c.OverscaledTileID(gt,J.wrap,gt,At,Rt),$t=r.terrain.getMinMaxElevation(en),qt=(l=$t.minElevation)!==null&&l!==void 0?l:this.elevation,rn=(d=$t.maxElevation)!==null&&d!==void 0?d:this.elevation;Qt=new Us([Qt.min[0],Qt.min[1],qt],[Qt.max[0],Qt.max[1],rn])}X.push({aabb:Qt,zoom:gt,x:At,y:Rt,wrap:J.wrap,fullyVisible:ke})}}return se.sort((J,ve)=>J.distanceSq-ve.distanceSq).map(J=>J.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=c.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.pointGeometry(c.mercatorXfromLng(r.lng)*this.worldSize,c.mercatorYfromLat(l)*this.worldSize)}unproject(r){return new c.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(r){this.freezeElevation||(this.elevation=r?this.getElevation(this._center,r):0)}getElevation(r,l){const d=c.MercatorCoordinate.fromLngLat(r),g=(1<<this.tileZoom)*c.EXTENT,v=d.x*g,b=d.y*g,T=Math.floor(v/c.EXTENT),k=Math.floor(b/c.EXTENT),I=new c.OverscaledTileID(this.tileZoom,0,this.tileZoom,T,k);return l.getElevation(I,v%c.EXTENT,b%c.EXTENT,c.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.pointLocation(this.centerPoint,r),d=this.getElevation(l,r);if(!(this.elevation-d))return;const g=this.getCameraPosition(),v=c.MercatorCoordinate.fromLngLat(g.lngLat,g.altitude),b=c.MercatorCoordinate.fromLngLat(l,d),T=v.x-b.x,k=v.y-b.y,I=v.z-b.z,z=Math.sqrt(T*T+k*k+I*I),N=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=d,this._center=l,this.zoom=N}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(r),b=new c.MercatorCoordinate(v.x-(d.x-g.x),v.y-(d.y-g.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),this.getElevation(r,l),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return c.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const $=l.pointCoordinate(r);if($!=null)return $}const d=[r.x,r.y,0,1],g=[r.x,r.y,1,1];c.transformMat4(d,d,this.pixelMatrixInverse),c.transformMat4(g,g,this.pixelMatrixInverse);const v=d[3],b=g[3],T=d[1]/v,k=g[1]/b,I=d[2]/v,z=g[2]/b,N=(0-I)/(z-I);return new c.MercatorCoordinate(c.number(d[0]/v,g[0]/b,N)/this.worldSize,c.number(T,k,N)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,l,1];return c.transformMat4(g,g,d),new c.pointGeometry(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new c.LngLatBounds().extend(this.pointLocation(new c.pointGeometry(0,r))).extend(this.pointLocation(new c.pointGeometry(this.width,r))).extend(this.pointLocation(new c.pointGeometry(this.width,this.height))).extend(this.pointLocation(new c.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,l=!1){const d=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const v=r.canonical,b=this.worldSize/this.zoomScale(v.z),T=v.x+Math.pow(2,v.z)*r.wrap,k=c.identity(new Float64Array(16));return c.translate(k,k,[T*b,v.y*b,0]),c.scale(k,k,[b/c.EXTENT,b/c.EXTENT,1]),c.multiply(k,l?this.alignedProjMatrix:this.projMatrix,k),g[d]=new Float32Array(k),g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,l,d,g,v=-90,b=90,T=-180,k=180;const I=this.size,z=this._unmodified;if(this.latRange){const K=this.latRange;v=c.mercatorYfromLat(K[1])*this.worldSize,b=c.mercatorYfromLat(K[0])*this.worldSize,r=b-v<I.y?I.y/(b-v):0}if(this.lngRange){const K=this.lngRange;T=c.wrap(c.mercatorXfromLng(K[0])*this.worldSize,0,this.worldSize),k=c.wrap(c.mercatorXfromLng(K[1])*this.worldSize,0,this.worldSize),k<T&&(k+=this.worldSize),l=k-T<I.x?I.x/(k-T):0}const N=this.point,$=Math.max(l||0,r||0);if($)return this.center=this.unproject(new c.pointGeometry(l?(k+T)/2:N.x,r?(b+v)/2:N.y)),this.zoom+=this.scaleZoom($),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const K=N.y,Z=I.y/2;K-Z<v&&(g=v+Z),K+Z>b&&(g=b-Z)}if(this.lngRange){const K=(T+k)/2,Z=c.wrap(N.x,K-this.worldSize/2,K+this.worldSize/2),X=I.x/2;Z-X<T&&(d=T+X),Z+X>k&&(d=k-X)}d===void 0&&g===void 0||(this.center=this.unproject(new c.pointGeometry(d!==void 0?d:N.x,g!==void 0?g:N.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let g=c.identity(new Float64Array(16));c.scale(g,g,[this.width/2,-this.height/2,1]),c.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.identity(new Float64Array(16)),c.scale(g,g,[1,-1,1]),c.translate(g,g,[-1,-1,0]),c.scale(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const v=Math.PI/2+this._pitch,b=this._fov*(.5+r.y/this.height),T=Math.sin(b)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-v-b,.01,Math.PI-.01)),k=this.getHorizon(),I=2*Math.atan(k/this.cameraToCenterDistance)*(.5+r.y/(2*k)),z=Math.sin(I)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-v-I,.01,Math.PI-.01)),N=Math.cos(Math.PI/2-this._pitch)*T+this.cameraToSeaLevelDistance,$=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,K=1.01*Math.min(N,$),Z=this.height/50;g=new Float64Array(16),c.perspective(g,this._fov,this.width/this.height,Z,K),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,c.scale(g,g,[1,-1,1]),c.translate(g,g,[0,0,-this.cameraToCenterDistance]),c.rotateX(g,g,this._pitch),c.rotateZ(g,g,this.angle),c.translate(g,g,[-l,-d,0]),this.mercatorMatrix=c.scale([],g,[this.worldSize,this.worldSize,this.worldSize]),c.scale(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,g),c.translate(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.invert([],g),this.pixelMatrix3D=c.multiply(new Float64Array(16),this.labelPlaneMatrix,g);const X=this.width%2/2,se=this.height%2/2,he=Math.cos(this.angle),pe=Math.sin(this.angle),J=l-Math.round(l)+he*X+pe*se,ve=d-Math.round(d)+he*se+pe*X,me=new Float64Array(g);if(c.translate(me,me,[J>.5?J-1:J,ve>.5?ve-1:ve,0]),this.alignedProjMatrix=me,g=c.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new c.pointGeometry(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return c.transformMat4(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.pointGeometry(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,g=l.y,v=l.x,b=l.y;for(const T of r)d=Math.min(d,T.x),g=Math.min(g,T.y),v=Math.max(v,T.x),b=Math.max(b,T.y);return[new c.pointGeometry(d,g),new c.pointGeometry(v,g),new c.pointGeometry(v,b),new c.pointGeometry(d,b),new c.pointGeometry(d,g)]}}}class Bd{constructor(r){this._hashName=r&&encodeURIComponent(r),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(l,d){let g=!1,v=null;const b=()=>{v=null,g&&(l(),v=setTimeout(b,300),g=!1)};return()=>(g=!0,v||b(),v)}(this._updateHashUnthrottled.bind(this))}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,g),b=Math.round(l.lng*v)/v,T=Math.round(l.lat*v)/v,k=this._map.getBearing(),I=this._map.getPitch();let z="";if(z+=r?`/${b}/${T}/${d}`:`${d}/${T}/${b}`,(k||I)&&(z+="/"+Math.round(10*k)/10),I&&(z+=`/${Math.round(I)}`),this._hashName){const N=this._hashName;let $=!1;const K=window.location.hash.slice(1).split("&").map(Z=>{const X=Z.split("=")[0];return X===N?($=!0,`${X}=${z}`):Z}).filter(Z=>Z);return $||K.push(`${N}=${z}`),`#${K.join("&")}`}return`#${z}`}_getCurrentHash(){const r=window.location.hash.replace("#","");if(this._hashName){let l;return r.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(l=d)}),(l&&l[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._getCurrentHash();if(r.length>=3&&!r.some(l=>isNaN(l))){const l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:l,pitch:+(r[4]||0)}),!0}return!1}_updateHashUnthrottled(){const r=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,r)}catch{}}}const Vs={linearity:.3,easing:c.bezier(0,0,.3,1)},Nd=c.extend({deceleration:2500,maxSpeed:1400},Vs),Fd=c.extend({deceleration:20,maxSpeed:1400},Vs),$d=c.extend({deceleration:1e3,maxSpeed:360},Vs),No=c.extend({deceleration:1e3,maxSpeed:90},Vs);class Ud{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=c.exported.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new c.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const v=qs(l.pan.mag(),d,c.extend({},Nd,r||{}));g.offset=l.pan.mult(v.amount/l.pan.mag()),g.center=this._map.transform.center,Gs(g,v)}if(l.zoom){const v=qs(l.zoom,d,Fd);g.zoom=this._map.transform.zoom+v.amount,Gs(g,v)}if(l.bearing){const v=qs(l.bearing,d,$d);g.bearing=this._map.transform.bearing+c.clamp(v.amount,-179,179),Gs(g,v)}if(l.pitch){const v=qs(l.pitch,d,No);g.pitch=this._map.transform.pitch+v.amount,Gs(g,v)}if(g.zoom||g.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;g.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),c.extend(g,{noMoveStart:!0})}}function Gs(f,r){(!f.duration||f.duration<r.duration)&&(f.duration=r.duration,f.easing=r.easing)}function qs(f,r,l){const{maxSpeed:d,linearity:g,deceleration:v}=l,b=c.clamp(f*g/(r/1e3),-d,d),T=Math.abs(b)/(v*g);return{easing:l.easing,duration:1e3*T,amount:b*(T/2)}}class qr extends c.Event{constructor(r,l,d,g={}){const v=R.mousePos(l.getCanvasContainer(),d),b=l.unproject(v);super(r,c.extend({point:v,lngLat:b,originalEvent:d},g)),this._defaultPrevented=!1,this.target=l}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Ws extends c.Event{constructor(r,l,d){const g=r==="touchend"?d.changedTouches:d.touches,v=R.touchPos(l.getCanvasContainer(),g),b=v.map(k=>l.unproject(k)),T=v.reduce((k,I,z,N)=>k.add(I.div(N.length)),new c.pointGeometry(0,0));super(r,{points:v,point:T,lngLats:b,lngLat:l.unproject(T),originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Wr extends c.Event{constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class sg{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Wr(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new qr(r.type,this._map,r))}mouseup(r){this._map.fire(new qr(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new qr(r.type,this._map,r))}dblclick(r){return this._firePreventable(new qr(r.type,this._map,r))}mouseover(r){this._map.fire(new qr(r.type,this._map,r))}mouseout(r){this._map.fire(new qr(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Ws(r.type,this._map,r))}touchmove(r){this._map.fire(new Ws(r.type,this._map,r))}touchend(r){this._map.fire(new Ws(r.type,this._map,r))}touchcancel(r){this._map.fire(new Ws(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Sa{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new qr(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new qr(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jd{constructor(r,l){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(R.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=R.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(g.x,d.x),b=Math.max(g.x,d.x),T=Math.min(g.y,d.y),k=Math.max(g.y,d.y);R.setTransform(this._box,`translate(${v}px,${T}px)`),this._box.style.width=b-v+"px",this._box.style.height=k-T+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,g=l;if(this.reset(),R.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(d,g,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(R.remove(this._box),this._box=null),R.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new c.Event(r,{originalEvent:l}))}}function Qi(f,r){if(f.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${r.length}`);const l={};for(let d=0;d<f.length;d++)l[f[d].identifier]=r[d];return l}class Zs{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const v=new c.pointGeometry(0,0);for(const b of g)v._add(b);return v.div(g.length)}(l),this.touches=Qi(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const g=Qi(d,l);for(const v in this.touches){const b=this.touches[v],T=g[v];(!T||T.dist(b)>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class pu{constructor(r){this.singleTap=new Zs(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const g=this.singleTap.touchend(r,l,d);if(g){const v=r.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(g)<30;if(v&&b||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class lg{constructor(){this._zoomIn=new pu({numTouches:1,numTaps:2}),this._zoomOut=new pu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const g=this._zoomIn.touchend(r,l,d),v=this._zoomOut.touchend(r,l,d);return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:b=>b.easeTo({duration:300,zoom:b.getZoom()+1,around:b.unproject(g)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:b=>b.easeTo({duration:300,zoom:b.getZoom()-1,around:b.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const cg={0:1,2:2};class Vl{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(r,l){return!1}_move(r,l){return{}}mousedown(r,l){if(this._lastPoint)return;const d=R.mouseButton(r);this._correctButton(r,d)&&(this._lastPoint=l,this._eventButton=d)}mousemoveWindow(r,l){const d=this._lastPoint;if(d){if(r.preventDefault(),function(g,v){const b=cg[v];return g.buttons===void 0||(g.buttons&b)!==b}(r,this._eventButton))this.reset();else if(this._moved||!(l.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(d,l)}}mouseupWindow(r){this._lastPoint&&R.mouseButton(r)===this._eventButton&&(this._moved&&R.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hs extends Vl{mousedown(r,l){super.mousedown(r,l),this._lastPoint&&(this._active=!0)}_correctButton(r,l){return l===0&&!r.ctrlKey}_move(r,l){return{around:l,panDelta:l.sub(r)}}}class ea extends Vl{_correctButton(r,l){return l===0&&r.ctrlKey||l===2}_move(r,l){const d=.8*(l.x-r.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(r){r.preventDefault()}}class it extends Vl{_correctButton(r,l){return l===0&&r.ctrlKey||l===2}_move(r,l){const d=-.5*(l.y-r.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(r){r.preventDefault()}}class Vd{constructor(r,l){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,l,d)}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const g=Qi(d,l),v=new c.pointGeometry(0,0),b=new c.pointGeometry(0,0);let T=0;for(const I in g){const z=g[I],N=this._touches[I];N&&(v._add(z),b._add(z.sub(N)),T++,g[I]=z)}if(this._touches=g,T<this._minTouches||!b.mag())return;const k=b.div(T);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(T),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(r){}_move(r,l,d){return{}}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[g,v]=this._firstTwoTouches,b=Ta(d,l,g),T=Ta(d,l,v);if(!b||!T)return;const k=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],k,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[g,v]=this._firstTwoTouches,b=Ta(d,l,g),T=Ta(d,l,v);b&&T||(this._active&&R.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ta(f,r,l){for(let d=0;d<f.length;d++)if(f[d].identifier===l)return r[d]}function mu(f,r){return Math.log(f/r)/Math.LN2}class Ye extends Xa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(mu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mu(this._distance,d),pinchAround:l}}}function Gl(f,r){return 180*f.angleWith(r)/Math.PI}class ug extends Xa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l){const d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Gl(this._vector,d),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=Gl(r,this._startVector);return Math.abs(d)<l}}function gu(f){return Math.abs(f.y)>Math.abs(f.x)}class yu extends Xa{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,gu(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,v,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,v=l.mag()>=2;if(!g&&!v)return;if(!g||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const b=r.y>0==l.y>0;return gu(r)&&gu(l)&&b}}const Gd={panStep:100,bearingStep:15,pitchStep:10};class qd{constructor(){const r=Gd;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,g=0,v=0,b=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),b=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:T=>{const k=T.getZoom();T.easeTo({duration:300,easeId:"keyboardHandler",easing:hg,zoom:l?Math.round(k)+l*(r.shiftKey?2:1):k,bearing:T.getBearing()+d*this._bearingStep,pitch:T.getPitch()+g*this._pitchStep,offset:[-v*this._panStep,-b*this._panStep],center:T.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function hg(f){return f*(2-f)}const Wd=4.000244140625;class vu{constructor(r,l){this._map=r,this._el=r.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;r.preventDefault()}let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=c.exported.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%Wd==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=R.mousePos(this._el,r);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(l)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._map.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Wd?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);const I=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(I*k))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,g=this._easing;let v,b=!1;if(this._type==="wheel"&&d&&g){const T=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),k=g(T);v=c.number(d,l,k),T<1?this._frameId||(this._frameId=!0):b=!0}else v=l,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=c.ease;if(this._prevEase){const d=this._prevEase,g=(c.exported.now()-d.start)/d.duration,v=d.easing(g+.01)-d.easing(g),b=.27/Math.sqrt(v*v+1e-4)*.01,T=Math.sqrt(.0729-b*b);l=c.bezier(b,T,.25,1)}return this._prevEase={start:c.exported.now(),duration:r,easing:l},l}reset(){this._active=!1}}class _u{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xu{constructor(){this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(r.shiftKey?-1:1),around:d.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bu{constructor(){this._tap=new pu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(r,l,d){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=l[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(r,l,d))}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=l[0],v=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(r,l,d)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mr{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ka{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zd{constructor(r,l,d,g){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Fo=f=>f.zoom||f.drag||f.pitch||f.rotate;class wu extends c.Event{}function Xs(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Hd{constructor(r,l){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ud(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l),c.bindAll(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,v,b]of this._listeners)R.addEventListener(g,v,g===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[r,l,d]of this._listeners)R.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new sg(l,r));const g=l.boxZoom=new jd(l,r);this._add("boxZoom",g);const v=new lg,b=new xu;l.doubleClickZoom=new _u(b,v),this._add("tapZoom",v),this._add("clickZoom",b);const T=new bu;this._add("tapDragZoom",T);const k=l.touchPitch=new yu(l);this._add("touchPitch",k);const I=new ea(r),z=new it(r);l.dragRotate=new ka(r,I,z),this._add("mouseRotate",I,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]);const N=new Hs(r),$=new Vd(r,l);l.dragPan=new Mr(d,N,$),this._add("mousePan",N),this._add("touchPan",$,["touchZoom","touchRotate"]);const K=new ug,Z=new Ye;l.touchZoomRotate=new Zd(d,Z,K,T),this._add("touchRotate",K,["touchPan","touchZoom"]),this._add("touchZoom",Z,["touchPan","touchRotate"]);const X=l.scrollZoom=new vu(l,this);this._add("scrollZoom",X,["mousePan"]);const se=l.keyboard=new qd;this._add("keyboard",se),this._add("blockableMapEvent",new Sa(l));for(const he of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[he]&&l[he].enable(r[he])}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Fo(this._eventsInProgress))||this.isZooming()}_blockedByActive(r,l,d){for(const g in r)if(g!==d&&(!l||l.indexOf(g)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}handleEvent(r,l){if(r.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const d=r.type==="renderFrame"?void 0:r,g={needsRenderFrame:!1},v={},b={},T=r.touches,k=T?this._getMapTouches(T):void 0,I=k?R.touchPos(this._el,k):R.mousePos(this._el,r);for(const{handlerName:$,handler:K,allowed:Z}of this._handlers){if(!K.isEnabled())continue;let X;this._blockedByActive(b,Z,$)?K.reset():K[l||r.type]&&(X=K[l||r.type](r,I,k),this.mergeHandlerResult(g,v,X,$,d),X&&X.needsRenderFrame&&this._triggerRenderFrame()),(X||K.isActive())&&(b[$]=K)}const z={};for(const $ in this._previousActiveHandlers)b[$]||(z[$]=d);this._previousActiveHandlers=b,(Object.keys(z).length||Xs(g))&&(this._changes.push([g,v,z]),this._triggerRenderFrame()),(Object.keys(b).length||Xs(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:N}=g;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))}mergeHandlerResult(r,l,d,g,v){if(!d)return;c.extend(r,d);const b={handlerName:g,originalEvent:d.originalEvent||v};d.zoomDelta!==void 0&&(l.zoom=b),d.panDelta!==void 0&&(l.drag=b),d.pitchDelta!==void 0&&(l.pitch=b),d.bearingDelta!==void 0&&(l.rotate=b)}_applyChanges(){const r={},l={},d={};for(const[g,v,b]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new c.pointGeometry(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),c.extend(l,v),c.extend(d,b);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const g=this._map,v=g.transform,b=g.style&&g.style.terrain;if(!(Xs(r)||b&&this._drag))return this._fireEvents(l,d,!0);let{panDelta:T,zoomDelta:k,bearingDelta:I,pitchDelta:z,around:N,pinchAround:$}=r;$!==void 0&&(N=$),g._stop(!0),N=N||g.transform.centerPoint;const K=v.pointLocation(T?N.sub(T):N);I&&(v.bearing+=I),z&&(v.pitch+=z),k&&(v.zoom+=k),b?l.drag&&!this._drag?(this._drag={center:v.centerPoint,lngLat:v.pointLocation(N),point:N,handlerName:l.drag.handlerName},g.fire(new c.Event("freezeElevation",{freeze:!0}))):this._drag&&d[this._drag.handlerName]?(g.fire(new c.Event("freezeElevation",{freeze:!1})),this._drag=null):l.drag&&this._drag&&(v.center=v.pointLocation(v.centerPoint.sub(T))):v.setLocationAtPoint(K,N),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const g=Fo(this._eventsInProgress),v=Fo(r),b={};for(const z in r){const{originalEvent:N}=r[z];this._eventsInProgress[z]||(b[`${z}start`]=N),this._eventsInProgress[z]=r[z]}!g&&v&&this._fireEvent("movestart",v.originalEvent);for(const z in b)this._fireEvent(z,b[z]);v&&this._fireEvent("move",v.originalEvent);for(const z in r){const{originalEvent:N}=r[z];this._fireEvent(z,N)}const T={};let k;for(const z in this._eventsInProgress){const{handlerName:N,originalEvent:$}=this._eventsInProgress[z];this._handlersById[N].isActive()||(delete this._eventsInProgress[z],k=l[N]||$,T[`${z}end`]=k)}for(const z in T)this._fireEvent(z,T[z]);const I=Fo(this._eventsInProgress);if(d&&(g||v)&&!I){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;z?(N(z.bearing||this._map.getBearing())&&(z.bearing=0),this._map.easeTo(z,{originalEvent:k})):(this._map.fire(new c.Event("moveend",{originalEvent:k})),N(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new c.Event(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new wu("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ai={extend:(f,...r)=>c.extend(f,...r),run(f){f()},logToElement(f,r=!1,l="log"){const d=window.document.getElementById(l);d&&(r&&(d.innerHTML=""),d.innerHTML+=`<br>${f}`)}};class gn extends c.Evented{constructor(r,l){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=c.pointGeometry.convert(r).mult(-1),this.panTo(this.transform.center,c.extend({offset:r},l),d)}panTo(r,l,d){return this.easeTo(c.extend({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(c.extend({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(c.extend({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,c.extend({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=c.LngLatBounds.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,g){const v={top:0,bottom:0,right:0,left:0};if(typeof(g=c.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const me=g.padding;g.padding={top:me,bottom:me,right:me,left:me}}g.padding=c.extend(v,g.padding);const b=this.transform,T=b.padding,k=b.project(c.LngLat.convert(r)),I=b.project(c.LngLat.convert(l)),z=k.rotate(-d*Math.PI/180),N=I.rotate(-d*Math.PI/180),$=new c.pointGeometry(Math.max(z.x,N.x),Math.max(z.y,N.y)),K=new c.pointGeometry(Math.min(z.x,N.x),Math.min(z.y,N.y)),Z=$.sub(K),X=(b.width-(T.left+T.right+g.padding.left+g.padding.right))/Z.x,se=(b.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/Z.y;if(se<0||X<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const he=Math.min(b.scaleZoom(b.scale*Math.min(X,se)),g.maxZoom),pe=c.pointGeometry.convert(g.offset),J=new c.pointGeometry((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(d*Math.PI/180),ve=pe.add(J).mult(b.scale/b.zoomScale(he));return{center:b.unproject(k.add(I).div(2).sub(ve)),zoom:he,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,g,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.pointGeometry.convert(r)),this.transform.pointLocation(c.pointGeometry.convert(l)),d,g),g,v)}_fitInternal(r,l,d){return r?(delete(l=c.extend(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this.transform;let g=!1,v=!1,b=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(g=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=c.LngLat.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(v=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(b=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this.fire(new c.Event("movestart",l)).fire(new c.Event("move",l)),g&&this.fire(new c.Event("zoomstart",l)).fire(new c.Event("zoom",l)).fire(new c.Event("zoomend",l)),v&&this.fire(new c.Event("rotatestart",l)).fire(new c.Event("rotate",l)).fire(new c.Event("rotateend",l)),b&&this.fire(new c.Event("pitchstart",l)).fire(new c.Event("pitch",l)).fire(new c.Event("pitchend",l)),this.fire(new c.Event("moveend",l))}calculateCameraOptionsFromTo(r,l,d,g=0){const v=c.MercatorCoordinate.fromLngLat(r,l),b=c.MercatorCoordinate.fromLngLat(d,g),T=b.x-v.x,k=b.y-v.y,I=b.z-v.z,z=Math.hypot(T,k,I);if(z===0)throw new Error("Can't calculate camera options with same From and To");const N=Math.hypot(T,k),$=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),K=180*Math.atan2(T,-k)/Math.PI;let Z=180*Math.acos(N/z)/Math.PI;return Z=I<0?90-Z:90+Z,{center:b.toLngLat(),zoom:$,pitch:Z,bearing:K}}easeTo(r,l){this._stop(!1,r.easeId),((r=c.extend({offset:[0,0],duration:500,easing:c.ease},r)).animate===!1||!r.essential&&c.exported.prefersReducedMotion)&&(r.duration=0);const d=this.transform,g=this.getZoom(),v=this.getBearing(),b=this.getPitch(),T=this.getPadding(),k="zoom"in r?+r.zoom:g,I="bearing"in r?this._normalizeBearing(r.bearing,v):v,z="pitch"in r?+r.pitch:b,N="padding"in r?r.padding:d.padding,$=c.pointGeometry.convert(r.offset);let K=d.centerPoint.add($);const Z=d.pointLocation(K),X=c.LngLat.convert(r.center||Z);this._normalizeCenter(X);const se=d.project(Z),he=d.project(X).sub(se),pe=d.zoomScale(k-g);let J,ve;r.around&&(J=c.LngLat.convert(r.around),ve=d.locationPoint(J));const me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||k!==g,this._rotating=this._rotating||v!==I,this._pitching=this._pitching||z!==b,this._padding=!d.isPaddingEqual(N),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,me),this._ease(ke=>{if(this._zooming&&(d.zoom=c.number(g,k,ke)),this._rotating&&(d.bearing=c.number(v,I,ke)),this._pitching&&(d.pitch=c.number(b,z,ke)),this._padding&&(d.interpolatePadding(T,N,ke),K=d.centerPoint.add($)),J)d.setLocationAtPoint(J,ve);else{const Ce=d.zoomScale(d.zoom-g),Be=k>g?Math.min(2,pe):Math.max(.5,pe),Te=Math.pow(Be,1-ke),et=d.unproject(se.add(he.mult(ke*Te)).mult(Ce));d.setLocationAtPoint(d.renderWorldCopies?et.wrap():et,K)}this._fireMoveEvents(l)},ke=>{this._afterEase(l,ke)},r),this}_prepareEase(r,l,d={}){this._moving=!0,this.fire(new c.Event("freezeElevation",{freeze:!0})),l||d.moving||this.fire(new c.Event("movestart",r)),this._zooming&&!d.zooming&&this.fire(new c.Event("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new c.Event("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new c.Event("pitchstart",r))}_fireMoveEvents(r){this.fire(new c.Event("move",r)),this._zooming&&this.fire(new c.Event("zoom",r)),this._rotating&&this.fire(new c.Event("rotate",r)),this._pitching&&this.fire(new c.Event("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId,this.fire(new c.Event("freezeElevation",{freeze:!1}));const d=this._zooming,g=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.Event("zoomend",r)),g&&this.fire(new c.Event("rotateend",r)),v&&this.fire(new c.Event("pitchend",r)),this.fire(new c.Event("moveend",r))}flyTo(r,l){if(!r.essential&&c.exported.prefersReducedMotion){const gt=c.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gt,l)}this.stop(),r=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},r);const d=this.transform,g=this.getZoom(),v=this.getBearing(),b=this.getPitch(),T=this.getPadding(),k="zoom"in r?c.clamp(+r.zoom,d.minZoom,d.maxZoom):g,I="bearing"in r?this._normalizeBearing(r.bearing,v):v,z="pitch"in r?+r.pitch:b,N="padding"in r?r.padding:d.padding,$=d.zoomScale(k-g),K=c.pointGeometry.convert(r.offset);let Z=d.centerPoint.add(K);const X=d.pointLocation(Z),se=c.LngLat.convert(r.center||X);this._normalizeCenter(se);const he=d.project(X),pe=d.project(se).sub(he);let J=r.curve;const ve=Math.max(d.width,d.height),me=ve/$,ke=pe.mag();if("minZoom"in r){const gt=c.clamp(Math.min(r.minZoom,g,k),d.minZoom,d.maxZoom),Qt=ve/d.zoomScale(gt-g);J=Math.sqrt(Qt/ke*2)}const Ce=J*J;function Be(gt){const Qt=(me*me-ve*ve+(gt?-1:1)*Ce*Ce*ke*ke)/(2*(gt?me:ve)*Ce*ke);return Math.log(Math.sqrt(Qt*Qt+1)-Qt)}function Te(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function et(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const We=Be(0);let tt=function(gt){return et(We)/et(We+J*gt)},At=function(gt){return ve*((et(We)*(Te(Qt=We+J*gt)/et(Qt))-Te(We))/Ce)/ke;var Qt},Rt=(Be(1)-We)/J;if(Math.abs(ke)<1e-6||!isFinite(Rt)){if(Math.abs(ve-me)<1e-6)return this.easeTo(r,l);const gt=me<ve?-1:1;Rt=Math.abs(Math.log(me/ve))/J,At=function(){return 0},tt=function(Qt){return Math.exp(gt*J*Qt)}}return r.duration="duration"in r?+r.duration:1e3*Rt/("screenSpeed"in r?+r.screenSpeed/J:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==I,this._pitching=z!==b,this._padding=!d.isPaddingEqual(N),this._prepareEase(l,!1),this._ease(gt=>{const Qt=gt*Rt,en=1/tt(Qt);d.zoom=gt===1?k:g+d.scaleZoom(en),this._rotating&&(d.bearing=c.number(v,I,gt)),this._pitching&&(d.pitch=c.number(b,z,gt)),this._padding&&(d.interpolatePadding(T,N,gt),Z=d.centerPoint.add(K));const $t=gt===1?se:d.unproject(he.add(pe.mult(At(Qt))).mult(en));d.setLocationAtPoint(d.renderWorldCopies?$t.wrap():$t,Z),this._fireMoveEvents(l)},()=>this._afterEase(l),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=c.exported.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,l){r=c.wrap(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}}class Ys{constructor(r={}){this.options=r,c.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=R.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=R.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=R.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){R.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(r){!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.sourceCaches;for(const g in l){const v=l[g];if(v.used||v.usedForTerrain){const b=v.getSource();b.attribution&&r.indexOf(b.attribution)<0&&r.push(b.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,v)=>g.length-v.length),r=r.filter((g,v)=>{for(let b=v+1;b<r.length;b++)if(r[b].indexOf(g)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ql{constructor(r={}){this.options=r,c.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=R.create("div","maplibregl-ctrl mapboxgl-ctrl");const l=R.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){R.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const r=this._container.children;if(r.length){const l=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&l.classList.add("maplibregl-compact","mapboxgl-compact"):l.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Xd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const g of d)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Yd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Kd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},dg={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ri{constructor(r,l,d=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new ea({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,d&&(this.mousePitch=new it({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),R.addEventListener(l,"mousedown",this.mousedown),R.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),R.addEventListener(l,"touchmove",this.touchmove),R.addEventListener(l,"touchend",this.touchend),R.addEventListener(l,"touchcancel",this.reset)}down(r,l){this.mouseRotate.mousedown(r,l),this.mousePitch&&this.mousePitch.mousedown(r,l),R.disableDrag()}move(r,l){const d=this.map,g=this.mouseRotate.mousemoveWindow(r,l);if(g&&g.bearingDelta&&d.setBearing(d.getBearing()+g.bearingDelta),this.mousePitch){const v=this.mousePitch.mousemoveWindow(r,l);v&&v.pitchDelta&&d.setPitch(d.getPitch()+v.pitchDelta)}}off(){const r=this.element;R.removeEventListener(r,"mousedown",this.mousedown),R.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),R.removeEventListener(r,"touchmove",this.touchmove),R.removeEventListener(r,"touchend",this.touchend),R.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){R.enableDrag(),R.removeEventListener(window,"mousemove",this.mousemove),R.removeEventListener(window,"mouseup",this.mouseup)}mousedown(r){this.down(c.extend({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),R.mousePos(this.element,r)),R.addEventListener(window,"mousemove",this.mousemove),R.addEventListener(window,"mouseup",this.mouseup)}mousemove(r){this.move(r,R.mousePos(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=R.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){r.targetTouches.length!==1?this.reset():(this._lastPos=R.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Ks(f,r,l){if(f=new c.LngLat(f.lng,f.lat),r){const d=new c.LngLat(f.lng-360,f.lat),g=new c.LngLat(f.lng+360,f.lat),v=l.locationPoint(f).distSqr(r);l.locationPoint(d).distSqr(r)<v?f=d:l.locationPoint(g).distSqr(r)<v&&(f=g)}for(;Math.abs(f.lng-l.center.lng)>180;){const d=l.locationPoint(f);if(d.x>=0&&d.y>=0&&d.x<=l.width&&d.y<=l.height)break;f.lng>l.center.lng?f.lng-=360:f.lng+=360}return f}const dt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wt(f,r,l){const d=f.classList;for(const g in dt)d.remove(`maplibregl-${l}-anchor-${g}`,`mapboxgl-${l}-anchor-${g}`);d.add(`maplibregl-${l}-anchor-${r}`,`mapboxgl-${l}-anchor-${r}`)}class $o extends c.Evented{constructor(r,l){if(super(),(r instanceof HTMLElement||l)&&(r=c.extend({element:r},l)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=c.pointGeometry.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=R.create("div"),this._element.setAttribute("aria-label","Map marker");const d=R.createNS("http://www.w3.org/2000/svg","svg"),g=41,v=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${g}px`),d.setAttributeNS(null,"width",`${v}px`),d.setAttributeNS(null,"viewBox",`0 0 ${v} ${g}`);const b=R.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const T=R.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const k=R.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of I){const J=R.createNS("http://www.w3.org/2000/svg","ellipse");J.setAttributeNS(null,"opacity","0.04"),J.setAttributeNS(null,"cx","10.5"),J.setAttributeNS(null,"cy","5.80029008"),J.setAttributeNS(null,"rx",pe.rx),J.setAttributeNS(null,"ry",pe.ry),k.appendChild(J)}const z=R.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const N=R.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(N);const $=R.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const K=R.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(K);const Z=R.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const X=R.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=R.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const he=R.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#FFFFFF"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962"),X.appendChild(se),X.appendChild(he),T.appendChild(k),T.appendChild(z),T.appendChild($),T.appendChild(Z),T.appendChild(X),d.appendChild(T),d.setAttributeNS(null,"height",g*this._scale+"px"),d.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(d),this._offset=c.pointGeometry.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),wt(this._element,this._anchor,"marker"),this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),R.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=c.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(r){const l=r.code,d=r.charCode||r.keyCode;l!=="Space"&&l!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(r){const l=r.originalEvent.target,d=this._element;this._popup&&(l===d||d.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_update(r){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ks(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(l=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),r&&r.type!=="moveend"||(this._pos=this._pos.round()),R.setTransform(this._element,`${dt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${l}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const g=this._map.unproject(this._pos),v=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=g.distanceTo(this._lngLat)>20*v?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(r){return this._offset=c.pointGeometry.convert(r),this._update(),this}_onMove(r){if(!this._isDragging){const l=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=l}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Eu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ca,ar=0,Pa=!1;const Oi={maxWidth:100,unit:"metric"};function Jd(f,r,l){const d=l&&l.maxWidth||100,g=f._container.clientHeight/2,v=f.unproject([0,g]),b=f.unproject([d,g]),T=v.distanceTo(b);if(l&&l.unit==="imperial"){const k=3.2808*T;k>5280?Ia(r,d,k/5280,f._getUIString("ScaleControl.Miles")):Ia(r,d,k,f._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Ia(r,d,T/1852,f._getUIString("ScaleControl.NauticalMiles")):T>=1e3?Ia(r,d,T/1e3,f._getUIString("ScaleControl.Kilometers")):Ia(r,d,T,f._getUIString("ScaleControl.Meters"))}function Ia(f,r,l,d){const g=function(v){const b=Math.pow(10,`${Math.floor(v)}`.length-1);let T=v/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(k){const I=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*I)/I}(T),b*T}(l);f.style.width=r*(g/l)+"px",f.innerHTML=`${g}&nbsp;${d}`}const Tn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Bn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Su(f){if(f){if(typeof f=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new c.pointGeometry(0,0),top:new c.pointGeometry(0,f),"top-left":new c.pointGeometry(r,r),"top-right":new c.pointGeometry(-r,r),bottom:new c.pointGeometry(0,-f),"bottom-left":new c.pointGeometry(r,-r),"bottom-right":new c.pointGeometry(-r,-r),left:new c.pointGeometry(f,0),right:new c.pointGeometry(-f,0)}}if(f instanceof c.pointGeometry||Array.isArray(f)){const r=c.pointGeometry.convert(f);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:c.pointGeometry.convert(f.center||[0,0]),top:c.pointGeometry.convert(f.top||[0,0]),"top-left":c.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":c.pointGeometry.convert(f["top-right"]||[0,0]),bottom:c.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":c.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":c.pointGeometry.convert(f["bottom-right"]||[0,0]),left:c.pointGeometry.convert(f.left||[0,0]),right:c.pointGeometry.convert(f.right||[0,0])}}return Su(new c.pointGeometry(0,0))}const Ya={supported:E,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends gn{constructor(f){var r;if(c.PerformanceUtils.mark(c.PerformanceMarkers.create),(f=c.extend({},Kd,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new js(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._cooperativeGestures=f.cooperativeGestures,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new Xd,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},Yd,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(r=f.pixelRatio)!==null&&r!==void 0?r:devicePixelRatio,this._requestManager=new Q(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Hd(this,f),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=f.hash&&new Bd(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,c.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Ys({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new ql,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new c.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new c.Event(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new c.Event("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(f,r){if(r===void 0&&(r=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=f.onAdd(this);this._controls.push(f);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(f);return r>-1&&this._controls.splice(r,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,r,l,d){return d==null&&this.style.terrain&&(d=this.transform.getElevation(l,this.style.terrain)),super.calculateCameraOptionsFromTo(f,r,l,d)}resize(f){const r=this._containerDimensions(),l=r[0],d=r[1];this._resizeCanvas(l,d,this.getPixelRatio()),this.transform.resize(l,d),this.painter.resize(l,d,this.getPixelRatio());const g=!this._moving;return g&&(this.stop(),this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f))),this.fire(new c.Event("resize",f)),g&&this.fire(new c.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[r,l]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(r,l,f),this.painter.resize(r,l,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(c.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(c.LngLat.convert(f),this.style&&this.style.terrain)}unproject(f){return this.transform.pointLocation(c.pointGeometry.convert(f),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,r,l){if(f==="mouseenter"||f==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:v=>{const b=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];b.length?d||(d=!0,l.call(this,new qr(f,this,v.originalEvent,{features:b}))):d=!1},mouseout:()=>{d=!1}}}}if(f==="mouseleave"||f==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:b=>{(this.getLayer(r)?this.queryRenderedFeatures(b.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new qr(f,this,b.originalEvent)))},mouseout:b=>{d&&(d=!1,l.call(this,new qr(f,this,b.originalEvent)))}}}}{const d=g=>{const v=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];v.length&&(g.features=v,l.call(this,g),delete g.features)};return{layer:r,listener:l,delegates:{[f]:d}}}}on(f,r,l){if(l===void 0)return super.on(f,r);const d=this._createDelegatedListener(f,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(f,r,l){if(l===void 0)return super.once(f,r);const d=this._createDelegatedListener(f,r,l);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(f,r,l){return l===void 0?super.off(f,r):(this._delegatedListeners&&this._delegatedListeners[f]&&(d=>{const g=this._delegatedListeners[f];for(let v=0;v<g.length;v++){const b=g[v];if(b.layer===r&&b.listener===l){for(const T in b.delegates)this.off(T,b.delegates[T]);return g.splice(v,1),this}}})(),this)}queryRenderedFeatures(f,r){if(!this.style)return[];let l;if(r!==void 0||f===void 0||f instanceof c.pointGeometry||Array.isArray(f)||(r=f,f=void 0),r=r||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof c.pointGeometry||typeof f[0]=="number")l=[c.pointGeometry.convert(f)];else{const d=c.pointGeometry.convert(f[0]),g=c.pointGeometry.convert(f[1]);l=[d,new c.pointGeometry(g.x,d.y),g,new c.pointGeometry(d.x,g.y),d]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(f,r){return this.style.querySourceFeatures(f,r)}setStyle(f,r){return(r=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(f,r))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const r=this._locale[f];if(r==null)throw new Error(`Missing UI string '${f}'`);return r}_updateStyle(f,r){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new dr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,r){if(typeof f=="string"){const l=this._requestManager.transformRequest(f,c.ResourceType.Style);c.getJSON(l,(d,g)=>{d?this.fire(new c.ErrorEvent(d)):g&&this._updateDiff(g,r)})}else typeof f=="object"&&this._updateDiff(f,r)}_updateDiff(f,r){try{this.style.setState(f)&&this._update(!0)}catch(l){c.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(f,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(f,r){return this._lazyInitEmptyStyle(),this.style.addSource(f,r),this._update(!0)}isSourceLoaded(f){const r=this.style&&this.style.sourceCaches[f];if(r!==void 0)return r.loaded();this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){return this.style.setTerrain(f),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const r in f){const l=f[r]._tiles;for(const d in l){const g=l[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(f,r,l){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,r,l)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,r,{pixelRatio:l=1,sdf:d=!1,stretchX:g,stretchY:v,content:b}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||c.isImageBitmap(r)){const{width:T,height:k,data:I}=c.exported.getImageData(r);this.style.addImage(f,{data:new c.RGBAImage({width:T,height:k},I),pixelRatio:l,stretchX:g,stretchY:v,content:b,sdf:d,version:0})}else{if(r.width===void 0||r.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:T,height:k,data:I}=r,z=r;this.style.addImage(f,{data:new c.RGBAImage({width:T,height:k},new Uint8Array(I)),pixelRatio:l,stretchX:g,stretchY:v,content:b,sdf:d,version:0,userImage:z}),z.onAdd&&z.onAdd(this,f)}}}updateImage(f,r){const l=this.style.getImage(f);if(!l)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||c.isImageBitmap(r)?c.exported.getImageData(r):r,{width:g,height:v,data:b}=d;if(g===void 0||v===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||v!==l.data.height)return this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(r instanceof HTMLImageElement||c.isImageBitmap(r));l.data.replace(b,T),this.style.updateImage(f,l)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,r){c.getImage(this._requestManager.transformRequest(f,c.ResourceType.Image),r)}listImages(){return this.style.listImages()}addLayer(f,r){return this._lazyInitEmptyStyle(),this.style.addLayer(f,r),this._update(!0)}moveLayer(f,r){return this.style.moveLayer(f,r),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,r,l){return this.style.setLayerZoomRange(f,r,l),this._update(!0)}setFilter(f,r,l={}){return this.style.setFilter(f,r,l),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,r,l,d={}){return this.style.setPaintProperty(f,r,l,d),this._update(!0)}getPaintProperty(f,r){return this.style.getPaintProperty(f,r)}setLayoutProperty(f,r,l,d={}){return this.style.setLayoutProperty(f,r,l,d),this._update(!0)}getLayoutProperty(f,r){return this.style.getLayoutProperty(f,r)}setLight(f,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,r){return this.style.setFeatureState(f,r),this._update()}removeFeatureState(f,r){return this.style.removeFeatureState(f,r),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,r=0;return this._container&&(f=this._container.clientWidth||400,r=this._container.clientHeight||300),[f,r]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const r=this._canvasContainer=R.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&r.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=R.create("canvas","maplibregl-canvas mapboxgl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions();this._resizeCanvas(l[0],l[1],this.getPixelRatio());const d=this._controlContainer=R.create("div","maplibregl-control-container mapboxgl-control-container",f),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{g[v]=R.create("div",`maplibregl-ctrl-${v} mapboxgl-ctrl-${v}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const f=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=R.create("div","maplibregl-cooperative-gesture-screen",f);let r="Control",l=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(l=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",r="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${l}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",d=>{d.key===r&&(this._metaPress=!0)}),document.addEventListener("keyup",d=>{d.key===r&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",d=>{this._onCooperativeGesture(d,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(f,r,l){this._canvas.width=l*f,this._canvas.height=l*r,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const f=c.extend({},E.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);r?(this.painter=new fu(r,this.transform),c.exported$1.testSupport(r)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(f,r,l){return!r&&l<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let r,l=0;const d=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(r=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,r),l=c.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,T=c.exported.now();this.style.zoomHistory.update(b,T);const k=new c.EvaluationParameters(b,{now:T,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=k.crossFadingFactor();I===1&&I===this._crossFadingFactor||(g=!0,this._crossFadingFactor=I),this.style.update(k)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.load),this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const b=c.exported.now()-l;d.endQueryEXT(d.TIME_ELAPSED_EXT,r),setTimeout(()=>{const T=d.getQueryObjectEXT(r,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(r),this.fire(new c.Event("gpu-timing-frame",{cpuTime:b,gpuTime:T}))},50)}if(this.listens("gpu-timing-layer")){const b=this.painter.collectGpuTimers();setTimeout(()=>{const T=this.painter.queryGpuTimers(b);this.fire(new c.Event("gpu-timing-layer",{layerTimes:T}))},50)}const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),R.remove(this._canvasContainer),R.remove(this._controlContainer),this._cooperativeGestures&&R.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),c.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.exported.frame(f=>{c.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,r){c.setCacheLimits(f,r)}get version(){return"2.4.0"}},NavigationControl:class{constructor(f){this.options=c.extend({},dg,f),this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),R.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),R.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=R.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),r=f===this._map.getMaxZoom(),l=f===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=l,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",l.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ri(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){R.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,r){const l=R.create("button",f,this._container);return l.type="button",l.addEventListener("click",r),l}_setButtonTitle(f,r){const l=this._map._getUIString(`NavigationControl.${r}`);f.title=l,f.setAttribute("aria-label",l)}},GeolocateControl:class extends c.Evented{constructor(f){super(),this.options=c.extend({},Eu,f),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var r;return this._map=f,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,Ca!==void 0?r(Ca):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(l=>{Ca=l.state!=="denied",r(Ca)}):(Ca=!!window.navigator.geolocation,r(Ca)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),R.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ar=0,Pa=!1}_isOutOfMapMaxBounds(f){const r=this._map.getMaxBounds(),l=f.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",f)),this._finish()}}_updateCamera(f){const r=new c.LngLat(f.coords.longitude,f.coords.latitude),l=f.coords.accuracy,d=this._map.getBearing(),g=c.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(l),g,{geolocateSource:!0})}_updateMarker(f){if(f){const r=new c.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,r=this._map.unproject([0,f]),l=this._map.unproject([1,f]),d=r.distanceTo(l),g=Math.ceil(2*this._accuracy/d);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&Pa)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=R.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),R.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=R.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new $o(this._dotElement),this._circleElement=R.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $o({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ar--,Pa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ar++,ar>1?(f={maximumAge:6e5,timeout:0},Pa=!0):(f=this.options.positionOptions,Pa=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ys,LogoControl:ql,ScaleControl:class{constructor(f){this.options=c.extend({},Oi,f),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Jd(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){R.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Jd(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=R.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){R.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=R.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);R.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(f){this.options=f,c.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(f){return this._map=f,this._container=R.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=R.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),R.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){R.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends c.Evented{constructor(f){super(),this.options=c.extend(Object.create(Tn),f),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&R.remove(this._content),this._container&&(R.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=c.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=f;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=R.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=R.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=R.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=R.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(v=>this._container.classList.add(v)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ks(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const r=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let l=this.options.anchor;const d=Su(this.options.offset);if(!l){const v=this._container.offsetWidth,b=this._container.offsetHeight;let T;T=r.y+d.bottom.y<b?["top"]:r.y>this._map.transform.height-b?["bottom"]:[],r.x<v/2?T.push("left"):r.x>this._map.transform.width-v/2&&T.push("right"),l=T.length===0?"bottom":T.join("-")}const g=r.add(d[l]).round();R.setTransform(this._container,`${dt[l]} translate(${g.x}px,${g.y}px)`),wt(this._container,l,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Bn);f&&f.focus()}_onClose(){this.remove()}},Marker:$o,Style:dr,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.pointGeometry,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,AJAXError:c.AJAXError,config:c.config,CanvasSource:Yt,GeoJSONSource:vt,ImageSource:at,RasterDEMTileSource:$e,RasterTileSource:Wt,VectorTileSource:Ct,VideoSource:ut,prewarm:function(){Eo().acquire(Hi)},clearPrewarmedResources:function(){const f=_a;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Hi),_a=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Ur.workerCount},set workerCount(f){Ur.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){c.clearTileCache(f)},workerUrl:"",addProtocol(f,r){c.config.REGISTERED_PROTOCOLS[f]=r},removeProtocol(f){delete c.config.REGISTERED_PROTOCOLS[f]}};return ai.extend(Ya,{isSafari:c.isSafari,getPerformanceMetrics:c.PerformanceUtils.getPerformanceMetrics}),Ya});var x=u;return x})})(_B);const pN=f_;var ei=(e,t,i)=>new Promise((s,u)=>{var p=E=>{try{c(i.next(E))}catch(C){u(C)}},x=E=>{try{c(i.throw(E))}catch(C){u(C)}},c=E=>E.done?s(E.value):Promise.resolve(E.value).then(p,x);c((i=i.apply(e,t)).next())}),Ti=Uint8Array,pl=Uint16Array,DT=Uint32Array,LT=new Ti([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),RT=new Ti([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xB=new Ti([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OT=function(e,t){for(var i=new pl(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];for(var u=new DT(i[30]),s=1;s<30;++s)for(var p=i[s];p<i[s+1];++p)u[p]=p-i[s]<<5|s;return[i,u]},BT=OT(LT,2),NT=BT[0],bB=BT[1];NT[28]=258,bB[258]=28;var wB=OT(RT,0),EB=wB[0],p_=new pl(32768);for(ln=0;ln<32768;++ln)oo=(ln&43690)>>>1|(ln&21845)<<1,oo=(oo&52428)>>>2|(oo&13107)<<2,oo=(oo&61680)>>>4|(oo&3855)<<4,p_[ln]=((oo&65280)>>>8|(oo&255)<<8)>>>1;var oo,ln,_h=function(e,t,i){for(var s=e.length,u=0,p=new pl(t);u<s;++u)e[u]&&++p[e[u]-1];var x=new pl(t);for(u=0;u<t;++u)x[u]=x[u-1]+p[u-1]<<1;var c;if(i){c=new pl(1<<t);var E=15-t;for(u=0;u<s;++u)if(e[u])for(var C=u<<4|e[u],L=t-e[u],O=x[e[u]-1]++<<L,R=O|(1<<L)-1;O<=R;++O)c[p_[O]>>>E]=C}else for(c=new pl(s),u=0;u<s;++u)e[u]&&(c[u]=p_[x[e[u]-1]++]>>>15-e[u]);return c},pd=new Ti(288);for(ln=0;ln<144;++ln)pd[ln]=8;var ln;for(ln=144;ln<256;++ln)pd[ln]=9;var ln;for(ln=256;ln<280;++ln)pd[ln]=7;var ln;for(ln=280;ln<288;++ln)pd[ln]=8;var ln,FT=new Ti(32);for(ln=0;ln<32;++ln)FT[ln]=5;var ln,SB=_h(pd,9,1),TB=_h(FT,5,1),Zy=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},sa=function(e,t,i){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(t&7)&i},Hy=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},kB=function(e){return(e+7)/8|0},CB=function(e,t,i){(t==null||t<0)&&(t=0),(i==null||i>e.length)&&(i=e.length);var s=new(e.BYTES_PER_ELEMENT==2?pl:e.BYTES_PER_ELEMENT==4?DT:Ti)(i-t);return s.set(e.subarray(t,i)),s},PB=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ha=function(e,t,i){var s=new Error(t||PB[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,ha),!i)throw s;return s},B0=function(e,t,i){var s=e.length;if(!s||i&&i.f&&!i.l)return t||new Ti(0);var u=!t||i,p=!i||i.i;i||(i={}),t||(t=new Ti(s*3));var x=function(Vn){var hr=t.length;if(Vn>hr){var gi=new Ti(Math.max(hr*2,Vn));gi.set(t),t=gi}},c=i.f||0,E=i.p||0,C=i.b||0,L=i.l,O=i.d,R=i.m,Q=i.n,ie=s*8;do{if(!L){c=sa(e,E,1);var ae=sa(e,E+1,3);if(E+=3,ae)if(ae==1)L=SB,O=TB,R=9,Q=5;else if(ae==2){var H=sa(e,E,31)+257,ce=sa(e,E+10,15)+4,xe=H+sa(e,E+5,31)+1;E+=14;for(var Ee=new Ti(xe),ze=new Ti(19),De=0;De<ce;++De)ze[xB[De]]=sa(e,E+De*3,7);E+=ce*3;for(var ot=Zy(ze),Fe=(1<<ot)-1,St=_h(ze,ot,1),De=0;De<xe;){var Mt=St[sa(e,E,Fe)];E+=Mt&15;var ye=Mt>>>4;if(ye<16)Ee[De++]=ye;else{var Ct=0,Wt=0;for(ye==16?(Wt=3+sa(e,E,3),E+=2,Ct=Ee[De-1]):ye==17?(Wt=3+sa(e,E,7),E+=3):ye==18&&(Wt=11+sa(e,E,127),E+=7);Wt--;)Ee[De++]=Ct}}var Tt=Ee.subarray(0,H),$e=Ee.subarray(H);R=Zy(Tt),Q=Zy($e),L=_h(Tt,R,1),O=_h($e,Q,1)}else ha(1);else{var ye=kB(E)+4,Y=e[ye-4]|e[ye-3]<<8,V=ye+Y;if(V>s){p&&ha(0);break}u&&x(C+Y),t.set(e.subarray(ye,V),C),i.b=C+=Y,i.p=E=V*8,i.f=c;continue}if(E>ie){p&&ha(0);break}}u&&x(C+131072);for(var vt=(1<<R)-1,Re=(1<<Q)-1,at=E;;at=E){var Ct=L[Hy(e,E)&vt],ut=Ct>>>4;if(E+=Ct&15,E>ie){p&&ha(0);break}if(Ct||ha(2),ut<256)t[C++]=ut;else if(ut==256){at=E,L=null;break}else{var Yt=ut-254;if(ut>264){var De=ut-257,Jt=LT[De];Yt=sa(e,E,(1<<Jt)-1)+NT[De],E+=Jt}var _r=O[Hy(e,E)&Re],Hn=_r>>>4;_r||ha(3),E+=_r&15;var $e=EB[Hn];if(Hn>3){var Jt=RT[Hn];$e+=Hy(e,E)&(1<<Jt)-1,E+=Jt}if(E>ie){p&&ha(0);break}u&&x(C+131072);for(var rr=C+Yt;C<rr;C+=4)t[C]=t[C-$e],t[C+1]=t[C+1-$e],t[C+2]=t[C+2-$e],t[C+3]=t[C+3-$e];C=rr}}i.l=L,i.p=at,i.b=C,i.f=c,L&&(c=1,i.m=R,i.d=O,i.n=Q)}while(!c);return C==t.length?t:CB(t,0,C)},IB=new Ti(0),AB=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&ha(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=e[10]|(e[11]<<8)+2);for(var s=(t>>3&1)+(t>>4&1);s>0;s-=!e[i++]);return i+(t&2)},MB=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},zB=function(e){((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&ha(6,"invalid zlib data"),e[1]&32&&ha(6,"invalid zlib data: preset dictionaries not supported")};function DB(e,t){return B0(e,t)}function LB(e,t){return B0(e.subarray(AB(e),-8),t||new Ti(MB(e)))}function RB(e,t){return B0((zB(e),e.subarray(2,-4)),t)}function m_(e,t){return e[0]==31&&e[1]==139&&e[2]==8?LB(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?DB(e,t):RB(e,t)}var OB=typeof TextDecoder<"u"&&new TextDecoder,BB=0;try{OB.decode(IB,{stream:!0}),BB=1}catch{}var $T=(e,t)=>e*Math.pow(2,t),th=(e,t)=>Math.floor(e/Math.pow(2,t)),cm=(e,t)=>$T(e.getUint16(t+1,!0),8)+e.getUint8(t),UT=(e,t)=>$T(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),NB=(e,t,i,s,u)=>{if(e!=s.getUint8(u))return e-s.getUint8(u);const p=cm(s,u+1);if(t!=p)return t-p;const x=cm(s,u+4);return i!=x?i-x:0},FB=(e,t,i,s)=>{const u=jT(e,t|128,i,s);return u?{z:t,x:i,y:s,offset:u[0],length:u[1],is_dir:!0}:null},Yw=(e,t,i,s)=>{const u=jT(e,t,i,s);return u?{z:t,x:i,y:s,offset:u[0],length:u[1],is_dir:!1}:null},jT=(e,t,i,s)=>{let u=0,p=e.byteLength/17-1;for(;u<=p;){const x=p+u>>1,c=NB(t,i,s,e,x*17);if(c>0)u=x+1;else if(c<0)p=x-1;else return[UT(e,x*17+7),e.getUint32(x*17+13,!0)]}return null},$B=(e,t)=>e.is_dir&&!t.is_dir?1:!e.is_dir&&t.is_dir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,VT=(e,t)=>{const i=e.getUint8(t*17);return{z:i&127,x:cm(e,t*17+1),y:cm(e,t*17+4),offset:UT(e,t*17+7),length:e.getUint32(t*17+13,!0),is_dir:i>>7===1}},Kw=e=>{const t=[],i=new DataView(e);for(let s=0;s<i.byteLength/17;s++)t.push(VT(i,s));return UB(t)},UB=e=>{e.sort($B);const t=new ArrayBuffer(17*e.length),i=new Uint8Array(t);for(let s=0;s<e.length;s++){const u=e[s];let p=u.z;u.is_dir&&(p=p|128),i[s*17]=p,i[s*17+1]=u.x&255,i[s*17+2]=u.x>>8&255,i[s*17+3]=u.x>>16&255,i[s*17+4]=u.y&255,i[s*17+5]=u.y>>8&255,i[s*17+6]=u.y>>16&255,i[s*17+7]=u.offset&255,i[s*17+8]=th(u.offset,8)&255,i[s*17+9]=th(u.offset,16)&255,i[s*17+10]=th(u.offset,24)&255,i[s*17+11]=th(u.offset,32)&255,i[s*17+12]=th(u.offset,48)&255,i[s*17+13]=u.length&255,i[s*17+14]=u.length>>8&255,i[s*17+15]=u.length>>16&255,i[s*17+16]=u.length>>24&255}return t},jB=(e,t)=>{if(e.byteLength<17)return null;const i=e.byteLength/17,s=VT(e,i-1);if(s.is_dir){const u=s.z,p=t.z-u,x=Math.trunc(t.x/(1<<p)),c=Math.trunc(t.y/(1<<p));return{z:u,x,y:c}}return null};function VB(e){return ei(this,null,function*(){const t=yield e.getBytes(0,512e3),i=new DataView(t.data),s=i.getUint32(4,!0),u=i.getUint16(8,!0),p=new TextDecoder("utf-8"),x=JSON.parse(p.decode(new DataView(t.data,10,s)));let c=0;x.compression==="gzip"&&(c=2);let E=0;"minzoom"in x&&(E=+x.minzoom);let C=0;"maxzoom"in x&&(C=+x.maxzoom);let L=0,O=0,R=0,Q=-180,ie=-85,ae=180,ye=85;if(x.bounds){const V=x.bounds.split(",");Q=+V[0],ie=+V[1],ae=+V[2],ye=+V[3]}if(x.center){const V=x.center.split(",");L=+V[0],O=+V[1],R=+V[2]}return{specVersion:i.getUint16(2,!0),rootDirectoryOffset:10+s,rootDirectoryLength:u*17,jsonMetadataOffset:10,jsonMetadataLength:s,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:E,maxZoom:C,minLon:Q,minLat:ie,maxLon:ae,maxLat:ye,centerZoom:R,centerLon:L,centerLat:O,etag:t.etag}})}function GB(e,t,i,s,u,p,x){return ei(this,null,function*(){let c=yield i.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=Kw(c));const E=Yw(new DataView(c),s,u,p);if(E){let O=(yield t.getBytes(E.offset,E.length,x)).data;const R=new DataView(O);return R.getUint8(0)==31&&R.getUint8(1)==139&&(O=m_(new Uint8Array(O))),{data:O}}const C=jB(new DataView(c),{z:s,x:u,y:p});if(C){const L=FB(new DataView(c),C.z,C.x,C.y);if(L){let O=yield i.getArrayBuffer(t,L.offset,L.length,e);e.specVersion===1&&(O=Kw(O));const R=Yw(new DataView(O),s,u,p);if(R){let ie=(yield t.getBytes(R.offset,R.length,x)).data;const ae=new DataView(ie);return ae.getUint8(0)==31&&ae.getUint8(1)==139&&(ie=m_(new Uint8Array(ie))),{data:ie}}}}})}var GT={getHeader:VB,getZxy:GB},mN=class{constructor(){this.tile=(e,t)=>{if(e.type=="json"){const i=e.url.substr(10);let s=this.tiles.get(i);return s||(s=new Jw(i),this.tiles.set(i,s)),s.getHeader().then(u=>{const p={tiles:[e.url+"/{z}/{x}/{y}"],minzoom:u.minZoom,maxzoom:u.maxZoom};t(null,p,null,null)}),{cancel:()=>{}}}else{const i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=e.url.match(i);if(!s)throw new Error("Invalid PMTiles protocol URL");const u=s[1];let p=this.tiles.get(u);p||(p=new Jw(u),this.tiles.set(u,p));const x=s[2],c=s[3],E=s[4],C=new AbortController,L=C.signal;let O=()=>{C.abort()};return p.getHeader().then(R=>{p.getZxy(+x,+c,+E,L).then(Q=>{Q?t(null,new Uint8Array(Q.data),Q.cacheControl,Q.expires):R.tileType==1?t(null,new Uint8Array,null,null):t(null,null,null,null)}).catch(Q=>{if(Q.name!=="AbortError")throw Q})}),{cancel:O}}},this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function oc(e,t){return(t>>>0)*4294967296+(e>>>0)}function qB(e,t){const i=t.buf;let s,u;if(u=i[t.pos++],s=(u&112)>>4,u<128||(u=i[t.pos++],s|=(u&127)<<3,u<128)||(u=i[t.pos++],s|=(u&127)<<10,u<128)||(u=i[t.pos++],s|=(u&127)<<17,u<128)||(u=i[t.pos++],s|=(u&127)<<24,u<128)||(u=i[t.pos++],s|=(u&1)<<31,u<128))return oc(e,s);throw new Error("Expected varint not more than 10 bytes")}function nh(e){const t=e.buf;let i,s;return s=t[e.pos++],i=s&127,s<128||(s=t[e.pos++],i|=(s&127)<<7,s<128)||(s=t[e.pos++],i|=(s&127)<<14,s<128)||(s=t[e.pos++],i|=(s&127)<<21,s<128)?i:(s=t[e.pos],i|=(s&15)<<28,qB(i,e))}function WB(e,t,i,s){if(s==0){i==1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const u=t[0];t[0]=t[1],t[1]=u}}var ZB=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function HB(e,t,i){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Math.pow(2,e)-1||i>Math.pow(2,e)-1)throw Error("tile x/y outside zoom level bounds");const s=ZB[e],u=Math.pow(2,e);let p=0,x=0,c=0;const E=[t,i];let C=u/2;for(;C>0;)p=(E[0]&C)>0?1:0,x=(E[1]&C)>0?1:0,c+=C*C*(3*p^x),WB(C,E,p,x),C=C/2;return s+c}function qT(e,t){return ei(this,null,function*(){if(t===1||t===0)return e;if(t===2)return m_(new Uint8Array(e));throw Error("Compression method not supported")})}var XB=127;function YB(e,t){let i=0,s=e.length-1;for(;i<=s;){const u=s+i>>1,p=t-e[u].tileId;if(p>0)i=u+1;else if(p<0)s=u-1;else return e[u]}return s>=0&&(e[s].runLength===0||t-e[s].tileId<e[s].runLength)?e[s]:null}var KB=class{constructor(e){this.url=e}getKey(){return this.url}getBytes(e,t,i){return ei(this,null,function*(){let s;i||(s=new AbortController,i=s.signal);let u=yield fetch(this.url,{signal:i,headers:{Range:"bytes="+e+"-"+(e+t-1)}});if(u.status===416&&e===0){const c=u.headers.get("Content-Range");if(!c||!c.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const E=+c.substr(8);u=yield fetch(this.url,{signal:i,headers:{Range:"bytes=0-"+(E-1)}})}if(u.status>=300)throw Error("Bad response code: "+u.status);const p=u.headers.get("Content-Length");if(u.status===200&&(!p||+p>t))throw s&&s.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield u.arrayBuffer(),etag:u.headers.get("ETag")||void 0,cacheControl:u.headers.get("Cache-Control")||void 0,expires:u.headers.get("Expires")||void 0}})}};function la(e,t){const i=e.getUint32(t+4,!0),s=e.getUint32(t+0,!0);return i*Math.pow(2,32)+s}function JB(e,t){const i=new DataView(e),s=i.getUint8(7);if(s>3)throw Error(`Archive is spec version ${s} but this library supports up to spec version 3`);return{specVersion:s,rootDirectoryOffset:la(i,8),rootDirectoryLength:la(i,16),jsonMetadataOffset:la(i,24),jsonMetadataLength:la(i,32),leafDirectoryOffset:la(i,40),leafDirectoryLength:la(i,48),tileDataOffset:la(i,56),tileDataLength:la(i,64),numAddressedTiles:la(i,72),numTileEntries:la(i,80),numTileContents:la(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:t}}function WT(e){const t={buf:new Uint8Array(e),pos:0},i=nh(t),s=[];let u=0;for(let p=0;p<i;p++){const x=nh(t);s.push({tileId:u+x,offset:0,length:0,runLength:1}),u+=x}for(let p=0;p<i;p++)s[p].runLength=nh(t);for(let p=0;p<i;p++)s[p].length=nh(t);for(let p=0;p<i;p++){const x=nh(t);x===0&&p>0?s[p].offset=s[p-1].offset+s[p-1].length:s[p].offset=x-1}return s}function QB(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var wc=class extends Error{};function eN(e,t,i,s){return ei(this,null,function*(){const u=yield e.getBytes(0,16384);if(new DataView(u.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(QB(u.data)<3)return[yield GT.getHeader(e)];const x=u.data.slice(0,XB);let c=u.etag;s&&u.etag!=s&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+e.getKey()),c=void 0);const E=JB(x,c);if(i){const C=u.data.slice(E.rootDirectoryOffset,E.rootDirectoryOffset+E.rootDirectoryLength),L=e.getKey()+"|"+(E.etag||"")+"|"+E.rootDirectoryOffset+"|"+E.rootDirectoryLength,O=WT(yield t(C,E.internalCompression));return[E,[L,O.length,O]]}return[E,void 0]})}function tN(e,t,i,s,u){return ei(this,null,function*(){const p=yield e.getBytes(i,s);if(u.etag&&u.etag!==p.etag)throw new wc(p.etag);const x=yield t(p.data,u.internalCompression),c=WT(x);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var nN=class{constructor(e=100,t=!0,i=qT){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.prefetch=t,this.decompress=i}getHeader(e,t){return ei(this,null,function*(){const i=e.getKey();if(this.cache.has(i))return this.cache.get(i).lastUsed=this.counter++,yield this.cache.get(i).data;const s=new Promise((u,p)=>{eN(e,this.decompress,this.prefetch,t).then(x=>{x[1]&&this.cache.set(x[1][0],{lastUsed:this.counter++,data:Promise.resolve(x[1][2])}),u(x[0]),this.prune()}).catch(x=>{p(x)})});return this.cache.set(i,{lastUsed:this.counter++,data:s}),s})}getDirectory(e,t,i,s){return ei(this,null,function*(){const u=e.getKey()+"|"+(s.etag||"")+"|"+t+"|"+i;if(this.cache.has(u))return this.cache.get(u).lastUsed=this.counter++,yield this.cache.get(u).data;const p=new Promise((x,c)=>{tN(e,this.decompress,t,i,s).then(E=>{x(E),this.prune()}).catch(E=>{c(E)})});return this.cache.set(u,{lastUsed:this.counter++,data:p}),p})}getArrayBuffer(e,t,i,s){return ei(this,null,function*(){const u=e.getKey()+"|"+(s.etag||"")+"|"+t+"|"+i;if(this.cache.has(u))return this.cache.get(u).lastUsed=this.counter++,yield this.cache.get(u).data;const p=new Promise((x,c)=>{e.getBytes(t,i).then(E=>{if(s.etag&&s.etag!==E.etag)throw new wc(E.etag);x(E.data),this.cache.has(u),this.prune()}).catch(E=>{c(E)})});return this.cache.set(u,{lastUsed:this.counter++,data:p}),p})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,s)=>{i.lastUsed<e&&(e=i.lastUsed,t=s)}),t&&this.cache.delete(t)}}invalidate(e,t){return ei(this,null,function*(){this.cache.delete(e.getKey()),yield this.getHeader(e,t)})}},Jw=class{constructor(e,t,i){typeof e=="string"?this.source=new KB(e):this.source=e,i?this.decompress=i:this.decompress=qT,t?this.cache=t:this.cache=new nN}getHeader(){return ei(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,s){return ei(this,null,function*(){const u=HB(e,t,i),p=yield this.cache.getHeader(this.source);if(p.specVersion<3)return GT.getZxy(p,this.source,this.cache,e,t,i,s);if(e<p.minZoom||e>p.maxZoom)return;let x=p.rootDirectoryOffset,c=p.rootDirectoryLength;for(let E=0;E<=3;E++){const C=yield this.cache.getDirectory(this.source,x,c,p),L=YB(C,u);if(L)if(L.runLength>0){const O=yield this.source.getBytes(p.tileDataOffset+L.offset,L.length,s);if(p.etag&&p.etag!==O.etag)throw new wc(O.etag);return{data:yield this.decompress(O.data,p.tileCompression),cacheControl:O.cacheControl,expires:O.expires}}else x=p.leafDirectoryOffset+L.offset,c=L.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,i,s){return ei(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,s)}catch(u){if(u instanceof wc)return this.cache.invalidate(this.source,u.message),yield this.getZxyAttempt(e,t,i,s);throw u}})}getMetadataAttempt(){return ei(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength);if(e.etag&&e.etag!==t.etag)throw new wc(t.etag);const i=yield this.decompress(t.data,e.internalCompression),s=new TextDecoder("utf-8");return JSON.parse(s.decode(i))})}getMetadata(){return ei(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof wc)return this.cache.invalidate(this.source,e.message),yield this.getMetadataAttempt();throw e}})}};export{aN as B,sN as C,bh as F,PR as L,oN as N,rN as O,mN as P,iN as R,CD as T,lN as a,Ci as b,Mm as c,hN as d,dN as e,fN as f,uN as g,cN as h,IR as i,Oe as j,rM as k,c1 as l,pN as m,we as n,Ie as r};
